From 2964797ff927c60639b69241b6da5c653a6fb96e Mon Sep 17 00:00:00 2001
From: Alexander01998 <contact.wurstimperium@gmail.com>
Date: Fri, 10 Mar 2017 21:22:09 +0100
Subject: [PATCH] mod

---
 Start.java                                         |    2 -
 net/minecraft/block/Block.java                     |   19 +-
 net/minecraft/block/BlockBed.java                  |   14 +-
 net/minecraft/block/BlockLiquid.java               |   16 +-
 net/minecraft/block/BlockSlab.java                 |    6 +-
 net/minecraft/block/BlockStairs.java               |   16 +-
 net/minecraft/block/BlockTripWireHook.java         |    2 +-
 net/minecraft/client/Minecraft.java                |   87 +-
 .../client/entity/EntityClientPlayerMP.java        |   43 +-
 net/minecraft/client/gui/FontRenderer.java         |   29 +-
 net/minecraft/client/gui/GuiButton.java            |   12 +-
 net/minecraft/client/gui/GuiChat.java              |   16 +-
 net/minecraft/client/gui/GuiCommandBlock.java      |   14 +-
 net/minecraft/client/gui/GuiFlatPresets.java       |    2 +-
 net/minecraft/client/gui/GuiGameOver.java          |   10 +
 net/minecraft/client/gui/GuiIngame.java            |  256 ++-
 net/minecraft/client/gui/GuiIngameMenu.java        |   40 +
 net/minecraft/client/gui/GuiMainMenu.java          |  129 +-
 net/minecraft/client/gui/GuiMultiplayer.java       |  298 +++-
 net/minecraft/client/gui/GuiNewChat.java           |   60 +-
 net/minecraft/client/gui/GuiRepair.java            |    2 +-
 net/minecraft/client/gui/GuiScreen.java            |    9 +-
 net/minecraft/client/gui/GuiScreenAddServer.java   |    2 +-
 .../client/gui/GuiScreenDisconnectedOnline.java    |   48 +
 .../client/gui/GuiScreenEditOnlineWorld.java       |    4 +-
 .../client/gui/GuiScreenSelectLocation.java        |   56 +-
 net/minecraft/client/gui/GuiScreenServerList.java  |   11 +-
 net/minecraft/client/gui/GuiSlot.java              |   16 +-
 net/minecraft/client/gui/GuiTextField.java         |   76 +-
 net/minecraft/client/gui/SelectionListBase.java    |   48 +-
 .../client/gui/ServerListEntryNormal.java          |    8 +-
 net/minecraft/client/gui/ServerSelectionList.java  |   10 +-
 .../client/gui/achievement/GuiAchievements.java    |   86 +-
 net/minecraft/client/gui/achievement/GuiStats.java |  498 +++---
 net/minecraft/client/gui/inventory/GuiBeacon.java  |   36 +-
 .../client/gui/inventory/GuiContainerCreative.java |  128 +-
 .../client/gui/inventory/GuiEditSign.java          |   16 +
 net/minecraft/client/gui/mco/GuiScreenBackup.java  |  126 +-
 .../client/gui/mco/GuiScreenCreateOnlineWorld.java |    5 +-
 .../client/gui/mco/GuiScreenResetWorld.java        |    2 +-
 net/minecraft/client/mco/Request.java              |   34 +-
 net/minecraft/client/model/ModelDragon.java        |   18 +-
 .../client/multiplayer/PlayerControllerMP.java     |   17 +-
 net/minecraft/client/multiplayer/ServerData.java   |    2 +-
 net/minecraft/client/multiplayer/ServerList.java   |   12 +-
 net/minecraft/client/network/OldServerPinger.java  |   16 +-
 net/minecraft/client/renderer/EntityRenderer.java  |   44 +-
 net/minecraft/client/renderer/ItemRenderer.java    |   56 +-
 net/minecraft/client/renderer/RenderBlocks.java    |  102 +-
 net/minecraft/client/renderer/RenderGlobal.java    |   64 +-
 net/minecraft/client/renderer/Tessellator.java     |   15 +-
 net/minecraft/client/renderer/WorldRenderer.java   |   10 +
 net/minecraft/client/renderer/entity/Render.java   |   27 +-
 .../client/renderer/entity/RenderBiped.java        |   18 +-
 .../client/renderer/entity/RenderItem.java         |   74 +-
 .../client/renderer/entity/RenderMinecart.java     |   12 +-
 .../client/renderer/entity/RenderPlayer.java       |   34 +-
 .../client/renderer/entity/RenderXPOrb.java        |   10 +-
 .../renderer/entity/RendererLivingEntity.java      |   12 +-
 .../client/renderer/texture/Stitcher.java          |   14 +-
 .../client/renderer/texture/TextureMap.java        |   28 +-
 net/minecraft/client/settings/GameSettings.java    |  298 ++--
 net/minecraft/client/settings/KeyBinding.java      |    3 +-
 net/minecraft/client/shader/ShaderGroup.java       |   18 +-
 net/minecraft/client/shader/ShaderManager.java     |   38 +-
 net/minecraft/command/CommandSetSpawnpoint.java    |   12 +-
 net/minecraft/command/CommandSpreadPlayers.java    |   22 +-
 .../server/CommandSetDefaultSpawnpoint.java        |   12 +-
 net/minecraft/enchantment/EnchantmentHelper.java   |   38 +-
 net/minecraft/entity/Entity.java                   |  250 +--
 net/minecraft/entity/EntityLiving.java             |   12 +-
 net/minecraft/entity/EntityLivingBase.java         |    9 +-
 net/minecraft/entity/EntityTrackerEntry.java       |   14 +-
 net/minecraft/entity/boss/EntityDragon.java        |   58 +-
 net/minecraft/entity/boss/EntityWither.java        |   10 +-
 net/minecraft/entity/passive/EntityTameable.java   |    1 -
 net/minecraft/entity/player/EntityPlayer.java      |   45 +-
 net/minecraft/entity/player/EntityPlayerMP.java    |   14 +-
 net/minecraft/entity/projectile/EntityArrow.java   |   42 +-
 .../entity/projectile/EntityFireball.java          |    6 +-
 .../entity/projectile/EntityFishHook.java          |   34 +-
 net/minecraft/inventory/Container.java             |   96 +-
 net/minecraft/inventory/ContainerBrewingStand.java |   40 +-
 net/minecraft/item/ItemFireworkCharge.java         |   16 +-
 net/minecraft/item/ItemMap.java                    |   18 +-
 net/minecraft/item/ItemPotion.java                 |   18 +-
 net/minecraft/item/ItemStack.java                  |   32 +-
 net/minecraft/item/crafting/CraftingManager.java   |   18 +-
 net/minecraft/item/crafting/RecipeFireworks.java   |   62 +-
 net/minecraft/item/crafting/RecipesArmorDyes.java  |   10 +-
 net/minecraft/nbt/JsonToNBT.java                   |  100 +-
 net/minecraft/network/NetHandlerPlayServer.java    |   32 +-
 net/minecraft/network/PacketBuffer.java            |    1 -
 net/minecraft/network/ServerStatusResponse.java    |  188 +--
 .../network/handshake/client/C00Handshake.java     |    5 +-
 .../network/play/client/C03PacketPlayer.java       |   64 +-
 .../network/play/server/S14PacketEntity.java       |   84 +-
 net/minecraft/profiler/Profiler.java               |   18 +-
 .../server/integrated/IntegratedPlayerList.java    |    1 -
 .../server/management/LowerStringMap.java          |    1 -
 net/minecraft/util/AxisAlignedBB.java              |    3 +-
 net/minecraft/util/HttpUtil.java                   |   10 +-
 net/minecraft/util/IChatComponent.java             |   24 +-
 net/minecraft/util/JsonSerializableSet.java        |    1 -
 net/minecraft/util/Timer.java                      |    6 +
 net/minecraft/world/Explosion.java                 |   14 +-
 net/minecraft/world/SpawnerAnimals.java            |   10 +-
 net/minecraft/world/Teleporter.java                |   26 +-
 net/minecraft/world/World.java                     |    2 +-
 net/minecraft/world/WorldServer.java               |   10 +-
 net/minecraft/world/chunk/Chunk.java               |    8 +-
 .../world/chunk/storage/AnvilChunkLoader.java      |   60 +-
 net/minecraft/world/chunk/storage/ChunkLoader.java |   16 +-
 net/minecraft/world/chunk/storage/RegionFile.java  |    1 +
 net/minecraft/world/gen/ChunkProviderFlat.java     |    2 +-
 net/minecraft/world/gen/ChunkProviderGenerate.java |   34 +-
 net/minecraft/world/gen/MapGenCaves.java           |   32 +-
 net/minecraft/world/gen/MapGenCavesHell.java       |   30 +-
 net/minecraft/world/gen/MapGenRavine.java          |   54 +-
 .../world/gen/NoiseGeneratorImproved.java          |   56 +-
 net/minecraft/world/gen/NoiseGeneratorSimplex.java |    2 +-
 .../world/gen/feature/WorldGenBigMushroom.java     |   32 +-
 .../world/gen/feature/WorldGenCanopyTree.java      |   14 +-
 .../world/gen/feature/WorldGenDungeons.java        |    4 +-
 .../world/gen/feature/WorldGenForest.java          |   18 +-
 net/minecraft/world/gen/feature/WorldGenLakes.java |   10 +-
 .../world/gen/feature/WorldGenSavannaTree.java     |    2 +-
 net/minecraft/world/gen/feature/WorldGenSwamp.java |   40 +-
 .../world/gen/feature/WorldGenTaiga1.java          |   30 +-
 .../world/gen/feature/WorldGenTaiga2.java          |   42 +-
 net/minecraft/world/gen/layer/GenLayer.java        |   26 +-
 net/minecraft/world/gen/layer/GenLayerEdge.java    |   24 +-
 .../structure/ComponentScatteredFeaturePieces.java |  352 ++--
 .../gen/structure/MapGenScatteredFeature.java      |    8 +-
 .../world/gen/structure/MapGenStructure.java       |    4 +-
 .../gen/structure/StructureMineshaftPieces.java    |  180 +--
 .../gen/structure/StructureNetherBridgePieces.java | 1234 +++++++-------
 .../gen/structure/StructureStrongholdPieces.java   | 1686 ++++++++++----------
 .../gen/structure/StructureVillagePieces.java      | 1536 +++++++++---------
 net/minecraft/world/storage/MapData.java           |   34 +-
 140 files changed, 5523 insertions(+), 4771 deletions(-)

diff --git a/Start.java b/Start.java
index bfd91e9..6df629a 100644
--- a/Start.java
+++ b/Start.java
@@ -1,5 +1,3 @@
-import java.io.File;
-import java.lang.reflect.Field;
 import java.util.Arrays;
 
 import net.minecraft.client.main.Main;
diff --git a/net/minecraft/block/Block.java b/net/minecraft/block/Block.java
index dc44e7a..e13b638 100644
--- a/net/minecraft/block/Block.java
+++ b/net/minecraft/block/Block.java
@@ -3,6 +3,7 @@ package net.minecraft.block;
 import java.util.Iterator;
 import java.util.List;
 import java.util.Random;
+
 import net.minecraft.block.material.MapColor;
 import net.minecraft.block.material.Material;
 import net.minecraft.client.renderer.texture.IIconRegister;
@@ -27,6 +28,10 @@ import net.minecraft.util.Vec3;
 import net.minecraft.world.Explosion;
 import net.minecraft.world.IBlockAccess;
 import net.minecraft.world.World;
+import tk.wurst_client.Client;
+import tk.wurst_client.module.modules.Freecam;
+import tk.wurst_client.module.modules.XRay;
+import tk.wurst_client.utils.XRayUtils;
 
 public class Block
 {
@@ -479,7 +484,8 @@ public class Block
 
     public boolean renderAsNormalBlock()
     {
-        return true;
+    	//TODO: Client
+        return !XRayUtils.isXRay && !Client.Wurst.moduleManager.getModuleFromClass(Freecam.class).getToggled();
     }
 
     public boolean getBlocksMovement(IBlockAccess p_149655_1_, int p_149655_2_, int p_149655_3_, int p_149655_4_)
@@ -556,6 +562,11 @@ public class Block
 
     public int getBlockBrightness(IBlockAccess p_149677_1_, int p_149677_2_, int p_149677_3_, int p_149677_4_)
     {
+    	//TODO: Client
+    	if(Client.Wurst.moduleManager.getModuleFromClass(XRay.class).getToggled())
+    	{
+    		return 1000000000;
+    	}
         Block var5 = p_149677_1_.getBlock(p_149677_2_, p_149677_3_, p_149677_4_);
         int var6 = p_149677_1_.getLightBrightnessForSkyBlocks(p_149677_2_, p_149677_3_, p_149677_4_, var5.getLightValue());
 
@@ -573,6 +584,9 @@ public class Block
 
     public boolean shouldSideBeRendered(IBlockAccess p_149646_1_, int p_149646_2_, int p_149646_3_, int p_149646_4_, int p_149646_5_)
     {
+    	//TODO: Client
+    	if(XRayUtils.isXRayBlock(this) && Client.Wurst.moduleManager.getModuleFromClass(XRay.class).getToggled())
+    		return true;
         return p_149646_5_ == 0 && this.field_149760_C > 0.0D ? true : (p_149646_5_ == 1 && this.field_149756_F < 1.0D ? true : (p_149646_5_ == 2 && this.field_149754_D > 0.0D ? true : (p_149646_5_ == 3 && this.field_149757_G < 1.0D ? true : (p_149646_5_ == 4 && this.field_149759_B > 0.0D ? true : (p_149646_5_ == 5 && this.field_149755_E < 1.0D ? true : !p_149646_1_.getBlock(p_149646_2_, p_149646_3_, p_149646_4_).isOpaqueCube())))));
     }
 
@@ -918,7 +932,8 @@ public class Block
      */
     public int getRenderBlockPass()
     {
-        return 0;
+    	//TODO: Client
+        return XRayUtils.isXRay ? 1 : 0;
     }
 
     public boolean canReplace(World p_149705_1_, int p_149705_2_, int p_149705_3_, int p_149705_4_, int p_149705_5_, ItemStack p_149705_6_)
diff --git a/net/minecraft/block/BlockBed.java b/net/minecraft/block/BlockBed.java
index 1cfa365..5936483 100644
--- a/net/minecraft/block/BlockBed.java
+++ b/net/minecraft/block/BlockBed.java
@@ -62,7 +62,7 @@ public class BlockBed extends BlockDirectional
             {
                 if (func_149976_c(var10))
                 {
-                    EntityPlayer var19 = null;
+                    EntityPlayer var20 = null;
                     Iterator var12 = p_149727_1_.playerEntities.iterator();
 
                     while (var12.hasNext())
@@ -75,12 +75,12 @@ public class BlockBed extends BlockDirectional
 
                             if (var14.posX == p_149727_2_ && var14.posY == p_149727_3_ && var14.posZ == p_149727_4_)
                             {
-                                var19 = var21;
+                                var20 = var21;
                             }
                         }
                     }
 
-                    if (var19 != null)
+                    if (var20 != null)
                     {
                         p_149727_5_.addChatComponentMessage(new ChatComponentTranslation("tile.bed.occupied", new Object[0]));
                         return true;
@@ -89,20 +89,20 @@ public class BlockBed extends BlockDirectional
                     func_149979_a(p_149727_1_, p_149727_2_, p_149727_3_, p_149727_4_, false);
                 }
 
-                EntityPlayer.EnumStatus var20 = p_149727_5_.sleepInBedAt(p_149727_2_, p_149727_3_, p_149727_4_);
+                EntityPlayer.EnumStatus var19 = p_149727_5_.sleepInBedAt(p_149727_2_, p_149727_3_, p_149727_4_);
 
-                if (var20 == EntityPlayer.EnumStatus.OK)
+                if (var19 == EntityPlayer.EnumStatus.OK)
                 {
                     func_149979_a(p_149727_1_, p_149727_2_, p_149727_3_, p_149727_4_, true);
                     return true;
                 }
                 else
                 {
-                    if (var20 == EntityPlayer.EnumStatus.NOT_POSSIBLE_NOW)
+                    if (var19 == EntityPlayer.EnumStatus.NOT_POSSIBLE_NOW)
                     {
                         p_149727_5_.addChatComponentMessage(new ChatComponentTranslation("tile.bed.noSleep", new Object[0]));
                     }
-                    else if (var20 == EntityPlayer.EnumStatus.NOT_SAFE)
+                    else if (var19 == EntityPlayer.EnumStatus.NOT_SAFE)
                     {
                         p_149727_5_.addChatComponentMessage(new ChatComponentTranslation("tile.bed.notSafe", new Object[0]));
                     }
diff --git a/net/minecraft/block/BlockLiquid.java b/net/minecraft/block/BlockLiquid.java
index 12fcfb3..491faaf 100644
--- a/net/minecraft/block/BlockLiquid.java
+++ b/net/minecraft/block/BlockLiquid.java
@@ -1,6 +1,7 @@
 package net.minecraft.block;
 
 import java.util.Random;
+
 import net.minecraft.block.material.Material;
 import net.minecraft.client.renderer.texture.IIconRegister;
 import net.minecraft.entity.Entity;
@@ -11,6 +12,10 @@ import net.minecraft.util.IIcon;
 import net.minecraft.util.Vec3;
 import net.minecraft.world.IBlockAccess;
 import net.minecraft.world.World;
+import tk.wurst_client.Client;
+import tk.wurst_client.module.modules.Jesus;
+import tk.wurst_client.module.modules.Liquids;
+import tk.wurst_client.utils.XRayUtils;
 
 public abstract class BlockLiquid extends Block
 {
@@ -125,7 +130,8 @@ public abstract class BlockLiquid extends Block
      */
     public boolean canCollideCheck(int p_149678_1_, boolean p_149678_2_)
     {
-        return p_149678_2_ && p_149678_1_ == 0;
+    	//TODO: Client
+        return p_149678_2_ && p_149678_1_ == 0 || Client.Wurst.moduleManager.getModuleFromClass(Liquids.class).getToggled();
     }
 
     public boolean isBlockSolid(IBlockAccess p_149747_1_, int p_149747_2_, int p_149747_3_, int p_149747_4_, int p_149747_5_)
@@ -146,7 +152,8 @@ public abstract class BlockLiquid extends Block
      */
     public AxisAlignedBB getCollisionBoundingBoxFromPool(World p_149668_1_, int p_149668_2_, int p_149668_3_, int p_149668_4_)
     {
-        return null;
+    	//TODO: Client
+    	return Client.Wurst.moduleManager.getModuleFromClass(Jesus.class).getToggled() ? AxisAlignedBB.getAABBPool().getAABB(p_149668_2_ + this.field_149759_B, p_149668_3_ + this.field_149760_C, p_149668_4_ + this.field_149754_D, p_149668_2_ + this.field_149755_E, p_149668_3_ + this.field_149756_F, p_149668_4_ + this.field_149757_G) : null;
     }
 
     /**
@@ -306,7 +313,8 @@ public abstract class BlockLiquid extends Block
      */
     public int getRenderBlockPass()
     {
-        return this.blockMaterial == Material.water ? 1 : 0;
+    	//TODO: Client
+        return XRayUtils.isXRay ? 1 : this.blockMaterial == Material.water ? 1 : 0;
     }
 
     /**
@@ -420,8 +428,8 @@ public abstract class BlockLiquid extends Block
         }
 
         double var21;
-        double var22;
         double var23;
+        double var22;
 
         if (this.blockMaterial == Material.lava && p_149734_1_.getBlock(p_149734_2_, p_149734_3_ + 1, p_149734_4_).getMaterial() == Material.air && !p_149734_1_.getBlock(p_149734_2_, p_149734_3_ + 1, p_149734_4_).isOpaqueCube())
         {
diff --git a/net/minecraft/block/BlockSlab.java b/net/minecraft/block/BlockSlab.java
index 97261b9..a0cc896 100644
--- a/net/minecraft/block/BlockSlab.java
+++ b/net/minecraft/block/BlockSlab.java
@@ -2,6 +2,7 @@ package net.minecraft.block;
 
 import java.util.List;
 import java.util.Random;
+
 import net.minecraft.block.material.Material;
 import net.minecraft.entity.Entity;
 import net.minecraft.init.Blocks;
@@ -10,6 +11,8 @@ import net.minecraft.util.AxisAlignedBB;
 import net.minecraft.util.Facing;
 import net.minecraft.world.IBlockAccess;
 import net.minecraft.world.World;
+import tk.wurst_client.Client;
+import tk.wurst_client.module.modules.Freecam;
 
 public abstract class BlockSlab extends Block
 {
@@ -103,7 +106,8 @@ public abstract class BlockSlab extends Block
 
     public boolean renderAsNormalBlock()
     {
-        return this.field_150004_a;
+    	//TODO: Client
+        return Client.Wurst.moduleManager.getModuleFromClass(Freecam.class).getToggled() ? false : this.field_150004_a;
     }
 
     public boolean shouldSideBeRendered(IBlockAccess p_149646_1_, int p_149646_2_, int p_149646_3_, int p_149646_4_, int p_149646_5_)
diff --git a/net/minecraft/block/BlockStairs.java b/net/minecraft/block/BlockStairs.java
index 54c57f6..4ef24c0 100644
--- a/net/minecraft/block/BlockStairs.java
+++ b/net/minecraft/block/BlockStairs.java
@@ -548,16 +548,16 @@ public class BlockStairs extends Block
         }
 
         int[] var21 = var11;
-        int var23 = var11.length;
+        int var24 = var11.length;
 
-        for (var14 = 0; var14 < var23; ++var14)
+        for (var14 = 0; var14 < var24; ++var14)
         {
             var15 = var21[var14];
             var7[var15] = null;
         }
 
-        MovingObjectPosition var22 = null;
-        double var24 = 0.0D;
+        MovingObjectPosition var23 = null;
+        double var22 = 0.0D;
         MovingObjectPosition[] var25 = var7;
         var16 = var7.length;
 
@@ -569,15 +569,15 @@ public class BlockStairs extends Block
             {
                 double var19 = var18.hitVec.squareDistanceTo(p_149731_6_);
 
-                if (var19 > var24)
+                if (var19 > var22)
                 {
-                    var22 = var18;
-                    var24 = var19;
+                    var23 = var18;
+                    var22 = var19;
                 }
             }
         }
 
-        return var22;
+        return var23;
     }
 
     public void registerBlockIcons(IIconRegister p_149651_1_) {}
diff --git a/net/minecraft/block/BlockTripWireHook.java b/net/minecraft/block/BlockTripWireHook.java
index c359343..abec9ee 100644
--- a/net/minecraft/block/BlockTripWireHook.java
+++ b/net/minecraft/block/BlockTripWireHook.java
@@ -151,8 +151,8 @@ public class BlockTripWireHook extends Block
         int var17 = Direction.offsetZ[var10];
         int var18 = 0;
         int[] var19 = new int[42];
-        int var20;
         int var21;
+        int var20;
         int var22;
         int var24;
 
diff --git a/net/minecraft/client/Minecraft.java b/net/minecraft/client/Minecraft.java
index f88fe54..b018854 100644
--- a/net/minecraft/client/Minecraft.java
+++ b/net/minecraft/client/Minecraft.java
@@ -1,7 +1,7 @@
 package net.minecraft.client;
 
-import com.google.common.collect.Lists;
 import io.netty.util.concurrent.GenericFutureListener;
+
 import java.awt.Toolkit;
 import java.awt.image.BufferedImage;
 import java.io.File;
@@ -19,7 +19,9 @@ import java.util.HashSet;
 import java.util.Iterator;
 import java.util.List;
 import java.util.concurrent.Callable;
+
 import javax.imageio.ImageIO;
+
 import net.minecraft.block.Block;
 import net.minecraft.block.material.Material;
 import net.minecraft.client.audio.MusicTicker;
@@ -129,6 +131,7 @@ import net.minecraft.world.chunk.storage.AnvilSaveConverter;
 import net.minecraft.world.storage.ISaveFormat;
 import net.minecraft.world.storage.ISaveHandler;
 import net.minecraft.world.storage.WorldInfo;
+
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 import org.lwjgl.LWJGLException;
@@ -144,10 +147,17 @@ import org.lwjgl.opengl.GLContext;
 import org.lwjgl.opengl.PixelFormat;
 import org.lwjgl.util.glu.GLU;
 
+import tk.wurst_client.Client;
+import tk.wurst_client.font.Fonts;
+import tk.wurst_client.module.Module;
+
+import com.google.common.collect.Lists;
+
 public class Minecraft implements IPlayerUsage
 {
     private static final Logger logger = LogManager.getLogger();
-    private static final ResourceLocation locationMojangPng = new ResourceLocation("textures/gui/title/mojang.png");
+    //TODO: Client
+    private static final ResourceLocation locationMojangPng = new ResourceLocation("textures/gui/wurst/wurst_loading.png");
     public static final boolean isRunningOnMac = Util.getOSType() == Util.EnumOS.MACOS;
 
     /** A 10MiB preallocation to ensure the heap is reasonably sized. */
@@ -157,7 +167,7 @@ public class Minecraft implements IPlayerUsage
     private ServerData currentServerData;
 
     /** The RenderEngine instance used by Minecraft */
-    private TextureManager renderEngine;
+    public TextureManager renderEngine;
 
     /**
      * Set to 'this' in Minecraft constructor; used by some settings get methods
@@ -188,7 +198,7 @@ public class Minecraft implements IPlayerUsage
     public EntityLivingBase renderViewEntity;
     public Entity pointedEntity;
     public EffectRenderer effectRenderer;
-    private final Session session;
+    public Session session;
     private boolean isGamePaused;
 
     /** The font renderer used for displaying and measuring text. */
@@ -242,7 +252,7 @@ public class Minecraft implements IPlayerUsage
     /**
      * When you place a block, it's set to 6, decremented once per tick, when it's 0, you can place another block.
      */
-    private int rightClickDelayTimer;
+    public int rightClickDelayTimer;
 
     /**
      * Checked in Minecraft's while(running) loop, if true it's set to false and the textures refreshed.
@@ -538,6 +548,9 @@ public class Minecraft implements IPlayerUsage
         this.loadScreen();
         this.fontRenderer = new FontRenderer(this.gameSettings, new ResourceLocation("textures/font/ascii.png"), this.renderEngine, false);
         
+        //TODO: Client
+        Fonts.loadFonts();
+        
         if (this.gameSettings.language != null)
         {
             this.fontRenderer.setUnicodeFlag(this.mcLanguageManager.isCurrentLocaleUnicode() || this.gameSettings.forceUnicodeFont);
@@ -608,6 +621,9 @@ public class Minecraft implements IPlayerUsage
             this.toggleFullscreen();
         }
         
+        //TODO: Client
+        Client.Wurst.startClient();
+
         Display.setVSyncEnabled(this.gameSettings.enableVsync);
     }
 
@@ -1258,8 +1274,8 @@ public class Minecraft implements IPlayerUsage
                 var5.addVertex((double)var7, (double)var8, 0.0D);
                 int var14;
                 float var15;
-                float var16;
                 float var17;
+                float var16;
 
                 for (var14 = var13; var14 >= 0; --var14)
                 {
@@ -1286,27 +1302,27 @@ public class Minecraft implements IPlayerUsage
                 var9 += var12.field_76332_a;
             }
 
-            DecimalFormat var18 = new DecimalFormat("##0.00");
+            DecimalFormat var19 = new DecimalFormat("##0.00");
             GL11.glEnable(GL11.GL_TEXTURE_2D);
-            String var19 = "";
+            String var18 = "";
 
             if (!var4.field_76331_c.equals("unspecified"))
             {
-                var19 = var19 + "[0] ";
+                var18 = var18 + "[0] ";
             }
 
             if (var4.field_76331_c.length() == 0)
             {
-                var19 = var19 + "ROOT ";
+                var18 = var18 + "ROOT ";
             }
             else
             {
-                var19 = var19 + var4.field_76331_c + " ";
+                var18 = var18 + var4.field_76331_c + " ";
             }
 
             var13 = 16777215;
-            this.fontRenderer.drawStringWithShadow(var19, var7 - var6, var8 - var6 / 2 - 16, var13);
-            this.fontRenderer.drawStringWithShadow(var19 = var18.format(var4.field_76330_b) + "%", var7 + var6 - this.fontRenderer.getStringWidth(var19), var8 - var6 / 2 - 16, var13);
+            this.fontRenderer.drawStringWithShadow(var18, var7 - var6, var8 - var6 / 2 - 16, var13);
+            this.fontRenderer.drawStringWithShadow(var18 = var19.format(var4.field_76330_b) + "%", var7 + var6 - this.fontRenderer.getStringWidth(var18), var8 - var6 / 2 - 16, var13);
 
             for (int var21 = 0; var21 < var3.size(); ++var21)
             {
@@ -1324,8 +1340,8 @@ public class Minecraft implements IPlayerUsage
 
                 var22 = var22 + var20.field_76331_c;
                 this.fontRenderer.drawStringWithShadow(var22, var7 - var6, var8 + var6 / 2 + var21 * 8 + 20, var20.func_76329_a());
-                this.fontRenderer.drawStringWithShadow(var22 = var18.format(var20.field_76332_a) + "%", var7 + var6 - 50 - this.fontRenderer.getStringWidth(var22), var8 + var6 / 2 + var21 * 8 + 20, var20.func_76329_a());
-                this.fontRenderer.drawStringWithShadow(var22 = var18.format(var20.field_76330_b) + "%", var7 + var6 - this.fontRenderer.getStringWidth(var22), var8 + var6 / 2 + var21 * 8 + 20, var20.func_76329_a());
+                this.fontRenderer.drawStringWithShadow(var22 = var19.format(var20.field_76332_a) + "%", var7 + var6 - 50 - this.fontRenderer.getStringWidth(var22), var8 + var6 / 2 + var21 * 8 + 20, var20.func_76329_a());
+                this.fontRenderer.drawStringWithShadow(var22 = var19.format(var20.field_76330_b) + "%", var7 + var6 - this.fontRenderer.getStringWidth(var22), var8 + var6 / 2 + var21 * 8 + 20, var20.func_76329_a());
             }
         }
     }
@@ -1422,6 +1438,11 @@ public class Minecraft implements IPlayerUsage
     {
         if (this.leftClickCounter <= 0)
         {
+            //TODO: Client
+            for(Module eventModule : Client.Wurst.moduleManager.activeModules)
+            {
+            	eventModule.onLeftClick();
+            }
             this.thePlayer.swingItem();
 
             if (this.objectMouseOver == null)
@@ -1462,7 +1483,7 @@ public class Minecraft implements IPlayerUsage
         }
     }
 
-    private void func_147121_ag()
+    public void func_147121_ag()
     {
         this.rightClickDelayTimer = 4;
         boolean var1 = true;
@@ -1833,6 +1854,15 @@ public class Minecraft implements IPlayerUsage
                         }
                         else
                         {
+                        	//TODO: Client
+                        	for(Module eventModule : Client.Wurst.moduleManager.activeModules)
+                        	{
+                        		if(Keyboard.getEventKey() == eventModule.getBind() && Keyboard.getEventKey() != 0)
+                        		{
+                        			eventModule.toggleModule();
+                        		}
+                        	}
+                        	
                             if (Keyboard.getEventKey() == 1)
                             {
                                 this.displayInGameMenu();
@@ -2404,6 +2434,31 @@ public class Minecraft implements IPlayerUsage
             }
             else
             {
+                //TODO: Client
+                if (this.objectMouseOver.entityHit != null && this.objectMouseOver.entityHit instanceof EntityPlayer)
+                {
+                    if(Client.Wurst.options.middleClickFriends)
+                    {
+                    	if(Client.Wurst.options.friends.contains(this.objectMouseOver.entityHit.getCommandSenderName()))
+                    	{
+                    		for(int i = 0; i < Client.Wurst.options.friends.size(); i++)
+                    		{
+                    			if(Client.Wurst.options.friends.get(i).equals(this.objectMouseOver.entityHit.getCommandSenderName()))
+                    			{
+                    				Client.Wurst.options.friends.remove(i);
+                    				Client.Wurst.fileManager.saveFriends();
+                    				break;
+                    			}
+                    		}
+                    	}
+                    	else
+                    	{
+                    		Client.Wurst.options.friends.add(this.objectMouseOver.entityHit.getCommandSenderName());
+            				Client.Wurst.fileManager.saveFriends();
+                    	}
+                    }
+                }
+                
                 if (this.objectMouseOver.typeOfHit != MovingObjectPosition.MovingObjectType.ENTITY || this.objectMouseOver.entityHit == null || !var1)
                 {
                     return;
diff --git a/net/minecraft/client/entity/EntityClientPlayerMP.java b/net/minecraft/client/entity/EntityClientPlayerMP.java
index afd6caa..6e6cfe3 100644
--- a/net/minecraft/client/entity/EntityClientPlayerMP.java
+++ b/net/minecraft/client/entity/EntityClientPlayerMP.java
@@ -22,6 +22,12 @@ import net.minecraft.util.DamageSource;
 import net.minecraft.util.MathHelper;
 import net.minecraft.util.Session;
 import net.minecraft.world.World;
+import tk.wurst_client.Client;
+import tk.wurst_client.command.Command;
+import tk.wurst_client.module.Module;
+import tk.wurst_client.module.modules.Blink;
+import tk.wurst_client.module.modules.Freecam;
+import tk.wurst_client.module.modules.RemoteView;
 
 public class EntityClientPlayerMP extends EntityPlayerSP
 {
@@ -94,6 +100,11 @@ public class EntityClientPlayerMP extends EntityPlayerSP
     {
         if (this.worldObj.blockExists(MathHelper.floor_double(this.posX), 0, MathHelper.floor_double(this.posZ)))
         {
+        	//TODO: Client
+        	for(Module eventModule : Client.Wurst.moduleManager.activeModules)
+        	{
+        		eventModule.onUpdate();
+        	}
             super.onUpdate();
 
             if (this.isRiding())
@@ -153,7 +164,13 @@ public class EntityClientPlayerMP extends EntityPlayerSP
         boolean var13 = var3 * var3 + var5 * var5 + var7 * var7 > 9.0E-4D || this.ticksSinceMovePacket >= 20;
         boolean var14 = var9 != 0.0D || var11 != 0.0D;
 
-        if (this.ridingEntity != null)
+        //TODO: Client
+        if(
+        	this.ridingEntity != null
+        	|| Client.Wurst.moduleManager.getModuleFromClass(RemoteView.class).getToggled()
+        	|| Client.Wurst.moduleManager.getModuleFromClass(Freecam.class).getToggled()
+        	|| Client.Wurst.moduleManager.getModuleFromClass(Blink.class).getToggled()
+        )
         {
             this.sendQueue.addToSendQueue(new C03PacketPlayer.C06PacketPlayerPosLook(this.motionX, -999.0D, -999.0D, this.motionZ, this.rotationYaw, this.rotationPitch, this.onGround));
             var13 = false;
@@ -214,6 +231,30 @@ public class EntityClientPlayerMP extends EntityPlayerSP
      */
     public void sendChatMessage(String par1Str)
     {
+      //TODO: Client
+    	if(par1Str.startsWith("."))
+    	{
+    		String command = "";
+    	    for(Command eventCommand : Client.Wurst.commandManager.activeCommands)
+    	    {
+    			String commandAndArgs = par1Str.substring(1);
+    	        command = commandAndArgs.contains(" ") ? commandAndArgs.split(" ")[0] : commandAndArgs;
+    	        if(eventCommand.getName().equals(command))
+    	        {
+    	        	try
+    	        	{
+    	        		String[] args = commandAndArgs.contains(" ") ? commandAndArgs.substring(commandAndArgs.indexOf(" ") + 1).split(" ") : null;
+    	        		eventCommand.onEnable(commandAndArgs, args);
+    	        	} catch (Exception e)
+    	        	{
+    	        		eventCommand.commandError();
+    	        	}
+    	        	return;
+    	        }
+    	    }
+	        Client.Wurst.chat.message("\"." + command + "\" is not a valid command.");
+	        Client.Wurst.chat.message("Type \".help\" to see the command list.");
+    	}else
     		this.sendQueue.addToSendQueue(new C01PacketChatMessage(par1Str));
     }
 
diff --git a/net/minecraft/client/gui/FontRenderer.java b/net/minecraft/client/gui/FontRenderer.java
index 21c87c4..5146477 100644
--- a/net/minecraft/client/gui/FontRenderer.java
+++ b/net/minecraft/client/gui/FontRenderer.java
@@ -1,8 +1,5 @@
 package net.minecraft.client.gui;
 
-import com.ibm.icu.text.ArabicShaping;
-import com.ibm.icu.text.ArabicShapingException;
-import com.ibm.icu.text.Bidi;
 import java.awt.image.BufferedImage;
 import java.io.IOException;
 import java.io.InputStream;
@@ -10,7 +7,9 @@ import java.util.Arrays;
 import java.util.Iterator;
 import java.util.List;
 import java.util.Random;
+
 import javax.imageio.ImageIO;
+
 import net.minecraft.client.Minecraft;
 import net.minecraft.client.renderer.Tessellator;
 import net.minecraft.client.renderer.texture.TextureManager;
@@ -18,8 +17,17 @@ import net.minecraft.client.resources.IResourceManager;
 import net.minecraft.client.resources.IResourceManagerReloadListener;
 import net.minecraft.client.settings.GameSettings;
 import net.minecraft.util.ResourceLocation;
+import net.minecraft.util.StringUtils;
+
 import org.lwjgl.opengl.GL11;
 
+import tk.wurst_client.Client;
+import tk.wurst_client.module.modules.NameProtect;
+
+import com.ibm.icu.text.ArabicShaping;
+import com.ibm.icu.text.ArabicShapingException;
+import com.ibm.icu.text.Bidi;
+
 public class FontRenderer implements IResourceManagerReloadListener
 {
     private static final ResourceLocation[] unicodePageLocations = new ResourceLocation[256];
@@ -329,6 +337,21 @@ public class FontRenderer implements IResourceManagerReloadListener
      */
     public int drawString(String par1Str, int par2, int par3, int par4, boolean par5)
     {
+    	//TODO: Client
+    	if(Minecraft.getMinecraft().getNetHandler() != null && Client.Wurst.moduleManager.getModuleFromClass(NameProtect.class).getToggled())
+    	{
+    		for(Object info : Minecraft.getMinecraft().getNetHandler().playerInfoList)
+        	{
+        		String name = StringUtils.stripControlCodes(((GuiPlayerInfo) info).name);
+        		if(par1Str.contains(Minecraft.getMinecraft().session.getUsername()))
+        		{
+        			par1Str = par1Str.replace(Minecraft.getMinecraft().session.getUsername(), "§oMe§r");
+        		}else if(par1Str.contains(name) && !name.contains(" "))
+        		{
+        			par1Str = par1Str.replace(name, "§oPlayer" + Minecraft.getMinecraft().getNetHandler().playerInfoList.indexOf(info) + "§r");
+        		}
+        	}
+    	}
         GL11.glEnable(GL11.GL_ALPHA_TEST);
         this.resetStyles();
         int var6;
diff --git a/net/minecraft/client/gui/GuiButton.java b/net/minecraft/client/gui/GuiButton.java
index 99ef20a..443d725 100644
--- a/net/minecraft/client/gui/GuiButton.java
+++ b/net/minecraft/client/gui/GuiButton.java
@@ -20,7 +20,7 @@ public class GuiButton extends Gui
     public int id;
     public boolean enabled;
     public boolean field_146125_m;
-    protected boolean field_146123_n;
+    protected boolean mouseOver;
     private static final String __OBFID = "CL_00000668";
 
     public GuiButton(int par1, int par2, int par3, String par4Str)
@@ -68,8 +68,8 @@ public class GuiButton extends Gui
             FontRenderer var4 = p_146112_1_.fontRenderer;
             p_146112_1_.getTextureManager().bindTexture(field_146122_a);
             GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
-            this.field_146123_n = p_146112_2_ >= this.field_146128_h && p_146112_3_ >= this.field_146129_i && p_146112_2_ < this.field_146128_h + this.field_146120_f && p_146112_3_ < this.field_146129_i + this.field_146121_g;
-            int var5 = this.getHoverState(this.field_146123_n);
+            this.mouseOver = p_146112_2_ >= this.field_146128_h && p_146112_3_ >= this.field_146129_i && p_146112_2_ < this.field_146128_h + this.field_146120_f && p_146112_3_ < this.field_146129_i + this.field_146121_g;
+            int var5 = this.getHoverState(this.mouseOver);
             GL11.glEnable(GL11.GL_BLEND);
             OpenGlHelper.glBlendFunc(770, 771, 1, 0);
             GL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);
@@ -82,7 +82,7 @@ public class GuiButton extends Gui
             {
                 var6 = 10526880;
             }
-            else if (this.field_146123_n)
+            else if (this.mouseOver)
             {
                 var6 = 16777120;
             }
@@ -110,9 +110,9 @@ public class GuiButton extends Gui
         return this.enabled && this.field_146125_m && p_146116_2_ >= this.field_146128_h && p_146116_3_ >= this.field_146129_i && p_146116_2_ < this.field_146128_h + this.field_146120_f && p_146116_3_ < this.field_146129_i + this.field_146121_g;
     }
 
-    public boolean func_146115_a()
+    public boolean isMouseOver()
     {
-        return this.field_146123_n;
+        return this.mouseOver;
     }
 
     public void func_146111_b(int p_146111_1_, int p_146111_2_) {}
diff --git a/net/minecraft/client/gui/GuiChat.java b/net/minecraft/client/gui/GuiChat.java
index 5db78d6..6277932 100644
--- a/net/minecraft/client/gui/GuiChat.java
+++ b/net/minecraft/client/gui/GuiChat.java
@@ -57,7 +57,7 @@ public class GuiChat extends GuiScreen
         Keyboard.enableRepeatEvents(true);
         this.field_146416_h = this.mc.ingameGUI.getChatGUI().func_146238_c().size();
         this.field_146415_a = new GuiTextField(this.fontRendererObj, 4, this.height - 12, this.width - 4, 12);
-        this.field_146415_a.func_146203_f(100);
+        this.field_146415_a.setMaxStringLength(100);
         this.field_146415_a.func_146185_a(false);
         this.field_146415_a.setFocused(true);
         this.field_146415_a.setText(this.field_146409_v);
@@ -413,22 +413,22 @@ public class GuiChat extends GuiScreen
             }
             else if (var5.getAction() == HoverEvent.Action.SHOW_ACHIEVEMENT)
             {
-                StatBase var12 = StatList.func_151177_a(var5.getValue().getUnformattedText());
+                StatBase var13 = StatList.func_151177_a(var5.getValue().getUnformattedText());
 
-                if (var12 != null)
+                if (var13 != null)
                 {
-                    IChatComponent var13 = var12.func_150951_e();
-                    ChatComponentTranslation var8 = new ChatComponentTranslation("stats.tooltip.type." + (var12.isAchievement() ? "achievement" : "statistic"), new Object[0]);
+                    IChatComponent var12 = var13.func_150951_e();
+                    ChatComponentTranslation var8 = new ChatComponentTranslation("stats.tooltip.type." + (var13.isAchievement() ? "achievement" : "statistic"), new Object[0]);
                     var8.getChatStyle().setItalic(Boolean.valueOf(true));
-                    String var9 = var12 instanceof Achievement ? ((Achievement)var12).getDescription() : null;
-                    ArrayList var10 = Lists.newArrayList(new String[] {var13.getFormattedText(), var8.getFormattedText()});
+                    String var9 = var13 instanceof Achievement ? ((Achievement)var13).getDescription() : null;
+                    ArrayList var10 = Lists.newArrayList(new String[] {var12.getFormattedText(), var8.getFormattedText()});
 
                     if (var9 != null)
                     {
                         var10.addAll(this.fontRendererObj.listFormattedStringToWidth(var9, 150));
                     }
 
-                    this.func_146283_a(var10, par1, par2);
+                    this.drawHoveringText(var10, par1, par2);
                 }
                 else
                 {
diff --git a/net/minecraft/client/gui/GuiCommandBlock.java b/net/minecraft/client/gui/GuiCommandBlock.java
index 8af8549..e46ca21 100644
--- a/net/minecraft/client/gui/GuiCommandBlock.java
+++ b/net/minecraft/client/gui/GuiCommandBlock.java
@@ -42,11 +42,11 @@ public class GuiCommandBlock extends GuiScreen
         this.buttonList.add(this.field_146490_i = new GuiButton(0, this.width / 2 - 4 - 150, this.height / 4 + 120 + 12, 150, 20, I18n.format("gui.done", new Object[0])));
         this.buttonList.add(this.field_146487_r = new GuiButton(1, this.width / 2 + 4, this.height / 4 + 120 + 12, 150, 20, I18n.format("gui.cancel", new Object[0])));
         this.field_146485_f = new GuiTextField(this.fontRendererObj, this.width / 2 - 150, 50, 300, 20);
-        this.field_146485_f.func_146203_f(32767);
+        this.field_146485_f.setMaxStringLength(32767);
         this.field_146485_f.setFocused(true);
         this.field_146485_f.setText(this.field_146489_h.func_145753_i());
         this.field_146486_g = new GuiTextField(this.fontRendererObj, this.width / 2 - 150, 135, 300, 20);
-        this.field_146486_g.func_146203_f(32767);
+        this.field_146486_g.setMaxStringLength(32767);
         this.field_146486_g.func_146184_c(false);
         this.field_146486_g.setText(this.field_146489_h.func_145753_i());
 
@@ -145,15 +145,15 @@ public class GuiCommandBlock extends GuiScreen
         FontRenderer var10001 = this.fontRendererObj;
         String var10002 = I18n.format("advMode.nearestPlayer", new Object[0]);
         int var10003 = this.width / 2 - 150;
-        int var8 = var5 + 1;
+        int var7 = var5 + 1;
         this.drawString(var10001, var10002, var10003, var4 + var5 * this.fontRendererObj.FONT_HEIGHT, 10526880);
-        this.drawString(this.fontRendererObj, I18n.format("advMode.randomPlayer", new Object[0]), this.width / 2 - 150, var4 + var8++ * this.fontRendererObj.FONT_HEIGHT, 10526880);
-        this.drawString(this.fontRendererObj, I18n.format("advMode.allPlayers", new Object[0]), this.width / 2 - 150, var4 + var8++ * this.fontRendererObj.FONT_HEIGHT, 10526880);
+        this.drawString(this.fontRendererObj, I18n.format("advMode.randomPlayer", new Object[0]), this.width / 2 - 150, var4 + var7++ * this.fontRendererObj.FONT_HEIGHT, 10526880);
+        this.drawString(this.fontRendererObj, I18n.format("advMode.allPlayers", new Object[0]), this.width / 2 - 150, var4 + var7++ * this.fontRendererObj.FONT_HEIGHT, 10526880);
 
         if (this.field_146486_g.getText().length() > 0)
         {
-            int var7 = var4 + var8 * this.fontRendererObj.FONT_HEIGHT + 20;
-            this.drawString(this.fontRendererObj, I18n.format("advMode.previousOutput", new Object[0]), this.width / 2 - 150, var7, 10526880);
+            int var6 = var4 + var7 * this.fontRendererObj.FONT_HEIGHT + 20;
+            this.drawString(this.fontRendererObj, I18n.format("advMode.previousOutput", new Object[0]), this.width / 2 - 150, var6, 10526880);
             this.field_146486_g.drawTextBox();
         }
 
diff --git a/net/minecraft/client/gui/GuiFlatPresets.java b/net/minecraft/client/gui/GuiFlatPresets.java
index 57c60e5..bfbb411 100644
--- a/net/minecraft/client/gui/GuiFlatPresets.java
+++ b/net/minecraft/client/gui/GuiFlatPresets.java
@@ -50,7 +50,7 @@ public class GuiFlatPresets extends GuiScreen
         this.field_146436_r = I18n.format("createWorld.customize.presets.list", new Object[0]);
         this.field_146433_u = new GuiTextField(this.fontRendererObj, 50, 40, this.width - 100, 20);
         this.field_146435_s = new GuiFlatPresets.ListSlot();
-        this.field_146433_u.func_146203_f(1230);
+        this.field_146433_u.setMaxStringLength(1230);
         this.field_146433_u.setText(this.field_146432_g.func_146384_e());
         this.buttonList.add(this.field_146434_t = new GuiButton(0, this.width / 2 - 155, this.height - 28, 150, 20, I18n.format("createWorld.customize.presets.select", new Object[0])));
         this.buttonList.add(new GuiButton(1, this.width / 2 + 5, this.height - 28, 150, 20, I18n.format("gui.cancel", new Object[0])));
diff --git a/net/minecraft/client/gui/GuiGameOver.java b/net/minecraft/client/gui/GuiGameOver.java
index c2a2129..1ae7724 100644
--- a/net/minecraft/client/gui/GuiGameOver.java
+++ b/net/minecraft/client/gui/GuiGameOver.java
@@ -1,11 +1,16 @@
 package net.minecraft.client.gui;
 
 import java.util.Iterator;
+
 import net.minecraft.client.multiplayer.WorldClient;
 import net.minecraft.client.resources.I18n;
 import net.minecraft.util.EnumChatFormatting;
+
 import org.lwjgl.opengl.GL11;
 
+import tk.wurst_client.Client;
+import tk.wurst_client.module.Module;
+
 public class GuiGameOver extends GuiScreen
 {
     private int field_146347_a;
@@ -129,6 +134,11 @@ public class GuiGameOver extends GuiScreen
             for (Iterator var1 = this.buttonList.iterator(); var1.hasNext(); var2.enabled = true)
             {
                 var2 = (GuiButton)var1.next();
+                //TODO: Client
+                for(Module eventModule : Client.Wurst.moduleManager.activeModules)
+                {
+                	eventModule.onDeath();
+                }
             }
         }
     }
diff --git a/net/minecraft/client/gui/GuiIngame.java b/net/minecraft/client/gui/GuiIngame.java
index ac543f0..e0066ce 100644
--- a/net/minecraft/client/gui/GuiIngame.java
+++ b/net/minecraft/client/gui/GuiIngame.java
@@ -1,10 +1,25 @@
 package net.minecraft.client.gui;
 
+import static org.lwjgl.opengl.GL11.GL_BLEND;
+import static org.lwjgl.opengl.GL11.GL_CULL_FACE;
+import static org.lwjgl.opengl.GL11.GL_ONE_MINUS_SRC_ALPHA;
+import static org.lwjgl.opengl.GL11.GL_QUADS;
+import static org.lwjgl.opengl.GL11.GL_SRC_ALPHA;
+import static org.lwjgl.opengl.GL11.GL_TEXTURE_2D;
+import static org.lwjgl.opengl.GL11.glBegin;
+import static org.lwjgl.opengl.GL11.glBlendFunc;
+import static org.lwjgl.opengl.GL11.glDisable;
+import static org.lwjgl.opengl.GL11.glEnable;
+import static org.lwjgl.opengl.GL11.glEnd;
+import static org.lwjgl.opengl.GL11.glVertex2d;
+
 import java.awt.Color;
+import java.util.ArrayList;
 import java.util.Collection;
 import java.util.Iterator;
 import java.util.List;
 import java.util.Random;
+
 import net.minecraft.block.material.Material;
 import net.minecraft.client.Minecraft;
 import net.minecraft.client.network.NetHandlerPlayClient;
@@ -37,14 +52,24 @@ import net.minecraft.util.ResourceLocation;
 import net.minecraft.util.StringUtils;
 import net.minecraft.world.EnumSkyBlock;
 import net.minecraft.world.chunk.Chunk;
+
+import org.darkstorm.minecraft.gui.util.RenderUtil;
 import org.lwjgl.opengl.GL11;
 import org.lwjgl.opengl.GL12;
 
+import tk.wurst_client.Client;
+import tk.wurst_client.font.Fonts;
+import tk.wurst_client.gui.UIRenderer;
+import tk.wurst_client.module.Module;
+import tk.wurst_client.module.modules.ArenaBrawl;
+
 public class GuiIngame extends Gui
 {
     private static final ResourceLocation vignetteTexPath = new ResourceLocation("textures/misc/vignette.png");
     private static final ResourceLocation widgetsTexPath = new ResourceLocation("textures/gui/widgets.png");
     private static final ResourceLocation pumpkinBlurTexPath = new ResourceLocation("textures/misc/pumpkinblur.png");
+    //TODO: Client
+    private static final ResourceLocation wurstTextures = new ResourceLocation("textures/gui/wurst/wurst.png");
     private static final RenderItem itemRenderer = new RenderItem();
     private final Random rand = new Random();
     private final Minecraft mc;
@@ -165,14 +190,14 @@ public class GuiIngame extends Gui
             GL11.glDisable(GL11.GL_DEPTH_TEST);
             GL11.glDisable(GL11.GL_ALPHA_TEST);
             var32 = this.mc.thePlayer.getSleepTimer();
-            float var33 = (float)var32 / 100.0F;
+            float var34 = (float)var32 / 100.0F;
 
-            if (var33 > 1.0F)
+            if (var34 > 1.0F)
             {
-                var33 = 1.0F - (float)(var32 - 100) / 10.0F;
+                var34 = 1.0F - (float)(var32 - 100) / 10.0F;
             }
 
-            var12 = (int)(220.0F * var33) << 24 | 1052704;
+            var12 = (int)(220.0F * var34) << 24 | 1052704;
             drawRect(0, 0, var6, var7, var12);
             GL11.glEnable(GL11.GL_ALPHA_TEST);
             GL11.glEnable(GL11.GL_DEPTH_TEST);
@@ -184,20 +209,20 @@ public class GuiIngame extends Gui
         var11 = var6 / 2 - 91;
         int var14;
         int var15;
-        int var16;
         int var17;
-        float var34;
-        short var35;
+        int var16;
+        float var33;
+        short var37;
 
         if (this.mc.thePlayer.isRidingHorse())
         {
             this.mc.mcProfiler.startSection("jumpBar");
             this.mc.getTextureManager().bindTexture(Gui.icons);
-            var34 = this.mc.thePlayer.getHorseJumpPower();
-            var35 = 182;
-            var14 = (int)(var34 * (float)(var35 + 1));
+            var33 = this.mc.thePlayer.getHorseJumpPower();
+            var37 = 182;
+            var14 = (int)(var33 * (float)(var37 + 1));
             var15 = var7 - 32 + 3;
-            this.drawTexturedModalRect(var11, var15, 0, 84, var35, 5);
+            this.drawTexturedModalRect(var11, var15, 0, 84, var37, 5);
 
             if (var14 > 0)
             {
@@ -214,10 +239,10 @@ public class GuiIngame extends Gui
 
             if (var12 > 0)
             {
-                var35 = 182;
-                var14 = (int)(this.mc.thePlayer.experience * (float)(var35 + 1));
+                var37 = 182;
+                var14 = (int)(this.mc.thePlayer.experience * (float)(var37 + 1));
                 var15 = var7 - 32 + 3;
-                this.drawTexturedModalRect(var11, var15, 0, 64, var35, 5);
+                this.drawTexturedModalRect(var11, var15, 0, 64, var37, 5);
 
                 if (var14 > 0)
                 {
@@ -230,17 +255,17 @@ public class GuiIngame extends Gui
             if (this.mc.thePlayer.experienceLevel > 0)
             {
                 this.mc.mcProfiler.startSection("expLevel");
-                boolean var37 = false;
-                var14 = var37 ? 16777215 : 8453920;
-                String var39 = "" + this.mc.thePlayer.experienceLevel;
-                var16 = (var6 - var8.getStringWidth(var39)) / 2;
+                boolean var35 = false;
+                var14 = var35 ? 16777215 : 8453920;
+                String var42 = "" + this.mc.thePlayer.experienceLevel;
+                var16 = (var6 - var8.getStringWidth(var42)) / 2;
                 var17 = var7 - 31 - 4;
                 boolean var18 = false;
-                var8.drawString(var39, var16 + 1, var17, 0);
-                var8.drawString(var39, var16 - 1, var17, 0);
-                var8.drawString(var39, var16, var17 + 1, 0);
-                var8.drawString(var39, var16, var17 - 1, 0);
-                var8.drawString(var39, var16, var17, var14);
+                var8.drawString(var42, var16 + 1, var17, 0);
+                var8.drawString(var42, var16 - 1, var17, 0);
+                var8.drawString(var42, var16, var17 + 1, 0);
+                var8.drawString(var42, var16, var17 - 1, 0);
+                var8.drawString(var42, var16, var17, var14);
                 this.mc.mcProfiler.endSection();
             }
         }
@@ -303,8 +328,60 @@ public class GuiIngame extends Gui
         }
 
         int var21;
-        int var22;
         int var23;
+        int var22;
+        
+        //TODO: Client
+        if(!this.mc.gameSettings.showDebugInfo)
+        {
+        	glEnable(GL_BLEND);
+    		glDisable(GL_CULL_FACE);
+    		glDisable(GL_TEXTURE_2D);
+    		glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
+            RenderUtil.setColor(new Color(255, 255, 255, 128));
+    		glBegin(GL_QUADS);
+    		{
+    			glVertex2d(0, 6);
+    			glVertex2d(Fonts.segoe22.getStringWidth("v" + Client.Wurst.CLIENT_VERSION) + 78, 6);
+    			glVertex2d(Fonts.segoe22.getStringWidth("v" + Client.Wurst.CLIENT_VERSION) + 78, 18);
+    			glVertex2d(0, 18);
+    		}
+    		glEnd();
+    		glEnable(GL_TEXTURE_2D);
+    		glEnable(GL_CULL_FACE);
+            GL11.glDisable(GL11.GL_DEPTH_TEST);
+            GL11.glDepthMask(false);
+            OpenGlHelper.glBlendFunc(770, 771, 1, 0);
+            GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
+            this.mc.getTextureManager().bindTexture(wurstTextures);
+            Tessellator var3 = Tessellator.instance;
+            double x = 0;
+            double y = 3;
+            double h = 18;
+            double w = 72;
+            double fw = 64;
+            double fh = 50;
+            double u1 = 0;
+            double v1 = 205;
+            var3.startDrawingQuads();
+            var3.addVertexWithUV((double)x + 0, (double)y + h, (double)this.zLevel, (double)((float)(u1 + 0) * 0.00390625F), (double)((float)(v1 + fh) * 0.00390625F));
+            var3.addVertexWithUV((double)x + w, (double)y + h, (double)this.zLevel, (double)((float)(u1 + fw) * 0.00390625F), (double)((float)(v1 + fh) * 0.00390625F));
+            var3.addVertexWithUV((double)x + w, (double)y + 0, (double)this.zLevel, (double)((float)(u1 + fw) * 0.00390625F), (double)((float)(v1 + 0) * 0.00390625F));
+            var3.addVertexWithUV((double)x + 0, (double)y + 0, (double)this.zLevel, (double)((float)(u1 + 0) * 0.00390625F), (double)((float)(v1 + 0) * 0.00390625F));
+            var3.draw();
+            for(Module eventModule : Client.Wurst.moduleManager.activeModules)
+            {
+            	eventModule.onRenderGUI();
+            }
+            GL11.glDepthMask(true);
+            GL11.glEnable(GL11.GL_DEPTH_TEST);
+            GL11.glEnable(GL11.GL_ALPHA_TEST);
+            GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
+            GL11.glPushMatrix();
+            
+            UIRenderer.renderUI();
+            GL11.glPopMatrix();
+        }
 
         if (this.mc.gameSettings.showDebugInfo)
         {
@@ -316,13 +393,13 @@ public class GuiIngame extends Gui
             var8.drawStringWithShadow(this.mc.debugInfoEntities(), 2, 32, 16777215);
             var8.drawStringWithShadow(this.mc.getWorldProviderName(), 2, 42, 16777215);
             long var38 = Runtime.getRuntime().maxMemory();
-            long var41 = Runtime.getRuntime().totalMemory();
-            long var43 = Runtime.getRuntime().freeMemory();
-            long var45 = var41 - var43;
-            String var20 = "Used memory: " + var45 * 100L / var38 + "% (" + var45 / 1024L / 1024L + "MB) of " + var38 / 1024L / 1024L + "MB";
+            long var40 = Runtime.getRuntime().totalMemory();
+            long var39 = Runtime.getRuntime().freeMemory();
+            long var46 = var40 - var39;
+            String var20 = "Used memory: " + var46 * 100L / var38 + "% (" + var46 / 1024L / 1024L + "MB) of " + var38 / 1024L / 1024L + "MB";
             var21 = 14737632;
             this.drawString(var8, var20, var6 - var8.getStringWidth(var20) - 2, 2, 14737632);
-            var20 = "Allocated memory: " + var41 * 100L / var38 + "% (" + var41 / 1024L / 1024L + "MB)";
+            var20 = "Allocated memory: " + var40 * 100L / var38 + "% (" + var40 / 1024L / 1024L + "MB)";
             this.drawString(var8, var20, var6 - var8.getStringWidth(var20) - 2, 12, 14737632);
             var22 = MathHelper.floor_double(this.mc.thePlayer.posX);
             var23 = MathHelper.floor_double(this.mc.thePlayer.posY);
@@ -353,8 +430,8 @@ public class GuiIngame extends Gui
         if (this.recordPlayingUpFor > 0)
         {
             this.mc.mcProfiler.startSection("overlayMessage");
-            var34 = (float)this.recordPlayingUpFor - par1;
-            var13 = (int)(var34 * 255.0F / 20.0F);
+            var33 = (float)this.recordPlayingUpFor - par1;
+            var13 = (int)(var33 * 255.0F / 20.0F);
 
             if (var13 > 255)
             {
@@ -371,7 +448,7 @@ public class GuiIngame extends Gui
 
                 if (this.recordIsPlaying)
                 {
-                    var14 = Color.HSBtoRGB(var34 / 50.0F, 0.7F, 0.6F) & 16777215;
+                    var14 = Color.HSBtoRGB(var33 / 50.0F, 0.7F, 0.6F) & 16777215;
                 }
 
                 var8.drawString(this.recordPlaying, -var8.getStringWidth(this.recordPlaying) / 2, -4, var14 + (var13 << 24 & -16777216));
@@ -382,13 +459,19 @@ public class GuiIngame extends Gui
             this.mc.mcProfiler.endSection();
         }
 
-        ScoreObjective var40 = this.mc.theWorld.getScoreboard().func_96539_a(1);
+        ScoreObjective var43 = this.mc.theWorld.getScoreboard().func_96539_a(1);
 
-        if (var40 != null)
+        if (var43 != null)
+        {
+            this.func_96136_a(var43, var7, var6, var8);
+            //TODO: Client
+        }else
         {
-            this.func_96136_a(var40, var7, var6, var8);
+            ArenaBrawl.scoreboard = null;
         }
 
+        if(!this.mc.gameSettings.showDebugInfo)
+        	UIRenderer.renderPinnedFrames();
         GL11.glEnable(GL11.GL_BLEND);
         OpenGlHelper.glBlendFunc(770, 771, 1, 0);
         GL11.glDisable(GL11.GL_ALPHA_TEST);
@@ -398,14 +481,14 @@ public class GuiIngame extends Gui
         this.persistantChatGUI.func_146230_a(this.updateCounter);
         this.mc.mcProfiler.endSection();
         GL11.glPopMatrix();
-        var40 = this.mc.theWorld.getScoreboard().func_96539_a(0);
+        var43 = this.mc.theWorld.getScoreboard().func_96539_a(0);
 
-        if (this.mc.gameSettings.keyBindPlayerList.getIsKeyPressed() && (!this.mc.isIntegratedServerRunning() || this.mc.thePlayer.sendQueue.playerInfoList.size() > 1 || var40 != null))
+        if (this.mc.gameSettings.keyBindPlayerList.getIsKeyPressed() && (!this.mc.isIntegratedServerRunning() || this.mc.thePlayer.sendQueue.playerInfoList.size() > 1 || var43 != null))
         {
             this.mc.mcProfiler.startSection("playerList");
-            NetHandlerPlayClient var42 = this.mc.thePlayer.sendQueue;
-            List var44 = var42.playerInfoList;
-            var15 = var42.currentServerMaxPlayers;
+            NetHandlerPlayClient var41 = this.mc.thePlayer.sendQueue;
+            List var44 = var41.playerInfoList;
+            var15 = var41.currentServerMaxPlayers;
             var16 = var15;
 
             for (var17 = 1; var16 > 20; var16 = (var15 + var17 - 1) / var17)
@@ -413,40 +496,41 @@ public class GuiIngame extends Gui
                 ++var17;
             }
 
-            int var46 = 300 / var17;
+            int var45 = 300 / var17;
 
-            if (var46 > 150)
+            if (var45 > 150)
             {
-                var46 = 150;
+                var45 = 150;
             }
 
-            int var19 = (var6 - var17 * var46) / 2;
+            int var19 = (var6 - var17 * var45) / 2;
             byte var47 = 10;
-            drawRect(var19 - 1, var47 - 1, var19 + var46 * var17, var47 + 9 * var16, Integer.MIN_VALUE);
+            drawRect(var19 - 1, var47 - 1, var19 + var45 * var17, var47 + 9 * var16, Integer.MIN_VALUE);
 
             for (var21 = 0; var21 < var15; ++var21)
             {
-                var22 = var19 + var21 % var17 * var46;
+                var22 = var19 + var21 % var17 * var45;
                 var23 = var47 + var21 / var17 * 9;
-                drawRect(var22, var23, var22 + var46 - 1, var23 + 8, 553648127);
+                drawRect(var22, var23, var22 + var45 - 1, var23 + 8, 553648127);
                 GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
                 GL11.glEnable(GL11.GL_ALPHA_TEST);
 
                 if (var21 < var44.size())
                 {
-                    GuiPlayerInfo var48 = (GuiPlayerInfo)var44.get(var21);
-                    ScorePlayerTeam var49 = this.mc.theWorld.getScoreboard().getPlayersTeam(var48.name);
-                    String var50 = ScorePlayerTeam.formatPlayerName(var49, var48.name);
-                    var8.drawStringWithShadow(var50, var22, var23, 16777215);
+                    GuiPlayerInfo var49 = (GuiPlayerInfo)var44.get(var21);
+                    //var49.name = var49.name.replace("Player", "§oRandom guy§r");
+                    ScorePlayerTeam var48 = this.mc.theWorld.getScoreboard().getPlayersTeam(var49.name);
+                    String var52 = ScorePlayerTeam.formatPlayerName(var48, var49.name);
+                    var8.drawStringWithShadow(var52, var22, var23, 16777215);
 
-                    if (var40 != null)
+                    if (var43 != null)
                     {
-                        int var27 = var22 + var8.getStringWidth(var50) + 5;
-                        int var28 = var22 + var46 - 12 - 5;
+                        int var27 = var22 + var8.getStringWidth(var52) + 5;
+                        int var28 = var22 + var45 - 12 - 5;
 
                         if (var28 - var27 > 5)
                         {
-                            Score var29 = var40.getScoreboard().func_96529_a(var48.name, var40);
+                            Score var29 = var43.getScoreboard().func_96529_a(var49.name, var43);
                             String var30 = EnumChatFormatting.YELLOW + "" + var29.getScorePoints();
                             var8.drawStringWithShadow(var30, var28 - var8.getStringWidth(var30), var23, 16777215);
                         }
@@ -454,37 +538,37 @@ public class GuiIngame extends Gui
 
                     GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
                     this.mc.getTextureManager().bindTexture(icons);
-                    byte var51 = 0;
-                    boolean var52 = false;
-                    byte var53;
+                    byte var53 = 0;
+                    boolean var51 = false;
+                    byte var50;
 
-                    if (var48.responseTime < 0)
+                    if (var49.responseTime < 0)
                     {
-                        var53 = 5;
+                        var50 = 5;
                     }
-                    else if (var48.responseTime < 150)
+                    else if (var49.responseTime < 150)
                     {
-                        var53 = 0;
+                        var50 = 0;
                     }
-                    else if (var48.responseTime < 300)
+                    else if (var49.responseTime < 300)
                     {
-                        var53 = 1;
+                        var50 = 1;
                     }
-                    else if (var48.responseTime < 600)
+                    else if (var49.responseTime < 600)
                     {
-                        var53 = 2;
+                        var50 = 2;
                     }
-                    else if (var48.responseTime < 1000)
+                    else if (var49.responseTime < 1000)
                     {
-                        var53 = 3;
+                        var50 = 3;
                     }
                     else
                     {
-                        var53 = 4;
+                        var50 = 4;
                     }
 
                     this.zLevel += 100.0F;
-                    this.drawTexturedModalRect(var22 + var46 - 12, var23, 0 + var51 * 10, 176 + var53 * 8, 10, 8);
+                    this.drawTexturedModalRect(var22 + var45 - 12, var23, 0 + var53 * 10, 176 + var50 * 8, 10, 8);
                     this.zLevel -= 100.0F;
                 }
             }
@@ -514,10 +598,12 @@ public class GuiIngame extends Gui
 
             int var22 = var6.size() * par4FontRenderer.FONT_HEIGHT;
             int var23 = par2 / 2 + var22 / 3;
-            byte var24 = 3;
-            int var25 = par3 - var7 - var24;
+            byte var25 = 3;
+            int var24 = par3 - var7 - var25;
             int var12 = 0;
             Iterator var13 = var6.iterator();
+            //TODO: Client
+            ArrayList<String> wurst1 = new ArrayList<String>();
 
             while (var13.hasNext())
             {
@@ -525,21 +611,23 @@ public class GuiIngame extends Gui
                 ++var12;
                 ScorePlayerTeam var15 = var5.getPlayersTeam(var14.getPlayerName());
                 String var16 = ScorePlayerTeam.formatPlayerName(var15, var14.getPlayerName());
+                wurst1.add(var16);
                 String var17 = EnumChatFormatting.RED + "" + var14.getScorePoints();
                 int var19 = var23 - var12 * par4FontRenderer.FONT_HEIGHT;
-                int var20 = par3 - var24 + 2;
-                drawRect(var25 - 2, var19, var20, var19 + par4FontRenderer.FONT_HEIGHT, 1342177280);
-                par4FontRenderer.drawString(var16, var25, var19, 553648127);
+                int var20 = par3 - var25 + 2;
+                drawRect(var24 - 2, var19, var20, var19 + par4FontRenderer.FONT_HEIGHT, 1342177280);
+                par4FontRenderer.drawString(var16, var24, var19, 553648127);
                 par4FontRenderer.drawString(var17, var20 - par4FontRenderer.getStringWidth(var17), var19, 553648127);
 
                 if (var12 == var6.size())
                 {
                     String var21 = par1ScoreObjective.getDisplayName();
-                    drawRect(var25 - 2, var19 - par4FontRenderer.FONT_HEIGHT - 1, var20, var19 - 1, 1610612736);
-                    drawRect(var25 - 2, var19 - 1, var20, var19, 1342177280);
-                    par4FontRenderer.drawString(var21, var25 + var7 / 2 - par4FontRenderer.getStringWidth(var21) / 2, var19 - par4FontRenderer.FONT_HEIGHT, 553648127);
+                    drawRect(var24 - 2, var19 - par4FontRenderer.FONT_HEIGHT - 1, var20, var19 - 1, 1610612736);
+                    drawRect(var24 - 2, var19 - 1, var20, var19, 1342177280);
+                    par4FontRenderer.drawString(var21, var24 + var7 / 2 - par4FontRenderer.getStringWidth(var21) / 2, var19 - par4FontRenderer.FONT_HEIGHT, 553648127);
                 }
             }
+            ArenaBrawl.scoreboard = wurst1;
         }
     }
 
@@ -578,8 +666,8 @@ public class GuiIngame extends Gui
         }
 
         this.mc.mcProfiler.startSection("armor");
-        int var22;
         int var23;
+        int var22;
 
         for (var22 = 0; var22 < 10; ++var22)
         {
@@ -606,8 +694,8 @@ public class GuiIngame extends Gui
 
         this.mc.mcProfiler.endStartSection("health");
         int var25;
-        int var26;
         int var27;
+        int var26;
 
         for (var22 = MathHelper.ceiling_float_int((var14 + var15) / 2.0F) - 1; var22 >= 0; --var22)
         {
@@ -751,10 +839,10 @@ public class GuiIngame extends Gui
         else if (var34 instanceof EntityLivingBase)
         {
             this.mc.mcProfiler.endStartSection("mountHealth");
-            EntityLivingBase var37 = (EntityLivingBase)var34;
-            var35 = (int)Math.ceil((double)var37.getHealth());
-            float var38 = var37.getMaxHealth();
-            var26 = (int)(var38 + 0.5F) / 2;
+            EntityLivingBase var38 = (EntityLivingBase)var34;
+            var35 = (int)Math.ceil((double)var38.getHealth());
+            float var37 = var38.getMaxHealth();
+            var26 = (int)(var37 + 0.5F) / 2;
 
             if (var26 > 30)
             {
diff --git a/net/minecraft/client/gui/GuiIngameMenu.java b/net/minecraft/client/gui/GuiIngameMenu.java
index b4b012b..fd46ec6 100644
--- a/net/minecraft/client/gui/GuiIngameMenu.java
+++ b/net/minecraft/client/gui/GuiIngameMenu.java
@@ -1,14 +1,26 @@
 package net.minecraft.client.gui;
 
+import static org.lwjgl.opengl.GL11.GL_CULL_FACE;
+import static org.lwjgl.opengl.GL11.GL_TEXTURE_2D;
+import static org.lwjgl.opengl.GL11.glEnable;
 import net.minecraft.client.gui.achievement.GuiAchievements;
 import net.minecraft.client.gui.achievement.GuiStats;
 import net.minecraft.client.multiplayer.WorldClient;
+import net.minecraft.client.renderer.OpenGlHelper;
+import net.minecraft.client.renderer.Tessellator;
 import net.minecraft.client.resources.I18n;
+import net.minecraft.util.ResourceLocation;
+
+import org.lwjgl.opengl.GL11;
+
+import tk.wurst_client.gui.options.GuiWurstOptions;
 
 public class GuiIngameMenu extends GuiScreen
 {
     private int field_146445_a;
     private int field_146444_f;
+    //TODO: Client
+    private static final ResourceLocation wurstTextures = new ResourceLocation("textures/gui/wurst/wurst.png");
     private static final String __OBFID = "CL_00000703";
 
     /**
@@ -29,6 +41,8 @@ public class GuiIngameMenu extends GuiScreen
 
         this.buttonList.add(new GuiButton(4, this.width / 2 - 100, this.height / 4 + 24 + var1, I18n.format("menu.returnToGame", new Object[0])));
         this.buttonList.add(new GuiButton(0, this.width / 2 - 100, this.height / 4 + 96 + var1, 98, 20, I18n.format("menu.options", new Object[0])));
+        //TODO: Client
+        this.buttonList.add(new GuiButton(8, this.width / 2 - 100, this.height / 4 + 72 + var1, "            Options"));
         GuiButton var3;
         this.buttonList.add(var3 = new GuiButton(7, this.width / 2 + 2, this.height / 4 + 96 + var1, 98, 20, I18n.format("menu.shareToLan", new Object[0])));
         this.buttonList.add(new GuiButton(5, this.width / 2 - 100, this.height / 4 + 48 + var1, 98, 20, I18n.format("gui.achievements", new Object[0])));
@@ -70,6 +84,10 @@ public class GuiIngameMenu extends GuiScreen
 
             case 7:
                 this.mc.displayGuiScreen(new GuiShareToLan(this));
+                break;
+
+            case 8:
+                this.mc.displayGuiScreen(new GuiWurstOptions(this));
         }
     }
 
@@ -90,5 +108,27 @@ public class GuiIngameMenu extends GuiScreen
         this.drawDefaultBackground();
         this.drawCenteredString(this.fontRendererObj, "Game menu", this.width / 2, 40, 16777215);
         super.drawScreen(par1, par2, par3);
+		glEnable(GL_TEXTURE_2D);
+		glEnable(GL_CULL_FACE);
+        GL11.glDisable(GL11.GL_DEPTH_TEST);
+        GL11.glDepthMask(false);
+        OpenGlHelper.glBlendFunc(770, 771, 1, 0);
+        GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
+        this.mc.getTextureManager().bindTexture(wurstTextures);
+        Tessellator var3 = Tessellator.instance;
+        double x = this.width / 2 - 72;
+        double y = this.height / 4 + 72 - 14.5;
+        double h = 18;
+        double w = 72;
+        double fw = 64;
+        double fh = 50;
+        double u1 = 0;
+        double v1 = 205;
+        var3.startDrawingQuads();
+        var3.addVertexWithUV((double)x + 0, (double)y + h, (double)this.zLevel, (double)((float)(u1 + 0) * 0.00390625F), (double)((float)(v1 + fh) * 0.00390625F));
+        var3.addVertexWithUV((double)x + w, (double)y + h, (double)this.zLevel, (double)((float)(u1 + fw) * 0.00390625F), (double)((float)(v1 + fh) * 0.00390625F));
+        var3.addVertexWithUV((double)x + w, (double)y + 0, (double)this.zLevel, (double)((float)(u1 + fw) * 0.00390625F), (double)((float)(v1 + 0) * 0.00390625F));
+        var3.addVertexWithUV((double)x + 0, (double)y + 0, (double)this.zLevel, (double)((float)(u1 + 0) * 0.00390625F), (double)((float)(v1 + 0) * 0.00390625F));
+        var3.draw();
     }
 }
diff --git a/net/minecraft/client/gui/GuiMainMenu.java b/net/minecraft/client/gui/GuiMainMenu.java
index 6efaab3..5c21f66 100644
--- a/net/minecraft/client/gui/GuiMainMenu.java
+++ b/net/minecraft/client/gui/GuiMainMenu.java
@@ -1,5 +1,11 @@
 package net.minecraft.client.gui;
 
+import static org.lwjgl.opengl.GL11.GL_BLEND;
+import static org.lwjgl.opengl.GL11.GL_ONE_MINUS_SRC_ALPHA;
+import static org.lwjgl.opengl.GL11.GL_SRC_ALPHA;
+import static org.lwjgl.opengl.GL11.glBlendFunc;
+import static org.lwjgl.opengl.GL11.glEnable;
+
 import java.io.BufferedReader;
 import java.io.IOException;
 import java.io.InputStreamReader;
@@ -9,6 +15,7 @@ import java.util.Calendar;
 import java.util.Date;
 import java.util.Random;
 import java.util.concurrent.atomic.AtomicInteger;
+
 import net.minecraft.client.Minecraft;
 import net.minecraft.client.mco.ExceptionMcoService;
 import net.minecraft.client.mco.ExceptionRetryCall;
@@ -25,12 +32,17 @@ import net.minecraft.util.Session;
 import net.minecraft.world.demo.DemoWorldServer;
 import net.minecraft.world.storage.ISaveFormat;
 import net.minecraft.world.storage.WorldInfo;
+
 import org.apache.commons.io.Charsets;
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 import org.lwjgl.opengl.GL11;
 import org.lwjgl.util.glu.Project;
 
+import tk.wurst_client.Client;
+import tk.wurst_client.alts.GuiAlts;
+import tk.wurst_client.update.GuiUpdate;
+
 public class GuiMainMenu extends GuiScreen
 {
     private static final AtomicInteger field_146973_f = new AtomicInteger(0);
@@ -42,8 +54,8 @@ public class GuiMainMenu extends GuiScreen
     /** Counts the number of screen updates. */
     private float updateCounter;
 
-    /** The splash message. */
-    private String splashText;
+    /** The splash message. *///TODO: Client
+    public static String splashText;
     private GuiButton buttonResetDemo;
 
     /** Timer used to rotate the panorama, increases every tick. */
@@ -61,7 +73,8 @@ public class GuiMainMenu extends GuiScreen
     private String field_146972_A;
     private String field_104024_v;
     private static final ResourceLocation splashTexts = new ResourceLocation("texts/splashes.txt");
-    private static final ResourceLocation minecraftTitleTextures = new ResourceLocation("textures/gui/title/minecraft.png");
+    //TODO: Client
+    private static final ResourceLocation minecraftTitleTextures = new ResourceLocation("textures/gui/wurst/wurst.png");
 
     /** An array of all the paths to the panorama pictures. */
     private static final ResourceLocation[] titlePanoramaPaths = new ResourceLocation[] {new ResourceLocation("textures/gui/title/background/panorama_0.png"), new ResourceLocation("textures/gui/title/background/panorama_1.png"), new ResourceLocation("textures/gui/title/background/panorama_2.png"), new ResourceLocation("textures/gui/title/background/panorama_3.png"), new ResourceLocation("textures/gui/title/background/panorama_4.png"), new ResourceLocation("textures/gui/title/background/panorama_5.png")};
@@ -187,8 +200,17 @@ public class GuiMainMenu extends GuiScreen
         else if (var1.get(2) + 1 == 10 && var1.get(5) == 31)
         {
             this.splashText = "OOoooOOOoooo! Spooky!";
+            //TODO: Client
+        }else if (var1.get(2) + 1 == 2 && var1.get(5) == 9)
+        {
+            this.splashText = "Happy birthday, Alexander01998!";
         }
+        if((GuiMainMenu.splashText.equals("§1C§2o§3l§4o§5r§6m§7a§8t§9i§ac") || GuiMainMenu.splashText.equals("Thousands of colors!")) && !(this.mc.currentScreen instanceof GuiUpdate || this.mc.currentScreen instanceof GuiYesNo))
+        	Tessellator.shouldRenderLSD = true;
+        else
+        	Tessellator.shouldRenderLSD = false;
 
+        Client.Wurst.currentServerIP = "127.0.0.1:25565";
         boolean var2 = true;
         int var3 = this.height / 4 + 48;
 
@@ -297,8 +319,10 @@ public class GuiMainMenu extends GuiScreen
     {
         this.buttonList.add(new GuiButton(1, this.width / 2 - 100, par1, I18n.format("menu.singleplayer", new Object[0])));
         this.buttonList.add(new GuiButton(2, this.width / 2 - 100, par1 + par2 * 1, I18n.format("menu.multiplayer", new Object[0])));
-        this.buttonList.add(this.minecraftRealmsButton = new GuiButton(14, this.width / 2 - 100, par1 + par2 * 2, I18n.format("menu.online", new Object[0])));
-        this.minecraftRealmsButton.field_146125_m = false;
+        //TODO: Client
+        this.buttonList.add(new GuiButton(3, this.width / 2 - 100, par1 + par2 * 2, "Alt Manager"));
+        //this.buttonList.add(this.minecraftRealmsButton = new GuiButton(14, this.width / 2 - 100, par1 + par2 * 2, I18n.format("menu.online", new Object[0])));
+        //this.minecraftRealmsButton.field_146125_m = false;
     }
 
     /**
@@ -338,6 +362,11 @@ public class GuiMainMenu extends GuiScreen
         {
             this.mc.displayGuiScreen(new GuiMultiplayer(this));
         }
+        //TODO: Client
+        if (p_146284_1_.id == 3)
+        {
+            this.mc.displayGuiScreen(new GuiAlts(this));
+        }
         
         if (p_146284_1_.id == 14 && this.minecraftRealmsButton.field_146125_m)
         {
@@ -420,6 +449,14 @@ public class GuiMainMenu extends GuiScreen
 
             this.mc.displayGuiScreen(this);
         }
+        //TODO: Client
+        if(par2 == 0)
+        {
+        	if(par1)
+        		this.mc.displayGuiScreen(new GuiUpdate(this));
+        	else
+        		this.mc.displayGuiScreen(this);
+        }
     }
 
     /**
@@ -582,50 +619,106 @@ public class GuiMainMenu extends GuiScreen
      */
     public void drawScreen(int par1, int par2, float par3)
     {
+    	//TODO: Client
+    	if(Client.Wurst.updater.updateAvailable)
+    	{
+    		this.mc.displayGuiScreen(new GuiYesNo(this, "A new version of Wurst is available: " + Client.Wurst.updater.latestVersion, "Would you like to update?", 0));
+    		Client.Wurst.updater.updateAvailable = false;
+    		return;
+    	}
         GL11.glDisable(GL11.GL_ALPHA_TEST);
         this.renderSkybox(par1, par2, par3);
         GL11.glEnable(GL11.GL_ALPHA_TEST);
         Tessellator var4 = Tessellator.instance;
-        short var5 = 274;
+        short var5 = 256;
         int var6 = this.width / 2 - var5 / 2;
         byte var7 = 30;
         this.drawGradientRect(0, 0, this.width, this.height, -2130706433, 16777215);
         this.drawGradientRect(0, 0, this.width, this.height, 0, Integer.MIN_VALUE);
         this.mc.getTextureManager().bindTexture(minecraftTitleTextures);
         GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
-
+        //TODO: Client
+        glEnable(GL_BLEND);
+		glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
+        double x = var6;
+        double y = var7;
+        double h = 64;
+        double w = 256;
+        double fw = 256;
+        double fh = 200;
+        double u = 0;
+        double v = 0;
+        if(GuiMainMenu.splashText.equals("umop-apisdn!"))
+        {
+        	GL11.glRotatef(180.0F, 0.0F, 0.0F, 1.0F);
+        	GL11.glTranslatef((float)(-this.width), (float) (-h - 60), 0.0F);
+        }
         if ((double)this.updateCounter < 1.0E-4D)
         {
-            this.drawTexturedModalRect(var6 + 0, var7 + 0, 0, 0, 99, 44);
-            this.drawTexturedModalRect(var6 + 99, var7 + 0, 129, 0, 27, 44);
-            this.drawTexturedModalRect(var6 + 99 + 26, var7 + 0, 126, 0, 3, 44);
-            this.drawTexturedModalRect(var6 + 99 + 26 + 3, var7 + 0, 99, 0, 26, 44);
-            this.drawTexturedModalRect(var6 + 155, var7 + 0, 0, 45, 155, 44);
+        	var4.startDrawingQuads();
+            var4.addVertexWithUV((double)x + 0, (double)y + h, (double)this.zLevel, (double)((float)(u + 0) * 0.00390625F), (double)((float)(v + fh) * 0.00390625F));
+            var4.addVertexWithUV((double)x + 120, (double)y + h, (double)this.zLevel, (double)((float)(u + 120) * 0.00390625F), (double)((float)(v + fh) * 0.00390625F));
+            var4.addVertexWithUV((double)x + 120, (double)y + 0, (double)this.zLevel, (double)((float)(u + 120) * 0.00390625F), (double)((float)(v + 0) * 0.00390625F));
+            var4.addVertexWithUV((double)x + 0, (double)y + 0, (double)this.zLevel, (double)((float)(u + 0) * 0.00390625F), (double)((float)(v + 0) * 0.00390625F));
+            var4.draw();
+            var4.startDrawingQuads();
+            var4.addVertexWithUV((double)x + 120, (double)y + h, (double)this.zLevel, (double)((float)(160 + 0) * 0.00390625F), (double)((float)(v + fh) * 0.00390625F));
+            var4.addVertexWithUV((double)x + 120 + 38, (double)y + h, (double)this.zLevel, (double)((float)(160 + 38) * 0.00390625F), (double)((float)(v + fh) * 0.00390625F));
+            var4.addVertexWithUV((double)x + 120 + 38, (double)y + 0, (double)this.zLevel, (double)((float)(160 + 38) * 0.00390625F), (double)((float)(v + 0) * 0.00390625F));
+            var4.addVertexWithUV((double)x + 120 + 0, (double)y + 0, (double)this.zLevel, (double)((float)(160 + 0) * 0.00390625F), (double)((float)(v + 0) * 0.00390625F));
+            var4.draw();
+            var4.startDrawingQuads();
+            var4.addVertexWithUV((double)x + 158 + 0, (double)y + h, (double)this.zLevel, (double)((float)(120 + 0) * 0.00390625F), (double)((float)(v + fh) * 0.00390625F));
+            var4.addVertexWithUV((double)x + 158 + 40, (double)y + h, (double)this.zLevel, (double)((float)(120 + 40) * 0.00390625F), (double)((float)(v + fh) * 0.00390625F));
+            var4.addVertexWithUV((double)x + 158 + 40, (double)y + 0, (double)this.zLevel, (double)((float)(120 + 40) * 0.00390625F), (double)((float)(v + 0) * 0.00390625F));
+            var4.addVertexWithUV((double)x + 158 + 0, (double)y + 0, (double)this.zLevel, (double)((float)(120 + 0) * 0.00390625F), (double)((float)(v + 0) * 0.00390625F));
+            var4.draw();
+            var4.startDrawingQuads();
+            var4.addVertexWithUV((double)x + 198 + 0, (double)y + h, (double)this.zLevel, (double)((float)(198 + 0) * 0.00390625F), (double)((float)(v + fh) * 0.00390625F));
+            var4.addVertexWithUV((double)x + 198 + 58, (double)y + h, (double)this.zLevel, (double)((float)(198 + 58) * 0.00390625F), (double)((float)(v + fh) * 0.00390625F));
+            var4.addVertexWithUV((double)x + 198 + 58, (double)y + 0, (double)this.zLevel, (double)((float)(198 + 58) * 0.00390625F), (double)((float)(v + 0) * 0.00390625F));
+            var4.addVertexWithUV((double)x + 198 + 0, (double)y + 0, (double)this.zLevel, (double)((float)(198 + 0) * 0.00390625F), (double)((float)(v + 0) * 0.00390625F));
+            var4.draw();
         }
         else
         {
-            this.drawTexturedModalRect(var6 + 0, var7 + 0, 0, 0, 155, 44);
-            this.drawTexturedModalRect(var6 + 155, var7 + 0, 0, 45, 155, 44);
+            var4.startDrawingQuads();
+            var4.addVertexWithUV((double)x + 0, (double)y + h, (double)this.zLevel, (double)((float)(u + 0) * 0.00390625F), (double)((float)(v + fh) * 0.00390625F));
+            var4.addVertexWithUV((double)x + w, (double)y + h, (double)this.zLevel, (double)((float)(u + fw) * 0.00390625F), (double)((float)(v + fh) * 0.00390625F));
+            var4.addVertexWithUV((double)x + w, (double)y + 0, (double)this.zLevel, (double)((float)(u + fw) * 0.00390625F), (double)((float)(v + 0) * 0.00390625F));
+            var4.addVertexWithUV((double)x + 0, (double)y + 0, (double)this.zLevel, (double)((float)(u + 0) * 0.00390625F), (double)((float)(v + 0) * 0.00390625F));
+            var4.draw();
+        }
+        if(GuiMainMenu.splashText.equals("umop-apisdn!"))
+        {
+        	GL11.glRotatef(-180.0F, 0.0F, 0.0F, 1.0F);
+        	GL11.glTranslatef((float)(-this.width), (float) (-h - 60), 0.0F);
         }
 
+        super.drawScreen(par1, par2, par3);
         var4.setColorOpaque_I(-1);
         GL11.glPushMatrix();
-        GL11.glTranslatef((float)(this.width / 2 + 90), 70.0F, 0.0F);
+        GL11.glTranslatef((float)(this.width / 2 + var5 / 2 * 0.9), (float) (var7 + h - 4), 0.0F);
         GL11.glRotatef(-20.0F, 0.0F, 0.0F, 1.0F);
         float var8 = 1.8F - MathHelper.abs(MathHelper.sin((float)(Minecraft.getSystemTime() % 1000L) / 1000.0F * (float)Math.PI * 2.0F) * 0.1F);
         var8 = var8 * 100.0F / (float)(this.fontRendererObj.getStringWidth(this.splashText) + 32);
         GL11.glScalef(var8, var8, var8);
         this.drawCenteredString(this.fontRendererObj, this.splashText, 0, -8, -256);
         GL11.glPopMatrix();
-        String var9 = "Minecraft 1.7.2";
+        String var9 = "Minecraft " + (Client.Wurst.MC_VERSION == 4 ? "1.7.2" : "1.7.10");
+        //TODO: Client
+        String wurst9 = Client.Wurst.CLIENT_NAME + " v" + Client.Wurst.CLIENT_VERSION;
 
         if (this.mc.isDemo())
         {
             var9 = var9 + " Demo";
         }
 
-        this.drawString(this.fontRendererObj, var9, 2, this.height - 10, -1);
+        this.drawString(this.fontRendererObj, var9, this.width - this.fontRendererObj.getStringWidth(var9) - 2, this.height - 20, -1);
+        this.drawString(this.fontRendererObj, wurst9, 2, this.height - 20, -1);
         String var10 = "Copyright Mojang AB. Do not distribute!";
+        String wurst10 = "by Alexander01998";
+        this.drawString(this.fontRendererObj, wurst10, 2, this.height - 10, -1);
         this.drawString(this.fontRendererObj, var10, this.width - this.fontRendererObj.getStringWidth(var10) - 2, this.height - 10, -1);
 
         if (this.field_92025_p != null && this.field_92025_p.length() > 0)
@@ -634,8 +727,6 @@ public class GuiMainMenu extends GuiScreen
             this.drawString(this.fontRendererObj, this.field_92025_p, this.field_92022_t, this.field_92021_u, -1);
             this.drawString(this.fontRendererObj, this.field_146972_A, (this.width - this.field_92024_r) / 2, ((GuiButton)this.buttonList.get(0)).field_146129_i - 12, -1);
         }
-
-        super.drawScreen(par1, par2, par3);
     }
 
     /**
diff --git a/net/minecraft/client/gui/GuiMultiplayer.java b/net/minecraft/client/gui/GuiMultiplayer.java
index cf5b458..88689e9 100644
--- a/net/minecraft/client/gui/GuiMultiplayer.java
+++ b/net/minecraft/client/gui/GuiMultiplayer.java
@@ -1,25 +1,46 @@
 package net.minecraft.client.gui;
 
-import com.google.common.base.Splitter;
-import com.google.common.collect.Lists;
+import java.awt.Component;
+import java.awt.HeadlessException;
+import java.io.BufferedReader;
+import java.io.File;
+import java.io.FileReader;
+import java.io.FileWriter;
+import java.io.IOException;
+import java.io.PrintWriter;
 import java.util.List;
+
+import javax.swing.JDialog;
+import javax.swing.JFileChooser;
+import javax.swing.filechooser.FileNameExtensionFilter;
+
 import net.minecraft.client.multiplayer.GuiConnecting;
 import net.minecraft.client.multiplayer.ServerData;
 import net.minecraft.client.multiplayer.ServerList;
 import net.minecraft.client.network.LanServerDetector;
 import net.minecraft.client.network.OldServerPinger;
 import net.minecraft.client.resources.I18n;
+
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 import org.lwjgl.input.Keyboard;
 
+import tk.wurst_client.Client;
+import tk.wurst_client.gui.servers.GuiCleanUp;
+import tk.wurst_client.gui.servers.GuiServerFinder;
+
+import com.google.common.base.Splitter;
+import com.google.common.collect.Lists;
+
 public class GuiMultiplayer extends GuiScreen
 {
     private static final Logger logger = LogManager.getLogger();
     private final OldServerPinger field_146797_f = new OldServerPinger();
     private GuiScreen field_146798_g;
-    private ServerSelectionList field_146803_h;
-    private ServerList field_146804_i;
+    //TODO: Client
+    public ServerSelectionList serverListSelector;
+    public ServerList savedServerList;
+    
     private GuiButton field_146810_r;
     private GuiButton field_146809_s;
     private GuiButton field_146808_t;
@@ -50,8 +71,8 @@ public class GuiMultiplayer extends GuiScreen
         if (!this.field_146801_C)
         {
             this.field_146801_C = true;
-            this.field_146804_i = new ServerList(this.mc);
-            this.field_146804_i.loadServerList();
+            this.savedServerList = new ServerList(this.mc);
+            this.savedServerList.loadServerList();
             this.field_146799_A = new LanServerDetector.LanServerList();
 
             try
@@ -64,18 +85,18 @@ public class GuiMultiplayer extends GuiScreen
                 logger.warn("Unable to start LAN server detection: " + var2.getMessage());
             }
 
-            this.field_146803_h = new ServerSelectionList(this, this.mc, this.width, this.height, 32, this.height - 64, 36);
-            this.field_146803_h.func_148195_a(this.field_146804_i);
+            this.serverListSelector = new ServerSelectionList(this, this.mc, this.width, this.height, 32, this.height - 64, 36);
+            this.serverListSelector.func_148195_a(this.savedServerList);
         }
         else
         {
-            this.field_146803_h.func_148122_a(this.width, this.height, 32, this.height - 64);
+            this.serverListSelector.func_148122_a(this.width, this.height, 32, this.height - 64);
         }
 
-        this.func_146794_g();
+        this.createButtons();
     }
 
-    public void func_146794_g()
+    public void createButtons()
     {
         this.buttonList.add(this.field_146810_r = new GuiButton(7, this.width / 2 - 154, this.height - 28, 70, 20, I18n.format("selectServer.edit", new Object[0])));
         this.buttonList.add(this.field_146808_t = new GuiButton(2, this.width / 2 - 74, this.height - 28, 70, 20, I18n.format("selectServer.delete", new Object[0])));
@@ -84,7 +105,17 @@ public class GuiMultiplayer extends GuiScreen
         this.buttonList.add(new GuiButton(3, this.width / 2 + 4 + 50, this.height - 52, 100, 20, I18n.format("selectServer.add", new Object[0])));
         this.buttonList.add(new GuiButton(8, this.width / 2 + 4, this.height - 28, 70, 20, I18n.format("selectServer.refresh", new Object[0])));
         this.buttonList.add(new GuiButton(0, this.width / 2 + 4 + 76, this.height - 28, 75, 20, I18n.format("gui.cancel", new Object[0])));
-        this.func_146790_a(this.field_146803_h.func_148193_k());
+        //TODO: Client
+        this.buttonList.add(new GuiButton(5, this.width / 2 - 154, 10, 100, 20, "Last server"));
+        this.buttonList.add(new GuiButton(6, this.width / 2 + 4 + 50, 10, 100, 20, "Version: " + (Client.Wurst.MC_VERSION == 4 ? "1.7.2" : "1.7.10")));
+        //this.buttonList.add(new GuiButton(9, this.width / 2 + 16 + 76 + 73, this.height - 40, 100, 20, "Server Finder"));
+        //this.buttonList.add(new GuiButton(10, this.width / 2 - 16 - 76 - 73 - 100, this.height - 40, 100, 20, "Export Serverlist"));
+        this.buttonList.add(new GuiButton(10, this.width / 2 - 154 - 104, this.height - 52, 100, 20, "Import Servers"));
+        this.buttonList.add(new GuiButton(11, this.width / 2 - 154 - 104, this.height - 28, 100, 20, "Export Servers"));
+        this.buttonList.add(new GuiButton(12, this.width / 2 + 154 + 4, this.height - 52, 100, 20, "Server Finder"));
+        this.buttonList.add(new GuiButton(13, this.width / 2 + 154 + 4, this.height - 28, 100, 20, "Clean Up"));
+        this.func_146790_a(this.serverListSelector.func_148193_k());
+    
     }
 
     /**
@@ -98,10 +129,12 @@ public class GuiMultiplayer extends GuiScreen
         {
             List var1 = this.field_146799_A.getLanServers();
             this.field_146799_A.setWasNotUpdated();
-            this.field_146803_h.func_148194_a(var1);
+            this.serverListSelector.func_148194_a(var1);
         }
 
-        this.field_146797_f.func_147223_a();
+        this.field_146797_f.pingPendingNetworks();
+        //TODO: Client
+        ((GuiButton)this.buttonList.get(7)).enabled = Client.Wurst.lastServer != null; //ID: 5
     }
 
     /**
@@ -117,18 +150,18 @@ public class GuiMultiplayer extends GuiScreen
             this.field_146800_B = null;
         }
 
-        this.field_146797_f.func_147226_b();
+        this.field_146797_f.clearPendingNetworks();
     }
 
-    protected void actionPerformed(GuiButton p_146284_1_)
+    protected void actionPerformed(GuiButton button)
     {
-        if (p_146284_1_.enabled)
+        if (button.enabled)
         {
-            GuiListExtended.IGuiListEntry var2 = this.field_146803_h.func_148193_k() < 0 ? null : this.field_146803_h.func_148180_b(this.field_146803_h.func_148193_k());
+            GuiListExtended.IGuiListEntry var2 = this.serverListSelector.func_148193_k() < 0 ? null : this.serverListSelector.func_148180_b(this.serverListSelector.func_148193_k());
 
-            if (p_146284_1_.id == 2 && var2 instanceof ServerListEntryNormal)
+            if (button.id == 2 && var2 instanceof ServerListEntryNormal)
             {
-                String var9 = ((ServerListEntryNormal)var2).func_148296_a().serverName;
+                String var9 = ((ServerListEntryNormal)var2).getServerData().serverName;
 
                 if (var9 != null)
                 {
@@ -137,51 +170,145 @@ public class GuiMultiplayer extends GuiScreen
                     String var5 = "\'" + var9 + "\' " + I18n.format("selectServer.deleteWarning", new Object[0]);
                     String var6 = I18n.format("selectServer.deleteButton", new Object[0]);
                     String var7 = I18n.format("gui.cancel", new Object[0]);
-                    GuiYesNo var8 = new GuiYesNo(this, var4, var5, var6, var7, this.field_146803_h.func_148193_k());
+                    GuiYesNo var8 = new GuiYesNo(this, var4, var5, var6, var7, this.serverListSelector.func_148193_k());
                     this.mc.displayGuiScreen(var8);
                 }
             }
-            else if (p_146284_1_.id == 1)
+            else if (button.id == 1)
             {
                 this.func_146796_h();
             }
-            else if (p_146284_1_.id == 4)
+            else if (button.id == 4)
             {
                 this.field_146813_x = true;
                 this.mc.displayGuiScreen(new GuiScreenServerList(this, this.field_146811_z = new ServerData(I18n.format("selectServer.defaultName", new Object[0]), "")));
             }
-            else if (p_146284_1_.id == 3)
+            else if (button.id == 3)
             {
                 this.field_146806_v = true;
                 this.mc.displayGuiScreen(new GuiScreenAddServer(this, this.field_146811_z = new ServerData(I18n.format("selectServer.defaultName", new Object[0]), "")));
             }
-            else if (p_146284_1_.id == 7 && var2 instanceof ServerListEntryNormal)
+            else if (button.id == 7 && var2 instanceof ServerListEntryNormal)
             {
                 this.field_146805_w = true;
-                ServerData var3 = ((ServerListEntryNormal)var2).func_148296_a();
+                ServerData var3 = ((ServerListEntryNormal)var2).getServerData();
                 this.field_146811_z = new ServerData(var3.serverName, var3.serverIP);
                 this.field_146811_z.setHideAddress(var3.isHidingAddress());
                 this.mc.displayGuiScreen(new GuiScreenAddServer(this, this.field_146811_z));
             }
-            else if (p_146284_1_.id == 0)
+            else if (button.id == 0)
             {
                 this.mc.displayGuiScreen(this.field_146798_g);
             }
-            else if (p_146284_1_.id == 8)
+            else if (button.id == 8)
+            {
+                this.refreshServerList();
+                //TODO: Client
+            }else if(button.id == 5)
+            {//Last Server
+            	if(Client.Wurst.lastServer != null)
+                {
+            		Client.Wurst.currentServerIP = Client.Wurst.lastServer.getServerData().serverIP;
+                    if(!Client.Wurst.currentServerIP.contains(":"))
+                    	Client.Wurst.currentServerIP += ":25565";
+                    this.connectToServer(Client.Wurst.lastServer.getServerData());
+                }
+            }else if(button.id == 6)
+            {//Version
+            	Client.Wurst.MC_VERSION = Client.Wurst.MC_VERSION  == 4 ? 5 : 4;
+            	button.displayString = "Version: " + (Client.Wurst.MC_VERSION == 4 ? "1.7.2" : "1.7.10");
+        	}else if(button.id == 10)
+            {//Import
+            	JFileChooser fileChooser = new JFileChooser(Client.Wurst.fileManager.WurstDir)
+				{
+					protected JDialog createDialog(Component parent) throws HeadlessException
+					{
+						JDialog dialog = super.createDialog(parent);
+						dialog.setAlwaysOnTop(true);
+						return dialog;
+					}
+				};
+            	fileChooser.setFileSelectionMode(JFileChooser.FILES_ONLY);
+            	fileChooser.setAcceptAllFileFilterUsed(false);
+            	fileChooser.addChoosableFileFilter(new FileNameExtensionFilter("TXT files", "txt"));
+            	int action = fileChooser.showOpenDialog(null);
+            	if(action == JFileChooser.APPROVE_OPTION)
+            	{
+            		File file = fileChooser.getSelectedFile();
+            		try
+					{
+						BufferedReader load = new BufferedReader(new FileReader(file));
+						int i = 0;
+						for(String line = ""; (line = load.readLine()) != null;)
+						{
+							i++;
+							GuiMultiplayer.this.savedServerList.addServerData(new ServerData("Grief me #" + i, line));
+							GuiMultiplayer.this.savedServerList.saveServerList();
+							GuiMultiplayer.this.serverListSelector.setSelectedServer(-1);
+						    GuiMultiplayer.this.serverListSelector.func_148195_a(GuiMultiplayer.this.savedServerList);
+						}
+						load.close();
+					}catch(IOException e)
+					{
+						e.printStackTrace();
+					}
+            		GuiMultiplayer.this.refreshServerList();
+            	}
+            }else if(button.id == 11)
+            {//Export
+            	JFileChooser fileChooser = new JFileChooser(Client.Wurst.fileManager.WurstDir)
+				{
+					protected JDialog createDialog(Component parent) throws HeadlessException
+					{
+						JDialog dialog = super.createDialog(parent);
+						dialog.setAlwaysOnTop(true);
+						return dialog;
+					}
+				};
+            	fileChooser.setFileSelectionMode(JFileChooser.FILES_ONLY);
+            	int action = fileChooser.showSaveDialog(null);
+            	if(action == JFileChooser.APPROVE_OPTION)
+            	{
+            		File file = fileChooser.getSelectedFile();
+            		if(!file.getName().endsWith(".txt"))
+            			file = new File(file.getPath() + ".txt");
+            		try
+					{
+						PrintWriter save = new PrintWriter(new FileWriter(file));
+						for(int i = 0; i < GuiMultiplayer.this.savedServerList.countServers(); i++)
+							save.println(GuiMultiplayer.this.savedServerList.getServerData(i).serverIP);
+						save.close();
+					}catch(IOException e)
 					{
-                this.func_146792_q();
+						e.printStackTrace();
+					}
+                }
+            }else if(button.id == 12)
+            {//Server Finder
+            	this.mc.displayGuiScreen(new GuiServerFinder(this));
+            }else if(button.id == 13)
+            {//Clean Up
+            	this.mc.displayGuiScreen(new GuiCleanUp(this));
             }
         }
     }
 
-    private void func_146792_q()
+    private void refreshServerList()
     {
         this.mc.displayGuiScreen(new GuiMultiplayer(this.field_146798_g));
     }
     
+    public void addServer(String name, String ip)
+    {
+    	this.savedServerList.addServerData(new ServerData(name, ip));
+        this.savedServerList.saveServerList();
+        this.serverListSelector.setSelectedServer(-1);
+        this.serverListSelector.func_148195_a(this.savedServerList);
+    }
+
     public void confirmClicked(boolean par1, int par2)
     {
-        GuiListExtended.IGuiListEntry var3 = this.field_146803_h.func_148193_k() < 0 ? null : this.field_146803_h.func_148180_b(this.field_146803_h.func_148193_k());
+        GuiListExtended.IGuiListEntry var3 = this.serverListSelector.func_148193_k() < 0 ? null : this.serverListSelector.func_148180_b(this.serverListSelector.func_148193_k());
 
         if (this.field_146807_u)
         {
@@ -189,10 +316,10 @@ public class GuiMultiplayer extends GuiScreen
 
             if (par1 && var3 instanceof ServerListEntryNormal)
             {
-                this.field_146804_i.removeServerData(this.field_146803_h.func_148193_k());
-                this.field_146804_i.saveServerList();
-                this.field_146803_h.func_148192_c(-1);
-                this.field_146803_h.func_148195_a(this.field_146804_i);
+                this.savedServerList.removeServerData(this.serverListSelector.func_148193_k());
+                this.savedServerList.saveServerList();
+                this.serverListSelector.setSelectedServer(-1);
+                this.serverListSelector.func_148195_a(this.savedServerList);
             }
 
             this.mc.displayGuiScreen(this);
@@ -203,7 +330,7 @@ public class GuiMultiplayer extends GuiScreen
 
             if (par1)
             {
-                this.func_146791_a(this.field_146811_z);
+                this.connectToServer(this.field_146811_z);
             }
             else
             {
@@ -216,10 +343,10 @@ public class GuiMultiplayer extends GuiScreen
 
             if (par1)
             {
-                this.field_146804_i.addServerData(this.field_146811_z);
-                this.field_146804_i.saveServerList();
-                this.field_146803_h.func_148192_c(-1);
-                this.field_146803_h.func_148195_a(this.field_146804_i);
+                this.savedServerList.addServerData(this.field_146811_z);
+                this.savedServerList.saveServerList();
+                this.serverListSelector.setSelectedServer(-1);
+                this.serverListSelector.func_148195_a(this.savedServerList);
             }
 
             this.mc.displayGuiScreen(this);
@@ -230,12 +357,12 @@ public class GuiMultiplayer extends GuiScreen
 
             if (par1 && var3 instanceof ServerListEntryNormal)
             {
-                ServerData var4 = ((ServerListEntryNormal)var3).func_148296_a();
+                ServerData var4 = ((ServerListEntryNormal)var3).getServerData();
                 var4.serverName = this.field_146811_z.serverName;
                 var4.serverIP = this.field_146811_z.serverIP;
                 var4.setHideAddress(this.field_146811_z.isHidingAddress());
-                this.field_146804_i.saveServerList();
-                this.field_146803_h.func_148195_a(this.field_146804_i);
+                this.savedServerList.saveServerList();
+                this.serverListSelector.func_148195_a(this.savedServerList);
             }
 
             this.mc.displayGuiScreen(this);
@@ -247,12 +374,12 @@ public class GuiMultiplayer extends GuiScreen
      */
     protected void keyTyped(char par1, int par2)
     {
-        int var3 = this.field_146803_h.func_148193_k();
-        GuiListExtended.IGuiListEntry var4 = var3 < 0 ? null : this.field_146803_h.func_148180_b(var3);
+        int var3 = this.serverListSelector.func_148193_k();
+        GuiListExtended.IGuiListEntry var4 = var3 < 0 ? null : this.serverListSelector.func_148180_b(var3);
 
         if (par2 == 63)
         {
-            this.func_146792_q();
+            this.refreshServerList();
         }
         else
         {
@@ -264,23 +391,23 @@ public class GuiMultiplayer extends GuiScreen
                     {
                         if (var3 > 0 && var4 instanceof ServerListEntryNormal)
                         {
-                            this.field_146804_i.swapServers(var3, var3 - 1);
-                            this.func_146790_a(this.field_146803_h.func_148193_k() - 1);
-                            this.field_146803_h.func_148145_f(-this.field_146803_h.func_148146_j());
-                            this.field_146803_h.func_148195_a(this.field_146804_i);
+                            this.savedServerList.swapServers(var3, var3 - 1);
+                            this.func_146790_a(this.serverListSelector.func_148193_k() - 1);
+                            this.serverListSelector.func_148145_f(-this.serverListSelector.func_148146_j());
+                            this.serverListSelector.func_148195_a(this.savedServerList);
                         }
                     }
                     else if (var3 > 0)
                     {
-                        this.func_146790_a(this.field_146803_h.func_148193_k() - 1);
-                        this.field_146803_h.func_148145_f(-this.field_146803_h.func_148146_j());
+                        this.func_146790_a(this.serverListSelector.func_148193_k() - 1);
+                        this.serverListSelector.func_148145_f(-this.serverListSelector.func_148146_j());
 
-                        if (this.field_146803_h.func_148180_b(this.field_146803_h.func_148193_k()) instanceof ServerListEntryLanScan)
+                        if (this.serverListSelector.func_148180_b(this.serverListSelector.func_148193_k()) instanceof ServerListEntryLanScan)
                         {
-                            if (this.field_146803_h.func_148193_k() > 0)
+                            if (this.serverListSelector.func_148193_k() > 0)
                             {
-                                this.func_146790_a(this.field_146803_h.getSize() - 1);
-                                this.field_146803_h.func_148145_f(-this.field_146803_h.func_148146_j());
+                                this.func_146790_a(this.serverListSelector.getSize() - 1);
+                                this.serverListSelector.func_148145_f(-this.serverListSelector.func_148146_j());
                             }
                             else
                             {
@@ -297,25 +424,25 @@ public class GuiMultiplayer extends GuiScreen
                 {
                     if (isShiftKeyDown())
                     {
-                        if (var3 < this.field_146804_i.countServers() - 1)
+                        if (var3 < this.savedServerList.countServers() - 1)
                         {
-                            this.field_146804_i.swapServers(var3, var3 + 1);
+                            this.savedServerList.swapServers(var3, var3 + 1);
                             this.func_146790_a(var3 + 1);
-                            this.field_146803_h.func_148145_f(this.field_146803_h.func_148146_j());
-                            this.field_146803_h.func_148195_a(this.field_146804_i);
+                            this.serverListSelector.func_148145_f(this.serverListSelector.func_148146_j());
+                            this.serverListSelector.func_148195_a(this.savedServerList);
                         }
                     }
-                    else if (var3 < this.field_146803_h.getSize())
+                    else if (var3 < this.serverListSelector.getSize())
                     {
-                        this.func_146790_a(this.field_146803_h.func_148193_k() + 1);
-                        this.field_146803_h.func_148145_f(this.field_146803_h.func_148146_j());
+                        this.func_146790_a(this.serverListSelector.func_148193_k() + 1);
+                        this.serverListSelector.func_148145_f(this.serverListSelector.func_148146_j());
 
-                        if (this.field_146803_h.func_148180_b(this.field_146803_h.func_148193_k()) instanceof ServerListEntryLanScan)
+                        if (this.serverListSelector.func_148180_b(this.serverListSelector.func_148193_k()) instanceof ServerListEntryLanScan)
                         {
-                            if (this.field_146803_h.func_148193_k() < this.field_146803_h.getSize() - 1)
+                            if (this.serverListSelector.func_148193_k() < this.serverListSelector.getSize() - 1)
                             {
-                                this.func_146790_a(this.field_146803_h.getSize() + 1);
-                                this.field_146803_h.func_148145_f(this.field_146803_h.func_148146_j());
+                                this.func_146790_a(this.serverListSelector.getSize() + 1);
+                                this.serverListSelector.func_148145_f(this.serverListSelector.func_148146_j());
                             }
                             else
                             {
@@ -351,40 +478,53 @@ public class GuiMultiplayer extends GuiScreen
     {
         this.field_146812_y = null;
         this.drawDefaultBackground();
-        this.field_146803_h.func_148128_a(par1, par2, par3);
-        this.drawCenteredString(this.fontRendererObj, I18n.format("multiplayer.title", new Object[0]), this.width / 2, 20, 16777215);
+        this.serverListSelector.func_148128_a(par1, par2, par3);
+        //TODO: Client
+        this.drawCenteredString(this.fontRendererObj, I18n.format("multiplayer.title", new Object[0]), this.width / 2, 16, 16777215);
         super.drawScreen(par1, par2, par3);
 
         if (this.field_146812_y != null)
         {
-            this.func_146283_a(Lists.newArrayList(Splitter.on("\n").split(this.field_146812_y)), par1, par2);
+            this.drawHoveringText(Lists.newArrayList(Splitter.on("\n").split(this.field_146812_y)), par1, par2);
         }
     }
 
     public void func_146796_h()
     {
-        GuiListExtended.IGuiListEntry var1 = this.field_146803_h.func_148193_k() < 0 ? null : this.field_146803_h.func_148180_b(this.field_146803_h.func_148193_k());
+        GuiListExtended.IGuiListEntry var1 = this.serverListSelector.func_148193_k() < 0 ? null : this.serverListSelector.func_148180_b(this.serverListSelector.func_148193_k());
+        //TODO: Client
+        if(var1 instanceof ServerListEntryNormal)
+        {
+        	Client.Wurst.currentServerIP = ((ServerListEntryNormal) var1).getServerData().serverIP;
+        	if(!Client.Wurst.currentServerIP.contains(":"))
+        		Client.Wurst.currentServerIP += ":25565";
+        	Client.Wurst.lastServer = (ServerListEntryNormal) (this.serverListSelector.func_148193_k() < 0 ? null : this.serverListSelector.func_148180_b(this.serverListSelector.func_148193_k()));
+        }else if(var1 instanceof ServerListEntryLanDetected)
+        {
+        	Client.Wurst.currentServerIP = ((ServerListEntryLanDetected) var1).func_148289_a().getServerIpPort();
+            Client.Wurst.lastServer = new ServerListEntryNormal(this, new ServerData("LAN-Server", Client.Wurst.currentServerIP));
+        }
 
         if (var1 instanceof ServerListEntryNormal)
         {
-            this.func_146791_a(((ServerListEntryNormal)var1).func_148296_a());
+            this.connectToServer(((ServerListEntryNormal)var1).getServerData());
         }
         else if (var1 instanceof ServerListEntryLanDetected)
         {
             LanServerDetector.LanServer var2 = ((ServerListEntryLanDetected)var1).func_148289_a();
-            this.func_146791_a(new ServerData(var2.getServerMotd(), var2.getServerIpPort()));
+            this.connectToServer(new ServerData(var2.getServerMotd(), var2.getServerIpPort()));
         }
     }
 
-    private void func_146791_a(ServerData p_146791_1_)
+    private void connectToServer(ServerData p_146791_1_)
     {
         this.mc.displayGuiScreen(new GuiConnecting(this, this.mc, p_146791_1_));
     }
 
     public void func_146790_a(int p_146790_1_)
     {
-        this.field_146803_h.func_148192_c(p_146790_1_);
-        GuiListExtended.IGuiListEntry var2 = p_146790_1_ < 0 ? null : this.field_146803_h.func_148180_b(p_146790_1_);
+        this.serverListSelector.setSelectedServer(p_146790_1_);
+        GuiListExtended.IGuiListEntry var2 = p_146790_1_ < 0 ? null : this.serverListSelector.func_148180_b(p_146790_1_);
         this.field_146809_s.enabled = false;
         this.field_146810_r.enabled = false;
         this.field_146808_t.enabled = false;
@@ -417,17 +557,17 @@ public class GuiMultiplayer extends GuiScreen
     protected void mouseClicked(int par1, int par2, int par3)
     {
         super.mouseClicked(par1, par2, par3);
-        this.field_146803_h.func_148179_a(par1, par2, par3);
+        this.serverListSelector.func_148179_a(par1, par2, par3);
     }
 
     protected void mouseMovedOrUp(int p_146286_1_, int p_146286_2_, int p_146286_3_)
     {
         super.mouseMovedOrUp(p_146286_1_, p_146286_2_, p_146286_3_);
-        this.field_146803_h.func_148181_b(p_146286_1_, p_146286_2_, p_146286_3_);
+        this.serverListSelector.func_148181_b(p_146286_1_, p_146286_2_, p_146286_3_);
     }
 
     public ServerList func_146795_p()
     {
-        return this.field_146804_i;
+        return this.savedServerList;
     }
 }
diff --git a/net/minecraft/client/gui/GuiNewChat.java b/net/minecraft/client/gui/GuiNewChat.java
index 253a16c..e6eac29 100644
--- a/net/minecraft/client/gui/GuiNewChat.java
+++ b/net/minecraft/client/gui/GuiNewChat.java
@@ -1,19 +1,26 @@
 package net.minecraft.client.gui;
 
-import com.google.common.collect.Lists;
 import java.util.ArrayList;
 import java.util.Iterator;
 import java.util.List;
+
 import net.minecraft.client.Minecraft;
 import net.minecraft.entity.player.EntityPlayer;
 import net.minecraft.util.ChatComponentText;
 import net.minecraft.util.EnumChatFormatting;
 import net.minecraft.util.IChatComponent;
 import net.minecraft.util.MathHelper;
+
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 import org.lwjgl.opengl.GL11;
 
+import tk.wurst_client.Client;
+import tk.wurst_client.module.Module;
+import tk.wurst_client.module.modules.AntiSpam;
+
+import com.google.common.collect.Lists;
+
 public class GuiNewChat extends Gui
 {
     private static final Logger logger = LogManager.getLogger();
@@ -110,15 +117,15 @@ public class GuiNewChat extends Gui
                     GL11.glTranslatef(-3.0F, 0.0F, 0.0F);
                     int var18 = var5 * var9 + var5;
                     var11 = var4 * var9 + var4;
-                    int var19 = this.field_146250_j * var11 / var5;
+                    int var20 = this.field_146250_j * var11 / var5;
                     int var13 = var11 * var11 / var18;
 
                     if (var18 != var11)
                     {
-                        var14 = var19 > 0 ? 170 : 96;
-                        int var20 = this.field_146251_k ? 13382451 : 3355562;
-                        drawRect(0, -var19, 2, -var19 - var13, var20 + (var14 << 24));
-                        drawRect(2, -var19, 1, -var19 - var13, 13421772 + (var14 << 24));
+                        var14 = var20 > 0 ? 170 : 96;
+                        int var19 = this.field_146251_k ? 13382451 : 3355562;
+                        drawRect(0, -var20, 2, -var20 - var13, var19 + (var14 << 24));
+                        drawRect(2, -var20, 1, -var20 - var13, 13421772 + (var14 << 24));
                     }
                 }
 
@@ -143,6 +150,11 @@ public class GuiNewChat extends Gui
     {
         this.func_146237_a(p_146234_1_, p_146234_2_, this.field_146247_f.ingameGUI.getUpdateCounter(), false);
         logger.info("[CHAT] " + p_146234_1_.getUnformattedText());
+    	//TODO: Client
+        for(Module eventModule : Client.Wurst.moduleManager.activeModules)
+    	{
+    		eventModule.onReceivedMessage(p_146234_1_.getUnformattedText());
+    	}
     }
 
     private String func_146235_b(String p_146235_1_)
@@ -217,20 +229,48 @@ public class GuiNewChat extends Gui
         }
 
         var8.add(var7);
-        boolean var20 = this.func_146241_e();
+        boolean var21 = this.func_146241_e();
         IChatComponent var22;
 
-        for (Iterator var21 = var8.iterator(); var21.hasNext(); this.field_146253_i.add(0, new ChatLine(p_146237_3_, var22, p_146237_2_)))
+        for (Iterator var20 = var8.iterator(); var20.hasNext(); this.field_146253_i.add(0, new ChatLine(p_146237_3_, var22, p_146237_2_)))
         {
-            var22 = (IChatComponent)var21.next();
+            var22 = (IChatComponent)var20.next();
 
-            if (var20 && this.field_146250_j > 0)
+            if (var21 && this.field_146250_j > 0)
             {
                 this.field_146251_k = true;
                 this.func_146229_b(1);
             }
         }
 
+        //TODO: Client
+        if(this.field_146253_i.size() > 1 && Client.Wurst.moduleManager.getModuleFromClass(AntiSpam.class).getToggled())
+        {
+        	for(int i = this.field_146253_i.size() - 1; i >= 1; i--)
+        	{
+        		for(int i2 = i - 1; i2 >= 0; i2--)
+        		{
+        			if(this.field_146253_i.size() <= i)//Shouldn't ever happen, but for some reason, it happens sometimes.
+        				continue;
+        			if(((ChatLine) this.field_146253_i.get(i)).func_151461_a().getUnformattedText().startsWith(((ChatLine) this.field_146253_i.get(i2)).func_151461_a().getUnformattedText()))
+                    {
+                    	if
+                    	(
+                    		((ChatLine) this.field_146253_i.get(i)).func_151461_a().getUnformattedText().endsWith("]")
+                    		&& ((ChatLine) this.field_146253_i.get(i)).func_151461_a().getUnformattedText().contains(" [x")
+                    	)
+                    	{
+                    		int numberIndex1 = ((ChatLine) this.field_146253_i.get(i)).func_151461_a().getUnformattedText().lastIndexOf(" [x") + 3;
+                    		int numberIndex2 = ((ChatLine) this.field_146253_i.get(i)).func_151461_a().getUnformattedText().length() - 1;
+                    		int number = Integer.valueOf(((ChatLine) this.field_146253_i.get(i)).func_151461_a().getUnformattedText().substring(numberIndex1, numberIndex2));
+                    		((ChatLine) this.field_146253_i.get(i2)).func_151461_a().appendText(" [x" + (number + 1) + "]");
+                    	}else
+                    		((ChatLine) this.field_146253_i.get(i2)).func_151461_a().appendText(" [x2]");
+                    	this.field_146253_i.remove(i);
+                    }
+        		}
+        	}
+        }
         while (this.field_146253_i.size() > 100)
         {
             this.field_146253_i.remove(this.field_146253_i.size() - 1);
diff --git a/net/minecraft/client/gui/GuiRepair.java b/net/minecraft/client/gui/GuiRepair.java
index eac3b73..9ff908c 100644
--- a/net/minecraft/client/gui/GuiRepair.java
+++ b/net/minecraft/client/gui/GuiRepair.java
@@ -45,7 +45,7 @@ public class GuiRepair extends GuiContainer implements ICrafting
         this.field_147091_w.func_146193_g(-1);
         this.field_147091_w.func_146204_h(-1);
         this.field_147091_w.func_146185_a(false);
-        this.field_147091_w.func_146203_f(40);
+        this.field_147091_w.setMaxStringLength(40);
         this.field_147002_h.removeCraftingFromCrafters(this);
         this.field_147002_h.addCraftingToCrafters(this);
     }
diff --git a/net/minecraft/client/gui/GuiScreen.java b/net/minecraft/client/gui/GuiScreen.java
index ee65658..244f98e 100644
--- a/net/minecraft/client/gui/GuiScreen.java
+++ b/net/minecraft/client/gui/GuiScreen.java
@@ -28,7 +28,8 @@ public class GuiScreen extends Gui
     protected static RenderItem itemRender = new RenderItem();
 
     /** Reference to the Minecraft object. */
-    protected Minecraft mc;
+    //TODO: Client
+    public static Minecraft mc;
 
     /** The width of the screen object. */
     public int width;
@@ -137,15 +138,15 @@ public class GuiScreen extends Gui
             }
         }
 
-        this.func_146283_a(var4, p_146285_2_, p_146285_3_);
+        this.drawHoveringText(var4, p_146285_2_, p_146285_3_);
     }
 
     protected void func_146279_a(String p_146279_1_, int p_146279_2_, int p_146279_3_)
     {
-        this.func_146283_a(Arrays.asList(new String[] {p_146279_1_}), p_146279_2_, p_146279_3_);
+        this.drawHoveringText(Arrays.asList(new String[] {p_146279_1_}), p_146279_2_, p_146279_3_);
     }
 
-    protected void func_146283_a(List p_146283_1_, int p_146283_2_, int p_146283_3_)
+    protected void drawHoveringText(List p_146283_1_, int p_146283_2_, int p_146283_3_)
     {
         if (!p_146283_1_.isEmpty())
         {
diff --git a/net/minecraft/client/gui/GuiScreenAddServer.java b/net/minecraft/client/gui/GuiScreenAddServer.java
index d6f00e4..896f4f4 100644
--- a/net/minecraft/client/gui/GuiScreenAddServer.java
+++ b/net/minecraft/client/gui/GuiScreenAddServer.java
@@ -40,7 +40,7 @@ public class GuiScreenAddServer extends GuiScreen
         this.field_146309_g.setFocused(true);
         this.field_146309_g.setText(this.field_146311_h.serverName);
         this.field_146308_f = new GuiTextField(this.fontRendererObj, this.width / 2 - 100, 106, 200, 20);
-        this.field_146308_f.func_146203_f(128);
+        this.field_146308_f.setMaxStringLength(128);
         this.field_146308_f.setText(this.field_146311_h.serverIP);
         ((GuiButton)this.buttonList.get(0)).enabled = this.field_146308_f.getText().length() > 0 && this.field_146308_f.getText().split(":").length > 0 && this.field_146309_g.getText().length() > 0;
     }
diff --git a/net/minecraft/client/gui/GuiScreenDisconnectedOnline.java b/net/minecraft/client/gui/GuiScreenDisconnectedOnline.java
index 05b074a..77c9974 100644
--- a/net/minecraft/client/gui/GuiScreenDisconnectedOnline.java
+++ b/net/minecraft/client/gui/GuiScreenDisconnectedOnline.java
@@ -2,8 +2,11 @@ package net.minecraft.client.gui;
 
 import java.util.Iterator;
 import java.util.List;
+
+import net.minecraft.client.multiplayer.GuiConnecting;
 import net.minecraft.client.resources.I18n;
 import net.minecraft.util.IChatComponent;
+import tk.wurst_client.Client;
 
 public class GuiScreenDisconnectedOnline extends GuiScreen
 {
@@ -11,6 +14,8 @@ public class GuiScreenDisconnectedOnline extends GuiScreen
     private IChatComponent field_146865_f;
     private List field_146866_g;
     private final GuiScreen field_146868_h;
+    //TODO: Client
+	private int autoReconnectTimer;
     private static final String __OBFID = "CL_00000778";
 
     public GuiScreenDisconnectedOnline(GuiScreen p_i45037_1_, String p_i45037_2_, IChatComponent p_i45037_3_)
@@ -32,14 +37,57 @@ public class GuiScreenDisconnectedOnline extends GuiScreen
     {
         this.buttonList.clear();
         this.buttonList.add(new GuiButton(0, this.width / 2 - 100, this.height / 4 + 120 + 12, I18n.format("gui.back", new Object[0])));
+        //TODO: Client
+        this.buttonList.add(new GuiButton(1, this.width / 2 - 100, this.height / 4 + 144 + 12, "Reconnect"));
+        this.buttonList.add(new GuiButton(2, this.width / 2 - 100, this.height / 4 + 168 + 12, "AutoReconnect"));
         this.field_146866_g = this.fontRendererObj.listFormattedStringToWidth(this.field_146865_f.getFormattedText(), this.width - 50);
+        if(Client.Wurst.options.autoReconnect)
+        	this.autoReconnectTimer = 100;
+    }
+
+    //TODO: Client
+    /**
+     * Called from the main game loop to update the screen.
+     */
+    public void updateScreen()
+    {
+        super.updateScreen();
+        if(Client.Wurst.options.autoReconnect)
+        {
+        	((GuiButton)this.buttonList.get(2)).displayString = "AutoReconnect (" + ((this.autoReconnectTimer / 20) + 1) + ")";
+        	if(this.autoReconnectTimer > 0)
+        		this.autoReconnectTimer--;
+        	else
+        		this.actionPerformed((GuiButton) this.buttonList.get(1));
+        }
+        else
+        {
+        	((GuiButton)this.buttonList.get(2)).displayString = "AutoReconnect";
+        }
     }
 
     protected void actionPerformed(GuiButton p_146284_1_)
     {
+    	if(!p_146284_1_.enabled)
+    		return;
         if (p_146284_1_.id == 0)
         {
             this.mc.displayGuiScreen(this.field_146868_h);
+        }else if (p_146284_1_.id == 1)
+        {//TODO: Client
+        	if (Client.Wurst.lastServer != null)
+            {
+        		Client.Wurst.currentServerIP = Client.Wurst.lastServer.getServerData().serverIP;
+                if(!Client.Wurst.currentServerIP.contains(":"))
+                	Client.Wurst.currentServerIP += ":25565";
+                this.mc.displayGuiScreen(new GuiConnecting(this, this.mc, Client.Wurst.lastServer.getServerData()));
+            }
+        }else if (p_146284_1_.id == 2)
+        {
+        	Client.Wurst.options.autoReconnect = !Client.Wurst.options.autoReconnect;
+        	Client.Wurst.fileManager.saveValues();
+        	if(Client.Wurst.options.autoReconnect)
+        		this.autoReconnectTimer = 100;
         }
     }
 
diff --git a/net/minecraft/client/gui/GuiScreenEditOnlineWorld.java b/net/minecraft/client/gui/GuiScreenEditOnlineWorld.java
index e6593f4..afa94cf 100644
--- a/net/minecraft/client/gui/GuiScreenEditOnlineWorld.java
+++ b/net/minecraft/client/gui/GuiScreenEditOnlineWorld.java
@@ -57,10 +57,10 @@ public class GuiScreenEditOnlineWorld extends GuiScreen
         this.buttonList.add(new GuiButton(1, this.field_146856_v, this.height / 4 + 120 + 22, this.field_146858_u, 20, I18n.format("gui.cancel", new Object[0])));
         this.field_146864_i = new GuiTextField(this.fontRendererObj, this.field_146859_t, 56, 212, 20);
         this.field_146864_i.setFocused(true);
-        this.field_146864_i.func_146203_f(32);
+        this.field_146864_i.setMaxStringLength(32);
         this.field_146864_i.setText(this.field_146861_r.func_148801_b());
         this.field_146863_h = new GuiTextField(this.fontRendererObj, this.field_146859_t, 96, 212, 20);
-        this.field_146863_h.func_146203_f(32);
+        this.field_146863_h.setMaxStringLength(32);
         this.field_146863_h.setText(this.field_146861_r.func_148800_a());
         this.field_146854_w = new GuiScreenOnlineServersSubscreen(this.width, this.height, this.field_146859_t, 122, this.field_146861_r.field_148820_i, this.field_146861_r.field_148817_j);
         this.buttonList.addAll(this.field_146854_w.field_148405_a);
diff --git a/net/minecraft/client/gui/GuiScreenSelectLocation.java b/net/minecraft/client/gui/GuiScreenSelectLocation.java
index 7d880e0..952b746 100644
--- a/net/minecraft/client/gui/GuiScreenSelectLocation.java
+++ b/net/minecraft/client/gui/GuiScreenSelectLocation.java
@@ -130,7 +130,7 @@ public abstract class GuiScreenSelectLocation
         int var10;
         int var11;
         int var13;
-        int var20;
+        int var19;
 
         if (Mouse.isButtonDown(0))
         {
@@ -161,11 +161,11 @@ public abstract class GuiScreenSelectLocation
                     if (p_148350_1_ >= var5 && p_148350_1_ <= var6)
                     {
                         this.field_148369_n = -1.0F;
-                        var20 = this.func_148347_d();
+                        var19 = this.func_148347_d();
 
-                        if (var20 < 1)
+                        if (var19 < 1)
                         {
-                            var20 = 1;
+                            var19 = 1;
                         }
 
                         var13 = (int)((float)((this.field_148367_c - this.field_148366_b) * (this.field_148367_c - this.field_148366_b)) / (float)this.func_148351_b());
@@ -180,7 +180,7 @@ public abstract class GuiScreenSelectLocation
                             var13 = this.field_148367_c - this.field_148366_b - 8;
                         }
 
-                        this.field_148369_n /= (float)(this.field_148367_c - this.field_148366_b - var13) / (float)var20;
+                        this.field_148369_n /= (float)(this.field_148367_c - this.field_148366_b - var13) / (float)var19;
                     }
                     else
                     {
@@ -257,10 +257,10 @@ public abstract class GuiScreenSelectLocation
 
         for (var11 = 0; var11 < var4; ++var11)
         {
-            var20 = var10 + var11 * this.field_148364_d + this.field_148377_t;
+            var19 = var10 + var11 * this.field_148364_d + this.field_148377_t;
             var13 = this.field_148364_d - 4;
 
-            if (var20 <= this.field_148367_c && var20 + var13 >= this.field_148366_b)
+            if (var19 <= this.field_148367_c && var19 + var13 >= this.field_148366_b)
             {
                 int var15;
 
@@ -272,10 +272,10 @@ public abstract class GuiScreenSelectLocation
                     GL11.glDisable(GL11.GL_TEXTURE_2D);
                     var18.startDrawingQuads();
                     var18.setColorOpaque_I(0);
-                    var18.addVertexWithUV((double)var14, (double)(var20 + var13 + 2), 0.0D, 0.0D, 1.0D);
-                    var18.addVertexWithUV((double)var15, (double)(var20 + var13 + 2), 0.0D, 1.0D, 1.0D);
-                    var18.addVertexWithUV((double)var15, (double)(var20 - 2), 0.0D, 1.0D, 0.0D);
-                    var18.addVertexWithUV((double)var14, (double)(var20 - 2), 0.0D, 0.0D, 0.0D);
+                    var18.addVertexWithUV((double)var14, (double)(var19 + var13 + 2), 0.0D, 0.0D, 1.0D);
+                    var18.addVertexWithUV((double)var15, (double)(var19 + var13 + 2), 0.0D, 1.0D, 1.0D);
+                    var18.addVertexWithUV((double)var15, (double)(var19 - 2), 0.0D, 1.0D, 0.0D);
+                    var18.addVertexWithUV((double)var14, (double)(var19 - 2), 0.0D, 0.0D, 0.0D);
                     var18.draw();
                     GL11.glEnable(GL11.GL_TEXTURE_2D);
                 }
@@ -288,25 +288,25 @@ public abstract class GuiScreenSelectLocation
                     GL11.glDisable(GL11.GL_TEXTURE_2D);
                     var18.startDrawingQuads();
                     var18.setColorOpaque_I(8421504);
-                    var18.addVertexWithUV((double)var14, (double)(var20 + var13 + 2), 0.0D, 0.0D, 1.0D);
-                    var18.addVertexWithUV((double)var15, (double)(var20 + var13 + 2), 0.0D, 1.0D, 1.0D);
-                    var18.addVertexWithUV((double)var15, (double)(var20 - 2), 0.0D, 1.0D, 0.0D);
-                    var18.addVertexWithUV((double)var14, (double)(var20 - 2), 0.0D, 0.0D, 0.0D);
+                    var18.addVertexWithUV((double)var14, (double)(var19 + var13 + 2), 0.0D, 0.0D, 1.0D);
+                    var18.addVertexWithUV((double)var15, (double)(var19 + var13 + 2), 0.0D, 1.0D, 1.0D);
+                    var18.addVertexWithUV((double)var15, (double)(var19 - 2), 0.0D, 1.0D, 0.0D);
+                    var18.addVertexWithUV((double)var14, (double)(var19 - 2), 0.0D, 0.0D, 0.0D);
                     var18.setColorOpaque_I(0);
-                    var18.addVertexWithUV((double)(var14 + 1), (double)(var20 + var13 + 1), 0.0D, 0.0D, 1.0D);
-                    var18.addVertexWithUV((double)(var15 - 1), (double)(var20 + var13 + 1), 0.0D, 1.0D, 1.0D);
-                    var18.addVertexWithUV((double)(var15 - 1), (double)(var20 - 1), 0.0D, 1.0D, 0.0D);
-                    var18.addVertexWithUV((double)(var14 + 1), (double)(var20 - 1), 0.0D, 0.0D, 0.0D);
+                    var18.addVertexWithUV((double)(var14 + 1), (double)(var19 + var13 + 1), 0.0D, 0.0D, 1.0D);
+                    var18.addVertexWithUV((double)(var15 - 1), (double)(var19 + var13 + 1), 0.0D, 1.0D, 1.0D);
+                    var18.addVertexWithUV((double)(var15 - 1), (double)(var19 - 1), 0.0D, 1.0D, 0.0D);
+                    var18.addVertexWithUV((double)(var14 + 1), (double)(var19 - 1), 0.0D, 0.0D, 0.0D);
                     var18.draw();
                     GL11.glEnable(GL11.GL_TEXTURE_2D);
                 }
 
-                this.func_148348_a(var11, var9, var20, var13, var18);
+                this.func_148348_a(var11, var9, var19, var13, var18);
             }
         }
 
         GL11.glDisable(GL11.GL_DEPTH_TEST);
-        byte var19 = 4;
+        byte var20 = 4;
         this.func_148345_b(0, this.field_148366_b, 255, 255);
         this.func_148345_b(this.field_148367_c, this.field_148375_h, 255, 255);
         GL11.glEnable(GL11.GL_BLEND);
@@ -316,8 +316,8 @@ public abstract class GuiScreenSelectLocation
         GL11.glDisable(GL11.GL_TEXTURE_2D);
         var18.startDrawingQuads();
         var18.setColorRGBA_I(0, 0);
-        var18.addVertexWithUV((double)this.field_148373_j, (double)(this.field_148366_b + var19), 0.0D, 0.0D, 1.0D);
-        var18.addVertexWithUV((double)this.field_148376_i, (double)(this.field_148366_b + var19), 0.0D, 1.0D, 1.0D);
+        var18.addVertexWithUV((double)this.field_148373_j, (double)(this.field_148366_b + var20), 0.0D, 0.0D, 1.0D);
+        var18.addVertexWithUV((double)this.field_148376_i, (double)(this.field_148366_b + var20), 0.0D, 1.0D, 1.0D);
         var18.setColorRGBA_I(0, 255);
         var18.addVertexWithUV((double)this.field_148376_i, (double)this.field_148366_b, 0.0D, 1.0D, 0.0D);
         var18.addVertexWithUV((double)this.field_148373_j, (double)this.field_148366_b, 0.0D, 0.0D, 0.0D);
@@ -327,12 +327,12 @@ public abstract class GuiScreenSelectLocation
         var18.addVertexWithUV((double)this.field_148373_j, (double)this.field_148367_c, 0.0D, 0.0D, 1.0D);
         var18.addVertexWithUV((double)this.field_148376_i, (double)this.field_148367_c, 0.0D, 1.0D, 1.0D);
         var18.setColorRGBA_I(0, 0);
-        var18.addVertexWithUV((double)this.field_148376_i, (double)(this.field_148367_c - var19), 0.0D, 1.0D, 0.0D);
-        var18.addVertexWithUV((double)this.field_148373_j, (double)(this.field_148367_c - var19), 0.0D, 0.0D, 0.0D);
+        var18.addVertexWithUV((double)this.field_148376_i, (double)(this.field_148367_c - var20), 0.0D, 1.0D, 0.0D);
+        var18.addVertexWithUV((double)this.field_148373_j, (double)(this.field_148367_c - var20), 0.0D, 0.0D, 0.0D);
         var18.draw();
-        var20 = this.func_148347_d();
+        var19 = this.func_148347_d();
 
-        if (var20 > 0)
+        if (var19 > 0)
         {
             var13 = (this.field_148367_c - this.field_148366_b) * (this.field_148367_c - this.field_148366_b) / this.func_148351_b();
 
@@ -346,7 +346,7 @@ public abstract class GuiScreenSelectLocation
                 var13 = this.field_148367_c - this.field_148366_b - 8;
             }
 
-            var14 = (int)this.field_148370_o * (this.field_148367_c - this.field_148366_b - var13) / var20 + this.field_148366_b;
+            var14 = (int)this.field_148370_o * (this.field_148367_c - this.field_148366_b - var13) / var19 + this.field_148366_b;
 
             if (var14 < this.field_148366_b)
             {
diff --git a/net/minecraft/client/gui/GuiScreenServerList.java b/net/minecraft/client/gui/GuiScreenServerList.java
index c531cc3..db69670 100644
--- a/net/minecraft/client/gui/GuiScreenServerList.java
+++ b/net/minecraft/client/gui/GuiScreenServerList.java
@@ -2,8 +2,11 @@ package net.minecraft.client.gui;
 
 import net.minecraft.client.multiplayer.ServerData;
 import net.minecraft.client.resources.I18n;
+
 import org.lwjgl.input.Keyboard;
 
+import tk.wurst_client.Client;
+
 public class GuiScreenServerList extends GuiScreen
 {
     private final GuiScreen field_146303_a;
@@ -35,7 +38,7 @@ public class GuiScreenServerList extends GuiScreen
         this.buttonList.add(new GuiButton(0, this.width / 2 - 100, this.height / 4 + 96 + 12, I18n.format("selectServer.select", new Object[0])));
         this.buttonList.add(new GuiButton(1, this.width / 2 - 100, this.height / 4 + 120 + 12, I18n.format("gui.cancel", new Object[0])));
         this.field_146302_g = new GuiTextField(this.fontRendererObj, this.width / 2 - 100, 116, 200, 20);
-        this.field_146302_g.func_146203_f(128);
+        this.field_146302_g.setMaxStringLength(128);
         this.field_146302_g.setFocused(true);
         this.field_146302_g.setText(this.mc.gameSettings.lastServer);
         ((GuiButton)this.buttonList.get(0)).enabled = this.field_146302_g.getText().length() > 0 && this.field_146302_g.getText().split(":").length > 0;
@@ -62,6 +65,12 @@ public class GuiScreenServerList extends GuiScreen
             else if (p_146284_1_.id == 0)
             {
                 this.field_146301_f.serverIP = this.field_146302_g.getText();
+                //TODO: Client
+                Client.Wurst.lastServer = null;
+                Client.Wurst.lastServer = new ServerListEntryNormal((GuiMultiplayer) this.field_146303_a, this.field_146301_f);
+                Client.Wurst.currentServerIP = this.field_146302_g.getText();
+                if(!Client.Wurst.currentServerIP.contains(":"))
+                	Client.Wurst.currentServerIP += ":25565";
                 this.field_146303_a.confirmClicked(true, 0);
             }
         }
diff --git a/net/minecraft/client/gui/GuiSlot.java b/net/minecraft/client/gui/GuiSlot.java
index 52fb714..f53ea5e 100644
--- a/net/minecraft/client/gui/GuiSlot.java
+++ b/net/minecraft/client/gui/GuiSlot.java
@@ -191,7 +191,7 @@ public abstract class GuiSlot
             {
                 if (this.field_148157_o == -1.0F)
                 {
-                    boolean var16 = true;
+                    boolean var15 = true;
 
                     if (p_148128_2_ >= this.field_148153_b && p_148128_2_ <= this.field_148154_c)
                     {
@@ -210,7 +210,7 @@ public abstract class GuiSlot
                         else if (p_148128_1_ >= var8 && p_148128_1_ <= var9 && var10 < 0)
                         {
                             this.func_148132_a(p_148128_1_ - var8, p_148128_2_ - this.field_148153_b + (int)this.field_148169_q - 4);
-                            var16 = false;
+                            var15 = false;
                         }
 
                         if (p_148128_1_ >= var5 && p_148128_1_ <= var6)
@@ -242,7 +242,7 @@ public abstract class GuiSlot
                             this.field_148170_p = 1.0F;
                         }
 
-                        if (var16)
+                        if (var15)
                         {
                             this.field_148157_o = (float)p_148128_2_;
                         }
@@ -293,13 +293,13 @@ public abstract class GuiSlot
         Tessellator var17 = Tessellator.instance;
         this.field_148161_k.getTextureManager().bindTexture(Gui.optionsBackground);
         GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
-        float var15 = 32.0F;
+        float var16 = 32.0F;
         var17.startDrawingQuads();
         var17.setColorOpaque_I(2105376);
-        var17.addVertexWithUV((double)this.field_148152_e, (double)this.field_148154_c, 0.0D, (double)((float)this.field_148152_e / var15), (double)((float)(this.field_148154_c + (int)this.field_148169_q) / var15));
-        var17.addVertexWithUV((double)this.field_148151_d, (double)this.field_148154_c, 0.0D, (double)((float)this.field_148151_d / var15), (double)((float)(this.field_148154_c + (int)this.field_148169_q) / var15));
-        var17.addVertexWithUV((double)this.field_148151_d, (double)this.field_148153_b, 0.0D, (double)((float)this.field_148151_d / var15), (double)((float)(this.field_148153_b + (int)this.field_148169_q) / var15));
-        var17.addVertexWithUV((double)this.field_148152_e, (double)this.field_148153_b, 0.0D, (double)((float)this.field_148152_e / var15), (double)((float)(this.field_148153_b + (int)this.field_148169_q) / var15));
+        var17.addVertexWithUV((double)this.field_148152_e, (double)this.field_148154_c, 0.0D, (double)((float)this.field_148152_e / var16), (double)((float)(this.field_148154_c + (int)this.field_148169_q) / var16));
+        var17.addVertexWithUV((double)this.field_148151_d, (double)this.field_148154_c, 0.0D, (double)((float)this.field_148151_d / var16), (double)((float)(this.field_148154_c + (int)this.field_148169_q) / var16));
+        var17.addVertexWithUV((double)this.field_148151_d, (double)this.field_148153_b, 0.0D, (double)((float)this.field_148151_d / var16), (double)((float)(this.field_148153_b + (int)this.field_148169_q) / var16));
+        var17.addVertexWithUV((double)this.field_148152_e, (double)this.field_148153_b, 0.0D, (double)((float)this.field_148152_e / var16), (double)((float)(this.field_148153_b + (int)this.field_148169_q) / var16));
         var17.draw();
         var9 = this.field_148152_e + this.field_148155_a / 2 - this.func_148139_c() / 2 + 2;
         var10 = this.field_148153_b + 4 - (int)this.field_148169_q;
diff --git a/net/minecraft/client/gui/GuiTextField.java b/net/minecraft/client/gui/GuiTextField.java
index d4aa8cd..1bbcf69 100644
--- a/net/minecraft/client/gui/GuiTextField.java
+++ b/net/minecraft/client/gui/GuiTextField.java
@@ -11,8 +11,8 @@ public class GuiTextField extends Gui
     private final int field_146210_g;
     private final int field_146218_h;
     private final int field_146219_i;
-    private String field_146216_j = "";
-    private int field_146217_k = 32;
+    private String text = "";
+    private int maxStringLength = 32;
     private int field_146214_l;
     private boolean field_146215_m = true;
     private boolean field_146212_n = true;
@@ -48,13 +48,13 @@ public class GuiTextField extends Gui
      */
     public void setText(String p_146180_1_)
     {
-        if (p_146180_1_.length() > this.field_146217_k)
+        if (p_146180_1_.length() > this.maxStringLength)
         {
-            this.field_146216_j = p_146180_1_.substring(0, this.field_146217_k);
+            this.text = p_146180_1_.substring(0, this.maxStringLength);
         }
         else
         {
-            this.field_146216_j = p_146180_1_;
+            this.text = p_146180_1_;
         }
 
         this.func_146202_e();
@@ -65,14 +65,14 @@ public class GuiTextField extends Gui
      */
     public String getText()
     {
-        return this.field_146216_j;
+        return this.text;
     }
 
     public String func_146207_c()
     {
         int var1 = this.field_146224_r < this.field_146223_s ? this.field_146224_r : this.field_146223_s;
         int var2 = this.field_146224_r < this.field_146223_s ? this.field_146223_s : this.field_146224_r;
-        return this.field_146216_j.substring(var1, var2);
+        return this.text.substring(var1, var2);
     }
 
     public void func_146191_b(String p_146191_1_)
@@ -81,12 +81,12 @@ public class GuiTextField extends Gui
         String var3 = ChatAllowedCharacters.filerAllowedCharacters(p_146191_1_);
         int var4 = this.field_146224_r < this.field_146223_s ? this.field_146224_r : this.field_146223_s;
         int var5 = this.field_146224_r < this.field_146223_s ? this.field_146223_s : this.field_146224_r;
-        int var6 = this.field_146217_k - this.field_146216_j.length() - (var4 - this.field_146223_s);
+        int var6 = this.maxStringLength - this.text.length() - (var4 - this.field_146223_s);
         boolean var7 = false;
 
-        if (this.field_146216_j.length() > 0)
+        if (this.text.length() > 0)
         {
-            var2 = var2 + this.field_146216_j.substring(0, var4);
+            var2 = var2 + this.text.substring(0, var4);
         }
 
         int var8;
@@ -102,18 +102,18 @@ public class GuiTextField extends Gui
             var8 = var3.length();
         }
 
-        if (this.field_146216_j.length() > 0 && var5 < this.field_146216_j.length())
+        if (this.text.length() > 0 && var5 < this.text.length())
         {
-            var2 = var2 + this.field_146216_j.substring(var5);
+            var2 = var2 + this.text.substring(var5);
         }
 
-        this.field_146216_j = var2;
+        this.text = var2;
         this.func_146182_d(var4 - this.field_146223_s + var8);
     }
 
     public void func_146177_a(int p_146177_1_)
     {
-        if (this.field_146216_j.length() != 0)
+        if (this.text.length() != 0)
         {
             if (this.field_146223_s != this.field_146224_r)
             {
@@ -128,7 +128,7 @@ public class GuiTextField extends Gui
 
     public void func_146175_b(int p_146175_1_)
     {
-        if (this.field_146216_j.length() != 0)
+        if (this.text.length() != 0)
         {
             if (this.field_146223_s != this.field_146224_r)
             {
@@ -143,15 +143,15 @@ public class GuiTextField extends Gui
 
                 if (var3 >= 0)
                 {
-                    var5 = this.field_146216_j.substring(0, var3);
+                    var5 = this.text.substring(0, var3);
                 }
 
-                if (var4 < this.field_146216_j.length())
+                if (var4 < this.text.length())
                 {
-                    var5 = var5 + this.field_146216_j.substring(var4);
+                    var5 = var5 + this.text.substring(var4);
                 }
 
-                this.field_146216_j = var5;
+                this.text = var5;
 
                 if (var2)
                 {
@@ -181,20 +181,20 @@ public class GuiTextField extends Gui
         {
             if (var5)
             {
-                while (p_146197_3_ && var4 > 0 && this.field_146216_j.charAt(var4 - 1) == 32)
+                while (p_146197_3_ && var4 > 0 && this.text.charAt(var4 - 1) == 32)
                 {
                     --var4;
                 }
 
-                while (var4 > 0 && this.field_146216_j.charAt(var4 - 1) != 32)
+                while (var4 > 0 && this.text.charAt(var4 - 1) != 32)
                 {
                     --var4;
                 }
             }
             else
             {
-                int var8 = this.field_146216_j.length();
-                var4 = this.field_146216_j.indexOf(32, var4);
+                int var8 = this.text.length();
+                var4 = this.text.indexOf(32, var4);
 
                 if (var4 == -1)
                 {
@@ -202,7 +202,7 @@ public class GuiTextField extends Gui
                 }
                 else
                 {
-                    while (p_146197_3_ && var4 < var8 && this.field_146216_j.charAt(var4) == 32)
+                    while (p_146197_3_ && var4 < var8 && this.text.charAt(var4) == 32)
                     {
                         ++var4;
                     }
@@ -221,7 +221,7 @@ public class GuiTextField extends Gui
     public void func_146190_e(int p_146190_1_)
     {
         this.field_146224_r = p_146190_1_;
-        int var2 = this.field_146216_j.length();
+        int var2 = this.text.length();
 
         if (this.field_146224_r < 0)
         {
@@ -243,7 +243,7 @@ public class GuiTextField extends Gui
 
     public void func_146202_e()
     {
-        this.func_146190_e(this.field_146216_j.length());
+        this.func_146190_e(this.text.length());
     }
 
     /**
@@ -365,7 +365,7 @@ public class GuiTextField extends Gui
                         case 207:
                             if (GuiScreen.isShiftKeyDown())
                             {
-                                this.func_146199_i(this.field_146216_j.length());
+                                this.func_146199_i(this.text.length());
                             }
                             else
                             {
@@ -429,7 +429,7 @@ public class GuiTextField extends Gui
                 var5 -= 4;
             }
 
-            String var6 = this.field_146211_a.trimStringToWidth(this.field_146216_j.substring(this.field_146225_q), this.func_146200_o());
+            String var6 = this.field_146211_a.trimStringToWidth(this.text.substring(this.field_146225_q), this.func_146200_o());
             this.func_146190_e(this.field_146211_a.trimStringToWidth(var6, var5).length() + this.field_146225_q);
         }
     }
@@ -450,7 +450,7 @@ public class GuiTextField extends Gui
             int var1 = this.field_146226_p ? this.field_146222_t : this.field_146221_u;
             int var2 = this.field_146224_r - this.field_146225_q;
             int var3 = this.field_146223_s - this.field_146225_q;
-            String var4 = this.field_146211_a.trimStringToWidth(this.field_146216_j.substring(this.field_146225_q), this.func_146200_o());
+            String var4 = this.field_146211_a.trimStringToWidth(this.text.substring(this.field_146225_q), this.func_146200_o());
             boolean var5 = var2 >= 0 && var2 <= var4.length();
             boolean var6 = this.field_146213_o && this.field_146214_l / 6 % 2 == 0 && var5;
             int var7 = this.field_146215_m ? this.field_146209_f + 4 : this.field_146209_f;
@@ -468,7 +468,7 @@ public class GuiTextField extends Gui
                 var9 = this.field_146211_a.drawStringWithShadow(var10, var7, var8, var1);
             }
 
-            boolean var13 = this.field_146224_r < this.field_146216_j.length() || this.field_146216_j.length() >= this.func_146208_g();
+            boolean var13 = this.field_146224_r < this.text.length() || this.text.length() >= this.func_146208_g();
             int var11 = var9;
 
             if (!var5)
@@ -549,19 +549,19 @@ public class GuiTextField extends Gui
         GL11.glEnable(GL11.GL_TEXTURE_2D);
     }
 
-    public void func_146203_f(int p_146203_1_)
+    public void setMaxStringLength(int length)
     {
-        this.field_146217_k = p_146203_1_;
+        this.maxStringLength = length;
 
-        if (this.field_146216_j.length() > p_146203_1_)
+        if (this.text.length() > length)
         {
-            this.field_146216_j = this.field_146216_j.substring(0, p_146203_1_);
+            this.text = this.text.substring(0, length);
         }
     }
 
     public int func_146208_g()
     {
-        return this.field_146217_k;
+        return this.maxStringLength;
     }
 
     public int func_146198_h()
@@ -627,7 +627,7 @@ public class GuiTextField extends Gui
 
     public void func_146199_i(int p_146199_1_)
     {
-        int var2 = this.field_146216_j.length();
+        int var2 = this.text.length();
 
         if (p_146199_1_ > var2)
         {
@@ -649,12 +649,12 @@ public class GuiTextField extends Gui
             }
 
             int var3 = this.func_146200_o();
-            String var4 = this.field_146211_a.trimStringToWidth(this.field_146216_j.substring(this.field_146225_q), var3);
+            String var4 = this.field_146211_a.trimStringToWidth(this.text.substring(this.field_146225_q), var3);
             int var5 = var4.length() + this.field_146225_q;
 
             if (p_146199_1_ == this.field_146225_q)
             {
-                this.field_146225_q -= this.field_146211_a.trimStringToWidth(this.field_146216_j, var3, true).length();
+                this.field_146225_q -= this.field_146211_a.trimStringToWidth(this.text, var3, true).length();
             }
 
             if (p_146199_1_ > var5)
diff --git a/net/minecraft/client/gui/SelectionListBase.java b/net/minecraft/client/gui/SelectionListBase.java
index 36113cf..2ad580f 100644
--- a/net/minecraft/client/gui/SelectionListBase.java
+++ b/net/minecraft/client/gui/SelectionListBase.java
@@ -84,7 +84,7 @@ public abstract class SelectionListBase
         int var10;
         int var11;
         int var13;
-        int var20;
+        int var19;
 
         if (Mouse.isButtonDown(0))
         {
@@ -114,11 +114,11 @@ public abstract class SelectionListBase
                     if (p_148446_1_ >= var5 && p_148446_1_ <= var6)
                     {
                         this.field_148459_j = -1.0F;
-                        var20 = this.func_148441_d();
+                        var19 = this.func_148441_d();
 
-                        if (var20 < 1)
+                        if (var19 < 1)
                         {
-                            var20 = 1;
+                            var19 = 1;
                         }
 
                         var13 = (int)((float)((this.field_148461_h - this.field_148450_f) * (this.field_148461_h - this.field_148450_f)) / (float)this.func_148447_b());
@@ -133,7 +133,7 @@ public abstract class SelectionListBase
                             var13 = this.field_148461_h - this.field_148450_f - 8;
                         }
 
-                        this.field_148459_j /= (float)(this.field_148461_h - this.field_148450_f - var13) / (float)var20;
+                        this.field_148459_j /= (float)(this.field_148461_h - this.field_148450_f - var13) / (float)var19;
                     }
                     else
                     {
@@ -204,10 +204,10 @@ public abstract class SelectionListBase
 
         for (var11 = 0; var11 < var4; ++var11)
         {
-            var20 = var10 + var11 * this.field_148454_b;
+            var19 = var10 + var11 * this.field_148454_b;
             var13 = this.field_148454_b - 4;
 
-            if (var20 + this.field_148454_b <= this.field_148461_h && var20 - 4 >= this.field_148450_f)
+            if (var19 + this.field_148454_b <= this.field_148461_h && var19 - 4 >= this.field_148450_f)
             {
                 if (this.func_148444_a(var11))
                 {
@@ -217,25 +217,25 @@ public abstract class SelectionListBase
                     GL11.glDisable(GL11.GL_TEXTURE_2D);
                     var18.startDrawingQuads();
                     var18.setColorOpaque_I(8421504);
-                    var18.addVertexWithUV((double)var14, (double)(var20 + var13 + 2), 0.0D, 0.0D, 1.0D);
-                    var18.addVertexWithUV((double)var15, (double)(var20 + var13 + 2), 0.0D, 1.0D, 1.0D);
-                    var18.addVertexWithUV((double)var15, (double)(var20 - 2), 0.0D, 1.0D, 0.0D);
-                    var18.addVertexWithUV((double)var14, (double)(var20 - 2), 0.0D, 0.0D, 0.0D);
+                    var18.addVertexWithUV((double)var14, (double)(var19 + var13 + 2), 0.0D, 0.0D, 1.0D);
+                    var18.addVertexWithUV((double)var15, (double)(var19 + var13 + 2), 0.0D, 1.0D, 1.0D);
+                    var18.addVertexWithUV((double)var15, (double)(var19 - 2), 0.0D, 1.0D, 0.0D);
+                    var18.addVertexWithUV((double)var14, (double)(var19 - 2), 0.0D, 0.0D, 0.0D);
                     var18.setColorOpaque_I(0);
-                    var18.addVertexWithUV((double)(var14 + 1), (double)(var20 + var13 + 1), 0.0D, 0.0D, 1.0D);
-                    var18.addVertexWithUV((double)(var15 - 1), (double)(var20 + var13 + 1), 0.0D, 1.0D, 1.0D);
-                    var18.addVertexWithUV((double)(var15 - 1), (double)(var20 - 1), 0.0D, 1.0D, 0.0D);
-                    var18.addVertexWithUV((double)(var14 + 1), (double)(var20 - 1), 0.0D, 0.0D, 0.0D);
+                    var18.addVertexWithUV((double)(var14 + 1), (double)(var19 + var13 + 1), 0.0D, 0.0D, 1.0D);
+                    var18.addVertexWithUV((double)(var15 - 1), (double)(var19 + var13 + 1), 0.0D, 1.0D, 1.0D);
+                    var18.addVertexWithUV((double)(var15 - 1), (double)(var19 - 1), 0.0D, 1.0D, 0.0D);
+                    var18.addVertexWithUV((double)(var14 + 1), (double)(var19 - 1), 0.0D, 0.0D, 0.0D);
                     var18.draw();
                     GL11.glEnable(GL11.GL_TEXTURE_2D);
                 }
 
-                this.func_148442_a(var11, var9, var20, var13, var18);
+                this.func_148442_a(var11, var9, var19, var13, var18);
             }
         }
 
         GL11.glDisable(GL11.GL_DEPTH_TEST);
-        byte var19 = 4;
+        byte var20 = 4;
         GL11.glEnable(GL11.GL_BLEND);
         GL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);
         GL11.glDisable(GL11.GL_ALPHA_TEST);
@@ -243,8 +243,8 @@ public abstract class SelectionListBase
         GL11.glDisable(GL11.GL_TEXTURE_2D);
         var18.startDrawingQuads();
         var18.setColorRGBA_I(0, 0);
-        var18.addVertexWithUV((double)this.field_148453_e, (double)(this.field_148450_f + var19), 0.0D, 0.0D, 1.0D);
-        var18.addVertexWithUV((double)this.field_148451_g, (double)(this.field_148450_f + var19), 0.0D, 1.0D, 1.0D);
+        var18.addVertexWithUV((double)this.field_148453_e, (double)(this.field_148450_f + var20), 0.0D, 0.0D, 1.0D);
+        var18.addVertexWithUV((double)this.field_148451_g, (double)(this.field_148450_f + var20), 0.0D, 1.0D, 1.0D);
         var18.setColorRGBA_I(0, 255);
         var18.addVertexWithUV((double)this.field_148451_g, (double)this.field_148450_f, 0.0D, 1.0D, 0.0D);
         var18.addVertexWithUV((double)this.field_148453_e, (double)this.field_148450_f, 0.0D, 0.0D, 0.0D);
@@ -254,12 +254,12 @@ public abstract class SelectionListBase
         var18.addVertexWithUV((double)this.field_148453_e, (double)this.field_148461_h, 0.0D, 0.0D, 1.0D);
         var18.addVertexWithUV((double)this.field_148451_g, (double)this.field_148461_h, 0.0D, 1.0D, 1.0D);
         var18.setColorRGBA_I(0, 0);
-        var18.addVertexWithUV((double)this.field_148451_g, (double)(this.field_148461_h - var19), 0.0D, 1.0D, 0.0D);
-        var18.addVertexWithUV((double)this.field_148453_e, (double)(this.field_148461_h - var19), 0.0D, 0.0D, 0.0D);
+        var18.addVertexWithUV((double)this.field_148451_g, (double)(this.field_148461_h - var20), 0.0D, 1.0D, 0.0D);
+        var18.addVertexWithUV((double)this.field_148453_e, (double)(this.field_148461_h - var20), 0.0D, 0.0D, 0.0D);
         var18.draw();
-        var20 = this.func_148441_d();
+        var19 = this.func_148441_d();
 
-        if (var20 > 0)
+        if (var19 > 0)
         {
             var13 = (this.field_148461_h - this.field_148450_f) * (this.field_148461_h - this.field_148450_f) / this.func_148447_b();
 
@@ -273,7 +273,7 @@ public abstract class SelectionListBase
                 var13 = this.field_148461_h - this.field_148450_f - 8;
             }
 
-            var14 = (int)this.field_148460_k * (this.field_148461_h - this.field_148450_f - var13) / var20 + this.field_148450_f;
+            var14 = (int)this.field_148460_k * (this.field_148461_h - this.field_148450_f - var13) / var19 + this.field_148450_f;
 
             if (var14 < this.field_148450_f)
             {
diff --git a/net/minecraft/client/gui/ServerListEntryNormal.java b/net/minecraft/client/gui/ServerListEntryNormal.java
index f77bd4c..23748ac 100644
--- a/net/minecraft/client/gui/ServerListEntryNormal.java
+++ b/net/minecraft/client/gui/ServerListEntryNormal.java
@@ -60,7 +60,7 @@ public class ServerListEntryNormal implements GuiListExtended.IGuiListEntry
                 {
                     try
                     {
-                        ServerListEntryNormal.this.field_148303_c.func_146789_i().func_147224_a(ServerListEntryNormal.this.field_148301_e);
+                        ServerListEntryNormal.this.field_148303_c.func_146789_i().ping(ServerListEntryNormal.this.field_148301_e);
                     }
                     catch (UnknownHostException var2)
                     {
@@ -76,8 +76,8 @@ public class ServerListEntryNormal implements GuiListExtended.IGuiListEntry
             });
         }
 
-        boolean var10 = this.field_148301_e.field_82821_f > 4;
-        boolean var11 = this.field_148301_e.field_82821_f < 4;
+        boolean var10 = this.field_148301_e.version > 4;
+        boolean var11 = this.field_148301_e.version < 4;
         boolean var12 = var10 || var11;
         this.field_148300_d.fontRenderer.drawString(this.field_148301_e.serverName, p_148279_2_ + 32 + 3, p_148279_3_ + 1, 16777215);
         List var13 = this.field_148300_d.fontRenderer.listFormattedStringToWidth(this.field_148301_e.serverMOTD, p_148279_4_ - 32 - 2);
@@ -242,7 +242,7 @@ public class ServerListEntryNormal implements GuiListExtended.IGuiListEntry
 
     public void func_148277_b(int p_148277_1_, int p_148277_2_, int p_148277_3_, int p_148277_4_, int p_148277_5_, int p_148277_6_) {}
 
-    public ServerData func_148296_a()
+    public ServerData getServerData()
     {
         return this.field_148301_e;
     }
diff --git a/net/minecraft/client/gui/ServerSelectionList.java b/net/minecraft/client/gui/ServerSelectionList.java
index 924074e..86dc8c1 100644
--- a/net/minecraft/client/gui/ServerSelectionList.java
+++ b/net/minecraft/client/gui/ServerSelectionList.java
@@ -13,7 +13,7 @@ public class ServerSelectionList extends GuiListExtended
     private final List field_148198_l = Lists.newArrayList();
     private final List field_148199_m = Lists.newArrayList();
     private final GuiListExtended.IGuiListEntry field_148196_n = new ServerListEntryLanScan();
-    private int field_148197_o = -1;
+    private int selectedServer = -1;
     private static final String __OBFID = "CL_00000819";
 
     public ServerSelectionList(GuiMultiplayer p_i45049_1_, Minecraft p_i45049_2_, int p_i45049_3_, int p_i45049_4_, int p_i45049_5_, int p_i45049_6_, int p_i45049_7_)
@@ -49,19 +49,19 @@ public class ServerSelectionList extends GuiListExtended
         return this.field_148198_l.size() + 1 + this.field_148199_m.size();
     }
 
-    public void func_148192_c(int p_148192_1_)
+    public void setSelectedServer(int index)
     {
-        this.field_148197_o = p_148192_1_;
+        this.selectedServer = index;
     }
 
     protected boolean isSelected(int p_148131_1_)
     {
-        return p_148131_1_ == this.field_148197_o;
+        return p_148131_1_ == this.selectedServer;
     }
 
     public int func_148193_k()
     {
-        return this.field_148197_o;
+        return this.selectedServer;
     }
 
     public void func_148195_a(ServerList p_148195_1_)
diff --git a/net/minecraft/client/gui/achievement/GuiAchievements.java b/net/minecraft/client/gui/achievement/GuiAchievements.java
index acbfd4f..7b39a27 100644
--- a/net/minecraft/client/gui/achievement/GuiAchievements.java
+++ b/net/minecraft/client/gui/achievement/GuiAchievements.java
@@ -287,8 +287,8 @@ public class GuiAchievements extends GuiScreen implements IProgressMeter
         float var20 = 16.0F / this.field_146570_r;
         float var21 = 16.0F / this.field_146570_r;
         int var22;
-        int var24;
         int var25;
+        int var24;
 
         for (var22 = 0; (float)var22 * var20 - (float)var13 < 155.0F; ++var22)
         {
@@ -344,9 +344,9 @@ public class GuiAchievements extends GuiScreen implements IProgressMeter
         GL11.glEnable(GL11.GL_DEPTH_TEST);
         GL11.glDepthFunc(GL11.GL_LEQUAL);
         this.mc.getTextureManager().bindTexture(field_146561_C);
-        int var30;
         int var31;
-        int var42;
+        int var30;
+        int var43;
 
         for (var22 = 0; var22 < AchievementList.achievementList.size(); ++var22)
         {
@@ -356,7 +356,7 @@ public class GuiAchievements extends GuiScreen implements IProgressMeter
             {
                 var24 = var35.displayColumn * 24 - var4 + 11;
                 var25 = var35.displayRow * 24 - var5 + 11;
-                var42 = var35.parentAchievement.displayColumn * 24 - var4 + 11;
+                var43 = var35.parentAchievement.displayColumn * 24 - var4 + 11;
                 int var27 = var35.parentAchievement.displayRow * 24 - var5 + 11;
                 boolean var28 = this.field_146556_E.hasAchievementUnlocked(var35);
                 boolean var29 = this.field_146556_E.canUnlockAchievement(var35);
@@ -375,14 +375,14 @@ public class GuiAchievements extends GuiScreen implements IProgressMeter
                         var31 = -16711936;
                     }
 
-                    this.drawHorizontalLine(var24, var42, var25, var31);
-                    this.drawVerticalLine(var42, var25, var27, var31);
+                    this.drawHorizontalLine(var24, var43, var25, var31);
+                    this.drawVerticalLine(var43, var25, var27, var31);
 
-                    if (var24 > var42)
+                    if (var24 > var43)
                     {
                         this.drawTexturedModalRect(var24 - 11 - 7, var25 - 5, 114, 234, 7, 11);
                     }
-                    else if (var24 < var42)
+                    else if (var24 < var43)
                     {
                         this.drawTexturedModalRect(var24 + 11, var25 - 5, 107, 234, 7, 11);
                     }
@@ -399,33 +399,33 @@ public class GuiAchievements extends GuiScreen implements IProgressMeter
         }
 
         Achievement var34 = null;
-        RenderItem var36 = new RenderItem();
-        float var37 = (float)(p_146552_1_ - var8) * this.field_146570_r;
-        float var38 = (float)(p_146552_2_ - var9) * this.field_146570_r;
+        RenderItem var38 = new RenderItem();
+        float var36 = (float)(p_146552_1_ - var8) * this.field_146570_r;
+        float var37 = (float)(p_146552_2_ - var9) * this.field_146570_r;
         RenderHelper.enableGUIStandardItemLighting();
         GL11.glDisable(GL11.GL_LIGHTING);
         GL11.glEnable(GL12.GL_RESCALE_NORMAL);
         GL11.glEnable(GL11.GL_COLOR_MATERIAL);
-        int var41;
-        int var43;
+        int var42;
+        int var40;
 
-        for (var42 = 0; var42 < AchievementList.achievementList.size(); ++var42)
+        for (var43 = 0; var43 < AchievementList.achievementList.size(); ++var43)
         {
-            Achievement var39 = (Achievement)AchievementList.achievementList.get(var42);
-            var41 = var39.displayColumn * 24 - var4;
-            var43 = var39.displayRow * 24 - var5;
+            Achievement var41 = (Achievement)AchievementList.achievementList.get(var43);
+            var40 = var41.displayColumn * 24 - var4;
+            var42 = var41.displayRow * 24 - var5;
 
-            if (var41 >= -24 && var43 >= -24 && (float)var41 <= 224.0F * this.field_146570_r && (float)var43 <= 155.0F * this.field_146570_r)
+            if (var40 >= -24 && var42 >= -24 && (float)var40 <= 224.0F * this.field_146570_r && (float)var42 <= 155.0F * this.field_146570_r)
             {
-                var30 = this.field_146556_E.func_150874_c(var39);
+                var30 = this.field_146556_E.func_150874_c(var41);
                 float var45;
 
-                if (this.field_146556_E.hasAchievementUnlocked(var39))
+                if (this.field_146556_E.hasAchievementUnlocked(var41))
                 {
                     var45 = 0.75F;
                     GL11.glColor4f(var45, var45, var45, 1.0F);
                 }
-                else if (this.field_146556_E.canUnlockAchievement(var39))
+                else if (this.field_146556_E.canUnlockAchievement(var41))
                 {
                     var45 = 1.0F;
                     GL11.glColor4f(var45, var45, var45, 1.0F);
@@ -453,38 +453,38 @@ public class GuiAchievements extends GuiScreen implements IProgressMeter
 
                 this.mc.getTextureManager().bindTexture(field_146561_C);
 
-                if (var39.getSpecial())
+                if (var41.getSpecial())
                 {
-                    this.drawTexturedModalRect(var41 - 2, var43 - 2, 26, 202, 26, 26);
+                    this.drawTexturedModalRect(var40 - 2, var42 - 2, 26, 202, 26, 26);
                 }
                 else
                 {
-                    this.drawTexturedModalRect(var41 - 2, var43 - 2, 0, 202, 26, 26);
+                    this.drawTexturedModalRect(var40 - 2, var42 - 2, 0, 202, 26, 26);
                 }
 
-                if (!this.field_146556_E.canUnlockAchievement(var39))
+                if (!this.field_146556_E.canUnlockAchievement(var41))
                 {
                     var45 = 0.1F;
                     GL11.glColor4f(var45, var45, var45, 1.0F);
-                    var36.renderWithColor = false;
+                    var38.renderWithColor = false;
                 }
 
                 GL11.glEnable(GL11.GL_LIGHTING);
                 GL11.glEnable(GL11.GL_CULL_FACE);
-                var36.renderItemAndEffectIntoGUI(this.mc.fontRenderer, this.mc.getTextureManager(), var39.theItemStack, var41 + 3, var43 + 3);
+                var38.renderItemAndEffectIntoGUI(this.mc.fontRenderer, this.mc.getTextureManager(), var41.theItemStack, var40 + 3, var42 + 3);
                 GL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);
                 GL11.glDisable(GL11.GL_LIGHTING);
 
-                if (!this.field_146556_E.canUnlockAchievement(var39))
+                if (!this.field_146556_E.canUnlockAchievement(var41))
                 {
-                    var36.renderWithColor = true;
+                    var38.renderWithColor = true;
                 }
 
                 GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
 
-                if (var37 >= (float)var41 && var37 <= (float)(var41 + 22) && var38 >= (float)var43 && var38 <= (float)(var43 + 22))
+                if (var36 >= (float)var40 && var36 <= (float)(var40 + 22) && var37 >= (float)var42 && var37 <= (float)(var42 + 22))
                 {
-                    var34 = var39;
+                    var34 = var41;
                 }
             }
         }
@@ -504,9 +504,9 @@ public class GuiAchievements extends GuiScreen implements IProgressMeter
         if (var34 != null)
         {
             String var44 = var34.func_150951_e().getUnformattedText();
-            String var40 = var34.getDescription();
-            var41 = p_146552_1_ + 12;
-            var43 = p_146552_2_ - 4;
+            String var39 = var34.getDescription();
+            var40 = p_146552_1_ + 12;
+            var42 = p_146552_2_ - 4;
             var30 = this.field_146556_E.func_150874_c(var34);
 
             if (!this.field_146556_E.canUnlockAchievement(var34))
@@ -520,16 +520,16 @@ public class GuiAchievements extends GuiScreen implements IProgressMeter
                     var31 = Math.max(this.fontRendererObj.getStringWidth(var44), 120);
                     var32 = (new ChatComponentTranslation("achievement.requires", new Object[] {var34.parentAchievement.func_150951_e()})).getUnformattedText();
                     var33 = this.fontRendererObj.splitStringWidth(var32, var31);
-                    this.drawGradientRect(var41 - 3, var43 - 3, var41 + var31 + 3, var43 + var33 + 12 + 3, -1073741824, -1073741824);
-                    this.fontRendererObj.drawSplitString(var32, var41, var43 + 12, var31, -9416624);
+                    this.drawGradientRect(var40 - 3, var42 - 3, var40 + var31 + 3, var42 + var33 + 12 + 3, -1073741824, -1073741824);
+                    this.fontRendererObj.drawSplitString(var32, var40, var42 + 12, var31, -9416624);
                 }
                 else if (var30 < 3)
                 {
                     var31 = Math.max(this.fontRendererObj.getStringWidth(var44), 120);
                     var32 = (new ChatComponentTranslation("achievement.requires", new Object[] {var34.parentAchievement.func_150951_e()})).getUnformattedText();
                     var33 = this.fontRendererObj.splitStringWidth(var32, var31);
-                    this.drawGradientRect(var41 - 3, var43 - 3, var41 + var31 + 3, var43 + var33 + 12 + 3, -1073741824, -1073741824);
-                    this.fontRendererObj.drawSplitString(var32, var41, var43 + 12, var31, -9416624);
+                    this.drawGradientRect(var40 - 3, var42 - 3, var40 + var31 + 3, var42 + var33 + 12 + 3, -1073741824, -1073741824);
+                    this.fontRendererObj.drawSplitString(var32, var40, var42 + 12, var31, -9416624);
                 }
                 else
                 {
@@ -539,25 +539,25 @@ public class GuiAchievements extends GuiScreen implements IProgressMeter
             else
             {
                 var31 = Math.max(this.fontRendererObj.getStringWidth(var44), 120);
-                int var46 = this.fontRendererObj.splitStringWidth(var40, var31);
+                int var46 = this.fontRendererObj.splitStringWidth(var39, var31);
 
                 if (this.field_146556_E.hasAchievementUnlocked(var34))
                 {
                     var46 += 12;
                 }
 
-                this.drawGradientRect(var41 - 3, var43 - 3, var41 + var31 + 3, var43 + var46 + 3 + 12, -1073741824, -1073741824);
-                this.fontRendererObj.drawSplitString(var40, var41, var43 + 12, var31, -6250336);
+                this.drawGradientRect(var40 - 3, var42 - 3, var40 + var31 + 3, var42 + var46 + 3 + 12, -1073741824, -1073741824);
+                this.fontRendererObj.drawSplitString(var39, var40, var42 + 12, var31, -6250336);
 
                 if (this.field_146556_E.hasAchievementUnlocked(var34))
                 {
-                    this.fontRendererObj.drawStringWithShadow(I18n.format("achievement.taken", new Object[0]), var41, var43 + var46 + 4, -7302913);
+                    this.fontRendererObj.drawStringWithShadow(I18n.format("achievement.taken", new Object[0]), var40, var42 + var46 + 4, -7302913);
                 }
             }
 
             if (var44 != null)
             {
-                this.fontRendererObj.drawStringWithShadow(var44, var41, var43, this.field_146556_E.canUnlockAchievement(var34) ? (var34.getSpecial() ? -128 : -1) : (var34.getSpecial() ? -8355776 : -8355712));
+                this.fontRendererObj.drawStringWithShadow(var44, var40, var42, this.field_146556_E.canUnlockAchievement(var34) ? (var34.getSpecial() ? -128 : -1) : (var34.getSpecial() ? -8355776 : -8355712));
             }
         }
 
diff --git a/net/minecraft/client/gui/achievement/GuiStats.java b/net/minecraft/client/gui/achievement/GuiStats.java
index a1c4c34..789894a 100644
--- a/net/minecraft/client/gui/achievement/GuiStats.java
+++ b/net/minecraft/client/gui/achievement/GuiStats.java
@@ -192,6 +192,75 @@ public class GuiStats extends GuiScreen implements IProgressMeter
         var9.draw();
     }
 
+    class StatsMobsList extends GuiSlot
+    {
+        private final List field_148222_l = new ArrayList();
+        private static final String __OBFID = "CL_00000729";
+
+        public StatsMobsList()
+        {
+            super(GuiStats.this.mc, GuiStats.this.width, GuiStats.this.height, 32, GuiStats.this.height - 64, GuiStats.this.fontRendererObj.FONT_HEIGHT * 4);
+            this.func_148130_a(false);
+            Iterator var2 = EntityList.entityEggs.values().iterator();
+
+            while (var2.hasNext())
+            {
+                EntityList.EntityEggInfo var3 = (EntityList.EntityEggInfo)var2.next();
+
+                if (GuiStats.this.field_146546_t.writeStat(var3.field_151512_d) > 0 || GuiStats.this.field_146546_t.writeStat(var3.field_151513_e) > 0)
+                {
+                    this.field_148222_l.add(var3);
+                }
+            }
+        }
+
+        protected int getSize()
+        {
+            return this.field_148222_l.size();
+        }
+
+        protected void elementClicked(int p_148144_1_, boolean p_148144_2_, int p_148144_3_, int p_148144_4_) {}
+
+        protected boolean isSelected(int p_148131_1_)
+        {
+            return false;
+        }
+
+        protected int func_148138_e()
+        {
+            return this.getSize() * GuiStats.this.fontRendererObj.FONT_HEIGHT * 4;
+        }
+
+        protected void drawBackground()
+        {
+            GuiStats.this.drawDefaultBackground();
+        }
+
+        protected void drawSlot(int p_148126_1_, int p_148126_2_, int p_148126_3_, int p_148126_4_, Tessellator p_148126_5_, int p_148126_6_, int p_148126_7_)
+        {
+            EntityList.EntityEggInfo var8 = (EntityList.EntityEggInfo)this.field_148222_l.get(p_148126_1_);
+            String var9 = I18n.format("entity." + EntityList.getStringFromID(var8.spawnedID) + ".name", new Object[0]);
+            int var10 = GuiStats.this.field_146546_t.writeStat(var8.field_151512_d);
+            int var11 = GuiStats.this.field_146546_t.writeStat(var8.field_151513_e);
+            String var12 = I18n.format("stat.entityKills", new Object[] {Integer.valueOf(var10), var9});
+            String var13 = I18n.format("stat.entityKilledBy", new Object[] {var9, Integer.valueOf(var11)});
+
+            if (var10 == 0)
+            {
+                var12 = I18n.format("stat.entityKills.none", new Object[] {var9});
+            }
+
+            if (var11 == 0)
+            {
+                var13 = I18n.format("stat.entityKilledBy.none", new Object[] {var9});
+            }
+
+            GuiStats.this.drawString(GuiStats.this.fontRendererObj, var9, p_148126_2_ + 2 - 10, p_148126_3_ + 1, 16777215);
+            GuiStats.this.drawString(GuiStats.this.fontRendererObj, var12, p_148126_2_ + 2, p_148126_3_ + 1 + GuiStats.this.fontRendererObj.FONT_HEIGHT, var10 == 0 ? 6316128 : 9474192);
+            GuiStats.this.drawString(GuiStats.this.fontRendererObj, var13, p_148126_2_ + 2, p_148126_3_ + 1 + GuiStats.this.fontRendererObj.FONT_HEIGHT * 2, var11 == 0 ? 6316128 : 9474192);
+        }
+    }
+
     class StatsBlock extends GuiStats.Stats
     {
         private static final String __OBFID = "CL_00000724";
@@ -331,6 +400,186 @@ public class GuiStats extends GuiScreen implements IProgressMeter
         }
     }
 
+    class StatsItem extends GuiStats.Stats
+    {
+        private static final String __OBFID = "CL_00000727";
+
+        public StatsItem()
+        {
+            this.field_148219_m = new ArrayList();
+            Iterator var2 = StatList.itemStats.iterator();
+
+            while (var2.hasNext())
+            {
+                StatCrafting var3 = (StatCrafting)var2.next();
+                boolean var4 = false;
+                int var5 = Item.getIdFromItem(var3.func_150959_a());
+
+                if (GuiStats.this.field_146546_t.writeStat(var3) > 0)
+                {
+                    var4 = true;
+                }
+                else if (StatList.objectBreakStats[var5] != null && GuiStats.this.field_146546_t.writeStat(StatList.objectBreakStats[var5]) > 0)
+                {
+                    var4 = true;
+                }
+                else if (StatList.objectCraftStats[var5] != null && GuiStats.this.field_146546_t.writeStat(StatList.objectCraftStats[var5]) > 0)
+                {
+                    var4 = true;
+                }
+
+                if (var4)
+                {
+                    this.field_148219_m.add(var3);
+                }
+            }
+
+            this.field_148216_n = new Comparator()
+            {
+                private static final String __OBFID = "CL_00000728";
+                public int compare(StatCrafting p_148342_1_, StatCrafting p_148342_2_)
+                {
+                    int var3 = Item.getIdFromItem(p_148342_1_.func_150959_a());
+                    int var4 = Item.getIdFromItem(p_148342_2_.func_150959_a());
+                    StatBase var5 = null;
+                    StatBase var6 = null;
+
+                    if (StatsItem.this.field_148217_o == 0)
+                    {
+                        var5 = StatList.objectBreakStats[var3];
+                        var6 = StatList.objectBreakStats[var4];
+                    }
+                    else if (StatsItem.this.field_148217_o == 1)
+                    {
+                        var5 = StatList.objectCraftStats[var3];
+                        var6 = StatList.objectCraftStats[var4];
+                    }
+                    else if (StatsItem.this.field_148217_o == 2)
+                    {
+                        var5 = StatList.objectUseStats[var3];
+                        var6 = StatList.objectUseStats[var4];
+                    }
+
+                    if (var5 != null || var6 != null)
+                    {
+                        if (var5 == null)
+                        {
+                            return 1;
+                        }
+
+                        if (var6 == null)
+                        {
+                            return -1;
+                        }
+
+                        int var7 = GuiStats.this.field_146546_t.writeStat(var5);
+                        int var8 = GuiStats.this.field_146546_t.writeStat(var6);
+
+                        if (var7 != var8)
+                        {
+                            return (var7 - var8) * StatsItem.this.field_148215_p;
+                        }
+                    }
+
+                    return var3 - var4;
+                }
+                public int compare(Object par1Obj, Object par2Obj)
+                {
+                    return this.compare((StatCrafting)par1Obj, (StatCrafting)par2Obj);
+                }
+            };
+        }
+
+        protected void func_148129_a(int p_148129_1_, int p_148129_2_, Tessellator p_148129_3_)
+        {
+            super.func_148129_a(p_148129_1_, p_148129_2_, p_148129_3_);
+
+            if (this.field_148218_l == 0)
+            {
+                GuiStats.this.func_146527_c(p_148129_1_ + 115 - 18 + 1, p_148129_2_ + 1 + 1, 72, 18);
+            }
+            else
+            {
+                GuiStats.this.func_146527_c(p_148129_1_ + 115 - 18, p_148129_2_ + 1, 72, 18);
+            }
+
+            if (this.field_148218_l == 1)
+            {
+                GuiStats.this.func_146527_c(p_148129_1_ + 165 - 18 + 1, p_148129_2_ + 1 + 1, 18, 18);
+            }
+            else
+            {
+                GuiStats.this.func_146527_c(p_148129_1_ + 165 - 18, p_148129_2_ + 1, 18, 18);
+            }
+
+            if (this.field_148218_l == 2)
+            {
+                GuiStats.this.func_146527_c(p_148129_1_ + 215 - 18 + 1, p_148129_2_ + 1 + 1, 36, 18);
+            }
+            else
+            {
+                GuiStats.this.func_146527_c(p_148129_1_ + 215 - 18, p_148129_2_ + 1, 36, 18);
+            }
+        }
+
+        protected void drawSlot(int p_148126_1_, int p_148126_2_, int p_148126_3_, int p_148126_4_, Tessellator p_148126_5_, int p_148126_6_, int p_148126_7_)
+        {
+            StatCrafting var8 = this.func_148211_c(p_148126_1_);
+            Item var9 = var8.func_150959_a();
+            GuiStats.this.func_146521_a(p_148126_2_ + 40, p_148126_3_, var9);
+            int var10 = Item.getIdFromItem(var9);
+            this.func_148209_a(StatList.objectBreakStats[var10], p_148126_2_ + 115, p_148126_3_, p_148126_1_ % 2 == 0);
+            this.func_148209_a(StatList.objectCraftStats[var10], p_148126_2_ + 165, p_148126_3_, p_148126_1_ % 2 == 0);
+            this.func_148209_a(var8, p_148126_2_ + 215, p_148126_3_, p_148126_1_ % 2 == 0);
+        }
+
+        protected String func_148210_b(int p_148210_1_)
+        {
+            return p_148210_1_ == 1 ? "stat.crafted" : (p_148210_1_ == 2 ? "stat.used" : "stat.depleted");
+        }
+    }
+
+    class StatsGeneral extends GuiSlot
+    {
+        private static final String __OBFID = "CL_00000726";
+
+        public StatsGeneral()
+        {
+            super(GuiStats.this.mc, GuiStats.this.width, GuiStats.this.height, 32, GuiStats.this.height - 64, 10);
+            this.func_148130_a(false);
+        }
+
+        protected int getSize()
+        {
+            return StatList.generalStats.size();
+        }
+
+        protected void elementClicked(int p_148144_1_, boolean p_148144_2_, int p_148144_3_, int p_148144_4_) {}
+
+        protected boolean isSelected(int p_148131_1_)
+        {
+            return false;
+        }
+
+        protected int func_148138_e()
+        {
+            return this.getSize() * 10;
+        }
+
+        protected void drawBackground()
+        {
+            GuiStats.this.drawDefaultBackground();
+        }
+
+        protected void drawSlot(int p_148126_1_, int p_148126_2_, int p_148126_3_, int p_148126_4_, Tessellator p_148126_5_, int p_148126_6_, int p_148126_7_)
+        {
+            StatBase var8 = (StatBase)StatList.generalStats.get(p_148126_1_);
+            GuiStats.this.drawString(GuiStats.this.fontRendererObj, var8.func_150951_e().getUnformattedText(), p_148126_2_ + 2, p_148126_3_ + 1, p_148126_1_ % 2 == 0 ? 16777215 : 9474192);
+            String var9 = var8.func_75968_a(GuiStats.this.field_146546_t.writeStat(var8));
+            GuiStats.this.drawString(GuiStats.this.fontRendererObj, var9, p_148126_2_ + 2 + 213 - GuiStats.this.fontRendererObj.getStringWidth(var9), p_148126_3_ + 1, p_148126_1_ % 2 == 0 ? 16777215 : 9474192);
+        }
+    }
+
     abstract class Stats extends GuiSlot
     {
         protected int field_148218_l = -1;
@@ -559,253 +808,4 @@ public class GuiStats extends GuiScreen implements IProgressMeter
             Collections.sort(this.field_148219_m, this.field_148216_n);
         }
     }
-
-    class StatsMobsList extends GuiSlot
-    {
-        private final List field_148222_l = new ArrayList();
-        private static final String __OBFID = "CL_00000729";
-
-        public StatsMobsList()
-        {
-            super(GuiStats.this.mc, GuiStats.this.width, GuiStats.this.height, 32, GuiStats.this.height - 64, GuiStats.this.fontRendererObj.FONT_HEIGHT * 4);
-            this.func_148130_a(false);
-            Iterator var2 = EntityList.entityEggs.values().iterator();
-
-            while (var2.hasNext())
-            {
-                EntityList.EntityEggInfo var3 = (EntityList.EntityEggInfo)var2.next();
-
-                if (GuiStats.this.field_146546_t.writeStat(var3.field_151512_d) > 0 || GuiStats.this.field_146546_t.writeStat(var3.field_151513_e) > 0)
-                {
-                    this.field_148222_l.add(var3);
-                }
-            }
-        }
-
-        protected int getSize()
-        {
-            return this.field_148222_l.size();
-        }
-
-        protected void elementClicked(int p_148144_1_, boolean p_148144_2_, int p_148144_3_, int p_148144_4_) {}
-
-        protected boolean isSelected(int p_148131_1_)
-        {
-            return false;
-        }
-
-        protected int func_148138_e()
-        {
-            return this.getSize() * GuiStats.this.fontRendererObj.FONT_HEIGHT * 4;
-        }
-
-        protected void drawBackground()
-        {
-            GuiStats.this.drawDefaultBackground();
-        }
-
-        protected void drawSlot(int p_148126_1_, int p_148126_2_, int p_148126_3_, int p_148126_4_, Tessellator p_148126_5_, int p_148126_6_, int p_148126_7_)
-        {
-            EntityList.EntityEggInfo var8 = (EntityList.EntityEggInfo)this.field_148222_l.get(p_148126_1_);
-            String var9 = I18n.format("entity." + EntityList.getStringFromID(var8.spawnedID) + ".name", new Object[0]);
-            int var10 = GuiStats.this.field_146546_t.writeStat(var8.field_151512_d);
-            int var11 = GuiStats.this.field_146546_t.writeStat(var8.field_151513_e);
-            String var12 = I18n.format("stat.entityKills", new Object[] {Integer.valueOf(var10), var9});
-            String var13 = I18n.format("stat.entityKilledBy", new Object[] {var9, Integer.valueOf(var11)});
-
-            if (var10 == 0)
-            {
-                var12 = I18n.format("stat.entityKills.none", new Object[] {var9});
-            }
-
-            if (var11 == 0)
-            {
-                var13 = I18n.format("stat.entityKilledBy.none", new Object[] {var9});
-            }
-
-            GuiStats.this.drawString(GuiStats.this.fontRendererObj, var9, p_148126_2_ + 2 - 10, p_148126_3_ + 1, 16777215);
-            GuiStats.this.drawString(GuiStats.this.fontRendererObj, var12, p_148126_2_ + 2, p_148126_3_ + 1 + GuiStats.this.fontRendererObj.FONT_HEIGHT, var10 == 0 ? 6316128 : 9474192);
-            GuiStats.this.drawString(GuiStats.this.fontRendererObj, var13, p_148126_2_ + 2, p_148126_3_ + 1 + GuiStats.this.fontRendererObj.FONT_HEIGHT * 2, var11 == 0 ? 6316128 : 9474192);
-        }
-    }
-
-    class StatsItem extends GuiStats.Stats
-    {
-        private static final String __OBFID = "CL_00000727";
-
-        public StatsItem()
-        {
-            this.field_148219_m = new ArrayList();
-            Iterator var2 = StatList.itemStats.iterator();
-
-            while (var2.hasNext())
-            {
-                StatCrafting var3 = (StatCrafting)var2.next();
-                boolean var4 = false;
-                int var5 = Item.getIdFromItem(var3.func_150959_a());
-
-                if (GuiStats.this.field_146546_t.writeStat(var3) > 0)
-                {
-                    var4 = true;
-                }
-                else if (StatList.objectBreakStats[var5] != null && GuiStats.this.field_146546_t.writeStat(StatList.objectBreakStats[var5]) > 0)
-                {
-                    var4 = true;
-                }
-                else if (StatList.objectCraftStats[var5] != null && GuiStats.this.field_146546_t.writeStat(StatList.objectCraftStats[var5]) > 0)
-                {
-                    var4 = true;
-                }
-
-                if (var4)
-                {
-                    this.field_148219_m.add(var3);
-                }
-            }
-
-            this.field_148216_n = new Comparator()
-            {
-                private static final String __OBFID = "CL_00000728";
-                public int compare(StatCrafting p_148342_1_, StatCrafting p_148342_2_)
-                {
-                    int var3 = Item.getIdFromItem(p_148342_1_.func_150959_a());
-                    int var4 = Item.getIdFromItem(p_148342_2_.func_150959_a());
-                    StatBase var5 = null;
-                    StatBase var6 = null;
-
-                    if (StatsItem.this.field_148217_o == 0)
-                    {
-                        var5 = StatList.objectBreakStats[var3];
-                        var6 = StatList.objectBreakStats[var4];
-                    }
-                    else if (StatsItem.this.field_148217_o == 1)
-                    {
-                        var5 = StatList.objectCraftStats[var3];
-                        var6 = StatList.objectCraftStats[var4];
-                    }
-                    else if (StatsItem.this.field_148217_o == 2)
-                    {
-                        var5 = StatList.objectUseStats[var3];
-                        var6 = StatList.objectUseStats[var4];
-                    }
-
-                    if (var5 != null || var6 != null)
-                    {
-                        if (var5 == null)
-                        {
-                            return 1;
-                        }
-
-                        if (var6 == null)
-                        {
-                            return -1;
-                        }
-
-                        int var7 = GuiStats.this.field_146546_t.writeStat(var5);
-                        int var8 = GuiStats.this.field_146546_t.writeStat(var6);
-
-                        if (var7 != var8)
-                        {
-                            return (var7 - var8) * StatsItem.this.field_148215_p;
-                        }
-                    }
-
-                    return var3 - var4;
-                }
-                public int compare(Object par1Obj, Object par2Obj)
-                {
-                    return this.compare((StatCrafting)par1Obj, (StatCrafting)par2Obj);
-                }
-            };
-        }
-
-        protected void func_148129_a(int p_148129_1_, int p_148129_2_, Tessellator p_148129_3_)
-        {
-            super.func_148129_a(p_148129_1_, p_148129_2_, p_148129_3_);
-
-            if (this.field_148218_l == 0)
-            {
-                GuiStats.this.func_146527_c(p_148129_1_ + 115 - 18 + 1, p_148129_2_ + 1 + 1, 72, 18);
-            }
-            else
-            {
-                GuiStats.this.func_146527_c(p_148129_1_ + 115 - 18, p_148129_2_ + 1, 72, 18);
-            }
-
-            if (this.field_148218_l == 1)
-            {
-                GuiStats.this.func_146527_c(p_148129_1_ + 165 - 18 + 1, p_148129_2_ + 1 + 1, 18, 18);
-            }
-            else
-            {
-                GuiStats.this.func_146527_c(p_148129_1_ + 165 - 18, p_148129_2_ + 1, 18, 18);
-            }
-
-            if (this.field_148218_l == 2)
-            {
-                GuiStats.this.func_146527_c(p_148129_1_ + 215 - 18 + 1, p_148129_2_ + 1 + 1, 36, 18);
-            }
-            else
-            {
-                GuiStats.this.func_146527_c(p_148129_1_ + 215 - 18, p_148129_2_ + 1, 36, 18);
-            }
-        }
-
-        protected void drawSlot(int p_148126_1_, int p_148126_2_, int p_148126_3_, int p_148126_4_, Tessellator p_148126_5_, int p_148126_6_, int p_148126_7_)
-        {
-            StatCrafting var8 = this.func_148211_c(p_148126_1_);
-            Item var9 = var8.func_150959_a();
-            GuiStats.this.func_146521_a(p_148126_2_ + 40, p_148126_3_, var9);
-            int var10 = Item.getIdFromItem(var9);
-            this.func_148209_a(StatList.objectBreakStats[var10], p_148126_2_ + 115, p_148126_3_, p_148126_1_ % 2 == 0);
-            this.func_148209_a(StatList.objectCraftStats[var10], p_148126_2_ + 165, p_148126_3_, p_148126_1_ % 2 == 0);
-            this.func_148209_a(var8, p_148126_2_ + 215, p_148126_3_, p_148126_1_ % 2 == 0);
-        }
-
-        protected String func_148210_b(int p_148210_1_)
-        {
-            return p_148210_1_ == 1 ? "stat.crafted" : (p_148210_1_ == 2 ? "stat.used" : "stat.depleted");
-        }
-    }
-
-    class StatsGeneral extends GuiSlot
-    {
-        private static final String __OBFID = "CL_00000726";
-
-        public StatsGeneral()
-        {
-            super(GuiStats.this.mc, GuiStats.this.width, GuiStats.this.height, 32, GuiStats.this.height - 64, 10);
-            this.func_148130_a(false);
-        }
-
-        protected int getSize()
-        {
-            return StatList.generalStats.size();
-        }
-
-        protected void elementClicked(int p_148144_1_, boolean p_148144_2_, int p_148144_3_, int p_148144_4_) {}
-
-        protected boolean isSelected(int p_148131_1_)
-        {
-            return false;
-        }
-
-        protected int func_148138_e()
-        {
-            return this.getSize() * 10;
-        }
-
-        protected void drawBackground()
-        {
-            GuiStats.this.drawDefaultBackground();
-        }
-
-        protected void drawSlot(int p_148126_1_, int p_148126_2_, int p_148126_3_, int p_148126_4_, Tessellator p_148126_5_, int p_148126_6_, int p_148126_7_)
-        {
-            StatBase var8 = (StatBase)StatList.generalStats.get(p_148126_1_);
-            GuiStats.this.drawString(GuiStats.this.fontRendererObj, var8.func_150951_e().getUnformattedText(), p_148126_2_ + 2, p_148126_3_ + 1, p_148126_1_ % 2 == 0 ? 16777215 : 9474192);
-            String var9 = var8.func_75968_a(GuiStats.this.field_146546_t.writeStat(var8));
-            GuiStats.this.drawString(GuiStats.this.fontRendererObj, var9, p_148126_2_ + 2 + 213 - GuiStats.this.fontRendererObj.getStringWidth(var9), p_148126_3_ + 1, p_148126_1_ % 2 == 0 ? 16777215 : 9474192);
-        }
-    }
 }
diff --git a/net/minecraft/client/gui/inventory/GuiBeacon.java b/net/minecraft/client/gui/inventory/GuiBeacon.java
index b37b169..a5d3467 100644
--- a/net/minecraft/client/gui/inventory/GuiBeacon.java
+++ b/net/minecraft/client/gui/inventory/GuiBeacon.java
@@ -191,7 +191,7 @@ public class GuiBeacon extends GuiContainer
         {
             GuiButton var4 = (GuiButton)var3.next();
 
-            if (var4.func_146115_a())
+            if (var4.isMouseOver())
             {
                 var4.func_146111_b(p_146979_1_ - this.field_147003_i, p_146979_2_ - this.field_147009_r);
                 break;
@@ -216,21 +216,6 @@ public class GuiBeacon extends GuiContainer
         itemRender.zLevel = 0.0F;
     }
 
-    class CancelButton extends GuiBeacon.Button
-    {
-        private static final String __OBFID = "CL_00000740";
-
-        public CancelButton(int par2, int par3, int par4)
-        {
-            super(par2, par3, par4, GuiBeacon.field_147025_v, 112, 220);
-        }
-
-        public void func_146111_b(int p_146111_1_, int p_146111_2_)
-        {
-            GuiBeacon.this.func_146279_a(I18n.format("gui.cancel", new Object[0]), p_146111_1_, p_146111_2_);
-        }
-    }
-
     static class Button extends GuiButton
     {
         private final ResourceLocation field_146145_o;
@@ -253,7 +238,7 @@ public class GuiBeacon extends GuiContainer
             {
                 p_146112_1_.getTextureManager().bindTexture(GuiBeacon.field_147025_v);
                 GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
-                this.field_146123_n = p_146112_2_ >= this.field_146128_h && p_146112_3_ >= this.field_146129_i && p_146112_2_ < this.field_146128_h + this.field_146120_f && p_146112_3_ < this.field_146129_i + this.field_146121_g;
+                this.mouseOver = p_146112_2_ >= this.field_146128_h && p_146112_3_ >= this.field_146129_i && p_146112_2_ < this.field_146128_h + this.field_146120_f && p_146112_3_ < this.field_146129_i + this.field_146121_g;
                 short var4 = 219;
                 int var5 = 0;
 
@@ -265,7 +250,7 @@ public class GuiBeacon extends GuiContainer
                 {
                     var5 += this.field_146120_f * 1;
                 }
-                else if (this.field_146123_n)
+                else if (this.mouseOver)
                 {
                     var5 += this.field_146120_f * 3;
                 }
@@ -292,6 +277,21 @@ public class GuiBeacon extends GuiContainer
         }
     }
 
+    class CancelButton extends GuiBeacon.Button
+    {
+        private static final String __OBFID = "CL_00000740";
+
+        public CancelButton(int par2, int par3, int par4)
+        {
+            super(par2, par3, par4, GuiBeacon.field_147025_v, 112, 220);
+        }
+
+        public void func_146111_b(int p_146111_1_, int p_146111_2_)
+        {
+            GuiBeacon.this.func_146279_a(I18n.format("gui.cancel", new Object[0]), p_146111_1_, p_146111_2_);
+        }
+    }
+
     class PowerButton extends GuiBeacon.Button
     {
         private final int field_146149_p;
diff --git a/net/minecraft/client/gui/inventory/GuiContainerCreative.java b/net/minecraft/client/gui/inventory/GuiContainerCreative.java
index 6ad9f36..7cda5fc 100644
--- a/net/minecraft/client/gui/inventory/GuiContainerCreative.java
+++ b/net/minecraft/client/gui/inventory/GuiContainerCreative.java
@@ -254,7 +254,7 @@ public class GuiContainerCreative extends InventoryEffectRenderer
             this.buttonList.clear();
             Keyboard.enableRepeatEvents(true);
             this.field_147062_A = new GuiTextField(this.fontRendererObj, this.field_147003_i + 82, this.field_147009_r + 6, 89, this.fontRendererObj.FONT_HEIGHT);
-            this.field_147062_A.func_146203_f(15);
+            this.field_147062_A.setMaxStringLength(15);
             this.field_147062_A.func_146185_a(false);
             this.field_147062_A.func_146189_e(false);
             this.field_147062_A.func_146193_g(16777215);
@@ -694,7 +694,7 @@ public class GuiContainerCreative extends InventoryEffectRenderer
                 }
             }
 
-            this.func_146283_a(var4, p_146285_2_, p_146285_3_);
+            this.drawHoveringText(var4, p_146285_2_, p_146285_3_);
         }
         else
         {
@@ -879,6 +879,68 @@ public class GuiContainerCreative extends InventoryEffectRenderer
         return field_147058_w;
     }
 
+    class CreativeSlot extends Slot
+    {
+        private final Slot field_148332_b;
+        private static final String __OBFID = "CL_00000754";
+
+        public CreativeSlot(Slot par2Slot, int par3)
+        {
+            super(par2Slot.inventory, par3, 0, 0);
+            this.field_148332_b = par2Slot;
+        }
+
+        public void onPickupFromSlot(EntityPlayer par1EntityPlayer, ItemStack par2ItemStack)
+        {
+            this.field_148332_b.onPickupFromSlot(par1EntityPlayer, par2ItemStack);
+        }
+
+        public boolean isItemValid(ItemStack par1ItemStack)
+        {
+            return this.field_148332_b.isItemValid(par1ItemStack);
+        }
+
+        public ItemStack getStack()
+        {
+            return this.field_148332_b.getStack();
+        }
+
+        public boolean getHasStack()
+        {
+            return this.field_148332_b.getHasStack();
+        }
+
+        public void putStack(ItemStack par1ItemStack)
+        {
+            this.field_148332_b.putStack(par1ItemStack);
+        }
+
+        public void onSlotChanged()
+        {
+            this.field_148332_b.onSlotChanged();
+        }
+
+        public int getSlotStackLimit()
+        {
+            return this.field_148332_b.getSlotStackLimit();
+        }
+
+        public IIcon getBackgroundIconIndex()
+        {
+            return this.field_148332_b.getBackgroundIconIndex();
+        }
+
+        public ItemStack decrStackSize(int par1)
+        {
+            return this.field_148332_b.decrStackSize(par1);
+        }
+
+        public boolean isSlotInInventory(IInventory par1IInventory, int par2)
+        {
+            return this.field_148332_b.isSlotInInventory(par1IInventory, par2);
+        }
+    }
+
     static class ContainerCreative extends Container
     {
         public List field_148330_a = new ArrayList();
@@ -970,66 +1032,4 @@ public class GuiContainerCreative extends InventoryEffectRenderer
             return par1Slot.inventory instanceof InventoryPlayer || par1Slot.yDisplayPosition > 90 && par1Slot.xDisplayPosition <= 162;
         }
     }
-
-    class CreativeSlot extends Slot
-    {
-        private final Slot field_148332_b;
-        private static final String __OBFID = "CL_00000754";
-
-        public CreativeSlot(Slot par2Slot, int par3)
-        {
-            super(par2Slot.inventory, par3, 0, 0);
-            this.field_148332_b = par2Slot;
-        }
-
-        public void onPickupFromSlot(EntityPlayer par1EntityPlayer, ItemStack par2ItemStack)
-        {
-            this.field_148332_b.onPickupFromSlot(par1EntityPlayer, par2ItemStack);
-        }
-
-        public boolean isItemValid(ItemStack par1ItemStack)
-        {
-            return this.field_148332_b.isItemValid(par1ItemStack);
-        }
-
-        public ItemStack getStack()
-        {
-            return this.field_148332_b.getStack();
-        }
-
-        public boolean getHasStack()
-        {
-            return this.field_148332_b.getHasStack();
-        }
-
-        public void putStack(ItemStack par1ItemStack)
-        {
-            this.field_148332_b.putStack(par1ItemStack);
-        }
-
-        public void onSlotChanged()
-        {
-            this.field_148332_b.onSlotChanged();
-        }
-
-        public int getSlotStackLimit()
-        {
-            return this.field_148332_b.getSlotStackLimit();
-        }
-
-        public IIcon getBackgroundIconIndex()
-        {
-            return this.field_148332_b.getBackgroundIconIndex();
-        }
-
-        public ItemStack decrStackSize(int par1)
-        {
-            return this.field_148332_b.decrStackSize(par1);
-        }
-
-        public boolean isSlotInInventory(IInventory par1IInventory, int par2)
-        {
-            return this.field_148332_b.isSlotInInventory(par1IInventory, par2);
-        }
-    }
 }
diff --git a/net/minecraft/client/gui/inventory/GuiEditSign.java b/net/minecraft/client/gui/inventory/GuiEditSign.java
index 4b3877f..e9ce5bd 100644
--- a/net/minecraft/client/gui/inventory/GuiEditSign.java
+++ b/net/minecraft/client/gui/inventory/GuiEditSign.java
@@ -9,9 +9,13 @@ import net.minecraft.init.Blocks;
 import net.minecraft.network.play.client.C12PacketUpdateSign;
 import net.minecraft.tileentity.TileEntitySign;
 import net.minecraft.util.ChatAllowedCharacters;
+
 import org.lwjgl.input.Keyboard;
 import org.lwjgl.opengl.GL11;
 
+import tk.wurst_client.Client;
+import tk.wurst_client.module.modules.AutoSign;
+
 public class GuiEditSign extends GuiScreen
 {
     protected String field_146850_a = "Edit sign message:";
@@ -31,6 +35,18 @@ public class GuiEditSign extends GuiScreen
      */
     public void initGui()
     {
+    	//TODO: Client
+    	if(Client.Wurst.moduleManager.getModuleFromClass(AutoSign.class).getToggled())
+    	{
+    		if(AutoSign.signText != null)
+    		{
+    			this.field_146848_f.field_145915_a = AutoSign.signText;
+    			mc.displayGuiScreen(null);
+    		}else
+    		{
+    			AutoSign.signText = this.field_146848_f.field_145915_a;
+    		}
+    	}
         this.buttonList.clear();
         Keyboard.enableRepeatEvents(true);
         this.buttonList.add(this.field_146852_i = new GuiButton(0, this.width / 2 - 100, this.height / 4 + 120, "Done"));
diff --git a/net/minecraft/client/gui/mco/GuiScreenBackup.java b/net/minecraft/client/gui/mco/GuiScreenBackup.java
index 4ac63e9..0b7a436 100644
--- a/net/minecraft/client/gui/mco/GuiScreenBackup.java
+++ b/net/minecraft/client/gui/mco/GuiScreenBackup.java
@@ -239,69 +239,6 @@ public class GuiScreenBackup extends GuiScreen
         }
     }
 
-    class SelectionList extends GuiScreenSelectLocation
-    {
-        private static final String __OBFID = "CL_00000768";
-
-        public SelectionList()
-        {
-            super(GuiScreenBackup.this.mc, GuiScreenBackup.this.width, GuiScreenBackup.this.height, 32, GuiScreenBackup.this.height - 64, 36);
-        }
-
-        protected int func_148355_a()
-        {
-            return GuiScreenBackup.this.field_146847_i.size() + 1;
-        }
-
-        protected void func_148352_a(int p_148352_1_, boolean p_148352_2_)
-        {
-            if (p_148352_1_ < GuiScreenBackup.this.field_146847_i.size())
-            {
-                GuiScreenBackup.this.field_146843_s = p_148352_1_;
-            }
-        }
-
-        protected boolean func_148356_a(int p_148356_1_)
-        {
-            return p_148356_1_ == GuiScreenBackup.this.field_146843_s;
-        }
-
-        protected boolean func_148349_b(int p_148349_1_)
-        {
-            return false;
-        }
-
-        protected int func_148351_b()
-        {
-            return this.func_148355_a() * 36;
-        }
-
-        protected void func_148358_c()
-        {
-            GuiScreenBackup.this.drawDefaultBackground();
-        }
-
-        protected void func_148348_a(int p_148348_1_, int p_148348_2_, int p_148348_3_, int p_148348_4_, Tessellator p_148348_5_)
-        {
-            if (p_148348_1_ < GuiScreenBackup.this.field_146847_i.size())
-            {
-                this.func_148385_b(p_148348_1_, p_148348_2_, p_148348_3_, p_148348_4_, p_148348_5_);
-            }
-        }
-
-        private void func_148385_b(int p_148385_1_, int p_148385_2_, int p_148385_3_, int p_148385_4_, Tessellator p_148385_5_)
-        {
-            Backup var6 = (Backup)GuiScreenBackup.this.field_146847_i.get(p_148385_1_);
-            GuiScreenBackup.this.drawString(GuiScreenBackup.this.fontRendererObj, "Backup (" + GuiScreenBackup.this.func_146829_a(Long.valueOf(MinecraftServer.getSystemTimeMillis() - var6.field_148778_b.getTime())) + ")", p_148385_2_ + 2, p_148385_3_ + 1, 16777215);
-            GuiScreenBackup.this.drawString(GuiScreenBackup.this.fontRendererObj, this.func_148384_a(var6.field_148778_b), p_148385_2_ + 2, p_148385_3_ + 12, 7105644);
-        }
-
-        private String func_148384_a(Date p_148384_1_)
-        {
-            return DateFormat.getDateTimeInstance(3, 3).format(p_148384_1_);
-        }
-    }
-
     class RestoreTask extends TaskLongRunning
     {
         private final Backup field_148424_c;
@@ -370,4 +307,67 @@ public class GuiScreenBackup extends GuiScreen
             this(par2Backup);
         }
     }
+
+    class SelectionList extends GuiScreenSelectLocation
+    {
+        private static final String __OBFID = "CL_00000768";
+
+        public SelectionList()
+        {
+            super(GuiScreenBackup.this.mc, GuiScreenBackup.this.width, GuiScreenBackup.this.height, 32, GuiScreenBackup.this.height - 64, 36);
+        }
+
+        protected int func_148355_a()
+        {
+            return GuiScreenBackup.this.field_146847_i.size() + 1;
+        }
+
+        protected void func_148352_a(int p_148352_1_, boolean p_148352_2_)
+        {
+            if (p_148352_1_ < GuiScreenBackup.this.field_146847_i.size())
+            {
+                GuiScreenBackup.this.field_146843_s = p_148352_1_;
+            }
+        }
+
+        protected boolean func_148356_a(int p_148356_1_)
+        {
+            return p_148356_1_ == GuiScreenBackup.this.field_146843_s;
+        }
+
+        protected boolean func_148349_b(int p_148349_1_)
+        {
+            return false;
+        }
+
+        protected int func_148351_b()
+        {
+            return this.func_148355_a() * 36;
+        }
+
+        protected void func_148358_c()
+        {
+            GuiScreenBackup.this.drawDefaultBackground();
+        }
+
+        protected void func_148348_a(int p_148348_1_, int p_148348_2_, int p_148348_3_, int p_148348_4_, Tessellator p_148348_5_)
+        {
+            if (p_148348_1_ < GuiScreenBackup.this.field_146847_i.size())
+            {
+                this.func_148385_b(p_148348_1_, p_148348_2_, p_148348_3_, p_148348_4_, p_148348_5_);
+            }
+        }
+
+        private void func_148385_b(int p_148385_1_, int p_148385_2_, int p_148385_3_, int p_148385_4_, Tessellator p_148385_5_)
+        {
+            Backup var6 = (Backup)GuiScreenBackup.this.field_146847_i.get(p_148385_1_);
+            GuiScreenBackup.this.drawString(GuiScreenBackup.this.fontRendererObj, "Backup (" + GuiScreenBackup.this.func_146829_a(Long.valueOf(MinecraftServer.getSystemTimeMillis() - var6.field_148778_b.getTime())) + ")", p_148385_2_ + 2, p_148385_3_ + 1, 16777215);
+            GuiScreenBackup.this.drawString(GuiScreenBackup.this.fontRendererObj, this.func_148384_a(var6.field_148778_b), p_148385_2_ + 2, p_148385_3_ + 12, 7105644);
+        }
+
+        private String func_148384_a(Date p_148384_1_)
+        {
+            return DateFormat.getDateTimeInstance(3, 3).format(p_148384_1_);
+        }
+    }
 }
diff --git a/net/minecraft/client/gui/mco/GuiScreenCreateOnlineWorld.java b/net/minecraft/client/gui/mco/GuiScreenCreateOnlineWorld.java
index eb565ee..10bb887 100644
--- a/net/minecraft/client/gui/mco/GuiScreenCreateOnlineWorld.java
+++ b/net/minecraft/client/gui/mco/GuiScreenCreateOnlineWorld.java
@@ -4,6 +4,7 @@ import java.io.IOException;
 import java.io.UnsupportedEncodingException;
 import java.util.ArrayList;
 import java.util.Collections;
+
 import net.minecraft.client.Minecraft;
 import net.minecraft.client.gui.GuiButton;
 import net.minecraft.client.gui.GuiScreen;
@@ -15,6 +16,7 @@ import net.minecraft.client.mco.McoClient;
 import net.minecraft.client.mco.WorldTemplate;
 import net.minecraft.client.resources.I18n;
 import net.minecraft.util.Session;
+
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 import org.lwjgl.input.Keyboard;
@@ -216,7 +218,8 @@ public class GuiScreenCreateOnlineWorld extends ScreenWithCallback
                 GuiScreenCreateOnlineWorld.logger.error("Couldn\'t create world");
                 this.func_148416_a(var6.getLocalizedMessage());
             }
-            catch (IOException var7)
+            //TODO: Client
+            catch (@SuppressWarnings("hiding") IOException var7)
             {
                 GuiScreenCreateOnlineWorld.logger.error("Could not parse response creating world");
                 this.func_148416_a(var7.getLocalizedMessage());
diff --git a/net/minecraft/client/gui/mco/GuiScreenResetWorld.java b/net/minecraft/client/gui/mco/GuiScreenResetWorld.java
index 06cfccb..4806acb 100644
--- a/net/minecraft/client/gui/mco/GuiScreenResetWorld.java
+++ b/net/minecraft/client/gui/mco/GuiScreenResetWorld.java
@@ -55,7 +55,7 @@ public class GuiScreenResetWorld extends ScreenWithCallback
         this.buttonList.add(new GuiButton(2, this.width / 2 + 5, this.height / 4 + 120 + 12, 97, 20, I18n.format("gui.cancel", new Object[0])));
         this.field_146749_h = new GuiTextField(this.fontRendererObj, this.width / 2 - 100, 99, 200, 20);
         this.field_146749_h.setFocused(true);
-        this.field_146749_h.func_146203_f(32);
+        this.field_146749_h.setMaxStringLength(32);
         this.field_146749_h.setText("");
 
         if (this.field_146745_t == null)
diff --git a/net/minecraft/client/mco/Request.java b/net/minecraft/client/mco/Request.java
index 42502a1..db14ac7 100644
--- a/net/minecraft/client/mco/Request.java
+++ b/net/minecraft/client/mco/Request.java
@@ -281,28 +281,23 @@ public abstract class Request
         }
     }
 
-    public static class Post extends Request
+    public static class Get extends Request
     {
-        private byte[] field_148683_c;
-        private static final String __OBFID = "CL_00001162";
+        private static final String __OBFID = "CL_00001161";
 
-        public Post(String par1Str, byte[] par2ArrayOfByte, int par3, int par4)
+        public Get(String par1Str, int par2, int par3)
         {
-            super(par1Str, par3, par4);
-            this.field_148683_c = par2ArrayOfByte;
+            super(par1Str, par2, par3);
         }
 
-        public Request.Post func_148662_f()
+        public Request.Get func_148662_f()
         {
             try
             {
                 this.field_148677_a.setDoInput(true);
                 this.field_148677_a.setDoOutput(true);
                 this.field_148677_a.setUseCaches(false);
-                this.field_148677_a.setRequestMethod("POST");
-                OutputStream var1 = this.field_148677_a.getOutputStream();
-                var1.write(this.field_148683_c);
-                var1.flush();
+                this.field_148677_a.setRequestMethod("GET");
                 return this;
             }
             catch (Exception var2)
@@ -312,23 +307,28 @@ public abstract class Request
         }
     }
 
-    public static class Get extends Request
+    public static class Post extends Request
     {
-        private static final String __OBFID = "CL_00001161";
+        private byte[] field_148683_c;
+        private static final String __OBFID = "CL_00001162";
 
-        public Get(String par1Str, int par2, int par3)
+        public Post(String par1Str, byte[] par2ArrayOfByte, int par3, int par4)
         {
-            super(par1Str, par2, par3);
+            super(par1Str, par3, par4);
+            this.field_148683_c = par2ArrayOfByte;
         }
 
-        public Request.Get func_148662_f()
+        public Request.Post func_148662_f()
         {
             try
             {
                 this.field_148677_a.setDoInput(true);
                 this.field_148677_a.setDoOutput(true);
                 this.field_148677_a.setUseCaches(false);
-                this.field_148677_a.setRequestMethod("GET");
+                this.field_148677_a.setRequestMethod("POST");
+                OutputStream var1 = this.field_148677_a.getOutputStream();
+                var1.write(this.field_148683_c);
+                var1.flush();
                 return this;
             }
             catch (Exception var2)
diff --git a/net/minecraft/client/model/ModelDragon.java b/net/minecraft/client/model/ModelDragon.java
index b495823..a24a50b 100644
--- a/net/minecraft/client/model/ModelDragon.java
+++ b/net/minecraft/client/model/ModelDragon.java
@@ -177,9 +177,9 @@ public class ModelDragon extends ModelBase
         this.head.rotationPointY = var11;
         this.head.rotationPointZ = var12;
         this.head.rotationPointX = var13;
-        double[] var22 = var8.getMovementOffsets(0, this.partialTicks);
-        this.head.rotateAngleY = this.updateRotations(var22[0] - var15[0]) * (float)Math.PI / 180.0F * 1.0F;
-        this.head.rotateAngleZ = -this.updateRotations(var22[0] - (double)var17) * (float)Math.PI / 180.0F * 1.0F;
+        double[] var23 = var8.getMovementOffsets(0, this.partialTicks);
+        this.head.rotateAngleY = this.updateRotations(var23[0] - var15[0]) * (float)Math.PI / 180.0F * 1.0F;
+        this.head.rotateAngleZ = -this.updateRotations(var23[0] - (double)var17) * (float)Math.PI / 180.0F * 1.0F;
         this.head.render(par7);
         GL11.glPushMatrix();
         GL11.glTranslatef(0.0F, 1.0F, 0.0F);
@@ -188,7 +188,7 @@ public class ModelDragon extends ModelBase
         this.body.rotateAngleZ = 0.0F;
         this.body.render(par7);
 
-        for (int var23 = 0; var23 < 2; ++var23)
+        for (int var22 = 0; var22 < 2; ++var22)
         {
             GL11.glEnable(GL11.GL_CULL_FACE);
             var21 = var9 * (float)Math.PI * 2.0F;
@@ -207,7 +207,7 @@ public class ModelDragon extends ModelBase
             this.rearLeg.render(par7);
             GL11.glScalef(-1.0F, 1.0F, 1.0F);
 
-            if (var23 == 0)
+            if (var22 == 0)
             {
                 GL11.glCullFace(GL11.GL_FRONT);
             }
@@ -225,11 +225,11 @@ public class ModelDragon extends ModelBase
 
         for (int var25 = 0; var25 < 12; ++var25)
         {
-            var22 = var8.getMovementOffsets(12 + var25, this.partialTicks);
+            var23 = var8.getMovementOffsets(12 + var25, this.partialTicks);
             var24 = (float)((double)var24 + Math.sin((double)((float)var25 * 0.45F + var18)) * 0.05000000074505806D);
-            this.spine.rotateAngleY = (this.updateRotations(var22[0] - var15[0]) * var14 + 180.0F) * (float)Math.PI / 180.0F;
-            this.spine.rotateAngleX = var24 + (float)(var22[1] - var15[1]) * (float)Math.PI / 180.0F * var14 * 5.0F;
-            this.spine.rotateAngleZ = this.updateRotations(var22[0] - (double)var17) * (float)Math.PI / 180.0F * var14;
+            this.spine.rotateAngleY = (this.updateRotations(var23[0] - var15[0]) * var14 + 180.0F) * (float)Math.PI / 180.0F;
+            this.spine.rotateAngleX = var24 + (float)(var23[1] - var15[1]) * (float)Math.PI / 180.0F * var14 * 5.0F;
+            this.spine.rotateAngleZ = this.updateRotations(var23[0] - (double)var17) * (float)Math.PI / 180.0F * var14;
             this.spine.rotationPointY = var11;
             this.spine.rotationPointZ = var12;
             this.spine.rotationPointX = var13;
diff --git a/net/minecraft/client/multiplayer/PlayerControllerMP.java b/net/minecraft/client/multiplayer/PlayerControllerMP.java
index 169cf39..e565e05 100644
--- a/net/minecraft/client/multiplayer/PlayerControllerMP.java
+++ b/net/minecraft/client/multiplayer/PlayerControllerMP.java
@@ -25,6 +25,8 @@ import net.minecraft.util.ResourceLocation;
 import net.minecraft.util.Vec3;
 import net.minecraft.world.World;
 import net.minecraft.world.WorldSettings;
+import tk.wurst_client.Client;
+import tk.wurst_client.module.modules.FastBreak;
 
 public class PlayerControllerMP
 {
@@ -45,7 +47,7 @@ public class PlayerControllerMP
     private ItemStack currentItemHittingBlock;
 
     /** Current block damage (MP) */
-    private float curBlockDamageMP;
+    public static float curBlockDamageMP;
 
     /**
      * Tick counter, when it hits 4 it resets back to 0 and plays the step sound
@@ -192,7 +194,8 @@ public class PlayerControllerMP
             {
                 this.netClientHandler.addToSendQueue(new C07PacketPlayerDigging(0, par1, par2, par3, par4));
                 clickBlockCreative(this.mc, this, par1, par2, par3, par4);
-                this.blockHitDelay = 5;
+                //TODO: Client
+                this.blockHitDelay = Client.Wurst.moduleManager.getModuleFromClass(FastBreak.class).getToggled() ? 0 : 5;
             }
             else if (!this.isHittingBlock || !this.sameToolAndBlock(par1, par2, par3))
             {
@@ -257,7 +260,8 @@ public class PlayerControllerMP
         }
         else if (this.currentGameType.isCreative())
         {
-            this.blockHitDelay = 5;
+        	//TODO: Client
+            this.blockHitDelay = Client.Wurst.moduleManager.getModuleFromClass(FastBreak.class).getToggled() ? 0 : 5;
             this.netClientHandler.addToSendQueue(new C07PacketPlayerDigging(0, par1, par2, par3, par4));
             clickBlockCreative(this.mc, this, par1, par2, par3, par4);
         }
@@ -273,7 +277,8 @@ public class PlayerControllerMP
                     return;
                 }
 
-                this.curBlockDamageMP += var5.getPlayerRelativeBlockHardness(this.mc.thePlayer, this.mc.thePlayer.worldObj, par1, par2, par3);
+                //TODO: Client
+                this.curBlockDamageMP += var5.getPlayerRelativeBlockHardness(this.mc.thePlayer, this.mc.thePlayer.worldObj, par1, par2, par3) * (!this.currentGameType.isCreative() && Client.Wurst.moduleManager.getModuleFromClass(FastBreak.class).getToggled() && Client.Wurst.options.fastbreakMode == 0 ? FastBreak.speed : 1);
 
                 if (this.stepSoundTickCounter % 4.0F == 0.0F)
                 {
@@ -290,6 +295,10 @@ public class PlayerControllerMP
                     this.curBlockDamageMP = 0.0F;
                     this.stepSoundTickCounter = 0.0F;
                     this.blockHitDelay = 5;
+                    //TODO: Client
+                }else if(!this.currentGameType.isCreative() && Client.Wurst.moduleManager.getModuleFromClass(FastBreak.class).getToggled() && Client.Wurst.options.fastbreakMode == 1)
+                {
+                    this.netClientHandler.addToSendQueue(new C07PacketPlayerDigging(2, par1, par2, par3, par4));
                 }
 
                 this.mc.theWorld.destroyBlockInWorldPartially(this.mc.thePlayer.getEntityId(), this.currentBlockX, this.currentBlockY, this.currentblockZ, (int)(this.curBlockDamageMP * 10.0F) - 1);
diff --git a/net/minecraft/client/multiplayer/ServerData.java b/net/minecraft/client/multiplayer/ServerData.java
index 3de5a42..d2ed04a 100644
--- a/net/minecraft/client/multiplayer/ServerData.java
+++ b/net/minecraft/client/multiplayer/ServerData.java
@@ -21,7 +21,7 @@ public class ServerData
 
     /** last server ping that showed up in the server browser */
     public long pingToServer;
-    public int field_82821_f = 4;
+    public int version = 4;
 
     /** Game version for this server. */
     public String gameVersion = "1.7.2";
diff --git a/net/minecraft/client/multiplayer/ServerList.java b/net/minecraft/client/multiplayer/ServerList.java
index 3984c04..b78face 100644
--- a/net/minecraft/client/multiplayer/ServerList.java
+++ b/net/minecraft/client/multiplayer/ServerList.java
@@ -28,6 +28,12 @@ public class ServerList
         this.loadServerList();
     }
     
+    //TODO. Client
+    public void clearServerList()
+    {
+    	this.servers.clear();
+    }
+
     /**
      * Loads a list of servers from servers.dat, by running ServerData.getServerDataFromNBTCompound on each NBT compound
      * found in the "servers" tag list.
@@ -127,9 +133,9 @@ public class ServerList
         this.saveServerList();
     }
 
-    public void func_147413_a(int p_147413_1_, ServerData p_147413_2_)
+    public void setServer(int index, ServerData server)
     {
-        this.servers.set(p_147413_1_, p_147413_2_);
+        this.servers.set(index, server);
     }
 
     public static void func_147414_b(ServerData p_147414_0_)
@@ -143,7 +149,7 @@ public class ServerList
 
             if (var3.serverName.equals(p_147414_0_.serverName) && var3.serverIP.equals(p_147414_0_.serverIP))
             {
-                var1.func_147413_a(var2, p_147414_0_);
+                var1.setServer(var2, p_147414_0_);
                 break;
             }
         }
diff --git a/net/minecraft/client/network/OldServerPinger.java b/net/minecraft/client/network/OldServerPinger.java
index dcf38db..06d2b46 100644
--- a/net/minecraft/client/network/OldServerPinger.java
+++ b/net/minecraft/client/network/OldServerPinger.java
@@ -50,7 +50,7 @@ public class OldServerPinger
     private final List field_147229_c = Collections.synchronizedList(new ArrayList());
     private static final String __OBFID = "CL_00000892";
 
-    public void func_147224_a(final ServerData p_147224_1_) throws UnknownHostException
+    public void ping(final ServerData p_147224_1_) throws UnknownHostException
     {
         ServerAddress var2 = ServerAddress.func_78860_a(p_147224_1_.serverIP);
         final NetworkManager var3 = NetworkManager.provideLanClient(InetAddress.getByName(var2.getIP()), var2.getPort());
@@ -78,12 +78,12 @@ public class OldServerPinger
                 if (var2.func_151322_c() != null)
                 {
                     p_147224_1_.gameVersion = var2.func_151322_c().func_151303_a();
-                    p_147224_1_.field_82821_f = var2.func_151322_c().func_151304_b();
+                    p_147224_1_.version = var2.func_151322_c().func_151304_b();
                 }
                 else
                 {
                     p_147224_1_.gameVersion = "Old";
-                    p_147224_1_.field_82821_f = 0;
+                    p_147224_1_.version = 0;
                 }
 
                 if (var2.func_151318_b() != null)
@@ -161,7 +161,7 @@ public class OldServerPinger
                     OldServerPinger.logger.error("Can\'t ping " + p_147224_1_.serverIP + ": " + p_147231_1_.getUnformattedText());
                     p_147224_1_.serverMOTD = EnumChatFormatting.DARK_RED + "Can\'t connect to server.";
                     p_147224_1_.populationInfo = "";
-                    OldServerPinger.this.func_147225_b(p_147224_1_);
+                    OldServerPinger.this.tryCompatibilityPing(p_147224_1_);
                 }
             }
             public void onConnectionStateTransition(EnumConnectionState p_147232_1_, EnumConnectionState p_147232_2_)
@@ -185,7 +185,7 @@ public class OldServerPinger
         }
     }
 
-    private void func_147225_b(final ServerData p_147225_1_)
+    private void tryCompatibilityPing(final ServerData p_147225_1_)
     {
         final ServerAddress var2 = ServerAddress.func_78860_a(p_147225_1_.serverIP);
         ((Bootstrap)((Bootstrap)((Bootstrap)(new Bootstrap()).group(NetworkManager.eventLoops)).handler(new ChannelInitializer()
@@ -266,7 +266,7 @@ public class OldServerPinger
                                     String var8 = var5[3];
                                     int var9 = MathHelper.parseIntWithDefault(var5[4], -1);
                                     int var10 = MathHelper.parseIntWithDefault(var5[5], -1);
-                                    p_147225_1_.field_82821_f = -1;
+                                    p_147225_1_.version = -1;
                                     p_147225_1_.gameVersion = var7;
                                     p_147225_1_.serverMOTD = var8;
                                     p_147225_1_.populationInfo = EnumChatFormatting.GRAY + "" + var9 + "" + EnumChatFormatting.DARK_GRAY + "/" + EnumChatFormatting.GRAY + var10;
@@ -289,7 +289,7 @@ public class OldServerPinger
         })).channel(NioSocketChannel.class)).connect(var2.getIP(), var2.getPort());
     }
 
-    public void func_147223_a()
+    public void pingPendingNetworks()
     {
         List var1 = this.field_147229_c;
 
@@ -318,7 +318,7 @@ public class OldServerPinger
         }
     }
 
-    public void func_147226_b()
+    public void clearPendingNetworks()
     {
         List var1 = this.field_147229_c;
 
diff --git a/net/minecraft/client/renderer/EntityRenderer.java b/net/minecraft/client/renderer/EntityRenderer.java
index f9ff65e..9094e4e 100644
--- a/net/minecraft/client/renderer/EntityRenderer.java
+++ b/net/minecraft/client/renderer/EntityRenderer.java
@@ -1,11 +1,11 @@
 package net.minecraft.client.renderer;
 
-import com.google.gson.JsonSyntaxException;
 import java.io.IOException;
 import java.nio.FloatBuffer;
 import java.util.List;
 import java.util.Random;
 import java.util.concurrent.Callable;
+
 import net.minecraft.block.Block;
 import net.minecraft.block.material.Material;
 import net.minecraft.client.Minecraft;
@@ -42,6 +42,7 @@ import net.minecraft.util.ReportedException;
 import net.minecraft.util.ResourceLocation;
 import net.minecraft.util.Vec3;
 import net.minecraft.world.biome.BiomeGenBase;
+
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 import org.lwjgl.input.Mouse;
@@ -50,6 +51,15 @@ import org.lwjgl.opengl.GL11;
 import org.lwjgl.opengl.GLContext;
 import org.lwjgl.util.glu.Project;
 
+import tk.wurst_client.Client;
+import tk.wurst_client.module.Module;
+import tk.wurst_client.module.modules.AntiBlind;
+import tk.wurst_client.module.modules.ArenaBrawl;
+import tk.wurst_client.module.modules.NoHurtcam;
+import tk.wurst_client.module.modules.Tracers;
+
+import com.google.gson.JsonSyntaxException;
+
 public class EntityRenderer implements IResourceManagerReloadListener
 {
     private static final Logger logger = LogManager.getLogger();
@@ -535,6 +545,8 @@ public class EntityRenderer implements IResourceManagerReloadListener
 
     private void hurtCameraEffect(float par1)
     {
+    	if(Client.Wurst.moduleManager.getModuleFromClass(NoHurtcam.class).getToggled())
+    		return;
         EntityLivingBase var2 = this.mc.renderViewEntity;
         float var3 = (float)var2.hurtTime - par1;
         float var4;
@@ -728,12 +740,14 @@ public class EntityRenderer implements IResourceManagerReloadListener
 
         if (this.mc.gameSettings.viewBobbing)
         {
+        	if(!Client.Wurst.moduleManager.getModuleFromClass(Tracers.class).getToggled() && !Client.Wurst.moduleManager.getModuleFromClass(ArenaBrawl.class).getToggled())
         		this.setupViewBobbing(par1);
         }
 
         var4 = this.mc.thePlayer.prevTimeInPortal + (this.mc.thePlayer.timeInPortal - this.mc.thePlayer.prevTimeInPortal) * par1;
 
-        if (var4 > 0.0F)
+        //TODO: Client
+        if (var4 > 0.0F && !Client.Wurst.moduleManager.getModuleFromClass(AntiBlind.class).getToggled())
         {
             byte var5 = 20;
 
@@ -1112,8 +1126,8 @@ public class EntityRenderer implements IResourceManagerReloadListener
             int var14 = var13.getScaledWidth();
             int var15 = var13.getScaledHeight();
             final int var16 = Mouse.getX() * var14 / this.mc.displayWidth;
-            final int var17 = var15 - Mouse.getY() * var15 / this.mc.displayHeight - 1;
-            int var18 = this.mc.gameSettings.limitFramerate;
+            final int var18 = var15 - Mouse.getY() * var15 / this.mc.displayHeight - 1;
+            int var17 = this.mc.gameSettings.limitFramerate;
 
             if (this.mc.theWorld != null)
             {
@@ -1121,7 +1135,7 @@ public class EntityRenderer implements IResourceManagerReloadListener
 
                 if (this.mc.isFramerateLimitBelowMax())
                 {
-                    this.renderWorld(par1, this.renderEndNanoTime + (long)(1000000000 / var18));
+                    this.renderWorld(par1, this.renderEndNanoTime + (long)(1000000000 / var17));
                 }
                 else
                 {
@@ -1148,7 +1162,7 @@ public class EntityRenderer implements IResourceManagerReloadListener
                 if (!this.mc.gameSettings.hideGUI || this.mc.currentScreen != null)
                 {
                     GL11.glAlphaFunc(GL11.GL_GREATER, 0.1F);
-                    this.mc.ingameGUI.renderGameOverlay(par1, this.mc.currentScreen != null, var16, var17);
+                    this.mc.ingameGUI.renderGameOverlay(par1, this.mc.currentScreen != null, var16, var18);
                 }
 
                 this.mc.mcProfiler.endSection();
@@ -1170,7 +1184,7 @@ public class EntityRenderer implements IResourceManagerReloadListener
 
                 try
                 {
-                    this.mc.currentScreen.drawScreen(var16, var17, par1);
+                    this.mc.currentScreen.drawScreen(var16, var18, par1);
                 }
                 catch (Throwable var12)
                 {
@@ -1189,7 +1203,7 @@ public class EntityRenderer implements IResourceManagerReloadListener
                         private static final String __OBFID = "CL_00000950";
                         public String call()
                         {
-                            return String.format("Scaled: (%d, %d). Absolute: (%d, %d)", new Object[] {Integer.valueOf(var16), Integer.valueOf(var17), Integer.valueOf(Mouse.getX()), Integer.valueOf(Mouse.getY())});
+                            return String.format("Scaled: (%d, %d). Absolute: (%d, %d)", new Object[] {Integer.valueOf(var16), Integer.valueOf(var18), Integer.valueOf(Mouse.getX()), Integer.valueOf(Mouse.getY())});
                         }
                     });
                     var11.addCrashSectionCallable("Screen size", new Callable()
@@ -1427,6 +1441,12 @@ public class EntityRenderer implements IResourceManagerReloadListener
 
             this.mc.mcProfiler.endStartSection("hand");
             
+            //TODO: Client
+            for(Module eventModule : Client.Wurst.moduleManager.activeModules)
+            {
+            	eventModule.onRender();
+            }
+
             if (this.cameraZoom == 1.0D)
             {
                 GL11.glClear(GL11.GL_DEPTH_BUFFER_BIT);
@@ -1644,8 +1664,8 @@ public class EntityRenderer implements IResourceManagerReloadListener
                         {
                             this.random.setSeed((long)(var21 * var21 * 3121 + var21 * 45238971 ^ var20 * var20 * 418711 + var20 * 13761));
                             float var31 = var25.getFloatTemperature(var21, var27, var20);
-                            float var32;
                             double var35;
+                            float var32;
 
                             if (var42.getWorldChunkManager().getTemperatureAtHeight(var31, var26) >= 0.15F)
                             {
@@ -1835,7 +1855,8 @@ public class EntityRenderer implements IResourceManagerReloadListener
         this.fogColorBlue *= var22;
         double var14 = (var3.lastTickPosY + (var3.posY - var3.lastTickPosY) * (double)par1) * var2.provider.getVoidFogYFactor();
 
-        if (var3.isPotionActive(Potion.blindness))
+        //TODO: Client
+        if (var3.isPotionActive(Potion.blindness) && !Client.Wurst.moduleManager.getModuleFromClass(AntiBlind.class).getToggled())
         {
             int var16 = var3.getActivePotionEffect(Potion.blindness).getDuration();
 
@@ -1943,7 +1964,8 @@ public class EntityRenderer implements IResourceManagerReloadListener
             Block var5 = ActiveRenderInfo.getBlockAtEntityViewpoint(this.mc.theWorld, var3, par2);
             float var6;
 
-            if (var3.isPotionActive(Potion.blindness))
+            //TODO: Client
+            if (var3.isPotionActive(Potion.blindness) && !Client.Wurst.moduleManager.getModuleFromClass(AntiBlind.class).getToggled())
             {
                 var6 = 5.0F;
                 int var7 = var3.getActivePotionEffect(Potion.blindness).getDuration();
diff --git a/net/minecraft/client/renderer/ItemRenderer.java b/net/minecraft/client/renderer/ItemRenderer.java
index 8886a25..308a149 100644
--- a/net/minecraft/client/renderer/ItemRenderer.java
+++ b/net/minecraft/client/renderer/ItemRenderer.java
@@ -280,12 +280,12 @@ public class ItemRenderer
             GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
         }
 
-        float var16;
         float var17;
+        float var16;
         float var18;
         float var22;
-        Render var27;
-        RenderPlayer var29;
+        RenderPlayer var25;
+        Render var26;
 
         if (var8 != null && var8.getItem() == Items.filled_map)
         {
@@ -316,18 +316,18 @@ public class ItemRenderer
 
             for (int var24 = 0; var24 < 2; ++var24)
             {
-                int var25 = var24 * 2 - 1;
+                int var28 = var24 * 2 - 1;
                 GL11.glPushMatrix();
-                GL11.glTranslatef(-0.0F, -0.6F, 1.1F * (float)var25);
-                GL11.glRotatef((float)(-45 * var25), 1.0F, 0.0F, 0.0F);
+                GL11.glTranslatef(-0.0F, -0.6F, 1.1F * (float)var28);
+                GL11.glRotatef((float)(-45 * var28), 1.0F, 0.0F, 0.0F);
                 GL11.glRotatef(-90.0F, 0.0F, 0.0F, 1.0F);
                 GL11.glRotatef(59.0F, 0.0F, 0.0F, 1.0F);
-                GL11.glRotatef((float)(-65 * var25), 0.0F, 1.0F, 0.0F);
-                var27 = RenderManager.instance.getEntityRenderObject(this.mc.thePlayer);
-                var29 = (RenderPlayer)var27;
+                GL11.glRotatef((float)(-65 * var28), 0.0F, 1.0F, 0.0F);
+                var26 = RenderManager.instance.getEntityRenderObject(this.mc.thePlayer);
+                var25 = (RenderPlayer)var26;
                 var18 = 1.0F;
                 GL11.glScalef(var18, var18, var18);
-                var29.renderFirstPersonArm(this.mc.thePlayer);
+                var25.renderFirstPersonArm(this.mc.thePlayer);
                 GL11.glPopMatrix();
             }
 
@@ -345,15 +345,15 @@ public class ItemRenderer
             var18 = 0.015625F;
             GL11.glScalef(var18, var18, var18);
             this.mc.getTextureManager().bindTexture(RES_MAP_BACKGROUND);
-            Tessellator var30 = Tessellator.instance;
+            Tessellator var31 = Tessellator.instance;
             GL11.glNormal3f(0.0F, 0.0F, -1.0F);
-            var30.startDrawingQuads();
-            byte var31 = 7;
-            var30.addVertexWithUV((double)(0 - var31), (double)(128 + var31), 0.0D, 0.0D, 1.0D);
-            var30.addVertexWithUV((double)(128 + var31), (double)(128 + var31), 0.0D, 1.0D, 1.0D);
-            var30.addVertexWithUV((double)(128 + var31), (double)(0 - var31), 0.0D, 1.0D, 0.0D);
-            var30.addVertexWithUV((double)(0 - var31), (double)(0 - var31), 0.0D, 0.0D, 0.0D);
-            var30.draw();
+            var31.startDrawingQuads();
+            byte var30 = 7;
+            var31.addVertexWithUV((double)(0 - var30), (double)(128 + var30), 0.0D, 0.0D, 1.0D);
+            var31.addVertexWithUV((double)(128 + var30), (double)(128 + var30), 0.0D, 1.0D, 1.0D);
+            var31.addVertexWithUV((double)(128 + var30), (double)(0 - var30), 0.0D, 1.0D, 0.0D);
+            var31.addVertexWithUV((double)(0 - var30), (double)(0 - var30), 0.0D, 0.0D, 0.0D);
+            var31.draw();
             MapData var21 = Items.filled_map.getMapData(var8, this.mc.theWorld);
 
             if (var21 != null)
@@ -412,16 +412,16 @@ public class ItemRenderer
 
             if (var3.getItemInUseCount() > 0)
             {
-                EnumAction var26 = var8.getItemUseAction();
+                EnumAction var29 = var8.getItemUseAction();
 
-                if (var26 == EnumAction.block)
+                if (var29 == EnumAction.block)
                 {
                     GL11.glTranslatef(-0.5F, 0.2F, 0.0F);
                     GL11.glRotatef(30.0F, 0.0F, 1.0F, 0.0F);
                     GL11.glRotatef(-80.0F, 1.0F, 0.0F, 0.0F);
                     GL11.glRotatef(60.0F, 0.0F, 1.0F, 0.0F);
                 }
-                else if (var26 == EnumAction.bow)
+                else if (var29 == EnumAction.bow)
                 {
                     GL11.glRotatef(-18.0F, 0.0F, 0.0F, 1.0F);
                     GL11.glRotatef(-12.0F, 0.0F, 1.0F, 0.0F);
@@ -461,10 +461,10 @@ public class ItemRenderer
             if (var8.getItem().requiresMultipleRenderPasses())
             {
                 this.renderItem(var3, var8, 0);
-                int var28 = var8.getItem().getColorFromItemStack(var8, 1);
-                var18 = (float)(var28 >> 16 & 255) / 255.0F;
-                var19 = (float)(var28 >> 8 & 255) / 255.0F;
-                var20 = (float)(var28 & 255) / 255.0F;
+                int var27 = var8.getItem().getColorFromItemStack(var8, 1);
+                var18 = (float)(var27 >> 16 & 255) / 255.0F;
+                var19 = (float)(var27 >> 8 & 255) / 255.0F;
+                var20 = (float)(var27 & 255) / 255.0F;
                 GL11.glColor4f(1.0F * var18, 1.0F * var19, 1.0F * var20, 1.0F);
                 this.renderItem(var3, var8, 1);
             }
@@ -498,11 +498,11 @@ public class ItemRenderer
             GL11.glRotatef(-135.0F, 0.0F, 1.0F, 0.0F);
             GL11.glScalef(1.0F, 1.0F, 1.0F);
             GL11.glTranslatef(5.6F, 0.0F, 0.0F);
-            var27 = RenderManager.instance.getEntityRenderObject(this.mc.thePlayer);
-            var29 = (RenderPlayer)var27;
+            var26 = RenderManager.instance.getEntityRenderObject(this.mc.thePlayer);
+            var25 = (RenderPlayer)var26;
             var18 = 1.0F;
             GL11.glScalef(var18, var18, var18);
-            var29.renderFirstPersonArm(this.mc.thePlayer);
+            var25.renderFirstPersonArm(this.mc.thePlayer);
             GL11.glPopMatrix();
         }
 
diff --git a/net/minecraft/client/renderer/RenderBlocks.java b/net/minecraft/client/renderer/RenderBlocks.java
index fae6f59..e0e6622 100644
--- a/net/minecraft/client/renderer/RenderBlocks.java
+++ b/net/minecraft/client/renderer/RenderBlocks.java
@@ -496,40 +496,40 @@ public class RenderBlocks
         }
 
         var5.setColorOpaque_F(var7, var8, var9);
-        IIcon var31 = this.getBlockIconFromSideAndMetadata(p_147741_1_, 0, 0);
+        IIcon var32 = this.getBlockIconFromSideAndMetadata(p_147741_1_, 0, 0);
 
         if (this.hasOverrideBlockTexture())
         {
-            var31 = this.overrideBlockTexture;
+            var32 = this.overrideBlockTexture;
         }
 
-        double var32 = (double)var31.getMinV();
-        double var13 = (double)var31.getMaxV();
+        double var31 = (double)var32.getMinV();
+        double var13 = (double)var32.getMaxV();
         int var15 = this.blockAccess.getBlockMetadata(p_147741_2_, p_147741_3_, p_147741_4_);
 
         for (int var16 = 0; var16 < 3; ++var16)
         {
             double var17 = (double)var16 * Math.PI * 2.0D / 3.0D + (Math.PI / 2D);
-            double var19 = (double)var31.getInterpolatedU(8.0D);
-            double var21 = (double)var31.getMaxU();
+            double var19 = (double)var32.getInterpolatedU(8.0D);
+            double var21 = (double)var32.getMaxU();
 
             if ((var15 & 1 << var16) != 0)
             {
-                var21 = (double)var31.getMinU();
+                var21 = (double)var32.getMinU();
             }
 
             double var23 = (double)p_147741_2_ + 0.5D;
             double var25 = (double)p_147741_2_ + 0.5D + Math.sin(var17) * 8.0D / 16.0D;
             double var27 = (double)p_147741_4_ + 0.5D;
             double var29 = (double)p_147741_4_ + 0.5D + Math.cos(var17) * 8.0D / 16.0D;
-            var5.addVertexWithUV(var23, (double)(p_147741_3_ + 1), var27, var19, var32);
+            var5.addVertexWithUV(var23, (double)(p_147741_3_ + 1), var27, var19, var31);
             var5.addVertexWithUV(var23, (double)(p_147741_3_ + 0), var27, var19, var13);
             var5.addVertexWithUV(var25, (double)(p_147741_3_ + 0), var29, var21, var13);
-            var5.addVertexWithUV(var25, (double)(p_147741_3_ + 1), var29, var21, var32);
-            var5.addVertexWithUV(var25, (double)(p_147741_3_ + 1), var29, var21, var32);
+            var5.addVertexWithUV(var25, (double)(p_147741_3_ + 1), var29, var21, var31);
+            var5.addVertexWithUV(var25, (double)(p_147741_3_ + 1), var29, var21, var31);
             var5.addVertexWithUV(var25, (double)(p_147741_3_ + 0), var29, var21, var13);
             var5.addVertexWithUV(var23, (double)(p_147741_3_ + 0), var27, var19, var13);
-            var5.addVertexWithUV(var23, (double)(p_147741_3_ + 1), var27, var19, var32);
+            var5.addVertexWithUV(var23, (double)(p_147741_3_ + 1), var27, var19, var31);
         }
 
         p_147741_1_.setBlockBoundsForItemRender();
@@ -2072,13 +2072,13 @@ public class RenderBlocks
         double var13 = (double)var8.getMaxU();
         double var15 = (double)var8.getMaxV();
         float var17 = 1.4F;
+        double var32;
         double var20;
         double var22;
         double var24;
         double var26;
         double var28;
         double var30;
-        double var32;
 
         if (!World.doesBlockHaveSolidTopSurface(this.blockAccess, p_147801_2_, p_147801_3_ - 1, p_147801_4_) && !Blocks.fire.func_149844_e(this.blockAccess, p_147801_2_, p_147801_3_ - 1, p_147801_4_))
         {
@@ -3136,12 +3136,12 @@ public class RenderBlocks
         }
         else
         {
-            int var65 = this.blockAccess.getBlockMetadata(p_147767_2_, p_147767_3_, p_147767_4_);
-            var63 = this.getBlockIconFromSideAndMetadata(p_147767_1_, 0, var65);
+            int var66 = this.blockAccess.getBlockMetadata(p_147767_2_, p_147767_3_, p_147767_4_);
+            var63 = this.getBlockIconFromSideAndMetadata(p_147767_1_, 0, var66);
             var64 = p_147767_1_.func_150097_e();
         }
 
-        double var66 = (double)var63.getMinU();
+        double var65 = (double)var63.getMinU();
         double var15 = (double)var63.getInterpolatedU(8.0D);
         double var17 = (double)var63.getMaxU();
         double var19 = (double)var63.getMinV();
@@ -3174,12 +3174,12 @@ public class RenderBlocks
         {
             if (var55 && !var56)
             {
-                var6.addVertexWithUV(var33, (double)(p_147767_3_ + 1), var41, var66, var19);
-                var6.addVertexWithUV(var33, (double)(p_147767_3_ + 0), var41, var66, var21);
+                var6.addVertexWithUV(var33, (double)(p_147767_3_ + 1), var41, var65, var19);
+                var6.addVertexWithUV(var33, (double)(p_147767_3_ + 0), var41, var65, var21);
                 var6.addVertexWithUV(var35, (double)(p_147767_3_ + 0), var41, var15, var21);
                 var6.addVertexWithUV(var35, (double)(p_147767_3_ + 1), var41, var15, var19);
-                var6.addVertexWithUV(var35, (double)(p_147767_3_ + 1), var41, var66, var19);
-                var6.addVertexWithUV(var35, (double)(p_147767_3_ + 0), var41, var66, var21);
+                var6.addVertexWithUV(var35, (double)(p_147767_3_ + 1), var41, var65, var19);
+                var6.addVertexWithUV(var35, (double)(p_147767_3_ + 0), var41, var65, var21);
                 var6.addVertexWithUV(var33, (double)(p_147767_3_ + 0), var41, var15, var21);
                 var6.addVertexWithUV(var33, (double)(p_147767_3_ + 1), var41, var15, var19);
 
@@ -3269,12 +3269,12 @@ public class RenderBlocks
         }
         else
         {
-            var6.addVertexWithUV(var33, (double)(p_147767_3_ + 1), var41, var66, var19);
-            var6.addVertexWithUV(var33, (double)(p_147767_3_ + 0), var41, var66, var21);
+            var6.addVertexWithUV(var33, (double)(p_147767_3_ + 1), var41, var65, var19);
+            var6.addVertexWithUV(var33, (double)(p_147767_3_ + 0), var41, var65, var21);
             var6.addVertexWithUV(var37, (double)(p_147767_3_ + 0), var41, var17, var21);
             var6.addVertexWithUV(var37, (double)(p_147767_3_ + 1), var41, var17, var19);
-            var6.addVertexWithUV(var37, (double)(p_147767_3_ + 1), var41, var66, var19);
-            var6.addVertexWithUV(var37, (double)(p_147767_3_ + 0), var41, var66, var21);
+            var6.addVertexWithUV(var37, (double)(p_147767_3_ + 1), var41, var65, var19);
+            var6.addVertexWithUV(var37, (double)(p_147767_3_ + 0), var41, var65, var21);
             var6.addVertexWithUV(var33, (double)(p_147767_3_ + 0), var41, var17, var21);
             var6.addVertexWithUV(var33, (double)(p_147767_3_ + 1), var41, var17, var19);
 
@@ -3359,12 +3359,12 @@ public class RenderBlocks
         {
             if (var53 && !var54)
             {
-                var6.addVertexWithUV(var35, (double)(p_147767_3_ + 1), var39, var66, var19);
-                var6.addVertexWithUV(var35, (double)(p_147767_3_ + 0), var39, var66, var21);
+                var6.addVertexWithUV(var35, (double)(p_147767_3_ + 1), var39, var65, var19);
+                var6.addVertexWithUV(var35, (double)(p_147767_3_ + 0), var39, var65, var21);
                 var6.addVertexWithUV(var35, (double)(p_147767_3_ + 0), var41, var15, var21);
                 var6.addVertexWithUV(var35, (double)(p_147767_3_ + 1), var41, var15, var19);
-                var6.addVertexWithUV(var35, (double)(p_147767_3_ + 1), var41, var66, var19);
-                var6.addVertexWithUV(var35, (double)(p_147767_3_ + 0), var41, var66, var21);
+                var6.addVertexWithUV(var35, (double)(p_147767_3_ + 1), var41, var65, var19);
+                var6.addVertexWithUV(var35, (double)(p_147767_3_ + 0), var41, var65, var21);
                 var6.addVertexWithUV(var35, (double)(p_147767_3_ + 0), var39, var15, var21);
                 var6.addVertexWithUV(var35, (double)(p_147767_3_ + 1), var39, var15, var19);
 
@@ -3454,12 +3454,12 @@ public class RenderBlocks
         }
         else
         {
-            var6.addVertexWithUV(var35, (double)(p_147767_3_ + 1), var43, var66, var19);
-            var6.addVertexWithUV(var35, (double)(p_147767_3_ + 0), var43, var66, var21);
+            var6.addVertexWithUV(var35, (double)(p_147767_3_ + 1), var43, var65, var19);
+            var6.addVertexWithUV(var35, (double)(p_147767_3_ + 0), var43, var65, var21);
             var6.addVertexWithUV(var35, (double)(p_147767_3_ + 0), var39, var17, var21);
             var6.addVertexWithUV(var35, (double)(p_147767_3_ + 1), var39, var17, var19);
-            var6.addVertexWithUV(var35, (double)(p_147767_3_ + 1), var39, var66, var19);
-            var6.addVertexWithUV(var35, (double)(p_147767_3_ + 0), var39, var66, var21);
+            var6.addVertexWithUV(var35, (double)(p_147767_3_ + 1), var39, var65, var19);
+            var6.addVertexWithUV(var35, (double)(p_147767_3_ + 0), var39, var65, var21);
             var6.addVertexWithUV(var35, (double)(p_147767_3_ + 0), var43, var17, var21);
             var6.addVertexWithUV(var35, (double)(p_147767_3_ + 1), var43, var17, var19);
 
@@ -4025,9 +4025,9 @@ public class RenderBlocks
             double var28 = (double)this.getFluidHeight(p_147721_2_ + 1, p_147721_3_, p_147721_4_ + 1, var22);
             double var30 = (double)this.getFluidHeight(p_147721_2_ + 1, p_147721_3_, p_147721_4_, var22);
             double var32 = 0.0010000000474974513D;
-            float var52;
-            float var53;
             float var54;
+            float var53;
+            float var52;
 
             if (this.renderAllFaces || var10)
             {
@@ -4044,14 +4044,14 @@ public class RenderBlocks
                 var26 -= var32;
                 var28 -= var32;
                 var30 -= var32;
-                double var36;
                 double var38;
-                double var40;
+                double var36;
                 double var42;
-                double var44;
+                double var40;
                 double var46;
-                double var48;
+                double var44;
                 double var50;
+                double var48;
 
                 if (var35 < -999.0F)
                 {
@@ -4125,10 +4125,10 @@ public class RenderBlocks
                 if (this.renderAllFaces || var12[var57])
                 {
                     double var39;
-                    double var41;
                     double var43;
-                    double var45;
+                    double var41;
                     double var47;
+                    double var45;
                     double var49;
 
                     if (var57 == 0)
@@ -4355,12 +4355,12 @@ public class RenderBlocks
             var13 = false;
         }
 
-        boolean var16;
         boolean var17;
-        boolean var18;
+        boolean var16;
         boolean var19;
-        int var20;
+        boolean var18;
         float var21;
+        int var20;
 
         if (this.renderAllFaces || p_147751_1_.shouldSideBeRendered(this.blockAccess, p_147751_2_, p_147751_3_ - 1, p_147751_4_, 0))
         {
@@ -5145,12 +5145,12 @@ public class RenderBlocks
             var13 = false;
         }
 
-        boolean var16;
         boolean var17;
-        boolean var18;
+        boolean var16;
         boolean var19;
-        int var20;
+        boolean var18;
         float var21;
+        int var20;
 
         if (this.renderAllFaces || p_147808_1_.shouldSideBeRendered(this.blockAccess, p_147808_2_, p_147808_3_ - 1, p_147808_4_, 0))
         {
@@ -5371,14 +5371,14 @@ public class RenderBlocks
             var8 = true;
         }
 
-        float var22;
         float var23;
-        float var24;
+        float var22;
         float var25;
-        int var26;
+        float var24;
         int var27;
-        int var28;
+        int var26;
         int var29;
+        int var28;
         IIcon var30;
 
         if (this.renderAllFaces || p_147808_1_.shouldSideBeRendered(this.blockAccess, p_147808_2_, p_147808_3_, p_147808_4_ - 1, 2))
@@ -6576,8 +6576,8 @@ public class RenderBlocks
 
         this.renderAllFaces = true;
         float var15;
-        float var16;
         float var17;
+        float var16;
         float var18;
 
         if (var8 != 3 && var8 != 1)
@@ -6617,8 +6617,8 @@ public class RenderBlocks
             }
 
             float var19;
-            float var20;
             float var21;
+            float var20;
 
             if (var8 == 3)
             {
diff --git a/net/minecraft/client/renderer/RenderGlobal.java b/net/minecraft/client/renderer/RenderGlobal.java
index 9a5d144..c895610 100644
--- a/net/minecraft/client/renderer/RenderGlobal.java
+++ b/net/minecraft/client/renderer/RenderGlobal.java
@@ -508,8 +508,8 @@ public class RenderGlobal implements IWorldAccess
             this.theWorld.theProfiler.endStartSection("global");
             List var17 = this.theWorld.getLoadedEntityList();
             this.countEntitiesTotal = var17.size();
-            int var18;
             Entity var19;
+            int var18;
 
             for (var18 = 0; var18 < this.theWorld.weatherEffects.size(); ++var18)
             {
@@ -965,10 +965,10 @@ public class RenderGlobal implements IWorldAccess
             }
         }
 
-        EntityLivingBase var22 = this.mc.renderViewEntity;
-        double var23 = var22.lastTickPosX + (var22.posX - var22.lastTickPosX) * par4;
-        double var13 = var22.lastTickPosY + (var22.posY - var22.lastTickPosY) * par4;
-        double var15 = var22.lastTickPosZ + (var22.posZ - var22.lastTickPosZ) * par4;
+        EntityLivingBase var23 = this.mc.renderViewEntity;
+        double var22 = var23.lastTickPosX + (var23.posX - var23.lastTickPosX) * par4;
+        double var13 = var23.lastTickPosY + (var23.posY - var23.lastTickPosY) * par4;
+        double var15 = var23.lastTickPosZ + (var23.posZ - var23.lastTickPosZ) * par4;
         int var17 = 0;
         int var18;
 
@@ -993,7 +993,7 @@ public class RenderGlobal implements IWorldAccess
             if (var20 < 0)
             {
                 var20 = var17++;
-                this.allRenderLists[var20].setupRenderList(var19.posXMinus, var19.posYMinus, var19.posZMinus, var23, var13, var15);
+                this.allRenderLists[var20].setupRenderList(var19.posXMinus, var19.posYMinus, var19.posZMinus, var22, var13, var15);
             }
 
             this.allRenderLists[var20].addGLRenderList(var19.getGLCallListForPass(par3));
@@ -1199,12 +1199,12 @@ public class RenderGlobal implements IWorldAccess
             var12 = 20.0F;
             this.renderEngine.bindTexture(locationMoonPhasesPng);
             int var28 = this.theWorld.getMoonPhase();
-            int var29 = var28 % 4;
-            int var30 = var28 / 4 % 2;
-            float var16 = (float)(var29 + 0) / 4.0F;
-            float var17 = (float)(var30 + 0) / 2.0F;
-            float var18 = (float)(var29 + 1) / 4.0F;
-            float var19 = (float)(var30 + 1) / 2.0F;
+            int var30 = var28 % 4;
+            int var29 = var28 / 4 % 2;
+            float var16 = (float)(var30 + 0) / 4.0F;
+            float var17 = (float)(var29 + 0) / 2.0F;
+            float var18 = (float)(var30 + 1) / 4.0F;
+            float var19 = (float)(var29 + 1) / 2.0F;
             var23.startDrawingQuads();
             var23.addVertexWithUV((double)(-var12), -100.0D, (double)var12, (double)var18, (double)var19);
             var23.addVertexWithUV((double)var12, -100.0D, (double)var12, (double)var16, (double)var19);
@@ -1382,8 +1382,8 @@ public class RenderGlobal implements IWorldAccess
         float var17 = (float)var15.yCoord;
         float var18 = (float)var15.zCoord;
         float var19;
-        float var20;
         float var21;
+        float var20;
 
         if (this.mc.gameSettings.anaglyph)
         {
@@ -2178,16 +2178,16 @@ public class RenderGlobal implements IWorldAccess
                     else
                     {
                         int var26;
-                        String[] var27;
+                        String[] var28;
 
                         if (par1Str.startsWith("iconcrack_"))
                         {
-                            var27 = par1Str.split("_", 3);
-                            int var25 = Integer.parseInt(var27[1]);
+                            var28 = par1Str.split("_", 3);
+                            int var25 = Integer.parseInt(var28[1]);
 
-                            if (var27.length > 2)
+                            if (var28.length > 2)
                             {
-                                var26 = Integer.parseInt(var27[2]);
+                                var26 = Integer.parseInt(var28[2]);
                                 var21 = new EntityBreakingFX(this.theWorld, par2, par4, par6, par8, par10, par12, Item.getItemById(var25), var26);
                             }
                             else
@@ -2197,21 +2197,21 @@ public class RenderGlobal implements IWorldAccess
                         }
                         else
                         {
-                            Block var28;
+                            Block var27;
 
                             if (par1Str.startsWith("blockcrack_"))
                             {
-                                var27 = par1Str.split("_", 3);
-                                var28 = Block.getBlockById(Integer.parseInt(var27[1]));
-                                var26 = Integer.parseInt(var27[2]);
-                                var21 = (new EntityDiggingFX(this.theWorld, par2, par4, par6, par8, par10, par12, var28, var26)).applyRenderColor(var26);
+                                var28 = par1Str.split("_", 3);
+                                var27 = Block.getBlockById(Integer.parseInt(var28[1]));
+                                var26 = Integer.parseInt(var28[2]);
+                                var21 = (new EntityDiggingFX(this.theWorld, par2, par4, par6, par8, par10, par12, var27, var26)).applyRenderColor(var26);
                             }
                             else if (par1Str.startsWith("blockdust_"))
                             {
-                                var27 = par1Str.split("_", 3);
-                                var28 = Block.getBlockById(Integer.parseInt(var27[1]));
-                                var26 = Integer.parseInt(var27[2]);
-                                var21 = (new EntityBlockDustFX(this.theWorld, par2, par4, par6, par8, par10, par12, var28, var26)).applyRenderColor(var26);
+                                var28 = par1Str.split("_", 3);
+                                var27 = Block.getBlockById(Integer.parseInt(var28[1]));
+                                var26 = Integer.parseInt(var28[2]);
+                                var21 = (new EntityBlockDustFX(this.theWorld, par2, par4, par6, par8, par10, par12, var27, var26)).applyRenderColor(var26);
                             }
                         }
                     }
@@ -2408,14 +2408,14 @@ public class RenderGlobal implements IWorldAccess
                 int var10 = par6 / 3 % 3 - 1;
                 var11 = (double)par3 + (double)var34 * 0.6D + 0.5D;
                 var13 = (double)par4 + 0.5D;
-                double var35 = (double)par5 + (double)var10 * 0.6D + 0.5D;
+                double var36 = (double)par5 + (double)var10 * 0.6D + 0.5D;
 
                 for (int var37 = 0; var37 < 10; ++var37)
                 {
                     double var38 = var7.nextDouble() * 0.2D + 0.01D;
                     double var39 = var11 + (double)var34 * 0.01D + (var7.nextDouble() - 0.5D) * (double)var10 * 0.5D;
                     var22 = var13 + (var7.nextDouble() - 0.5D) * 0.5D;
-                    var41 = var35 + (double)var10 * 0.01D + (var7.nextDouble() - 0.5D) * (double)var34 * 0.5D;
+                    var41 = var36 + (double)var10 * 0.01D + (var7.nextDouble() - 0.5D) * (double)var34 * 0.5D;
                     var26 = (double)var34 * var38 + var7.nextGaussian() * 0.01D;
                     var28 = -0.03D + var7.nextGaussian() * 0.01D;
                     var30 = (double)var10 * var38 + var7.nextGaussian() * 0.01D;
@@ -2488,10 +2488,10 @@ public class RenderGlobal implements IWorldAccess
                     this.spawnParticle(var15, var9, var11, var13, var7.nextGaussian() * 0.15D, var7.nextDouble() * 0.2D, var7.nextGaussian() * 0.15D);
                 }
 
-                for (double var36 = 0.0D; var36 < (Math.PI * 2D); var36 += 0.15707963267948966D)
+                for (double var35 = 0.0D; var35 < (Math.PI * 2D); var35 += 0.15707963267948966D)
                 {
-                    this.spawnParticle("portal", var9 + Math.cos(var36) * 5.0D, var11 - 0.4D, var13 + Math.sin(var36) * 5.0D, Math.cos(var36) * -5.0D, 0.0D, Math.sin(var36) * -5.0D);
-                    this.spawnParticle("portal", var9 + Math.cos(var36) * 5.0D, var11 - 0.4D, var13 + Math.sin(var36) * 5.0D, Math.cos(var36) * -7.0D, 0.0D, Math.sin(var36) * -7.0D);
+                    this.spawnParticle("portal", var9 + Math.cos(var35) * 5.0D, var11 - 0.4D, var13 + Math.sin(var35) * 5.0D, Math.cos(var35) * -5.0D, 0.0D, Math.sin(var35) * -5.0D);
+                    this.spawnParticle("portal", var9 + Math.cos(var35) * 5.0D, var11 - 0.4D, var13 + Math.sin(var35) * 5.0D, Math.cos(var35) * -7.0D, 0.0D, Math.sin(var35) * -7.0D);
                 }
 
                 return;
diff --git a/net/minecraft/client/renderer/Tessellator.java b/net/minecraft/client/renderer/Tessellator.java
index f445a0f..a398438 100644
--- a/net/minecraft/client/renderer/Tessellator.java
+++ b/net/minecraft/client/renderer/Tessellator.java
@@ -6,10 +6,17 @@ import java.nio.FloatBuffer;
 import java.nio.IntBuffer;
 import java.nio.ShortBuffer;
 import java.util.PriorityQueue;
+
+import net.minecraft.client.Minecraft;
 import net.minecraft.client.shader.TesselatorVertexState;
 import net.minecraft.client.util.QuadComparator;
+
 import org.lwjgl.opengl.GL11;
 
+import tk.wurst_client.Client;
+import tk.wurst_client.module.modules.LSD;
+import tk.wurst_client.utils.XRayUtils;
+
 public class Tessellator
 {
     /** The byte buffer used for GL allocation. */
@@ -99,6 +106,8 @@ public class Tessellator
 
     /** The size of the buffers used (in integers). */
     private int bufferSize;
+
+	public static boolean shouldRenderLSD;
     private static final String __OBFID = "CL_00000960";
 
     private Tessellator(int par1)
@@ -311,7 +320,11 @@ public class Tessellator
      */
     public void setColorOpaque(int par1, int par2, int par3)
     {
-        this.setColorRGBA(par1, par2, par3, 255);
+    	//TODO: Client
+    	if(shouldRenderLSD || (Minecraft.getMinecraft().thePlayer != null && Client.Wurst.moduleManager.getModuleFromClass(LSD.class).getToggled()) && !OpenGlHelper.shadersSupported)
+    		this.setColorRGBA(LSD.randomColor(0, par1), LSD.randomColor(1, par2), LSD.randomColor(2, par3), XRayUtils.isXRay ? XRayUtils.xrayOpacity : 255);
+    	else
+    		this.setColorRGBA(par1, par2, par3, XRayUtils.isXRay ? XRayUtils.xrayOpacity : 255);
     }
 
     /**
diff --git a/net/minecraft/client/renderer/WorldRenderer.java b/net/minecraft/client/renderer/WorldRenderer.java
index de5d65b..be4489c 100644
--- a/net/minecraft/client/renderer/WorldRenderer.java
+++ b/net/minecraft/client/renderer/WorldRenderer.java
@@ -3,6 +3,7 @@ package net.minecraft.client.renderer;
 import java.util.ArrayList;
 import java.util.HashSet;
 import java.util.List;
+
 import net.minecraft.block.Block;
 import net.minecraft.block.material.Material;
 import net.minecraft.client.Minecraft;
@@ -18,6 +19,7 @@ import net.minecraft.util.MathHelper;
 import net.minecraft.world.ChunkCache;
 import net.minecraft.world.World;
 import net.minecraft.world.chunk.Chunk;
+
 import org.lwjgl.opengl.GL11;
 
 public class WorldRenderer
@@ -281,7 +283,15 @@ public class WorldRenderer
     {
         if (p_147891_1_ == 1 && !this.skipRenderPass[p_147891_1_])
         {
+        	//TODO: Client
+        	//This should fix a rare crash when turning off X-Ray.
+        	try
+        	{
         		this.vertexState = tessellator.getVertexState((float)p_147891_2_.posX, (float)p_147891_2_.posY, (float)p_147891_2_.posZ);
+        	}catch(Exception e)
+        	{
+        		e.printStackTrace();
+        	}
         }
 
         this.bytesDrawn += tessellator.draw();
diff --git a/net/minecraft/client/renderer/entity/Render.java b/net/minecraft/client/renderer/entity/Render.java
index ed15513..8092233 100644
--- a/net/minecraft/client/renderer/entity/Render.java
+++ b/net/minecraft/client/renderer/entity/Render.java
@@ -10,14 +10,20 @@ import net.minecraft.client.renderer.texture.IIconRegister;
 import net.minecraft.client.renderer.texture.TextureMap;
 import net.minecraft.entity.Entity;
 import net.minecraft.entity.EntityLiving;
+import net.minecraft.entity.EntityLivingBase;
 import net.minecraft.init.Blocks;
 import net.minecraft.util.AxisAlignedBB;
 import net.minecraft.util.IIcon;
 import net.minecraft.util.MathHelper;
 import net.minecraft.util.ResourceLocation;
 import net.minecraft.world.World;
+
 import org.lwjgl.opengl.GL11;
 
+import tk.wurst_client.Client;
+import tk.wurst_client.module.modules.HealthTags;
+import tk.wurst_client.module.modules.NameTags;
+
 public abstract class Render
 {
     private static final ResourceLocation shadowTextures = new ResourceLocation("textures/misc/shadow.png");
@@ -345,7 +351,9 @@ public abstract class Render
         {
             FontRenderer var12 = this.getFontRendererFromRenderManager();
             float var13 = 1.6F;
-            float var14 = 0.016666668F * var13;
+            //TODO: Client
+            float var14 = 0.016666668F * var13 * (p_147906_1_.getDistanceToEntity(this.renderManager.livingPlayer) > 10 && Client.Wurst.moduleManager.getModuleFromClass(NameTags.class).getToggled() ? p_147906_1_.getDistanceToEntity(this.renderManager.livingPlayer) / 10 : 1);
+            var14 *= (Client.Wurst.moduleManager.getModuleFromClass(NameTags.class).getToggled() ? (p_147906_1_.boundingBox.getAverageEdgeLength() > - 50 ? 1 : p_147906_1_.getDistanceToEntity(this.renderManager.livingPlayer) / 300) : 1);
             GL11.glPushMatrix();
             GL11.glTranslatef((float)p_147906_3_ + 0.0F, (float)p_147906_5_ + p_147906_1_.height + 0.5F, (float)p_147906_7_);
             GL11.glNormal3f(0.0F, 1.0F, 0.0F);
@@ -365,6 +373,23 @@ public abstract class Render
                 var16 = -10;
             }
 
+            //TODO: Client
+            if(Client.Wurst.options.friends.contains(p_147906_1_.getCommandSenderName()))
+            	p_147906_2_ = "§2" + (p_147906_2_.startsWith("§") ? p_147906_2_.substring(2) : p_147906_2_);
+            if(p_147906_1_ instanceof EntityLivingBase && Client.Wurst.moduleManager.getModuleFromClass(HealthTags.class).getToggled())
+            {
+            	p_147906_2_ += " ";
+            	int health = (int)((EntityLivingBase) p_147906_1_).getHealth();
+            	if(health <= 5)
+            		p_147906_2_ += "§4";
+            	else if(health <= 10)
+            		p_147906_2_ += "§6";
+            	else if(health <= 15)
+            		p_147906_2_ += "§e";
+            	else if(health <= 20)
+            		p_147906_2_ += "§a";
+            	p_147906_2_ += health;
+            }
             GL11.glDisable(GL11.GL_TEXTURE_2D);
             var15.startDrawingQuads();
             int var17 = var12.getStringWidth(p_147906_2_) / 2;
diff --git a/net/minecraft/client/renderer/entity/RenderBiped.java b/net/minecraft/client/renderer/entity/RenderBiped.java
index 2667e06..2f8147d 100644
--- a/net/minecraft/client/renderer/entity/RenderBiped.java
+++ b/net/minecraft/client/renderer/entity/RenderBiped.java
@@ -285,27 +285,27 @@ public class RenderBiped extends RenderLiving
 
             float var8;
             float var9;
-            int var13;
+            int var12;
 
             if (var3.getItem().requiresMultipleRenderPasses())
             {
-                for (var13 = 0; var13 <= 1; ++var13)
+                for (var12 = 0; var12 <= 1; ++var12)
                 {
-                    int var11 = var3.getItem().getColorFromItemStack(var3, var13);
+                    int var11 = var3.getItem().getColorFromItemStack(var3, var12);
                     var8 = (float)(var11 >> 16 & 255) / 255.0F;
                     var9 = (float)(var11 >> 8 & 255) / 255.0F;
                     float var10 = (float)(var11 & 255) / 255.0F;
                     GL11.glColor4f(var8, var9, var10, 1.0F);
-                    this.renderManager.itemRenderer.renderItem(par1EntityLiving, var3, var13);
+                    this.renderManager.itemRenderer.renderItem(par1EntityLiving, var3, var12);
                 }
             }
             else
             {
-                var13 = var3.getItem().getColorFromItemStack(var3, 0);
-                float var12 = (float)(var13 >> 16 & 255) / 255.0F;
-                var8 = (float)(var13 >> 8 & 255) / 255.0F;
-                var9 = (float)(var13 & 255) / 255.0F;
-                GL11.glColor4f(var12, var8, var9, 1.0F);
+                var12 = var3.getItem().getColorFromItemStack(var3, 0);
+                float var13 = (float)(var12 >> 16 & 255) / 255.0F;
+                var8 = (float)(var12 >> 8 & 255) / 255.0F;
+                var9 = (float)(var12 & 255) / 255.0F;
+                GL11.glColor4f(var13, var8, var9, 1.0F);
                 this.renderManager.itemRenderer.renderItem(par1EntityLiving, var3, 0);
             }
 
diff --git a/net/minecraft/client/renderer/entity/RenderItem.java b/net/minecraft/client/renderer/entity/RenderItem.java
index bdfb2fe..4b71f33 100644
--- a/net/minecraft/client/renderer/entity/RenderItem.java
+++ b/net/minecraft/client/renderer/entity/RenderItem.java
@@ -86,13 +86,13 @@ public class RenderItem extends Render
 
             GL11.glTranslatef((float)par2, (float)par4 + var11, (float)par6);
             GL11.glEnable(GL12.GL_RESCALE_NORMAL);
-            float var18;
             float var19;
-            int var25;
+            float var18;
+            int var24;
 
             if (var10.getItemSpriteNumber() == 0 && var10.getItem() instanceof ItemBlock && RenderBlocks.renderItemIn3d(Block.getBlockFromItem(var10.getItem()).getRenderType()))
             {
-                Block var22 = Block.getBlockFromItem(var10.getItem());
+                Block var21 = Block.getBlockFromItem(var10.getItem());
                 GL11.glRotatef(var12, 0.0F, 1.0F, 0.0F);
 
                 if (renderInFrame)
@@ -102,22 +102,22 @@ public class RenderItem extends Render
                     GL11.glRotatef(-90.0F, 0.0F, 1.0F, 0.0F);
                 }
 
-                float var24 = 0.25F;
-                var25 = var22.getRenderType();
+                float var25 = 0.25F;
+                var24 = var21.getRenderType();
 
-                if (var25 == 1 || var25 == 19 || var25 == 12 || var25 == 2)
+                if (var24 == 1 || var24 == 19 || var24 == 12 || var24 == 2)
                 {
-                    var24 = 0.5F;
+                    var25 = 0.5F;
                 }
 
-                if (var22.getRenderBlockPass() > 0)
+                if (var21.getRenderBlockPass() > 0)
                 {
                     GL11.glAlphaFunc(GL11.GL_GREATER, 0.1F);
                     GL11.glEnable(GL11.GL_BLEND);
                     OpenGlHelper.glBlendFunc(770, 771, 1, 0);
                 }
 
-                GL11.glScalef(var24, var24, var24);
+                GL11.glScalef(var25, var25, var25);
 
                 for (int var26 = 0; var26 < var13; ++var26)
                 {
@@ -125,17 +125,17 @@ public class RenderItem extends Render
 
                     if (var26 > 0)
                     {
-                        var18 = (this.random.nextFloat() * 2.0F - 1.0F) * 0.2F / var24;
-                        var19 = (this.random.nextFloat() * 2.0F - 1.0F) * 0.2F / var24;
-                        float var20 = (this.random.nextFloat() * 2.0F - 1.0F) * 0.2F / var24;
+                        var18 = (this.random.nextFloat() * 2.0F - 1.0F) * 0.2F / var25;
+                        var19 = (this.random.nextFloat() * 2.0F - 1.0F) * 0.2F / var25;
+                        float var20 = (this.random.nextFloat() * 2.0F - 1.0F) * 0.2F / var25;
                         GL11.glTranslatef(var18, var19, var20);
                     }
 
-                    this.field_147913_i.renderBlockAsItem(var22, var10.getItemDamage(), 1.0F);
+                    this.field_147913_i.renderBlockAsItem(var21, var10.getItemDamage(), 1.0F);
                     GL11.glPopMatrix();
                 }
 
-                if (var22.getRenderBlockPass() > 0)
+                if (var21.getRenderBlockPass() > 0)
                 {
                     GL11.glDisable(GL11.GL_BLEND);
                 }
@@ -156,23 +156,23 @@ public class RenderItem extends Render
                         GL11.glScalef(0.5F, 0.5F, 0.5F);
                     }
 
-                    for (int var21 = 0; var21 <= 1; ++var21)
+                    for (int var23 = 0; var23 <= 1; ++var23)
                     {
                         this.random.setSeed(187L);
-                        IIcon var23 = var10.getItem().getIconFromDamageForRenderPass(var10.getItemDamage(), var21);
+                        IIcon var22 = var10.getItem().getIconFromDamageForRenderPass(var10.getItemDamage(), var23);
 
                         if (this.renderWithColor)
                         {
-                            var25 = var10.getItem().getColorFromItemStack(var10, var21);
-                            var17 = (float)(var25 >> 16 & 255) / 255.0F;
-                            var18 = (float)(var25 >> 8 & 255) / 255.0F;
-                            var19 = (float)(var25 & 255) / 255.0F;
+                            var24 = var10.getItem().getColorFromItemStack(var10, var23);
+                            var17 = (float)(var24 >> 16 & 255) / 255.0F;
+                            var18 = (float)(var24 >> 8 & 255) / 255.0F;
+                            var19 = (float)(var24 & 255) / 255.0F;
                             GL11.glColor4f(var17, var18, var19, 1.0F);
-                            this.renderDroppedItem(par1EntityItem, var23, var13, par9, var17, var18, var19);
+                            this.renderDroppedItem(par1EntityItem, var22, var13, par9, var17, var18, var19);
                         }
                         else
                         {
-                            this.renderDroppedItem(par1EntityItem, var23, var13, par9, 1.0F, 1.0F, 1.0F);
+                            this.renderDroppedItem(par1EntityItem, var22, var13, par9, 1.0F, 1.0F, 1.0F);
                         }
                     }
                 }
@@ -350,9 +350,9 @@ public class RenderItem extends Render
                 if (var27 > 0)
                 {
                     var17 = (this.random.nextFloat() * 2.0F - 1.0F) * 0.3F;
-                    float var28 = (this.random.nextFloat() * 2.0F - 1.0F) * 0.3F;
                     float var29 = (this.random.nextFloat() * 2.0F - 1.0F) * 0.3F;
-                    GL11.glTranslatef(var17, var28, var29);
+                    float var28 = (this.random.nextFloat() * 2.0F - 1.0F) * 0.3F;
+                    GL11.glTranslatef(var17, var29, var28);
                 }
 
                 if (!renderInFrame)
@@ -382,15 +382,15 @@ public class RenderItem extends Render
         Object var7 = par3ItemStack.getIconIndex();
         GL11.glEnable(GL11.GL_BLEND);
         OpenGlHelper.glBlendFunc(770, 771, 1, 0);
-        int var9;
-        float var12;
         float var17;
         float var18;
+        int var9;
+        float var12;
 
         if (par3ItemStack.getItemSpriteNumber() == 0 && RenderBlocks.renderItemIn3d(Block.getBlockFromItem(par3ItemStack.getItem()).getRenderType()))
         {
             par2TextureManager.bindTexture(TextureMap.locationBlocksTexture);
-            Block var16 = Block.getBlockFromItem(par3ItemStack.getItem());
+            Block var15 = Block.getBlockFromItem(par3ItemStack.getItem());
             GL11.glPushMatrix();
             GL11.glTranslatef((float)(par4 - 2), (float)(par5 + 3), -3.0F + this.zLevel);
             GL11.glScalef(10.0F, 10.0F, 10.0F);
@@ -399,18 +399,18 @@ public class RenderItem extends Render
             GL11.glRotatef(210.0F, 1.0F, 0.0F, 0.0F);
             GL11.glRotatef(45.0F, 0.0F, 1.0F, 0.0F);
             var9 = par3ItemStack.getItem().getColorFromItemStack(par3ItemStack, 0);
-            var17 = (float)(var9 >> 16 & 255) / 255.0F;
-            var18 = (float)(var9 >> 8 & 255) / 255.0F;
+            var18 = (float)(var9 >> 16 & 255) / 255.0F;
+            var17 = (float)(var9 >> 8 & 255) / 255.0F;
             var12 = (float)(var9 & 255) / 255.0F;
 
             if (this.renderWithColor)
             {
-                GL11.glColor4f(var17, var18, var12, 1.0F);
+                GL11.glColor4f(var18, var17, var12, 1.0F);
             }
 
             GL11.glRotatef(-90.0F, 0.0F, 1.0F, 0.0F);
             this.field_147913_i.useInventoryTint = this.renderWithColor;
-            this.field_147913_i.renderBlockAsItem(var16, var6, 1.0F);
+            this.field_147913_i.renderBlockAsItem(var15, var6, 1.0F);
             this.field_147913_i.useInventoryTint = true;
             GL11.glPopMatrix();
         }
@@ -460,22 +460,22 @@ public class RenderItem extends Render
         else
         {
             GL11.glDisable(GL11.GL_LIGHTING);
-            ResourceLocation var15 = par2TextureManager.getResourceLocation(par3ItemStack.getItemSpriteNumber());
-            par2TextureManager.bindTexture(var15);
+            ResourceLocation var16 = par2TextureManager.getResourceLocation(par3ItemStack.getItemSpriteNumber());
+            par2TextureManager.bindTexture(var16);
 
             if (var7 == null)
             {
-                var7 = ((TextureMap)Minecraft.getMinecraft().getTextureManager().getTexture(var15)).getAtlasSprite("missingno");
+                var7 = ((TextureMap)Minecraft.getMinecraft().getTextureManager().getTexture(var16)).getAtlasSprite("missingno");
             }
 
             var9 = par3ItemStack.getItem().getColorFromItemStack(par3ItemStack, 0);
-            var17 = (float)(var9 >> 16 & 255) / 255.0F;
-            var18 = (float)(var9 >> 8 & 255) / 255.0F;
+            var18 = (float)(var9 >> 16 & 255) / 255.0F;
+            var17 = (float)(var9 >> 8 & 255) / 255.0F;
             var12 = (float)(var9 & 255) / 255.0F;
 
             if (this.renderWithColor)
             {
-                GL11.glColor4f(var17, var18, var12, 1.0F);
+                GL11.glColor4f(var18, var17, var12, 1.0F);
             }
 
             this.renderIcon(par4, par5, (IIcon)var7, 16, 16);
diff --git a/net/minecraft/client/renderer/entity/RenderMinecart.java b/net/minecraft/client/renderer/entity/RenderMinecart.java
index 52b68eb..2e01d89 100644
--- a/net/minecraft/client/renderer/entity/RenderMinecart.java
+++ b/net/minecraft/client/renderer/entity/RenderMinecart.java
@@ -82,19 +82,19 @@ public class RenderMinecart extends Render
         GL11.glRotatef(180.0F - par8, 0.0F, 1.0F, 0.0F);
         GL11.glRotatef(-var24, 0.0F, 0.0F, 1.0F);
         float var31 = (float)par1EntityMinecart.getRollingAmplitude() - par9;
-        float var32 = par1EntityMinecart.getDamage() - par9;
+        float var33 = par1EntityMinecart.getDamage() - par9;
 
-        if (var32 < 0.0F)
+        if (var33 < 0.0F)
         {
-            var32 = 0.0F;
+            var33 = 0.0F;
         }
 
         if (var31 > 0.0F)
         {
-            GL11.glRotatef(MathHelper.sin(var31) * var31 * var32 / 10.0F * (float)par1EntityMinecart.getRollingDirection(), 1.0F, 0.0F, 0.0F);
+            GL11.glRotatef(MathHelper.sin(var31) * var31 * var33 / 10.0F * (float)par1EntityMinecart.getRollingDirection(), 1.0F, 0.0F, 0.0F);
         }
 
-        int var33 = par1EntityMinecart.getDisplayTileOffset();
+        int var32 = par1EntityMinecart.getDisplayTileOffset();
         Block var28 = par1EntityMinecart.func_145820_n();
         int var29 = par1EntityMinecart.getDisplayTileData();
 
@@ -104,7 +104,7 @@ public class RenderMinecart extends Render
             this.bindTexture(TextureMap.locationBlocksTexture);
             float var30 = 0.75F;
             GL11.glScalef(var30, var30, var30);
-            GL11.glTranslatef(0.0F, (float)var33 / 16.0F, 0.0F);
+            GL11.glTranslatef(0.0F, (float)var32 / 16.0F, 0.0F);
             this.func_147910_a(par1EntityMinecart, par9, var28, var29);
             GL11.glPopMatrix();
             GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
diff --git a/net/minecraft/client/renderer/entity/RenderPlayer.java b/net/minecraft/client/renderer/entity/RenderPlayer.java
index fe79c0e..8511f7e 100644
--- a/net/minecraft/client/renderer/entity/RenderPlayer.java
+++ b/net/minecraft/client/renderer/entity/RenderPlayer.java
@@ -234,7 +234,7 @@ public class RenderPlayer extends RendererLivingEntity
             this.bindTexture(par1AbstractClientPlayer.getLocationCape());
             GL11.glPushMatrix();
             GL11.glTranslatef(0.0F, 0.0F, 0.125F);
-            double var23 = par1AbstractClientPlayer.field_71091_bM + (par1AbstractClientPlayer.field_71094_bP - par1AbstractClientPlayer.field_71091_bM) * (double)par2 - (par1AbstractClientPlayer.prevPosX + (par1AbstractClientPlayer.posX - par1AbstractClientPlayer.prevPosX) * (double)par2);
+            double var25 = par1AbstractClientPlayer.field_71091_bM + (par1AbstractClientPlayer.field_71094_bP - par1AbstractClientPlayer.field_71091_bM) * (double)par2 - (par1AbstractClientPlayer.prevPosX + (par1AbstractClientPlayer.posX - par1AbstractClientPlayer.prevPosX) * (double)par2);
             double var26 = par1AbstractClientPlayer.field_71096_bN + (par1AbstractClientPlayer.field_71095_bQ - par1AbstractClientPlayer.field_71096_bN) * (double)par2 - (par1AbstractClientPlayer.prevPosY + (par1AbstractClientPlayer.posY - par1AbstractClientPlayer.prevPosY) * (double)par2);
             double var9 = par1AbstractClientPlayer.field_71097_bO + (par1AbstractClientPlayer.field_71085_bR - par1AbstractClientPlayer.field_71097_bO) * (double)par2 - (par1AbstractClientPlayer.prevPosZ + (par1AbstractClientPlayer.posZ - par1AbstractClientPlayer.prevPosZ) * (double)par2);
             var11 = par1AbstractClientPlayer.prevRenderYawOffset + (par1AbstractClientPlayer.renderYawOffset - par1AbstractClientPlayer.prevRenderYawOffset) * par2;
@@ -252,8 +252,8 @@ public class RenderPlayer extends RendererLivingEntity
                 var16 = 32.0F;
             }
 
-            float var17 = (float)(var23 * var12 + var9 * var14) * 100.0F;
-            float var18 = (float)(var23 * var14 - var9 * var12) * 100.0F;
+            float var17 = (float)(var25 * var12 + var9 * var14) * 100.0F;
+            float var18 = (float)(var25 * var14 - var9 * var12) * 100.0F;
 
             if (var17 < 0.0F)
             {
@@ -276,9 +276,9 @@ public class RenderPlayer extends RendererLivingEntity
             GL11.glPopMatrix();
         }
 
-        ItemStack var25 = par1AbstractClientPlayer.inventory.getCurrentItem();
+        ItemStack var23 = par1AbstractClientPlayer.inventory.getCurrentItem();
 
-        if (var25 != null)
+        if (var23 != null)
         {
             GL11.glPushMatrix();
             this.modelBipedMain.bipedRightArm.postRender(0.0625F);
@@ -286,17 +286,17 @@ public class RenderPlayer extends RendererLivingEntity
 
             if (par1AbstractClientPlayer.fishEntity != null)
             {
-                var25 = new ItemStack(Items.stick);
+                var23 = new ItemStack(Items.stick);
             }
 
             EnumAction var24 = null;
 
             if (par1AbstractClientPlayer.getItemInUseCount() > 0)
             {
-                var24 = var25.getItemUseAction();
+                var24 = var23.getItemUseAction();
             }
 
-            if (var25.getItem() instanceof ItemBlock && RenderBlocks.renderItemIn3d(Block.getBlockFromItem(var25.getItem()).getRenderType()))
+            if (var23.getItem() instanceof ItemBlock && RenderBlocks.renderItemIn3d(Block.getBlockFromItem(var23.getItem()).getRenderType()))
             {
                 var7 = 0.5F;
                 GL11.glTranslatef(0.0F, 0.1875F, -0.3125F);
@@ -305,7 +305,7 @@ public class RenderPlayer extends RendererLivingEntity
                 GL11.glRotatef(45.0F, 0.0F, 1.0F, 0.0F);
                 GL11.glScalef(-var7, -var7, var7);
             }
-            else if (var25.getItem() == Items.bow)
+            else if (var23.getItem() == Items.bow)
             {
                 var7 = 0.625F;
                 GL11.glTranslatef(0.0F, 0.125F, 0.3125F);
@@ -314,11 +314,11 @@ public class RenderPlayer extends RendererLivingEntity
                 GL11.glRotatef(-100.0F, 1.0F, 0.0F, 0.0F);
                 GL11.glRotatef(45.0F, 0.0F, 1.0F, 0.0F);
             }
-            else if (var25.getItem().isFull3D())
+            else if (var23.getItem().isFull3D())
             {
                 var7 = 0.625F;
 
-                if (var25.getItem().shouldRotateAroundWhenRendering())
+                if (var23.getItem().shouldRotateAroundWhenRendering())
                 {
                     GL11.glRotatef(180.0F, 0.0F, 0.0F, 1.0F);
                     GL11.glTranslatef(0.0F, -0.125F, 0.0F);
@@ -348,29 +348,29 @@ public class RenderPlayer extends RendererLivingEntity
             }
 
             float var10;
-            int var28;
             float var29;
+            int var28;
 
-            if (var25.getItem().requiresMultipleRenderPasses())
+            if (var23.getItem().requiresMultipleRenderPasses())
             {
                 for (var28 = 0; var28 <= 1; ++var28)
                 {
-                    int var8 = var25.getItem().getColorFromItemStack(var25, var28);
+                    int var8 = var23.getItem().getColorFromItemStack(var23, var28);
                     var29 = (float)(var8 >> 16 & 255) / 255.0F;
                     var10 = (float)(var8 >> 8 & 255) / 255.0F;
                     var11 = (float)(var8 & 255) / 255.0F;
                     GL11.glColor4f(var29, var10, var11, 1.0F);
-                    this.renderManager.itemRenderer.renderItem(par1AbstractClientPlayer, var25, var28);
+                    this.renderManager.itemRenderer.renderItem(par1AbstractClientPlayer, var23, var28);
                 }
             }
             else
             {
-                var28 = var25.getItem().getColorFromItemStack(var25, 0);
+                var28 = var23.getItem().getColorFromItemStack(var23, 0);
                 float var27 = (float)(var28 >> 16 & 255) / 255.0F;
                 var29 = (float)(var28 >> 8 & 255) / 255.0F;
                 var10 = (float)(var28 & 255) / 255.0F;
                 GL11.glColor4f(var27, var29, var10, 1.0F);
-                this.renderManager.itemRenderer.renderItem(par1AbstractClientPlayer, var25, 0);
+                this.renderManager.itemRenderer.renderItem(par1AbstractClientPlayer, var23, 0);
             }
 
             GL11.glPopMatrix();
diff --git a/net/minecraft/client/renderer/entity/RenderXPOrb.java b/net/minecraft/client/renderer/entity/RenderXPOrb.java
index 05b806e..acc3698 100644
--- a/net/minecraft/client/renderer/entity/RenderXPOrb.java
+++ b/net/minecraft/client/renderer/entity/RenderXPOrb.java
@@ -44,11 +44,11 @@ public class RenderXPOrb extends Render
         int var20 = var18 / 65536;
         OpenGlHelper.setLightmapTextureCoords(OpenGlHelper.lightmapTexUnit, (float)var19 / 1.0F, (float)var20 / 1.0F);
         GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
-        float var26 = 255.0F;
-        float var27 = ((float)par1EntityXPOrb.xpColor + par9) / 2.0F;
-        var20 = (int)((MathHelper.sin(var27 + 0.0F) + 1.0F) * 0.5F * var26);
-        int var21 = (int)var26;
-        int var22 = (int)((MathHelper.sin(var27 + 4.1887903F) + 1.0F) * 0.1F * var26);
+        float var27 = 255.0F;
+        float var26 = ((float)par1EntityXPOrb.xpColor + par9) / 2.0F;
+        var20 = (int)((MathHelper.sin(var26 + 0.0F) + 1.0F) * 0.5F * var27);
+        int var21 = (int)var27;
+        int var22 = (int)((MathHelper.sin(var26 + 4.1887903F) + 1.0F) * 0.1F * var27);
         int var23 = var20 << 16 | var21 << 8 | var22;
         GL11.glRotatef(180.0F - this.renderManager.playerViewY, 0.0F, 1.0F, 0.0F);
         GL11.glRotatef(-this.renderManager.playerViewX, 1.0F, 0.0F, 0.0F);
diff --git a/net/minecraft/client/renderer/entity/RendererLivingEntity.java b/net/minecraft/client/renderer/entity/RendererLivingEntity.java
index be82630..54b307e 100644
--- a/net/minecraft/client/renderer/entity/RendererLivingEntity.java
+++ b/net/minecraft/client/renderer/entity/RendererLivingEntity.java
@@ -154,8 +154,8 @@ public abstract class RendererLivingEntity extends Render
             GL11.glEnable(GL11.GL_ALPHA_TEST);
             this.mainModel.setLivingAnimations(par1EntityLivingBase, var16, var15, par9);
             this.renderModel(par1EntityLivingBase, var16, var15, var13, var11 - var10, var26, var14);
-            int var18;
             float var19;
+            int var18;
             float var20;
             float var22;
 
@@ -251,16 +251,16 @@ public abstract class RendererLivingEntity extends Render
                 {
                     var19 = (float)(var18 >> 16 & 255) / 255.0F;
                     var20 = (float)(var18 >> 8 & 255) / 255.0F;
-                    float var29 = (float)(var18 & 255) / 255.0F;
+                    float var30 = (float)(var18 & 255) / 255.0F;
                     var22 = (float)(var18 >> 24 & 255) / 255.0F;
-                    GL11.glColor4f(var19, var20, var29, var22);
+                    GL11.glColor4f(var19, var20, var30, var22);
                     this.mainModel.render(par1EntityLivingBase, var16, var15, var13, var11 - var10, var26, var14);
 
-                    for (int var30 = 0; var30 < 4; ++var30)
+                    for (int var29 = 0; var29 < 4; ++var29)
                     {
-                        if (this.inheritRenderPass(par1EntityLivingBase, var30, par9) >= 0)
+                        if (this.inheritRenderPass(par1EntityLivingBase, var29, par9) >= 0)
                         {
-                            GL11.glColor4f(var19, var20, var29, var22);
+                            GL11.glColor4f(var19, var20, var30, var22);
                             this.renderPassModel.render(par1EntityLivingBase, var16, var15, var13, var11 - var10, var26, var14);
                         }
                     }
diff --git a/net/minecraft/client/renderer/texture/Stitcher.java b/net/minecraft/client/renderer/texture/Stitcher.java
index 079f1df..7c45c20 100644
--- a/net/minecraft/client/renderer/texture/Stitcher.java
+++ b/net/minecraft/client/renderer/texture/Stitcher.java
@@ -176,9 +176,9 @@ public class Stitcher
         else
         {
             boolean var13 = this.currentWidth + var2 <= this.maxWidth;
-            boolean var14 = this.currentHeight + var2 <= this.maxHeight;
+            boolean var15 = this.currentHeight + var2 <= this.maxHeight;
 
-            if (!var13 && !var14)
+            if (!var13 && !var15)
             {
                 return false;
             }
@@ -194,7 +194,7 @@ public class Stitcher
         }
         else
         {
-            Stitcher.Slot var15;
+            Stitcher.Slot var14;
 
             if (var4)
             {
@@ -208,17 +208,17 @@ public class Stitcher
                     this.currentHeight = par1StitchHolder.getHeight();
                 }
 
-                var15 = new Stitcher.Slot(this.currentWidth, 0, par1StitchHolder.getWidth(), this.currentHeight);
+                var14 = new Stitcher.Slot(this.currentWidth, 0, par1StitchHolder.getWidth(), this.currentHeight);
                 this.currentWidth += par1StitchHolder.getWidth();
             }
             else
             {
-                var15 = new Stitcher.Slot(0, this.currentHeight, this.currentWidth, par1StitchHolder.getHeight());
+                var14 = new Stitcher.Slot(0, this.currentHeight, this.currentWidth, par1StitchHolder.getHeight());
                 this.currentHeight += par1StitchHolder.getHeight();
             }
 
-            var15.addSlot(par1StitchHolder);
-            this.stitchSlots.add(var15);
+            var14.addSlot(par1StitchHolder);
+            this.stitchSlots.add(var14);
             return true;
         }
     }
diff --git a/net/minecraft/client/renderer/texture/TextureMap.java b/net/minecraft/client/renderer/texture/TextureMap.java
index 79fb986..c2df735 100644
--- a/net/minecraft/client/renderer/texture/TextureMap.java
+++ b/net/minecraft/client/renderer/texture/TextureMap.java
@@ -176,11 +176,11 @@ public class TextureMap extends AbstractTexture implements ITickableTextureObjec
             this.field_147636_j = var24;
         }
 
-        Iterator var25 = this.mapRegisteredSprites.values().iterator();
+        Iterator var26 = this.mapRegisteredSprites.values().iterator();
 
-        while (var25.hasNext())
+        while (var26.hasNext())
         {
-            final TextureAtlasSprite var27 = (TextureAtlasSprite)var25.next();
+            final TextureAtlasSprite var27 = (TextureAtlasSprite)var26.next();
 
             try
             {
@@ -189,8 +189,8 @@ public class TextureMap extends AbstractTexture implements ITickableTextureObjec
             catch (Throwable var20)
             {
                 CrashReport var29 = CrashReport.makeCrashReport(var20, "Applying mipmap");
-                CrashReportCategory var31 = var29.makeCategory("Sprite being mipmapped");
-                var31.addCrashSectionCallable("Sprite name", new Callable()
+                CrashReportCategory var32 = var29.makeCategory("Sprite being mipmapped");
+                var32.addCrashSectionCallable("Sprite name", new Callable()
                 {
                     private static final String __OBFID = "CL_00001059";
                     public String call()
@@ -198,7 +198,7 @@ public class TextureMap extends AbstractTexture implements ITickableTextureObjec
                         return var27.getIconName();
                     }
                 });
-                var31.addCrashSectionCallable("Sprite size", new Callable()
+                var32.addCrashSectionCallable("Sprite size", new Callable()
                 {
                     private static final String __OBFID = "CL_00001060";
                     public String call()
@@ -206,7 +206,7 @@ public class TextureMap extends AbstractTexture implements ITickableTextureObjec
                         return var27.getIconWidth() + " x " + var27.getIconHeight();
                     }
                 });
-                var31.addCrashSectionCallable("Sprite frames", new Callable()
+                var32.addCrashSectionCallable("Sprite frames", new Callable()
                 {
                     private static final String __OBFID = "CL_00001061";
                     public String call()
@@ -214,7 +214,7 @@ public class TextureMap extends AbstractTexture implements ITickableTextureObjec
                         return var27.getFrameCount() + " frames";
                     }
                 });
-                var31.addCrashSection("Mipmap levels", Integer.valueOf(this.field_147636_j));
+                var32.addCrashSection("Mipmap levels", Integer.valueOf(this.field_147636_j));
                 throw new ReportedException(var29);
             }
         }
@@ -233,14 +233,14 @@ public class TextureMap extends AbstractTexture implements ITickableTextureObjec
 
         logger.info("Created: {}x{} {}-atlas", new Object[] {Integer.valueOf(var3.getCurrentWidth()), Integer.valueOf(var3.getCurrentHeight()), this.basePath});
         TextureUtil.func_147946_a(this.getGlTextureId(), this.field_147636_j, var3.getCurrentWidth(), var3.getCurrentHeight(), (float)this.field_147637_k);
-        HashMap var26 = Maps.newHashMap(this.mapRegisteredSprites);
+        HashMap var25 = Maps.newHashMap(this.mapRegisteredSprites);
         Iterator var28 = var3.getStichSlots().iterator();
 
         while (var28.hasNext())
         {
             var8 = (TextureAtlasSprite)var28.next();
             String var30 = var8.getIconName();
-            var26.remove(var30);
+            var25.remove(var30);
             this.mapUploadedSprites.put(var30, var8);
 
             try
@@ -249,11 +249,11 @@ public class TextureMap extends AbstractTexture implements ITickableTextureObjec
             }
             catch (Throwable var18)
             {
-                CrashReport var32 = CrashReport.makeCrashReport(var18, "Stitching texture atlas");
-                CrashReportCategory var33 = var32.makeCategory("Texture being stitched together");
+                CrashReport var31 = CrashReport.makeCrashReport(var18, "Stitching texture atlas");
+                CrashReportCategory var33 = var31.makeCategory("Texture being stitched together");
                 var33.addCrashSection("Atlas path", this.basePath);
                 var33.addCrashSection("Sprite", var8);
-                throw new ReportedException(var32);
+                throw new ReportedException(var31);
             }
 
             if (var8.hasAnimationMetadata())
@@ -266,7 +266,7 @@ public class TextureMap extends AbstractTexture implements ITickableTextureObjec
             }
         }
 
-        var28 = var26.values().iterator();
+        var28 = var25.values().iterator();
 
         while (var28.hasNext())
         {
diff --git a/net/minecraft/client/settings/GameSettings.java b/net/minecraft/client/settings/GameSettings.java
index 3bcdaaf..ebf9032 100644
--- a/net/minecraft/client/settings/GameSettings.java
+++ b/net/minecraft/client/settings/GameSettings.java
@@ -1061,155 +1061,6 @@ public class GameSettings
         return this.renderDistanceChunks >= 4 && this.clouds;
     }
 
-    public static enum Options
-    {
-        INVERT_MOUSE("INVERT_MOUSE", 0, "options.invertMouse", false, true),
-        SENSITIVITY("SENSITIVITY", 1, "options.sensitivity", true, false),
-        FOV("FOV", 2, "options.fov", true, false),
-        GAMMA("GAMMA", 3, "options.gamma", true, false),
-        SATURATION("SATURATION", 4, "options.saturation", true, false),
-        RENDER_DISTANCE("RENDER_DISTANCE", 5, "options.renderDistance", true, false, 2.0F, 16.0F, 1.0F),
-        VIEW_BOBBING("VIEW_BOBBING", 6, "options.viewBobbing", false, true),
-        ANAGLYPH("ANAGLYPH", 7, "options.anaglyph", false, true),
-        ADVANCED_OPENGL("ADVANCED_OPENGL", 8, "options.advancedOpengl", false, true),
-        FRAMERATE_LIMIT("FRAMERATE_LIMIT", 9, "options.framerateLimit", true, false, 10.0F, 260.0F, 10.0F),
-        FBO_ENABLE("FBO_ENABLE", 10, "options.fboEnable", false, true),
-        DIFFICULTY("DIFFICULTY", 11, "options.difficulty", false, false),
-        GRAPHICS("GRAPHICS", 12, "options.graphics", false, false),
-        AMBIENT_OCCLUSION("AMBIENT_OCCLUSION", 13, "options.ao", false, false),
-        GUI_SCALE("GUI_SCALE", 14, "options.guiScale", false, false),
-        RENDER_CLOUDS("RENDER_CLOUDS", 15, "options.renderClouds", false, true),
-        PARTICLES("PARTICLES", 16, "options.particles", false, false),
-        CHAT_VISIBILITY("CHAT_VISIBILITY", 17, "options.chat.visibility", false, false),
-        CHAT_COLOR("CHAT_COLOR", 18, "options.chat.color", false, true),
-        CHAT_LINKS("CHAT_LINKS", 19, "options.chat.links", false, true),
-        CHAT_OPACITY("CHAT_OPACITY", 20, "options.chat.opacity", true, false),
-        CHAT_LINKS_PROMPT("CHAT_LINKS_PROMPT", 21, "options.chat.links.prompt", false, true),
-        USE_SERVER_TEXTURES("USE_SERVER_TEXTURES", 22, "options.serverTextures", false, true),
-        SNOOPER_ENABLED("SNOOPER_ENABLED", 23, "options.snooper", false, true),
-        USE_FULLSCREEN("USE_FULLSCREEN", 24, "options.fullscreen", false, true),
-        ENABLE_VSYNC("ENABLE_VSYNC", 25, "options.vsync", false, true),
-        SHOW_CAPE("SHOW_CAPE", 26, "options.showCape", false, true),
-        TOUCHSCREEN("TOUCHSCREEN", 27, "options.touchscreen", false, true),
-        CHAT_SCALE("CHAT_SCALE", 28, "options.chat.scale", true, false),
-        CHAT_WIDTH("CHAT_WIDTH", 29, "options.chat.width", true, false),
-        CHAT_HEIGHT_FOCUSED("CHAT_HEIGHT_FOCUSED", 30, "options.chat.height.focused", true, false),
-        CHAT_HEIGHT_UNFOCUSED("CHAT_HEIGHT_UNFOCUSED", 31, "options.chat.height.unfocused", true, false),
-        MIPMAP_LEVELS("MIPMAP_LEVELS", 32, "options.mipmapLevels", true, false, 0.0F, 4.0F, 1.0F),
-        ANISOTROPIC_FILTERING("ANISOTROPIC_FILTERING", 33, "options.anisotropicFiltering", true, false, 1.0F, 16.0F, 0.0F, null)
-        {
-            private static final String __OBFID = "CL_00000654";
-            protected float snapToStep(float p_148264_1_)
-            {
-                return (float)MathHelper.roundUpToPowerOfTwo((int)p_148264_1_);
-            }
-        },
-        FORCE_UNICODE_FONT("FORCE_UNICODE_FONT", 34, "options.forceUnicodeFont", false, true);
-        private final boolean enumFloat;
-        private final boolean enumBoolean;
-        private final String enumString;
-        private final float valueStep;
-        private float valueMin;
-        private float valueMax;
-
-        private static final GameSettings.Options[] $VALUES = new GameSettings.Options[]{INVERT_MOUSE, SENSITIVITY, FOV, GAMMA, SATURATION, RENDER_DISTANCE, VIEW_BOBBING, ANAGLYPH, ADVANCED_OPENGL, FRAMERATE_LIMIT, FBO_ENABLE, DIFFICULTY, GRAPHICS, AMBIENT_OCCLUSION, GUI_SCALE, RENDER_CLOUDS, PARTICLES, CHAT_VISIBILITY, CHAT_COLOR, CHAT_LINKS, CHAT_OPACITY, CHAT_LINKS_PROMPT, USE_SERVER_TEXTURES, SNOOPER_ENABLED, USE_FULLSCREEN, ENABLE_VSYNC, SHOW_CAPE, TOUCHSCREEN, CHAT_SCALE, CHAT_WIDTH, CHAT_HEIGHT_FOCUSED, CHAT_HEIGHT_UNFOCUSED, MIPMAP_LEVELS, ANISOTROPIC_FILTERING, FORCE_UNICODE_FONT};
-        private static final String __OBFID = "CL_00000653";
-
-        public static GameSettings.Options getEnumOptions(int par0)
-        {
-            GameSettings.Options[] var1 = values();
-            int var2 = var1.length;
-
-            for (int var3 = 0; var3 < var2; ++var3)
-            {
-                GameSettings.Options var4 = var1[var3];
-
-                if (var4.returnEnumOrdinal() == par0)
-                {
-                    return var4;
-                }
-            }
-
-            return null;
-        }
-
-        private Options(String par1Str, int par2, String par3Str, boolean par4, boolean par5)
-        {
-            this(par1Str, par2, par3Str, par4, par5, 0.0F, 1.0F, 0.0F);
-        }
-
-        private Options(String p_i45004_1_, int p_i45004_2_, String p_i45004_3_, boolean p_i45004_4_, boolean p_i45004_5_, float p_i45004_6_, float p_i45004_7_, float p_i45004_8_)
-        {
-            this.enumString = p_i45004_3_;
-            this.enumFloat = p_i45004_4_;
-            this.enumBoolean = p_i45004_5_;
-            this.valueMin = p_i45004_6_;
-            this.valueMax = p_i45004_7_;
-            this.valueStep = p_i45004_8_;
-        }
-
-        public boolean getEnumFloat()
-        {
-            return this.enumFloat;
-        }
-
-        public boolean getEnumBoolean()
-        {
-            return this.enumBoolean;
-        }
-
-        public int returnEnumOrdinal()
-        {
-            return this.ordinal();
-        }
-
-        public String getEnumString()
-        {
-            return this.enumString;
-        }
-
-        public float getValueMax()
-        {
-            return this.valueMax;
-        }
-
-        public void setValueMax(float p_148263_1_)
-        {
-            this.valueMax = p_148263_1_;
-        }
-
-        public float normalizeValue(float p_148266_1_)
-        {
-            return MathHelper.clamp_float((this.snapToStepClamp(p_148266_1_) - this.valueMin) / (this.valueMax - this.valueMin), 0.0F, 1.0F);
-        }
-
-        public float denormalizeValue(float p_148262_1_)
-        {
-            return this.snapToStepClamp(this.valueMin + (this.valueMax - this.valueMin) * MathHelper.clamp_float(p_148262_1_, 0.0F, 1.0F));
-        }
-
-        public float snapToStepClamp(float p_148268_1_)
-        {
-            p_148268_1_ = this.snapToStep(p_148268_1_);
-            return MathHelper.clamp_float(p_148268_1_, this.valueMin, this.valueMax);
-        }
-
-        protected float snapToStep(float p_148264_1_)
-        {
-            if (this.valueStep > 0.0F)
-            {
-                p_148264_1_ = this.valueStep * (float)Math.round(p_148264_1_ / this.valueStep);
-            }
-
-            return p_148264_1_;
-        }
-
-        Options(String p_i45005_1_, int p_i45005_2_, String p_i45005_3_, boolean p_i45005_4_, boolean p_i45005_5_, float p_i45005_6_, float p_i45005_7_, float p_i45005_8_, Object p_i45005_9_)
-        {
-            this(p_i45005_1_, p_i45005_2_, p_i45005_3_, p_i45005_4_, p_i45005_5_, p_i45005_6_, p_i45005_7_, p_i45005_8_);
-        }
-    }
-
     static final class SwitchOptions
     {
         static final int[] optionIds = new int[GameSettings.Options.values().length];
@@ -1362,4 +1213,153 @@ public class GameSettings
             }
         }
     }
+
+    public static enum Options
+    {
+        INVERT_MOUSE("INVERT_MOUSE", 0, "options.invertMouse", false, true),
+        SENSITIVITY("SENSITIVITY", 1, "options.sensitivity", true, false),
+        FOV("FOV", 2, "options.fov", true, false),
+        GAMMA("GAMMA", 3, "options.gamma", true, false),
+        SATURATION("SATURATION", 4, "options.saturation", true, false),
+        RENDER_DISTANCE("RENDER_DISTANCE", 5, "options.renderDistance", true, false, 2.0F, 16.0F, 1.0F),
+        VIEW_BOBBING("VIEW_BOBBING", 6, "options.viewBobbing", false, true),
+        ANAGLYPH("ANAGLYPH", 7, "options.anaglyph", false, true),
+        ADVANCED_OPENGL("ADVANCED_OPENGL", 8, "options.advancedOpengl", false, true),
+        FRAMERATE_LIMIT("FRAMERATE_LIMIT", 9, "options.framerateLimit", true, false, 10.0F, 260.0F, 10.0F),
+        FBO_ENABLE("FBO_ENABLE", 10, "options.fboEnable", false, true),
+        DIFFICULTY("DIFFICULTY", 11, "options.difficulty", false, false),
+        GRAPHICS("GRAPHICS", 12, "options.graphics", false, false),
+        AMBIENT_OCCLUSION("AMBIENT_OCCLUSION", 13, "options.ao", false, false),
+        GUI_SCALE("GUI_SCALE", 14, "options.guiScale", false, false),
+        RENDER_CLOUDS("RENDER_CLOUDS", 15, "options.renderClouds", false, true),
+        PARTICLES("PARTICLES", 16, "options.particles", false, false),
+        CHAT_VISIBILITY("CHAT_VISIBILITY", 17, "options.chat.visibility", false, false),
+        CHAT_COLOR("CHAT_COLOR", 18, "options.chat.color", false, true),
+        CHAT_LINKS("CHAT_LINKS", 19, "options.chat.links", false, true),
+        CHAT_OPACITY("CHAT_OPACITY", 20, "options.chat.opacity", true, false),
+        CHAT_LINKS_PROMPT("CHAT_LINKS_PROMPT", 21, "options.chat.links.prompt", false, true),
+        USE_SERVER_TEXTURES("USE_SERVER_TEXTURES", 22, "options.serverTextures", false, true),
+        SNOOPER_ENABLED("SNOOPER_ENABLED", 23, "options.snooper", false, true),
+        USE_FULLSCREEN("USE_FULLSCREEN", 24, "options.fullscreen", false, true),
+        ENABLE_VSYNC("ENABLE_VSYNC", 25, "options.vsync", false, true),
+        SHOW_CAPE("SHOW_CAPE", 26, "options.showCape", false, true),
+        TOUCHSCREEN("TOUCHSCREEN", 27, "options.touchscreen", false, true),
+        CHAT_SCALE("CHAT_SCALE", 28, "options.chat.scale", true, false),
+        CHAT_WIDTH("CHAT_WIDTH", 29, "options.chat.width", true, false),
+        CHAT_HEIGHT_FOCUSED("CHAT_HEIGHT_FOCUSED", 30, "options.chat.height.focused", true, false),
+        CHAT_HEIGHT_UNFOCUSED("CHAT_HEIGHT_UNFOCUSED", 31, "options.chat.height.unfocused", true, false),
+        MIPMAP_LEVELS("MIPMAP_LEVELS", 32, "options.mipmapLevels", true, false, 0.0F, 4.0F, 1.0F),
+        ANISOTROPIC_FILTERING("ANISOTROPIC_FILTERING", 33, "options.anisotropicFiltering", true, false, 1.0F, 16.0F, 0.0F, null)
+        {
+            private static final String __OBFID = "CL_00000654";
+            protected float snapToStep(float p_148264_1_)
+            {
+                return (float)MathHelper.roundUpToPowerOfTwo((int)p_148264_1_);
+            }
+        },
+        FORCE_UNICODE_FONT("FORCE_UNICODE_FONT", 34, "options.forceUnicodeFont", false, true);
+        private final boolean enumFloat;
+        private final boolean enumBoolean;
+        private final String enumString;
+        private final float valueStep;
+        private float valueMin;
+        private float valueMax;
+
+        private static final GameSettings.Options[] $VALUES = new GameSettings.Options[]{INVERT_MOUSE, SENSITIVITY, FOV, GAMMA, SATURATION, RENDER_DISTANCE, VIEW_BOBBING, ANAGLYPH, ADVANCED_OPENGL, FRAMERATE_LIMIT, FBO_ENABLE, DIFFICULTY, GRAPHICS, AMBIENT_OCCLUSION, GUI_SCALE, RENDER_CLOUDS, PARTICLES, CHAT_VISIBILITY, CHAT_COLOR, CHAT_LINKS, CHAT_OPACITY, CHAT_LINKS_PROMPT, USE_SERVER_TEXTURES, SNOOPER_ENABLED, USE_FULLSCREEN, ENABLE_VSYNC, SHOW_CAPE, TOUCHSCREEN, CHAT_SCALE, CHAT_WIDTH, CHAT_HEIGHT_FOCUSED, CHAT_HEIGHT_UNFOCUSED, MIPMAP_LEVELS, ANISOTROPIC_FILTERING, FORCE_UNICODE_FONT};
+        private static final String __OBFID = "CL_00000653";
+
+        public static GameSettings.Options getEnumOptions(int par0)
+        {
+            GameSettings.Options[] var1 = values();
+            int var2 = var1.length;
+
+            for (int var3 = 0; var3 < var2; ++var3)
+            {
+                GameSettings.Options var4 = var1[var3];
+
+                if (var4.returnEnumOrdinal() == par0)
+                {
+                    return var4;
+                }
+            }
+
+            return null;
+        }
+
+        private Options(String par1Str, int par2, String par3Str, boolean par4, boolean par5)
+        {
+            this(par1Str, par2, par3Str, par4, par5, 0.0F, 1.0F, 0.0F);
+        }
+
+        private Options(String p_i45004_1_, int p_i45004_2_, String p_i45004_3_, boolean p_i45004_4_, boolean p_i45004_5_, float p_i45004_6_, float p_i45004_7_, float p_i45004_8_)
+        {
+            this.enumString = p_i45004_3_;
+            this.enumFloat = p_i45004_4_;
+            this.enumBoolean = p_i45004_5_;
+            this.valueMin = p_i45004_6_;
+            this.valueMax = p_i45004_7_;
+            this.valueStep = p_i45004_8_;
+        }
+
+        public boolean getEnumFloat()
+        {
+            return this.enumFloat;
+        }
+
+        public boolean getEnumBoolean()
+        {
+            return this.enumBoolean;
+        }
+
+        public int returnEnumOrdinal()
+        {
+            return this.ordinal();
+        }
+
+        public String getEnumString()
+        {
+            return this.enumString;
+        }
+
+        public float getValueMax()
+        {
+            return this.valueMax;
+        }
+
+        public void setValueMax(float p_148263_1_)
+        {
+            this.valueMax = p_148263_1_;
+        }
+
+        public float normalizeValue(float p_148266_1_)
+        {
+            return MathHelper.clamp_float((this.snapToStepClamp(p_148266_1_) - this.valueMin) / (this.valueMax - this.valueMin), 0.0F, 1.0F);
+        }
+
+        public float denormalizeValue(float p_148262_1_)
+        {
+            return this.snapToStepClamp(this.valueMin + (this.valueMax - this.valueMin) * MathHelper.clamp_float(p_148262_1_, 0.0F, 1.0F));
+        }
+
+        public float snapToStepClamp(float p_148268_1_)
+        {
+            p_148268_1_ = this.snapToStep(p_148268_1_);
+            return MathHelper.clamp_float(p_148268_1_, this.valueMin, this.valueMax);
+        }
+
+        protected float snapToStep(float p_148264_1_)
+        {
+            if (this.valueStep > 0.0F)
+            {
+                p_148264_1_ = this.valueStep * (float)Math.round(p_148264_1_ / this.valueStep);
+            }
+
+            return p_148264_1_;
+        }
+
+        Options(String p_i45005_1_, int p_i45005_2_, String p_i45005_3_, boolean p_i45005_4_, boolean p_i45005_5_, float p_i45005_6_, float p_i45005_7_, float p_i45005_8_, Object p_i45005_9_)
+        {
+            this(p_i45005_1_, p_i45005_2_, p_i45005_3_, p_i45005_4_, p_i45005_5_, p_i45005_6_, p_i45005_7_, p_i45005_8_);
+        }
+    }
 }
diff --git a/net/minecraft/client/settings/KeyBinding.java b/net/minecraft/client/settings/KeyBinding.java
index 1165e77..1ba9f6d 100644
--- a/net/minecraft/client/settings/KeyBinding.java
+++ b/net/minecraft/client/settings/KeyBinding.java
@@ -19,7 +19,8 @@ public class KeyBinding implements Comparable
     private int keyCode;
 
     /** because _303 wanted me to call it that(Caironater) */
-    private boolean pressed;
+    //TODO: Client
+    public boolean pressed;
     private int presses;
     private static final String __OBFID = "CL_00000628";
 
diff --git a/net/minecraft/client/shader/ShaderGroup.java b/net/minecraft/client/shader/ShaderGroup.java
index c611027..be73913 100644
--- a/net/minecraft/client/shader/ShaderGroup.java
+++ b/net/minecraft/client/shader/ShaderGroup.java
@@ -174,7 +174,7 @@ public class ShaderGroup
                     try
                     {
                         JsonObject var13 = JsonUtils.getJsonElementAsJsonObject(var12, "auxtarget");
-                        String var23 = JsonUtils.getJsonObjectStringFieldValue(var13, "name");
+                        String var24 = JsonUtils.getJsonObjectStringFieldValue(var13, "name");
                         String var15 = JsonUtils.getJsonObjectStringFieldValue(var13, "id");
                         Framebuffer var16 = this.getFramebuffer(var15);
 
@@ -183,7 +183,7 @@ public class ShaderGroup
                             throw new JsonException("Render target \'" + var15 + "\' does not exist");
                         }
 
-                        var8.addAuxFramebuffer(var23, var16, var16.framebufferTextureWidth, var16.framebufferTextureHeight);
+                        var8.addAuxFramebuffer(var24, var16, var16.framebufferTextureWidth, var16.framebufferTextureHeight);
                     }
                     catch (Exception var18)
                     {
@@ -194,13 +194,13 @@ public class ShaderGroup
                 }
             }
 
-            JsonArray var19 = JsonUtils.getJsonObjectJsonArrayFieldOrDefault(var2, "uniforms", (JsonArray)null);
+            JsonArray var20 = JsonUtils.getJsonObjectJsonArrayFieldOrDefault(var2, "uniforms", (JsonArray)null);
 
-            if (var19 != null)
+            if (var20 != null)
             {
-                int var20 = 0;
+                int var19 = 0;
 
-                for (Iterator var21 = var19.iterator(); var21.hasNext(); ++var20)
+                for (Iterator var21 = var20.iterator(); var21.hasNext(); ++var19)
                 {
                     JsonElement var22 = (JsonElement)var21.next();
 
@@ -210,9 +210,9 @@ public class ShaderGroup
                     }
                     catch (Exception var17)
                     {
-                        JsonException var24 = JsonException.func_151379_a(var17);
-                        var24.func_151380_a("uniforms[" + var20 + "]");
-                        throw var24;
+                        JsonException var23 = JsonException.func_151379_a(var17);
+                        var23.func_151380_a("uniforms[" + var19 + "]");
+                        throw var23;
                     }
                 }
             }
diff --git a/net/minecraft/client/shader/ShaderManager.java b/net/minecraft/client/shader/ShaderManager.java
index 3938346..a1e6ecf 100644
--- a/net/minecraft/client/shader/ShaderManager.java
+++ b/net/minecraft/client/shader/ShaderManager.java
@@ -84,18 +84,18 @@ public class ShaderManager
                 }
             }
 
-            JsonArray var29 = JsonUtils.getJsonObjectJsonArrayFieldOrDefault(var6, "attributes", (JsonArray)null);
-            Iterator var32;
+            JsonArray var30 = JsonUtils.getJsonObjectJsonArrayFieldOrDefault(var6, "attributes", (JsonArray)null);
+            Iterator var31;
 
-            if (var29 != null)
+            if (var30 != null)
             {
-                int var30 = 0;
-                this.field_148015_q = Lists.newArrayListWithCapacity(var29.size());
-                this.field_148014_r = Lists.newArrayListWithCapacity(var29.size());
+                int var29 = 0;
+                this.field_148015_q = Lists.newArrayListWithCapacity(var30.size());
+                this.field_148014_r = Lists.newArrayListWithCapacity(var30.size());
 
-                for (var32 = var29.iterator(); var32.hasNext(); ++var30)
+                for (var31 = var30.iterator(); var31.hasNext(); ++var29)
                 {
-                    JsonElement var13 = (JsonElement)var32.next();
+                    JsonElement var13 = (JsonElement)var31.next();
 
                     try
                     {
@@ -104,7 +104,7 @@ public class ShaderManager
                     catch (Exception var24)
                     {
                         JsonException var15 = JsonException.func_151379_a(var24);
-                        var15.func_151380_a("attributes[" + var30 + "]");
+                        var15.func_151380_a("attributes[" + var29 + "]");
                         throw var15;
                     }
                 }
@@ -115,15 +115,15 @@ public class ShaderManager
                 this.field_148014_r = null;
             }
 
-            JsonArray var31 = JsonUtils.getJsonObjectJsonArrayFieldOrDefault(var6, "uniforms", (JsonArray)null);
+            JsonArray var33 = JsonUtils.getJsonObjectJsonArrayFieldOrDefault(var6, "uniforms", (JsonArray)null);
 
-            if (var31 != null)
+            if (var33 != null)
             {
-                int var33 = 0;
+                int var32 = 0;
 
-                for (Iterator var34 = var31.iterator(); var34.hasNext(); ++var33)
+                for (Iterator var35 = var33.iterator(); var35.hasNext(); ++var32)
                 {
-                    JsonElement var36 = (JsonElement)var34.next();
+                    JsonElement var36 = (JsonElement)var35.next();
 
                     try
                     {
@@ -132,7 +132,7 @@ public class ShaderManager
                     catch (Exception var23)
                     {
                         JsonException var16 = JsonException.func_151379_a(var23);
-                        var16.func_151380_a("uniforms[" + var33 + "]");
+                        var16.func_151380_a("uniforms[" + var32 + "]");
                         throw var16;
                     }
                 }
@@ -148,12 +148,12 @@ public class ShaderManager
 
             if (this.field_148014_r != null)
             {
-                var32 = this.field_148014_r.iterator();
+                var31 = this.field_148014_r.iterator();
 
-                while (var32.hasNext())
+                while (var31.hasNext())
                 {
-                    String var35 = (String)var32.next();
-                    int var37 = GL20.glGetAttribLocation(this.field_148006_l, var35);
+                    String var34 = (String)var31.next();
+                    int var37 = GL20.glGetAttribLocation(this.field_148006_l, var34);
                     this.field_148015_q.add(Integer.valueOf(var37));
                 }
             }
diff --git a/net/minecraft/command/CommandSetSpawnpoint.java b/net/minecraft/command/CommandSetSpawnpoint.java
index 73d7438..a4991a2 100644
--- a/net/minecraft/command/CommandSetSpawnpoint.java
+++ b/net/minecraft/command/CommandSetSpawnpoint.java
@@ -37,10 +37,10 @@ public class CommandSetSpawnpoint extends CommandBase
             {
                 byte var4 = 1;
                 int var5 = 30000000;
-                int var9 = var4 + 1;
+                int var10 = var4 + 1;
                 int var6 = parseIntBounded(par1ICommandSender, par2ArrayOfStr[var4], -var5, var5);
-                int var7 = parseIntBounded(par1ICommandSender, par2ArrayOfStr[var9++], 0, 256);
-                int var8 = parseIntBounded(par1ICommandSender, par2ArrayOfStr[var9++], -var5, var5);
+                int var7 = parseIntBounded(par1ICommandSender, par2ArrayOfStr[var10++], 0, 256);
+                int var8 = parseIntBounded(par1ICommandSender, par2ArrayOfStr[var10++], -var5, var5);
                 var3.setSpawnChunk(new ChunkCoordinates(var6, var7, var8), true);
                 notifyAdmins(par1ICommandSender, "commands.spawnpoint.success", new Object[] {var3.getCommandSenderName(), Integer.valueOf(var6), Integer.valueOf(var7), Integer.valueOf(var8)});
             }
@@ -52,9 +52,9 @@ public class CommandSetSpawnpoint extends CommandBase
                 throw new WrongUsageException("commands.spawnpoint.usage", new Object[0]);
             }
 
-            ChunkCoordinates var10 = var3.getPlayerCoordinates();
-            var3.setSpawnChunk(var10, true);
-            notifyAdmins(par1ICommandSender, "commands.spawnpoint.success", new Object[] {var3.getCommandSenderName(), Integer.valueOf(var10.posX), Integer.valueOf(var10.posY), Integer.valueOf(var10.posZ)});
+            ChunkCoordinates var11 = var3.getPlayerCoordinates();
+            var3.setSpawnChunk(var11, true);
+            notifyAdmins(par1ICommandSender, "commands.spawnpoint.success", new Object[] {var3.getCommandSenderName(), Integer.valueOf(var11.posX), Integer.valueOf(var11.posY), Integer.valueOf(var11.posZ)});
         }
     }
 
diff --git a/net/minecraft/command/CommandSpreadPlayers.java b/net/minecraft/command/CommandSpreadPlayers.java
index ecd99d3..acfdf60 100644
--- a/net/minecraft/command/CommandSpreadPlayers.java
+++ b/net/minecraft/command/CommandSpreadPlayers.java
@@ -51,30 +51,30 @@ public class CommandSpreadPlayers extends CommandBase
         else
         {
             byte var3 = 0;
-            int var16 = var3 + 1;
+            int var17 = var3 + 1;
             double var4 = func_110666_a(par1ICommandSender, Double.NaN, par2ArrayOfStr[var3]);
-            double var6 = func_110666_a(par1ICommandSender, Double.NaN, par2ArrayOfStr[var16++]);
-            double var8 = parseDoubleWithMin(par1ICommandSender, par2ArrayOfStr[var16++], 0.0D);
-            double var10 = parseDoubleWithMin(par1ICommandSender, par2ArrayOfStr[var16++], var8 + 1.0D);
-            boolean var12 = parseBoolean(par1ICommandSender, par2ArrayOfStr[var16++]);
+            double var6 = func_110666_a(par1ICommandSender, Double.NaN, par2ArrayOfStr[var17++]);
+            double var8 = parseDoubleWithMin(par1ICommandSender, par2ArrayOfStr[var17++], 0.0D);
+            double var10 = parseDoubleWithMin(par1ICommandSender, par2ArrayOfStr[var17++], var8 + 1.0D);
+            boolean var12 = parseBoolean(par1ICommandSender, par2ArrayOfStr[var17++]);
             ArrayList var13 = Lists.newArrayList();
 
             while (true)
             {
-                while (var16 < par2ArrayOfStr.length)
+                while (var17 < par2ArrayOfStr.length)
                 {
-                    String var14 = par2ArrayOfStr[var16++];
+                    String var14 = par2ArrayOfStr[var17++];
 
                     if (PlayerSelector.hasArguments(var14))
                     {
-                        EntityPlayerMP[] var17 = PlayerSelector.matchPlayers(par1ICommandSender, var14);
+                        EntityPlayerMP[] var18 = PlayerSelector.matchPlayers(par1ICommandSender, var14);
 
-                        if (var17 == null || var17.length == 0)
+                        if (var18 == null || var18.length == 0)
                         {
                             throw new PlayerNotFoundException();
                         }
 
-                        Collections.addAll(var13, var17);
+                        Collections.addAll(var13, var18);
                     }
                     else
                     {
@@ -151,8 +151,8 @@ public class CommandSpreadPlayers extends CommandBase
         {
             var16 = false;
             var18 = 3.4028234663852886E38D;
-            int var22;
             CommandSpreadPlayers.Position var23;
+            int var22;
 
             for (int var20 = 0; var20 < par14ArrayOfCommandSpreadPlayersPosition.length; ++var20)
             {
diff --git a/net/minecraft/command/server/CommandSetDefaultSpawnpoint.java b/net/minecraft/command/server/CommandSetDefaultSpawnpoint.java
index 029b5a2..033f2d7 100644
--- a/net/minecraft/command/server/CommandSetDefaultSpawnpoint.java
+++ b/net/minecraft/command/server/CommandSetDefaultSpawnpoint.java
@@ -37,10 +37,10 @@ public class CommandSetDefaultSpawnpoint extends CommandBase
             }
 
             byte var3 = 0;
-            int var7 = var3 + 1;
+            int var8 = var3 + 1;
             int var4 = parseIntBounded(par1ICommandSender, par2ArrayOfStr[var3], -30000000, 30000000);
-            int var5 = parseIntBounded(par1ICommandSender, par2ArrayOfStr[var7++], 0, 256);
-            int var6 = parseIntBounded(par1ICommandSender, par2ArrayOfStr[var7++], -30000000, 30000000);
+            int var5 = parseIntBounded(par1ICommandSender, par2ArrayOfStr[var8++], 0, 256);
+            int var6 = parseIntBounded(par1ICommandSender, par2ArrayOfStr[var8++], -30000000, 30000000);
             par1ICommandSender.getEntityWorld().setSpawnLocation(var4, var5, var6);
             notifyAdmins(par1ICommandSender, "commands.setworldspawn.success", new Object[] {Integer.valueOf(var4), Integer.valueOf(var5), Integer.valueOf(var6)});
         }
@@ -51,9 +51,9 @@ public class CommandSetDefaultSpawnpoint extends CommandBase
                 throw new WrongUsageException("commands.setworldspawn.usage", new Object[0]);
             }
 
-            ChunkCoordinates var8 = getCommandSenderAsPlayer(par1ICommandSender).getPlayerCoordinates();
-            par1ICommandSender.getEntityWorld().setSpawnLocation(var8.posX, var8.posY, var8.posZ);
-            notifyAdmins(par1ICommandSender, "commands.setworldspawn.success", new Object[] {Integer.valueOf(var8.posX), Integer.valueOf(var8.posY), Integer.valueOf(var8.posZ)});
+            ChunkCoordinates var9 = getCommandSenderAsPlayer(par1ICommandSender).getPlayerCoordinates();
+            par1ICommandSender.getEntityWorld().setSpawnLocation(var9.posX, var9.posY, var9.posZ);
+            notifyAdmins(par1ICommandSender, "commands.setworldspawn.success", new Object[] {Integer.valueOf(var9.posX), Integer.valueOf(var9.posY), Integer.valueOf(var9.posZ)});
         }
     }
 }
diff --git a/net/minecraft/enchantment/EnchantmentHelper.java b/net/minecraft/enchantment/EnchantmentHelper.java
index b849256..df53d49 100644
--- a/net/minecraft/enchantment/EnchantmentHelper.java
+++ b/net/minecraft/enchantment/EnchantmentHelper.java
@@ -537,6 +537,11 @@ public class EnchantmentHelper
         }
     }
 
+    interface IModifier
+    {
+        void calculateModifier(Enchantment var1, int var2);
+    }
+
     static final class ModifierLiving implements EnchantmentHelper.IModifier
     {
         public float livingModifier;
@@ -556,44 +561,39 @@ public class EnchantmentHelper
         }
     }
 
-    interface IModifier
-    {
-        void calculateModifier(Enchantment var1, int var2);
-    }
-
-    static final class DamageIterator implements EnchantmentHelper.IModifier
+    static final class HurtIterator implements EnchantmentHelper.IModifier
     {
-        public EntityLivingBase field_151366_a;
-        public Entity field_151365_b;
-        private static final String __OBFID = "CL_00000109";
+        public EntityLivingBase field_151364_a;
+        public Entity field_151363_b;
+        private static final String __OBFID = "CL_00000110";
 
-        private DamageIterator() {}
+        private HurtIterator() {}
 
         public void calculateModifier(Enchantment par1Enchantment, int par2)
         {
-            par1Enchantment.func_151368_a(this.field_151366_a, this.field_151365_b, par2);
+            par1Enchantment.func_151367_b(this.field_151364_a, this.field_151363_b, par2);
         }
 
-        DamageIterator(Object p_i45359_1_)
+        HurtIterator(Object p_i45360_1_)
         {
             this();
         }
     }
 
-    static final class HurtIterator implements EnchantmentHelper.IModifier
+    static final class DamageIterator implements EnchantmentHelper.IModifier
     {
-        public EntityLivingBase field_151364_a;
-        public Entity field_151363_b;
-        private static final String __OBFID = "CL_00000110";
+        public EntityLivingBase field_151366_a;
+        public Entity field_151365_b;
+        private static final String __OBFID = "CL_00000109";
 
-        private HurtIterator() {}
+        private DamageIterator() {}
 
         public void calculateModifier(Enchantment par1Enchantment, int par2)
         {
-            par1Enchantment.func_151367_b(this.field_151364_a, this.field_151363_b, par2);
+            par1Enchantment.func_151368_a(this.field_151366_a, this.field_151365_b, par2);
         }
 
-        HurtIterator(Object p_i45360_1_)
+        DamageIterator(Object p_i45359_1_)
         {
             this();
         }
diff --git a/net/minecraft/entity/Entity.java b/net/minecraft/entity/Entity.java
index a501abb..9659f2a 100644
--- a/net/minecraft/entity/Entity.java
+++ b/net/minecraft/entity/Entity.java
@@ -4,9 +4,11 @@ import java.util.List;
 import java.util.Random;
 import java.util.UUID;
 import java.util.concurrent.Callable;
+
 import net.minecraft.block.Block;
 import net.minecraft.block.BlockLiquid;
 import net.minecraft.block.material.Material;
+import net.minecraft.client.Minecraft;
 import net.minecraft.crash.CrashReport;
 import net.minecraft.crash.CrashReportCategory;
 import net.minecraft.enchantment.EnchantmentProtection;
@@ -34,6 +36,9 @@ import net.minecraft.util.Vec3;
 import net.minecraft.world.Explosion;
 import net.minecraft.world.World;
 import net.minecraft.world.WorldServer;
+import tk.wurst_client.Client;
+import tk.wurst_client.module.modules.AntiKnockback;
+import tk.wurst_client.module.modules.Freecam;
 
 public abstract class Entity
 {
@@ -105,7 +110,8 @@ public abstract class Entity
      */
     public boolean isCollided;
     public boolean velocityChanged;
-    protected boolean isInWeb;
+    //TODO: Client
+    public boolean isInWeb;
     public boolean field_70135_K;
 
     /**
@@ -608,11 +614,17 @@ public abstract class Entity
     /**
      * Tries to moves the entity by the passed in displacement. Args: x, y, z
      */
-    public void moveEntity(double par1, double par3, double par5)
+    public void moveEntity(double x, double y, double z)
     {
         if (this.noClip)
         {
-            this.boundingBox.offset(par1, par3, par5);
+        	//TODO: Client
+        	//Fixes Freecam flight speed
+        	if(this == Minecraft.getMinecraft().thePlayer && Client.Wurst.moduleManager.getModuleFromClass(Freecam.class).getToggled())
+        	{
+        		this.boundingBox.offset(x * 10, y, z * 10);
+        	}else
+        		this.boundingBox.offset(x, y, z);
             this.posX = (this.boundingBox.minX + this.boundingBox.maxX) / 2.0D;
             this.posY = this.boundingBox.minY + (double)this.yOffset - (double)this.ySize;
             this.posZ = (this.boundingBox.minZ + this.boundingBox.maxZ) / 2.0D;
@@ -628,17 +640,17 @@ public abstract class Entity
             if (this.isInWeb)
             {
                 this.isInWeb = false;
-                par1 *= 0.25D;
-                par3 *= 0.05000000074505806D;
-                par5 *= 0.25D;
+                x *= 0.25D;
+                y *= 0.05000000074505806D;
+                z *= 0.25D;
                 this.motionX = 0.0D;
                 this.motionY = 0.0D;
                 this.motionZ = 0.0D;
             }
 
-            double var13 = par1;
-            double var15 = par3;
-            double var17 = par5;
+            double var13 = x;
+            double var15 = y;
+            double var17 = z;
             AxisAlignedBB var19 = this.boundingBox.copy();
             boolean var20 = this.onGround && this.isSneaking() && this instanceof EntityPlayer;
 
@@ -646,116 +658,116 @@ public abstract class Entity
             {
                 double var21;
 
-                for (var21 = 0.05D; par1 != 0.0D && this.worldObj.getCollidingBoundingBoxes(this, this.boundingBox.getOffsetBoundingBox(par1, -1.0D, 0.0D)).isEmpty(); var13 = par1)
+                for (var21 = 0.05D; x != 0.0D && this.worldObj.getCollidingBoundingBoxes(this, this.boundingBox.getOffsetBoundingBox(x, -1.0D, 0.0D)).isEmpty(); var13 = x)
                 {
-                    if (par1 < var21 && par1 >= -var21)
+                    if (x < var21 && x >= -var21)
                     {
-                        par1 = 0.0D;
+                        x = 0.0D;
                     }
-                    else if (par1 > 0.0D)
+                    else if (x > 0.0D)
                     {
-                        par1 -= var21;
+                        x -= var21;
                     }
                     else
                     {
-                        par1 += var21;
+                        x += var21;
                     }
                 }
 
-                for (; par5 != 0.0D && this.worldObj.getCollidingBoundingBoxes(this, this.boundingBox.getOffsetBoundingBox(0.0D, -1.0D, par5)).isEmpty(); var17 = par5)
+                for (; z != 0.0D && this.worldObj.getCollidingBoundingBoxes(this, this.boundingBox.getOffsetBoundingBox(0.0D, -1.0D, z)).isEmpty(); var17 = z)
                 {
-                    if (par5 < var21 && par5 >= -var21)
+                    if (z < var21 && z >= -var21)
                     {
-                        par5 = 0.0D;
+                        z = 0.0D;
                     }
-                    else if (par5 > 0.0D)
+                    else if (z > 0.0D)
                     {
-                        par5 -= var21;
+                        z -= var21;
                     }
                     else
                     {
-                        par5 += var21;
+                        z += var21;
                     }
                 }
 
-                while (par1 != 0.0D && par5 != 0.0D && this.worldObj.getCollidingBoundingBoxes(this, this.boundingBox.getOffsetBoundingBox(par1, -1.0D, par5)).isEmpty())
+                while (x != 0.0D && z != 0.0D && this.worldObj.getCollidingBoundingBoxes(this, this.boundingBox.getOffsetBoundingBox(x, -1.0D, z)).isEmpty())
                 {
-                    if (par1 < var21 && par1 >= -var21)
+                    if (x < var21 && x >= -var21)
                     {
-                        par1 = 0.0D;
+                        x = 0.0D;
                     }
-                    else if (par1 > 0.0D)
+                    else if (x > 0.0D)
                     {
-                        par1 -= var21;
+                        x -= var21;
                     }
                     else
                     {
-                        par1 += var21;
+                        x += var21;
                     }
 
-                    if (par5 < var21 && par5 >= -var21)
+                    if (z < var21 && z >= -var21)
                     {
-                        par5 = 0.0D;
+                        z = 0.0D;
                     }
-                    else if (par5 > 0.0D)
+                    else if (z > 0.0D)
                     {
-                        par5 -= var21;
+                        z -= var21;
                     }
                     else
                     {
-                        par5 += var21;
+                        z += var21;
                     }
 
-                    var13 = par1;
-                    var17 = par5;
+                    var13 = x;
+                    var17 = z;
                 }
             }
 
-            List var36 = this.worldObj.getCollidingBoundingBoxes(this, this.boundingBox.addCoord(par1, par3, par5));
+            List var37 = this.worldObj.getCollidingBoundingBoxes(this, this.boundingBox.addCoord(x, y, z));
 
-            for (int var22 = 0; var22 < var36.size(); ++var22)
+            for (int var22 = 0; var22 < var37.size(); ++var22)
             {
-                par3 = ((AxisAlignedBB)var36.get(var22)).calculateYOffset(this.boundingBox, par3);
+                y = ((AxisAlignedBB)var37.get(var22)).calculateYOffset(this.boundingBox, y);
             }
 
-            this.boundingBox.offset(0.0D, par3, 0.0D);
+            this.boundingBox.offset(0.0D, y, 0.0D);
 
-            if (!this.field_70135_K && var15 != par3)
+            if (!this.field_70135_K && var15 != y)
             {
-                par5 = 0.0D;
-                par3 = 0.0D;
-                par1 = 0.0D;
+                z = 0.0D;
+                y = 0.0D;
+                x = 0.0D;
             }
 
-            boolean var37 = this.onGround || var15 != par3 && var15 < 0.0D;
+            boolean var36 = this.onGround || var15 != y && var15 < 0.0D;
             int var23;
 
-            for (var23 = 0; var23 < var36.size(); ++var23)
+            for (var23 = 0; var23 < var37.size(); ++var23)
             {
-                par1 = ((AxisAlignedBB)var36.get(var23)).calculateXOffset(this.boundingBox, par1);
+                x = ((AxisAlignedBB)var37.get(var23)).calculateXOffset(this.boundingBox, x);
             }
 
-            this.boundingBox.offset(par1, 0.0D, 0.0D);
+            this.boundingBox.offset(x, 0.0D, 0.0D);
 
-            if (!this.field_70135_K && var13 != par1)
+            if (!this.field_70135_K && var13 != x)
             {
-                par5 = 0.0D;
-                par3 = 0.0D;
-                par1 = 0.0D;
+                z = 0.0D;
+                y = 0.0D;
+                x = 0.0D;
             }
 
-            for (var23 = 0; var23 < var36.size(); ++var23)
+            for (var23 = 0; var23 < var37.size(); ++var23)
             {
-                par5 = ((AxisAlignedBB)var36.get(var23)).calculateZOffset(this.boundingBox, par5);
+                z = ((AxisAlignedBB)var37.get(var23)).calculateZOffset(this.boundingBox, z);
             }
 
-            this.boundingBox.offset(0.0D, 0.0D, par5);
+            this.boundingBox.offset(0.0D, 0.0D, z);
 
-            if (!this.field_70135_K && var17 != par5)
+            if (!this.field_70135_K && var17 != z)
             {
-                par5 = 0.0D;
-                par3 = 0.0D;
-                par1 = 0.0D;
+                z = 0.0D;
+                y = 0.0D;
+                x = 0.0D;
             }
 
             double var25;
@@ -763,83 +775,83 @@ public abstract class Entity
             int var30;
             double var38;
 
-            if (this.stepHeight > 0.0F && var37 && (var20 || this.ySize < 0.05F) && (var13 != par1 || var17 != par5))
+            if (this.stepHeight > 0.0F && var36 && (var20 || this.ySize < 0.05F) && (var13 != x || var17 != z))
             {
-                var38 = par1;
-                var25 = par3;
-                var27 = par5;
-                par1 = var13;
-                par3 = (double)this.stepHeight;
-                par5 = var17;
+                var38 = x;
+                var25 = y;
+                var27 = z;
+                x = var13;
+                y = (double)this.stepHeight;
+                z = var17;
                 AxisAlignedBB var29 = this.boundingBox.copy();
                 this.boundingBox.setBB(var19);
-                var36 = this.worldObj.getCollidingBoundingBoxes(this, this.boundingBox.addCoord(var13, par3, var17));
+                var37 = this.worldObj.getCollidingBoundingBoxes(this, this.boundingBox.addCoord(var13, y, var17));
 
-                for (var30 = 0; var30 < var36.size(); ++var30)
+                for (var30 = 0; var30 < var37.size(); ++var30)
                 {
-                    par3 = ((AxisAlignedBB)var36.get(var30)).calculateYOffset(this.boundingBox, par3);
+                    y = ((AxisAlignedBB)var37.get(var30)).calculateYOffset(this.boundingBox, y);
                 }
 
-                this.boundingBox.offset(0.0D, par3, 0.0D);
+                this.boundingBox.offset(0.0D, y, 0.0D);
 
-                if (!this.field_70135_K && var15 != par3)
+                if (!this.field_70135_K && var15 != y)
                 {
-                    par5 = 0.0D;
-                    par3 = 0.0D;
-                    par1 = 0.0D;
+                    z = 0.0D;
+                    y = 0.0D;
+                    x = 0.0D;
                 }
 
-                for (var30 = 0; var30 < var36.size(); ++var30)
+                for (var30 = 0; var30 < var37.size(); ++var30)
                 {
-                    par1 = ((AxisAlignedBB)var36.get(var30)).calculateXOffset(this.boundingBox, par1);
+                    x = ((AxisAlignedBB)var37.get(var30)).calculateXOffset(this.boundingBox, x);
                 }
 
-                this.boundingBox.offset(par1, 0.0D, 0.0D);
+                this.boundingBox.offset(x, 0.0D, 0.0D);
 
-                if (!this.field_70135_K && var13 != par1)
+                if (!this.field_70135_K && var13 != x)
                 {
-                    par5 = 0.0D;
-                    par3 = 0.0D;
-                    par1 = 0.0D;
+                    z = 0.0D;
+                    y = 0.0D;
+                    x = 0.0D;
                 }
 
-                for (var30 = 0; var30 < var36.size(); ++var30)
+                for (var30 = 0; var30 < var37.size(); ++var30)
                 {
-                    par5 = ((AxisAlignedBB)var36.get(var30)).calculateZOffset(this.boundingBox, par5);
+                    z = ((AxisAlignedBB)var37.get(var30)).calculateZOffset(this.boundingBox, z);
                 }
 
-                this.boundingBox.offset(0.0D, 0.0D, par5);
+                this.boundingBox.offset(0.0D, 0.0D, z);
 
-                if (!this.field_70135_K && var17 != par5)
+                if (!this.field_70135_K && var17 != z)
                 {
-                    par5 = 0.0D;
-                    par3 = 0.0D;
-                    par1 = 0.0D;
+                    z = 0.0D;
+                    y = 0.0D;
+                    x = 0.0D;
                 }
 
-                if (!this.field_70135_K && var15 != par3)
+                if (!this.field_70135_K && var15 != y)
                 {
-                    par5 = 0.0D;
-                    par3 = 0.0D;
-                    par1 = 0.0D;
+                    z = 0.0D;
+                    y = 0.0D;
+                    x = 0.0D;
                 }
                 else
                 {
-                    par3 = (double)(-this.stepHeight);
+                    y = (double)(-this.stepHeight);
 
-                    for (var30 = 0; var30 < var36.size(); ++var30)
+                    for (var30 = 0; var30 < var37.size(); ++var30)
                     {
-                        par3 = ((AxisAlignedBB)var36.get(var30)).calculateYOffset(this.boundingBox, par3);
+                        y = ((AxisAlignedBB)var37.get(var30)).calculateYOffset(this.boundingBox, y);
                     }
 
-                    this.boundingBox.offset(0.0D, par3, 0.0D);
+                    this.boundingBox.offset(0.0D, y, 0.0D);
                 }
 
-                if (var38 * var38 + var27 * var27 >= par1 * par1 + par5 * par5)
+                if (var38 * var38 + var27 * var27 >= x * x + z * z)
                 {
-                    par1 = var38;
-                    par3 = var25;
-                    par5 = var27;
+                    x = var38;
+                    y = var25;
+                    z = var27;
                     this.boundingBox.setBB(var29);
                 }
             }
@@ -849,23 +861,25 @@ public abstract class Entity
             this.posX = (this.boundingBox.minX + this.boundingBox.maxX) / 2.0D;
             this.posY = this.boundingBox.minY + (double)this.yOffset - (double)this.ySize;
             this.posZ = (this.boundingBox.minZ + this.boundingBox.maxZ) / 2.0D;
-            this.isCollidedHorizontally = var13 != par1 || var17 != par5;
-            this.isCollidedVertically = var15 != par3;
-            this.onGround = var15 != par3 && var15 < 0.0D;
+            this.isCollidedHorizontally = var13 != x || var17 != z;
+            this.isCollidedVertically = var15 != y;
+            this.onGround = var15 != y && var15 < 0.0D;
             this.isCollided = this.isCollidedHorizontally || this.isCollidedVertically;
-            this.updateFallState(par3, this.onGround);
+            this.updateFallState(y, this.onGround);
 
-            if (var13 != par1)
+            //TODO: Client
+            if (var13 != x && !Client.Wurst.moduleManager.getModuleFromClass(Freecam.class).getToggled())
             {
                 this.motionX = 0.0D;
             }
 
-            if (var15 != par3)
+            if (var15 != y)
             {
                 this.motionY = 0.0D;
             }
 
-            if (var17 != par5)
+            //TODO: Client
+            if (var17 != z && !Client.Wurst.moduleManager.getModuleFromClass(Freecam.class).getToggled())
             {
                 this.motionZ = 0.0D;
             }
@@ -876,15 +890,15 @@ public abstract class Entity
 
             if (this.canTriggerWalking() && !var20 && this.ridingEntity == null)
             {
-                int var39 = MathHelper.floor_double(this.posX);
+                int var40 = MathHelper.floor_double(this.posX);
                 var30 = MathHelper.floor_double(this.posY - 0.20000000298023224D - (double)this.yOffset);
                 int var31 = MathHelper.floor_double(this.posZ);
-                Block var32 = this.worldObj.getBlock(var39, var30, var31);
-                int var33 = this.worldObj.getBlock(var39, var30 - 1, var31).getRenderType();
+                Block var32 = this.worldObj.getBlock(var40, var30, var31);
+                int var33 = this.worldObj.getBlock(var40, var30 - 1, var31).getRenderType();
 
                 if (var33 == 11 || var33 == 32 || var33 == 21)
                 {
-                    var32 = this.worldObj.getBlock(var39, var30 - 1, var31);
+                    var32 = this.worldObj.getBlock(var40, var30 - 1, var31);
                 }
 
                 if (var32 != Blocks.ladder)
@@ -911,8 +925,8 @@ public abstract class Entity
                         this.playSound(this.getSwimSound(), var34, 1.0F + (this.rand.nextFloat() - this.rand.nextFloat()) * 0.4F);
                     }
 
-                    this.func_145780_a(var39, var30, var31, var32);
-                    var32.onEntityWalking(this.worldObj, var39, var30, var31, this);
+                    this.func_145780_a(var40, var30, var31, var32);
+                    var32.onEntityWalking(this.worldObj, var40, var30, var31, this);
                 }
             }
 
@@ -923,18 +937,18 @@ public abstract class Entity
             catch (Throwable var35)
             {
                 CrashReport var42 = CrashReport.makeCrashReport(var35, "Checking entity block collision");
-                CrashReportCategory var41 = var42.makeCategory("Entity being checked for collision");
-                this.addEntityCrashInfo(var41);
+                CrashReportCategory var39 = var42.makeCategory("Entity being checked for collision");
+                this.addEntityCrashInfo(var39);
                 throw new ReportedException(var42);
             }
 
-            boolean var40 = this.isWet();
+            boolean var41 = this.isWet();
 
             if (this.worldObj.func_147470_e(this.boundingBox.contract(0.001D, 0.001D, 0.001D)))
             {
                 this.dealFireDamage(1);
 
-                if (!var40)
+                if (!var41)
                 {
                     ++this.fire;
 
@@ -949,7 +963,7 @@ public abstract class Entity
                 this.fire = -this.fireResistance;
             }
 
-            if (var40 && this.fire > 0)
+            if (var41 && this.fire > 0)
             {
                 this.playSound("random.fizz", 0.7F, 1.6F + (this.rand.nextFloat() - this.rand.nextFloat()) * 0.4F);
                 this.fire = -this.fireResistance;
@@ -1955,10 +1969,14 @@ public abstract class Entity
      */
     public void setVelocity(double par1, double par3, double par5)
     {
+    	//TODO: Client
+    	if(!Client.Wurst.moduleManager.getModuleFromClass(AntiKnockback.class).getToggled())
+    	{
     		this.motionX = par1;
     		this.motionY = par3;
     		this.motionZ = par5;
     	}
+    }
 
     public void handleHealthUpdate(byte par1) {}
 
diff --git a/net/minecraft/entity/EntityLiving.java b/net/minecraft/entity/EntityLiving.java
index d860b10..59538d3 100644
--- a/net/minecraft/entity/EntityLiving.java
+++ b/net/minecraft/entity/EntityLiving.java
@@ -485,16 +485,16 @@ public abstract class EntityLiving extends EntityLivingBase
                             }
                             else if (var4.getItem() instanceof ItemArmor && var7.getItem() instanceof ItemArmor)
                             {
-                                ItemArmor var10 = (ItemArmor)var4.getItem();
+                                ItemArmor var11 = (ItemArmor)var4.getItem();
                                 ItemArmor var12 = (ItemArmor)var7.getItem();
 
-                                if (var10.damageReduceAmount == var12.damageReduceAmount)
+                                if (var11.damageReduceAmount == var12.damageReduceAmount)
                                 {
                                     var6 = var4.getItemDamage() > var7.getItemDamage() || var4.hasTagCompound() && !var7.hasTagCompound();
                                 }
                                 else
                                 {
-                                    var6 = var10.damageReduceAmount > var12.damageReduceAmount;
+                                    var6 = var11.damageReduceAmount > var12.damageReduceAmount;
                                 }
                             }
                             else
@@ -512,11 +512,11 @@ public abstract class EntityLiving extends EntityLivingBase
 
                             if (var4.getItem() == Items.diamond && var3.func_145800_j() != null)
                             {
-                                EntityPlayer var11 = this.worldObj.getPlayerEntityByName(var3.func_145800_j());
+                                EntityPlayer var10 = this.worldObj.getPlayerEntityByName(var3.func_145800_j());
 
-                                if (var11 != null)
+                                if (var10 != null)
                                 {
-                                    var11.triggerAchievement(AchievementList.field_150966_x);
+                                    var10.triggerAchievement(AchievementList.field_150966_x);
                                 }
                             }
 
diff --git a/net/minecraft/entity/EntityLivingBase.java b/net/minecraft/entity/EntityLivingBase.java
index 27d06ae..d11dd6e 100644
--- a/net/minecraft/entity/EntityLivingBase.java
+++ b/net/minecraft/entity/EntityLivingBase.java
@@ -6,6 +6,7 @@ import java.util.Iterator;
 import java.util.List;
 import java.util.Random;
 import java.util.UUID;
+
 import net.minecraft.block.Block;
 import net.minecraft.block.material.Material;
 import net.minecraft.enchantment.EnchantmentHelper;
@@ -46,6 +47,8 @@ import net.minecraft.util.MovingObjectPosition;
 import net.minecraft.util.Vec3;
 import net.minecraft.world.World;
 import net.minecraft.world.WorldServer;
+import tk.wurst_client.Client;
+import tk.wurst_client.module.modules.HighJump;
 
 public abstract class EntityLivingBase extends Entity
 {
@@ -1221,7 +1224,8 @@ public abstract class EntityLivingBase extends Entity
         {
             if (this instanceof EntityZombie)
             {
-                par2 = par2;
+            	//TODO: Client
+                //par2 = par2;
             }
 
             int var3;
@@ -1549,7 +1553,8 @@ public abstract class EntityLivingBase extends Entity
      */
     protected void jump()
     {
-        this.motionY = 0.41999998688697815D;
+    	//TODO: Client
+        this.motionY = Client.Wurst.moduleManager.getModuleFromClass(HighJump.class).getToggled() ? 0.41999998688697815D * HighJump.jumpHeight : 0.41999998688697815D;
 
         if (this.isPotionActive(Potion.jump))
         {
diff --git a/net/minecraft/entity/EntityTrackerEntry.java b/net/minecraft/entity/EntityTrackerEntry.java
index e143cdd..95c0bfa 100644
--- a/net/minecraft/entity/EntityTrackerEntry.java
+++ b/net/minecraft/entity/EntityTrackerEntry.java
@@ -415,11 +415,11 @@ public class EntityTrackerEntry
                     {
                         for (int var10 = 0; var10 < 5; ++var10)
                         {
-                            ItemStack var12 = ((EntityLivingBase)this.myEntity).getEquipmentInSlot(var10);
+                            ItemStack var13 = ((EntityLivingBase)this.myEntity).getEquipmentInSlot(var10);
 
-                            if (var12 != null)
+                            if (var13 != null)
                             {
-                                par1EntityPlayerMP.playerNetServerHandler.sendPacket(new S04PacketEntityEquipment(this.myEntity.getEntityId(), var10, var12));
+                                par1EntityPlayerMP.playerNetServerHandler.sendPacket(new S04PacketEntityEquipment(this.myEntity.getEntityId(), var10, var13));
                             }
                         }
                     }
@@ -436,12 +436,12 @@ public class EntityTrackerEntry
 
                     if (this.myEntity instanceof EntityLivingBase)
                     {
-                        EntityLivingBase var13 = (EntityLivingBase)this.myEntity;
-                        Iterator var14 = var13.getActivePotionEffects().iterator();
+                        EntityLivingBase var14 = (EntityLivingBase)this.myEntity;
+                        Iterator var12 = var14.getActivePotionEffects().iterator();
 
-                        while (var14.hasNext())
+                        while (var12.hasNext())
                         {
-                            PotionEffect var9 = (PotionEffect)var14.next();
+                            PotionEffect var9 = (PotionEffect)var12.next();
                             par1EntityPlayerMP.playerNetServerHandler.sendPacket(new S1DPacketEntityEffect(this.myEntity.getEntityId(), var9));
                         }
                     }
diff --git a/net/minecraft/entity/boss/EntityDragon.java b/net/minecraft/entity/boss/EntityDragon.java
index 92f459f..bb8e71b 100644
--- a/net/minecraft/entity/boss/EntityDragon.java
+++ b/net/minecraft/entity/boss/EntityDragon.java
@@ -189,7 +189,7 @@ public class EntityDragon extends EntityLiving implements IBossDisplayData, IEnt
             double var6;
             double var8;
             double var26;
-            float var31;
+            float var33;
 
             if (this.worldObj.isClient)
             {
@@ -241,16 +241,16 @@ public class EntityDragon extends EntityLiving implements IBossDisplayData, IEnt
                 }
 
                 var4 /= (double)MathHelper.sqrt_double(var26 * var26 + var6 * var6);
-                var31 = 0.6F;
+                var33 = 0.6F;
 
-                if (var4 < (double)(-var31))
+                if (var4 < (double)(-var33))
                 {
-                    var4 = (double)(-var31);
+                    var4 = (double)(-var33);
                 }
 
-                if (var4 > (double)var31)
+                if (var4 > (double)var33)
                 {
-                    var4 = (double)var31;
+                    var4 = (double)var33;
                 }
 
                 this.motionY += var4 * 0.10000000149011612D;
@@ -269,8 +269,8 @@ public class EntityDragon extends EntityLiving implements IBossDisplayData, IEnt
                 }
 
                 Vec3 var15 = this.worldObj.getWorldVec3Pool().getVecFromPool(this.targetX - this.posX, this.targetY - this.posY, this.targetZ - this.posZ).normalize();
-                Vec3 var39 = this.worldObj.getWorldVec3Pool().getVecFromPool((double)MathHelper.sin(this.rotationYaw * (float)Math.PI / 180.0F), this.motionY, (double)(-MathHelper.cos(this.rotationYaw * (float)Math.PI / 180.0F))).normalize();
-                float var17 = (float)(var39.dotProduct(var15) + 0.5D) / 1.5F;
+                Vec3 var40 = this.worldObj.getWorldVec3Pool().getVecFromPool((double)MathHelper.sin(this.rotationYaw * (float)Math.PI / 180.0F), this.motionY, (double)(-MathHelper.cos(this.rotationYaw * (float)Math.PI / 180.0F))).normalize();
+                float var17 = (float)(var40.dotProduct(var15) + 0.5D) / 1.5F;
 
                 if (var17 < 0.0F)
                 {
@@ -302,7 +302,7 @@ public class EntityDragon extends EntityLiving implements IBossDisplayData, IEnt
                 }
 
                 Vec3 var23 = this.worldObj.getWorldVec3Pool().getVecFromPool(this.motionX, this.motionY, this.motionZ).normalize();
-                float var24 = (float)(var23.dotProduct(var39) + 1.0D) / 2.0F;
+                float var24 = (float)(var23.dotProduct(var40) + 1.0D) / 2.0F;
                 var24 = 0.8F + 0.15F * var24;
                 this.motionX *= (double)var24;
                 this.motionZ *= (double)var24;
@@ -322,16 +322,16 @@ public class EntityDragon extends EntityLiving implements IBossDisplayData, IEnt
             this.dragonPartWing2.width = 4.0F;
             var2 = (float)(this.getMovementOffsets(5, 1.0F)[1] - this.getMovementOffsets(10, 1.0F)[1]) * 10.0F / 180.0F * (float)Math.PI;
             var3 = MathHelper.cos(var2);
-            float var27 = -MathHelper.sin(var2);
+            float var28 = -MathHelper.sin(var2);
             float var5 = this.rotationYaw * (float)Math.PI / 180.0F;
-            float var28 = MathHelper.sin(var5);
+            float var27 = MathHelper.sin(var5);
             float var7 = MathHelper.cos(var5);
             this.dragonPartBody.onUpdate();
-            this.dragonPartBody.setLocationAndAngles(this.posX + (double)(var28 * 0.5F), this.posY, this.posZ - (double)(var7 * 0.5F), 0.0F, 0.0F);
+            this.dragonPartBody.setLocationAndAngles(this.posX + (double)(var27 * 0.5F), this.posY, this.posZ - (double)(var7 * 0.5F), 0.0F, 0.0F);
             this.dragonPartWing1.onUpdate();
-            this.dragonPartWing1.setLocationAndAngles(this.posX + (double)(var7 * 4.5F), this.posY + 2.0D, this.posZ + (double)(var28 * 4.5F), 0.0F, 0.0F);
+            this.dragonPartWing1.setLocationAndAngles(this.posX + (double)(var7 * 4.5F), this.posY + 2.0D, this.posZ + (double)(var27 * 4.5F), 0.0F, 0.0F);
             this.dragonPartWing2.onUpdate();
-            this.dragonPartWing2.setLocationAndAngles(this.posX - (double)(var7 * 4.5F), this.posY + 2.0D, this.posZ - (double)(var28 * 4.5F), 0.0F, 0.0F);
+            this.dragonPartWing2.setLocationAndAngles(this.posX - (double)(var7 * 4.5F), this.posY + 2.0D, this.posZ - (double)(var27 * 4.5F), 0.0F, 0.0F);
 
             if (!this.worldObj.isClient && this.hurtTime == 0)
             {
@@ -342,38 +342,38 @@ public class EntityDragon extends EntityLiving implements IBossDisplayData, IEnt
 
             double[] var29 = this.getMovementOffsets(5, 1.0F);
             double[] var9 = this.getMovementOffsets(0, 1.0F);
-            var31 = MathHelper.sin(this.rotationYaw * (float)Math.PI / 180.0F - this.randomYawVelocity * 0.01F);
-            float var33 = MathHelper.cos(this.rotationYaw * (float)Math.PI / 180.0F - this.randomYawVelocity * 0.01F);
+            var33 = MathHelper.sin(this.rotationYaw * (float)Math.PI / 180.0F - this.randomYawVelocity * 0.01F);
+            float var32 = MathHelper.cos(this.rotationYaw * (float)Math.PI / 180.0F - this.randomYawVelocity * 0.01F);
             this.dragonPartHead.onUpdate();
-            this.dragonPartHead.setLocationAndAngles(this.posX + (double)(var31 * 5.5F * var3), this.posY + (var9[1] - var29[1]) * 1.0D + (double)(var27 * 5.5F), this.posZ - (double)(var33 * 5.5F * var3), 0.0F, 0.0F);
+            this.dragonPartHead.setLocationAndAngles(this.posX + (double)(var33 * 5.5F * var3), this.posY + (var9[1] - var29[1]) * 1.0D + (double)(var28 * 5.5F), this.posZ - (double)(var32 * 5.5F * var3), 0.0F, 0.0F);
 
             for (int var30 = 0; var30 < 3; ++var30)
             {
-                EntityDragonPart var32 = null;
+                EntityDragonPart var31 = null;
 
                 if (var30 == 0)
                 {
-                    var32 = this.dragonPartTail1;
+                    var31 = this.dragonPartTail1;
                 }
 
                 if (var30 == 1)
                 {
-                    var32 = this.dragonPartTail2;
+                    var31 = this.dragonPartTail2;
                 }
 
                 if (var30 == 2)
                 {
-                    var32 = this.dragonPartTail3;
+                    var31 = this.dragonPartTail3;
                 }
 
-                double[] var34 = this.getMovementOffsets(12 + var30 * 2, 1.0F);
-                float var35 = this.rotationYaw * (float)Math.PI / 180.0F + this.simplifyAngle(var34[0] - var29[0]) * (float)Math.PI / 180.0F * 1.0F;
-                float var37 = MathHelper.sin(var35);
-                float var36 = MathHelper.cos(var35);
-                float var38 = 1.5F;
-                float var40 = (float)(var30 + 1) * 2.0F;
-                var32.onUpdate();
-                var32.setLocationAndAngles(this.posX - (double)((var28 * var38 + var37 * var40) * var3), this.posY + (var34[1] - var29[1]) * 1.0D - (double)((var40 + var38) * var27) + 1.5D, this.posZ + (double)((var7 * var38 + var36 * var40) * var3), 0.0F, 0.0F);
+                double[] var35 = this.getMovementOffsets(12 + var30 * 2, 1.0F);
+                float var34 = this.rotationYaw * (float)Math.PI / 180.0F + this.simplifyAngle(var35[0] - var29[0]) * (float)Math.PI / 180.0F * 1.0F;
+                float var38 = MathHelper.sin(var34);
+                float var37 = MathHelper.cos(var34);
+                float var36 = 1.5F;
+                float var39 = (float)(var30 + 1) * 2.0F;
+                var31.onUpdate();
+                var31.setLocationAndAngles(this.posX - (double)((var27 * var36 + var38 * var39) * var3), this.posY + (var35[1] - var29[1]) * 1.0D - (double)((var39 + var36) * var28) + 1.5D, this.posZ + (double)((var7 * var36 + var37 * var39) * var3), 0.0F, 0.0F);
             }
 
             if (!this.worldObj.isClient)
diff --git a/net/minecraft/entity/boss/EntityWither.java b/net/minecraft/entity/boss/EntityWither.java
index 114f3b4..47de04a 100644
--- a/net/minecraft/entity/boss/EntityWither.java
+++ b/net/minecraft/entity/boss/EntityWither.java
@@ -352,28 +352,28 @@ public class EntityWither extends EntityMob implements IBossDisplayData, IRanged
                     var1 = MathHelper.floor_double(this.posY);
                     var12 = MathHelper.floor_double(this.posX);
                     int var15 = MathHelper.floor_double(this.posZ);
-                    boolean var17 = false;
+                    boolean var18 = false;
 
-                    for (int var18 = -1; var18 <= 1; ++var18)
+                    for (int var17 = -1; var17 <= 1; ++var17)
                     {
                         for (int var19 = -1; var19 <= 1; ++var19)
                         {
                             for (int var7 = 0; var7 <= 3; ++var7)
                             {
-                                int var20 = var12 + var18;
+                                int var20 = var12 + var17;
                                 int var9 = var1 + var7;
                                 int var10 = var15 + var19;
                                 Block var11 = this.worldObj.getBlock(var20, var9, var10);
 
                                 if (var11.getMaterial() != Material.air && var11 != Blocks.bedrock && var11 != Blocks.end_portal && var11 != Blocks.end_portal_frame && var11 != Blocks.command_block)
                                 {
-                                    var17 = this.worldObj.func_147480_a(var20, var9, var10, true) || var17;
+                                    var18 = this.worldObj.func_147480_a(var20, var9, var10, true) || var18;
                                 }
                             }
                         }
                     }
 
-                    if (var17)
+                    if (var18)
                     {
                         this.worldObj.playAuxSFXAtEntity((EntityPlayer)null, 1012, (int)this.posX, (int)this.posY, (int)this.posZ, 0);
                     }
diff --git a/net/minecraft/entity/passive/EntityTameable.java b/net/minecraft/entity/passive/EntityTameable.java
index eb9e998..fca3375 100644
--- a/net/minecraft/entity/passive/EntityTameable.java
+++ b/net/minecraft/entity/passive/EntityTameable.java
@@ -1,6 +1,5 @@
 package net.minecraft.entity.passive;
 
-import net.minecraft.entity.Entity;
 import net.minecraft.entity.EntityLivingBase;
 import net.minecraft.entity.IEntityOwnable;
 import net.minecraft.entity.ai.EntityAISit;
diff --git a/net/minecraft/entity/player/EntityPlayer.java b/net/minecraft/entity/player/EntityPlayer.java
index d4f2d2b..5c21a2c 100644
--- a/net/minecraft/entity/player/EntityPlayer.java
+++ b/net/minecraft/entity/player/EntityPlayer.java
@@ -1,11 +1,10 @@
 package net.minecraft.entity.player;
 
-import com.google.common.base.Charsets;
-import com.mojang.authlib.GameProfile;
 import java.util.Collection;
 import java.util.Iterator;
 import java.util.List;
 import java.util.UUID;
+
 import net.minecraft.block.Block;
 import net.minecraft.block.BlockBed;
 import net.minecraft.block.material.Material;
@@ -72,6 +71,13 @@ import net.minecraft.world.EnumDifficulty;
 import net.minecraft.world.World;
 import net.minecraft.world.WorldSettings;
 import net.minecraft.world.chunk.IChunkProvider;
+import tk.wurst_client.Client;
+import tk.wurst_client.module.modules.AntiKnockback;
+import tk.wurst_client.module.modules.Freecam;
+import tk.wurst_client.module.modules.RemoteView;
+
+import com.google.common.base.Charsets;
+import com.mojang.authlib.GameProfile;
 
 public abstract class EntityPlayer extends EntityLivingBase implements ICommandSender
 {
@@ -1381,7 +1387,8 @@ public abstract class EntityPlayer extends EntityLivingBase implements ICommandS
      */
     public boolean isEntityInsideOpaqueBlock()
     {
-        return !this.sleeping && super.isEntityInsideOpaqueBlock();
+    	//TODO: Client
+        return Client.Wurst.moduleManager.getModuleFromClass(RemoteView.class).getToggled()  || Client.Wurst.moduleManager.getModuleFromClass(Freecam.class).getToggled() ? false : !this.sleeping && super.isEntityInsideOpaqueBlock();
     }
 
     /**
@@ -2254,7 +2261,7 @@ public abstract class EntityPlayer extends EntityLivingBase implements ICommandS
 
     public boolean isPushedByWater()
     {
-        return !this.capabilities.isFlying;
+        return !this.capabilities.isFlying && !Client.Wurst.moduleManager.getModuleFromClass(AntiKnockback.class).getToggled() && !Client.Wurst.moduleManager.getModuleFromClass(Freecam.class).getToggled();
     }
 
     public Scoreboard getWorldScoreboard()
@@ -2301,6 +2308,21 @@ public abstract class EntityPlayer extends EntityLivingBase implements ICommandS
         return var1;
     }
 
+    public static enum EnumStatus
+    {
+        OK("OK", 0),
+        NOT_POSSIBLE_HERE("NOT_POSSIBLE_HERE", 1),
+        NOT_POSSIBLE_NOW("NOT_POSSIBLE_NOW", 2),
+        TOO_FAR_AWAY("TOO_FAR_AWAY", 3),
+        OTHER_PROBLEM("OTHER_PROBLEM", 4),
+        NOT_SAFE("NOT_SAFE", 5);
+
+        private static final EntityPlayer.EnumStatus[] $VALUES = new EntityPlayer.EnumStatus[]{OK, NOT_POSSIBLE_HERE, NOT_POSSIBLE_NOW, TOO_FAR_AWAY, OTHER_PROBLEM, NOT_SAFE};
+        private static final String __OBFID = "CL_00001712";
+
+        private EnumStatus(String par1Str, int par2) {}
+    }
+
     public static enum EnumChatVisibility
     {
         FULL("FULL", 0, 0, "options.chat.visibility.full"),
@@ -2345,19 +2367,4 @@ public abstract class EntityPlayer extends EntityLivingBase implements ICommandS
             }
         }
     }
-
-    public static enum EnumStatus
-    {
-        OK("OK", 0),
-        NOT_POSSIBLE_HERE("NOT_POSSIBLE_HERE", 1),
-        NOT_POSSIBLE_NOW("NOT_POSSIBLE_NOW", 2),
-        TOO_FAR_AWAY("TOO_FAR_AWAY", 3),
-        OTHER_PROBLEM("OTHER_PROBLEM", 4),
-        NOT_SAFE("NOT_SAFE", 5);
-
-        private static final EntityPlayer.EnumStatus[] $VALUES = new EntityPlayer.EnumStatus[]{OK, NOT_POSSIBLE_HERE, NOT_POSSIBLE_NOW, TOO_FAR_AWAY, OTHER_PROBLEM, NOT_SAFE};
-        private static final String __OBFID = "CL_00001712";
-
-        private EnumStatus(String par1Str, int par2) {}
-    }
 }
diff --git a/net/minecraft/entity/player/EntityPlayerMP.java b/net/minecraft/entity/player/EntityPlayerMP.java
index 8c74a56..bcc1072 100644
--- a/net/minecraft/entity/player/EntityPlayerMP.java
+++ b/net/minecraft/entity/player/EntityPlayerMP.java
@@ -325,19 +325,19 @@ public class EntityPlayerMP extends EntityPlayer implements ICrafting
             if (!var6.isEmpty())
             {
                 this.playerNetServerHandler.sendPacket(new S26PacketMapChunkBulk(var6));
-                Iterator var10 = var8.iterator();
+                Iterator var11 = var8.iterator();
 
-                while (var10.hasNext())
+                while (var11.hasNext())
                 {
-                    TileEntity var11 = (TileEntity)var10.next();
-                    this.func_147097_b(var11);
+                    TileEntity var10 = (TileEntity)var11.next();
+                    this.func_147097_b(var10);
                 }
 
-                var10 = var6.iterator();
+                var11 = var6.iterator();
 
-                while (var10.hasNext())
+                while (var11.hasNext())
                 {
-                    var5 = (Chunk)var10.next();
+                    var5 = (Chunk)var11.next();
                     this.getServerForPlayer().getEntityTracker().func_85172_a(this, var5);
                 }
             }
diff --git a/net/minecraft/entity/projectile/EntityArrow.java b/net/minecraft/entity/projectile/EntityArrow.java
index 60acaa2..956a2dc 100644
--- a/net/minecraft/entity/projectile/EntityArrow.java
+++ b/net/minecraft/entity/projectile/EntityArrow.java
@@ -281,38 +281,38 @@ public class EntityArrow extends Entity implements IProjectile
 
             if (var4 != null && var4.entityHit != null && var4.entityHit instanceof EntityPlayer)
             {
-                EntityPlayer var19 = (EntityPlayer)var4.entityHit;
+                EntityPlayer var20 = (EntityPlayer)var4.entityHit;
 
-                if (var19.capabilities.disableDamage || this.shootingEntity instanceof EntityPlayer && !((EntityPlayer)this.shootingEntity).canAttackPlayer(var19))
+                if (var20.capabilities.disableDamage || this.shootingEntity instanceof EntityPlayer && !((EntityPlayer)this.shootingEntity).canAttackPlayer(var20))
                 {
                     var4 = null;
                 }
             }
 
-            float var20;
+            float var19;
             float var26;
 
             if (var4 != null)
             {
                 if (var4.entityHit != null)
                 {
-                    var20 = MathHelper.sqrt_double(this.motionX * this.motionX + this.motionY * this.motionY + this.motionZ * this.motionZ);
-                    int var21 = MathHelper.ceiling_double_int((double)var20 * this.damage);
+                    var19 = MathHelper.sqrt_double(this.motionX * this.motionX + this.motionY * this.motionY + this.motionZ * this.motionZ);
+                    int var23 = MathHelper.ceiling_double_int((double)var19 * this.damage);
 
                     if (this.getIsCritical())
                     {
-                        var21 += this.rand.nextInt(var21 / 2 + 2);
+                        var23 += this.rand.nextInt(var23 / 2 + 2);
                     }
 
-                    DamageSource var22 = null;
+                    DamageSource var21 = null;
 
                     if (this.shootingEntity == null)
                     {
-                        var22 = DamageSource.causeArrowDamage(this, this);
+                        var21 = DamageSource.causeArrowDamage(this, this);
                     }
                     else
                     {
-                        var22 = DamageSource.causeArrowDamage(this, this.shootingEntity);
+                        var21 = DamageSource.causeArrowDamage(this, this.shootingEntity);
                     }
 
                     if (this.isBurning() && !(var4.entityHit instanceof EntityEnderman))
@@ -320,7 +320,7 @@ public class EntityArrow extends Entity implements IProjectile
                         var4.entityHit.setFire(5);
                     }
 
-                    if (var4.entityHit.attackEntityFrom(var22, (float)var21))
+                    if (var4.entityHit.attackEntityFrom(var21, (float)var23))
                     {
                         if (var4.entityHit instanceof EntityLivingBase)
                         {
@@ -380,10 +380,10 @@ public class EntityArrow extends Entity implements IProjectile
                     this.motionX = (double)((float)(var4.hitVec.xCoord - this.posX));
                     this.motionY = (double)((float)(var4.hitVec.yCoord - this.posY));
                     this.motionZ = (double)((float)(var4.hitVec.zCoord - this.posZ));
-                    var20 = MathHelper.sqrt_double(this.motionX * this.motionX + this.motionY * this.motionY + this.motionZ * this.motionZ);
-                    this.posX -= this.motionX / (double)var20 * 0.05000000074505806D;
-                    this.posY -= this.motionY / (double)var20 * 0.05000000074505806D;
-                    this.posZ -= this.motionZ / (double)var20 * 0.05000000074505806D;
+                    var19 = MathHelper.sqrt_double(this.motionX * this.motionX + this.motionY * this.motionY + this.motionZ * this.motionZ);
+                    this.posX -= this.motionX / (double)var19 * 0.05000000074505806D;
+                    this.posY -= this.motionY / (double)var19 * 0.05000000074505806D;
+                    this.posZ -= this.motionZ / (double)var19 * 0.05000000074505806D;
                     this.playSound("random.bowhit", 1.0F, 1.2F / (this.rand.nextFloat() * 0.2F + 0.9F));
                     this.inGround = true;
                     this.arrowShake = 7;
@@ -407,10 +407,10 @@ public class EntityArrow extends Entity implements IProjectile
             this.posX += this.motionX;
             this.posY += this.motionY;
             this.posZ += this.motionZ;
-            var20 = MathHelper.sqrt_double(this.motionX * this.motionX + this.motionZ * this.motionZ);
+            var19 = MathHelper.sqrt_double(this.motionX * this.motionX + this.motionZ * this.motionZ);
             this.rotationYaw = (float)(Math.atan2(this.motionX, this.motionZ) * 180.0D / Math.PI);
 
-            for (this.rotationPitch = (float)(Math.atan2(this.motionY, (double)var20) * 180.0D / Math.PI); this.rotationPitch - this.prevRotationPitch < -180.0F; this.prevRotationPitch -= 360.0F)
+            for (this.rotationPitch = (float)(Math.atan2(this.motionY, (double)var19) * 180.0D / Math.PI); this.rotationPitch - this.prevRotationPitch < -180.0F; this.prevRotationPitch -= 360.0F)
             {
                 ;
             }
@@ -432,7 +432,7 @@ public class EntityArrow extends Entity implements IProjectile
 
             this.rotationPitch = this.prevRotationPitch + (this.rotationPitch - this.prevRotationPitch) * 0.2F;
             this.rotationYaw = this.prevRotationYaw + (this.rotationYaw - this.prevRotationYaw) * 0.2F;
-            float var23 = 0.99F;
+            float var22 = 0.99F;
             var11 = 0.05F;
 
             if (this.isInWater())
@@ -443,7 +443,7 @@ public class EntityArrow extends Entity implements IProjectile
                     this.worldObj.spawnParticle("bubble", this.posX - this.motionX * (double)var26, this.posY - this.motionY * (double)var26, this.posZ - this.motionZ * (double)var26, this.motionX, this.motionY, this.motionZ);
                 }
 
-                var23 = 0.8F;
+                var22 = 0.8F;
             }
 
             if (this.isWet())
@@ -451,9 +451,9 @@ public class EntityArrow extends Entity implements IProjectile
                 this.extinguish();
             }
 
-            this.motionX *= (double)var23;
-            this.motionY *= (double)var23;
-            this.motionZ *= (double)var23;
+            this.motionX *= (double)var22;
+            this.motionY *= (double)var22;
+            this.motionZ *= (double)var22;
             this.motionY -= (double)var11;
             this.setPosition(this.posX, this.posY, this.posZ);
             this.func_145775_I();
diff --git a/net/minecraft/entity/projectile/EntityFireball.java b/net/minecraft/entity/projectile/EntityFireball.java
index 6042bb0..a4d93ac 100644
--- a/net/minecraft/entity/projectile/EntityFireball.java
+++ b/net/minecraft/entity/projectile/EntityFireball.java
@@ -197,10 +197,10 @@ public abstract class EntityFireball extends Entity
 
             if (this.isInWater())
             {
-                for (int var17 = 0; var17 < 4; ++var17)
+                for (int var18 = 0; var18 < 4; ++var18)
                 {
-                    float var18 = 0.25F;
-                    this.worldObj.spawnParticle("bubble", this.posX - this.motionX * (double)var18, this.posY - this.motionY * (double)var18, this.posZ - this.motionZ * (double)var18, this.motionX, this.motionY, this.motionZ);
+                    float var17 = 0.25F;
+                    this.worldObj.spawnParticle("bubble", this.posX - this.motionX * (double)var17, this.posY - this.motionY * (double)var17, this.posZ - this.motionZ * (double)var17, this.motionX, this.motionY, this.motionZ);
                 }
 
                 var16 = 0.8F;
diff --git a/net/minecraft/entity/projectile/EntityFishHook.java b/net/minecraft/entity/projectile/EntityFishHook.java
index 350e681..6cec1ea 100644
--- a/net/minecraft/entity/projectile/EntityFishHook.java
+++ b/net/minecraft/entity/projectile/EntityFishHook.java
@@ -329,24 +329,24 @@ public class EntityFishHook extends Entity
                     var31 = 0.5F;
                 }
 
-                byte var32 = 5;
-                double var33 = 0.0D;
+                byte var33 = 5;
+                double var32 = 0.0D;
 
-                for (int var34 = 0; var34 < var32; ++var34)
+                for (int var35 = 0; var35 < var33; ++var35)
                 {
-                    double var14 = this.boundingBox.minY + (this.boundingBox.maxY - this.boundingBox.minY) * (double)(var34 + 0) / (double)var32 - 0.125D + 0.125D;
-                    double var16 = this.boundingBox.minY + (this.boundingBox.maxY - this.boundingBox.minY) * (double)(var34 + 1) / (double)var32 - 0.125D + 0.125D;
+                    double var14 = this.boundingBox.minY + (this.boundingBox.maxY - this.boundingBox.minY) * (double)(var35 + 0) / (double)var33 - 0.125D + 0.125D;
+                    double var16 = this.boundingBox.minY + (this.boundingBox.maxY - this.boundingBox.minY) * (double)(var35 + 1) / (double)var33 - 0.125D + 0.125D;
                     AxisAlignedBB var18 = AxisAlignedBB.getAABBPool().getAABB(this.boundingBox.minX, var14, this.boundingBox.minZ, this.boundingBox.maxX, var16, this.boundingBox.maxZ);
 
                     if (this.worldObj.isAABBInMaterial(var18, Material.water))
                     {
-                        var33 += 1.0D / (double)var32;
+                        var32 += 1.0D / (double)var33;
                     }
                 }
 
-                if (!this.worldObj.isClient && var33 > 0.0D)
+                if (!this.worldObj.isClient && var32 > 0.0D)
                 {
-                    WorldServer var35 = (WorldServer)this.worldObj;
+                    WorldServer var34 = (WorldServer)this.worldObj;
                     int var36 = 1;
 
                     if (this.rand.nextFloat() < 0.25F && this.worldObj.canLightningStrikeAt(MathHelper.floor_double(this.posX), MathHelper.floor_double(this.posY) + 1, MathHelper.floor_double(this.posZ)))
@@ -375,8 +375,8 @@ public class EntityFishHook extends Entity
                         float var17;
                         double var20;
                         double var22;
-                        float var37;
                         double var38;
+                        float var37;
 
                         if (this.field_146038_az > 0)
                         {
@@ -387,8 +387,8 @@ public class EntityFishHook extends Entity
                                 this.motionY -= 0.20000000298023224D;
                                 this.playSound("random.splash", 0.25F, 1.0F + (this.rand.nextFloat() - this.rand.nextFloat()) * 0.4F);
                                 var15 = (float)MathHelper.floor_double(this.boundingBox.minY);
-                                var35.func_147487_a("bubble", this.posX, (double)(var15 + 1.0F), this.posZ, (int)(1.0F + this.width * 20.0F), (double)this.width, 0.0D, (double)this.width, 0.20000000298023224D);
-                                var35.func_147487_a("wake", this.posX, (double)(var15 + 1.0F), this.posZ, (int)(1.0F + this.width * 20.0F), (double)this.width, 0.0D, (double)this.width, 0.20000000298023224D);
+                                var34.func_147487_a("bubble", this.posX, (double)(var15 + 1.0F), this.posZ, (int)(1.0F + this.width * 20.0F), (double)this.width, 0.0D, (double)this.width, 0.20000000298023224D);
+                                var34.func_147487_a("wake", this.posX, (double)(var15 + 1.0F), this.posZ, (int)(1.0F + this.width * 20.0F), (double)this.width, 0.0D, (double)this.width, 0.20000000298023224D);
                                 this.field_146045_ax = MathHelper.getRandomIntegerInRange(this.rand, 10, 30);
                             }
                             else
@@ -403,13 +403,13 @@ public class EntityFishHook extends Entity
 
                                 if (this.rand.nextFloat() < 0.15F)
                                 {
-                                    var35.func_147487_a("bubble", var38, var20 - 0.10000000149011612D, var22, 1, (double)var37, 0.1D, (double)var17, 0.0D);
+                                    var34.func_147487_a("bubble", var38, var20 - 0.10000000149011612D, var22, 1, (double)var37, 0.1D, (double)var17, 0.0D);
                                 }
 
                                 float var24 = var37 * 0.04F;
                                 float var25 = var17 * 0.04F;
-                                var35.func_147487_a("wake", var38, var20, var22, 0, (double)var25, 0.01D, (double)(-var24), 1.0D);
-                                var35.func_147487_a("wake", var38, var20, var22, 0, (double)(-var25), 0.01D, (double)var24, 1.0D);
+                                var34.func_147487_a("wake", var38, var20, var22, 0, (double)var25, 0.01D, (double)(-var24), 1.0D);
+                                var34.func_147487_a("wake", var38, var20, var22, 0, (double)(-var25), 0.01D, (double)var24, 1.0D);
                             }
                         }
                         else if (this.field_146040_ay > 0)
@@ -437,7 +437,7 @@ public class EntityFishHook extends Entity
                                 var38 = this.posX + (double)(MathHelper.sin(var37) * var17 * 0.1F);
                                 var20 = (double)((float)MathHelper.floor_double(this.boundingBox.minY) + 1.0F);
                                 var22 = this.posZ + (double)(MathHelper.cos(var37) * var17 * 0.1F);
-                                var35.func_147487_a("splash", var38, var20, var22, 2 + this.rand.nextInt(2), 0.10000000149011612D, 0.0D, 0.10000000149011612D, 0.0D);
+                                var34.func_147487_a("splash", var38, var20, var22, 2 + this.rand.nextInt(2), 0.10000000149011612D, 0.0D, 0.10000000149011612D, 0.0D);
                             }
 
                             if (this.field_146040_ay <= 0)
@@ -459,10 +459,10 @@ public class EntityFishHook extends Entity
                     }
                 }
 
-                var13 = var33 * 2.0D - 1.0D;
+                var13 = var32 * 2.0D - 1.0D;
                 this.motionY += 0.03999999910593033D * var13;
 
-                if (var33 > 0.0D)
+                if (var32 > 0.0D)
                 {
                     var31 = (float)((double)var31 * 0.9D);
                     this.motionY *= 0.8D;
diff --git a/net/minecraft/inventory/Container.java b/net/minecraft/inventory/Container.java
index d05e028..5d887f6 100644
--- a/net/minecraft/inventory/Container.java
+++ b/net/minecraft/inventory/Container.java
@@ -239,8 +239,8 @@ public abstract class Container
         else
         {
             Slot var16;
-            int var19;
-            ItemStack var23;
+            int var22;
+            ItemStack var24;
 
             if ((par3 == 0 || par3 == 1) && (par2 == 0 || par2 == 1))
             {
@@ -280,10 +280,10 @@ public abstract class Container
 
                         if (var17 != null)
                         {
-                            Item var20 = var17.getItem();
+                            Item var19 = var17.getItem();
                             var5 = var17.copy();
 
-                            if (var16.getStack() != null && var16.getStack().getItem() == var20)
+                            if (var16.getStack() != null && var16.getStack().getItem() == var19)
                             {
                                 this.retrySlotClick(par1, par2, true, par4EntityPlayer);
                             }
@@ -302,7 +302,7 @@ public abstract class Container
                     if (var16 != null)
                     {
                         var17 = var16.getStack();
-                        ItemStack var21 = var6.getItemStack();
+                        ItemStack var20 = var6.getItemStack();
 
                         if (var17 != null)
                         {
@@ -311,21 +311,21 @@ public abstract class Container
 
                         if (var17 == null)
                         {
-                            if (var21 != null && var16.isItemValid(var21))
+                            if (var20 != null && var16.isItemValid(var20))
                             {
-                                var19 = par2 == 0 ? var21.stackSize : 1;
+                                var22 = par2 == 0 ? var20.stackSize : 1;
 
-                                if (var19 > var16.getSlotStackLimit())
+                                if (var22 > var16.getSlotStackLimit())
                                 {
-                                    var19 = var16.getSlotStackLimit();
+                                    var22 = var16.getSlotStackLimit();
                                 }
 
-                                if (var21.stackSize >= var19)
+                                if (var20.stackSize >= var22)
                                 {
-                                    var16.putStack(var21.splitStack(var19));
+                                    var16.putStack(var20.splitStack(var22));
                                 }
 
-                                if (var21.stackSize == 0)
+                                if (var20.stackSize == 0)
                                 {
                                     var6.setItemStack((ItemStack)null);
                                 }
@@ -333,11 +333,11 @@ public abstract class Container
                         }
                         else if (var16.canTakeStack(par4EntityPlayer))
                         {
-                            if (var21 == null)
+                            if (var20 == null)
                             {
-                                var19 = par2 == 0 ? var17.stackSize : (var17.stackSize + 1) / 2;
-                                var23 = var16.decrStackSize(var19);
-                                var6.setItemStack(var23);
+                                var22 = par2 == 0 ? var17.stackSize : (var17.stackSize + 1) / 2;
+                                var24 = var16.decrStackSize(var22);
+                                var6.setItemStack(var24);
 
                                 if (var17.stackSize == 0)
                                 {
@@ -346,45 +346,45 @@ public abstract class Container
 
                                 var16.onPickupFromSlot(par4EntityPlayer, var6.getItemStack());
                             }
-                            else if (var16.isItemValid(var21))
+                            else if (var16.isItemValid(var20))
                             {
-                                if (var17.getItem() == var21.getItem() && var17.getItemDamage() == var21.getItemDamage() && ItemStack.areItemStackTagsEqual(var17, var21))
+                                if (var17.getItem() == var20.getItem() && var17.getItemDamage() == var20.getItemDamage() && ItemStack.areItemStackTagsEqual(var17, var20))
                                 {
-                                    var19 = par2 == 0 ? var21.stackSize : 1;
+                                    var22 = par2 == 0 ? var20.stackSize : 1;
 
-                                    if (var19 > var16.getSlotStackLimit() - var17.stackSize)
+                                    if (var22 > var16.getSlotStackLimit() - var17.stackSize)
                                     {
-                                        var19 = var16.getSlotStackLimit() - var17.stackSize;
+                                        var22 = var16.getSlotStackLimit() - var17.stackSize;
                                     }
 
-                                    if (var19 > var21.getMaxStackSize() - var17.stackSize)
+                                    if (var22 > var20.getMaxStackSize() - var17.stackSize)
                                     {
-                                        var19 = var21.getMaxStackSize() - var17.stackSize;
+                                        var22 = var20.getMaxStackSize() - var17.stackSize;
                                     }
 
-                                    var21.splitStack(var19);
+                                    var20.splitStack(var22);
 
-                                    if (var21.stackSize == 0)
+                                    if (var20.stackSize == 0)
                                     {
                                         var6.setItemStack((ItemStack)null);
                                     }
 
-                                    var17.stackSize += var19;
+                                    var17.stackSize += var22;
                                 }
-                                else if (var21.stackSize <= var16.getSlotStackLimit())
+                                else if (var20.stackSize <= var16.getSlotStackLimit())
                                 {
-                                    var16.putStack(var21);
+                                    var16.putStack(var20);
                                     var6.setItemStack(var17);
                                 }
                             }
-                            else if (var17.getItem() == var21.getItem() && var21.getMaxStackSize() > 1 && (!var17.getHasSubtypes() || var17.getItemDamage() == var21.getItemDamage()) && ItemStack.areItemStackTagsEqual(var17, var21))
+                            else if (var17.getItem() == var20.getItem() && var20.getMaxStackSize() > 1 && (!var17.getHasSubtypes() || var17.getItemDamage() == var20.getItemDamage()) && ItemStack.areItemStackTagsEqual(var17, var20))
                             {
-                                var19 = var17.stackSize;
+                                var22 = var17.stackSize;
 
-                                if (var19 > 0 && var19 + var21.stackSize <= var21.getMaxStackSize())
+                                if (var22 > 0 && var22 + var20.stackSize <= var20.getMaxStackSize())
                                 {
-                                    var21.stackSize += var19;
-                                    var17 = var16.decrStackSize(var19);
+                                    var20.stackSize += var22;
+                                    var17 = var16.decrStackSize(var22);
 
                                     if (var17.stackSize == 0)
                                     {
@@ -408,34 +408,34 @@ public abstract class Container
                 {
                     var17 = var6.getStackInSlot(par2);
                     boolean var18 = var17 == null || var16.inventory == var6 && var16.isItemValid(var17);
-                    var19 = -1;
+                    var22 = -1;
 
                     if (!var18)
                     {
-                        var19 = var6.getFirstEmptyStack();
-                        var18 |= var19 > -1;
+                        var22 = var6.getFirstEmptyStack();
+                        var18 |= var22 > -1;
                     }
 
                     if (var16.getHasStack() && var18)
                     {
-                        var23 = var16.getStack();
-                        var6.setInventorySlotContents(par2, var23.copy());
+                        var24 = var16.getStack();
+                        var6.setInventorySlotContents(par2, var24.copy());
 
                         if ((var16.inventory != var6 || !var16.isItemValid(var17)) && var17 != null)
                         {
-                            if (var19 > -1)
+                            if (var22 > -1)
                             {
                                 var6.addItemStackToInventory(var17);
-                                var16.decrStackSize(var23.stackSize);
+                                var16.decrStackSize(var24.stackSize);
                                 var16.putStack((ItemStack)null);
-                                var16.onPickupFromSlot(par4EntityPlayer, var23);
+                                var16.onPickupFromSlot(par4EntityPlayer, var24);
                             }
                         }
                         else
                         {
-                            var16.decrStackSize(var23.stackSize);
+                            var16.decrStackSize(var24.stackSize);
                             var16.putStack(var17);
-                            var16.onPickupFromSlot(par4EntityPlayer, var23);
+                            var16.onPickupFromSlot(par4EntityPlayer, var24);
                         }
                     }
                     else if (!var16.getHasStack() && var17 != null && var16.isItemValid(var17))
@@ -475,15 +475,15 @@ public abstract class Container
                 if (var17 != null && (var16 == null || !var16.getHasStack() || !var16.canTakeStack(par4EntityPlayer)))
                 {
                     var9 = par2 == 0 ? 0 : this.inventorySlots.size() - 1;
-                    var19 = par2 == 0 ? 1 : -1;
+                    var22 = par2 == 0 ? 1 : -1;
 
-                    for (int var22 = 0; var22 < 2; ++var22)
+                    for (int var21 = 0; var21 < 2; ++var21)
                     {
-                        for (int var24 = var9; var24 >= 0 && var24 < this.inventorySlots.size() && var17.stackSize < var17.getMaxStackSize(); var24 += var19)
+                        for (int var23 = var9; var23 >= 0 && var23 < this.inventorySlots.size() && var17.stackSize < var17.getMaxStackSize(); var23 += var22)
                         {
-                            Slot var25 = (Slot)this.inventorySlots.get(var24);
+                            Slot var25 = (Slot)this.inventorySlots.get(var23);
 
-                            if (var25.getHasStack() && func_94527_a(var25, var17, true) && var25.canTakeStack(par4EntityPlayer) && this.func_94530_a(var17, var25) && (var22 != 0 || var25.getStack().stackSize != var25.getStack().getMaxStackSize()))
+                            if (var25.getHasStack() && func_94527_a(var25, var17, true) && var25.canTakeStack(par4EntityPlayer) && this.func_94530_a(var17, var25) && (var21 != 0 || var25.getStack().stackSize != var25.getStack().getMaxStackSize()))
                             {
                                 int var14 = Math.min(var17.getMaxStackSize() - var17.stackSize, var25.getStack().stackSize);
                                 ItemStack var15 = var25.decrStackSize(var14);
diff --git a/net/minecraft/inventory/ContainerBrewingStand.java b/net/minecraft/inventory/ContainerBrewingStand.java
index 6c1f3fc..ab27e15 100644
--- a/net/minecraft/inventory/ContainerBrewingStand.java
+++ b/net/minecraft/inventory/ContainerBrewingStand.java
@@ -156,6 +156,26 @@ public class ContainerBrewingStand extends Container
         return var3;
     }
 
+    class Ingredient extends Slot
+    {
+        private static final String __OBFID = "CL_00001738";
+
+        public Ingredient(IInventory par2IInventory, int par3, int par4, int par5)
+        {
+            super(par2IInventory, par3, par4, par5);
+        }
+
+        public boolean isItemValid(ItemStack par1ItemStack)
+        {
+            return par1ItemStack != null ? par1ItemStack.getItem().isPotionIngredient(par1ItemStack) : false;
+        }
+
+        public int getSlotStackLimit()
+        {
+            return 64;
+        }
+    }
+
     static class Potion extends Slot
     {
         private EntityPlayer player;
@@ -192,24 +212,4 @@ public class ContainerBrewingStand extends Container
             return par0ItemStack != null && (par0ItemStack.getItem() == Items.potionitem || par0ItemStack.getItem() == Items.glass_bottle);
         }
     }
-
-    class Ingredient extends Slot
-    {
-        private static final String __OBFID = "CL_00001738";
-
-        public Ingredient(IInventory par2IInventory, int par3, int par4, int par5)
-        {
-            super(par2IInventory, par3, par4, par5);
-        }
-
-        public boolean isItemValid(ItemStack par1ItemStack)
-        {
-            return par1ItemStack != null ? par1ItemStack.getItem().isPotionIngredient(par1ItemStack) : false;
-        }
-
-        public int getSlotStackLimit()
-        {
-            return 64;
-        }
-    }
 }
diff --git a/net/minecraft/item/ItemFireworkCharge.java b/net/minecraft/item/ItemFireworkCharge.java
index 27060f0..d762ad9 100644
--- a/net/minecraft/item/ItemFireworkCharge.java
+++ b/net/minecraft/item/ItemFireworkCharge.java
@@ -162,25 +162,25 @@ public class ItemFireworkCharge extends Item
         }
 
         int[] var13 = p_150902_0_.getIntArray("FadeColors");
-        boolean var15;
+        boolean var16;
 
         if (var13.length > 0)
         {
-            var15 = true;
+            var16 = true;
             String var14 = StatCollector.translateToLocal("item.fireworksCharge.fadeTo") + " ";
-            int[] var16 = var13;
+            int[] var15 = var13;
             var8 = var13.length;
 
             for (var9 = 0; var9 < var8; ++var9)
             {
-                int var18 = var16[var9];
+                int var18 = var15[var9];
 
-                if (!var15)
+                if (!var16)
                 {
                     var14 = var14 + ", ";
                 }
 
-                var15 = false;
+                var16 = false;
                 boolean var19 = false;
 
                 for (int var12 = 0; var12 < 16; ++var12)
@@ -202,9 +202,9 @@ public class ItemFireworkCharge extends Item
             p_150902_1_.add(var14);
         }
 
-        var15 = p_150902_0_.getBoolean("Trail");
+        var16 = p_150902_0_.getBoolean("Trail");
 
-        if (var15)
+        if (var16)
         {
             p_150902_1_.add(StatCollector.translateToLocal("item.fireworksCharge.trail"));
         }
diff --git a/net/minecraft/item/ItemMap.java b/net/minecraft/item/ItemMap.java
index 7a38e47..890fb1c 100644
--- a/net/minecraft/item/ItemMap.java
+++ b/net/minecraft/item/ItemMap.java
@@ -167,16 +167,16 @@ public class ItemMap extends ItemMapBase
 
                                 var26 /= var4 * var4;
                                 double var36 = (var27 - var14) * 4.0D / (double)(var4 + 4) + ((double)(var11 + var16 & 1) - 0.5D) * 0.4D;
-                                byte var37 = 1;
+                                byte var39 = 1;
 
                                 if (var36 > 0.6D)
                                 {
-                                    var37 = 2;
+                                    var39 = 2;
                                 }
 
                                 if (var36 < -0.6D)
                                 {
-                                    var37 = 0;
+                                    var39 = 0;
                                 }
 
                                 MapColor var38 = (MapColor)Iterables.getFirst(Multisets.copyHighestCountFirst(var22), MapColor.field_151660_b);
@@ -184,16 +184,16 @@ public class ItemMap extends ItemMapBase
                                 if (var38 == MapColor.field_151662_n)
                                 {
                                     var36 = (double)var26 * 0.1D + (double)(var11 + var16 & 1) * 0.2D;
-                                    var37 = 1;
+                                    var39 = 1;
 
                                     if (var36 < 0.5D)
                                     {
-                                        var37 = 2;
+                                        var39 = 2;
                                     }
 
                                     if (var36 > 0.9D)
                                     {
-                                        var37 = 0;
+                                        var39 = 0;
                                     }
                                 }
 
@@ -201,10 +201,10 @@ public class ItemMap extends ItemMapBase
 
                                 if (var16 >= 0 && var17 * var17 + var18 * var18 < var9 * var9 && (!var19 || (var11 + var16 & 1) != 0))
                                 {
-                                    byte var39 = par3MapData.colors[var11 + var16 * 128];
-                                    byte var40 = (byte)(var38.colorIndex * 4 + var37);
+                                    byte var37 = par3MapData.colors[var11 + var16 * 128];
+                                    byte var40 = (byte)(var38.colorIndex * 4 + var39);
 
-                                    if (var39 != var40)
+                                    if (var37 != var40)
                                     {
                                         if (var12 > var16)
                                         {
diff --git a/net/minecraft/item/ItemPotion.java b/net/minecraft/item/ItemPotion.java
index c77929c..f085c9b 100644
--- a/net/minecraft/item/ItemPotion.java
+++ b/net/minecraft/item/ItemPotion.java
@@ -357,27 +357,27 @@ public class ItemPotion extends Item
                 while (var16.hasNext())
                 {
                     Entry var17 = (Entry)var16.next();
-                    AttributeModifier var19 = (AttributeModifier)var17.getValue();
-                    double var18 = var19.getAmount();
+                    AttributeModifier var18 = (AttributeModifier)var17.getValue();
+                    double var19 = var18.getAmount();
                     double var20;
 
-                    if (var19.getOperation() != 1 && var19.getOperation() != 2)
+                    if (var18.getOperation() != 1 && var18.getOperation() != 2)
                     {
-                        var20 = var19.getAmount();
+                        var20 = var18.getAmount();
                     }
                     else
                     {
-                        var20 = var19.getAmount() * 100.0D;
+                        var20 = var18.getAmount() * 100.0D;
                     }
 
-                    if (var18 > 0.0D)
+                    if (var19 > 0.0D)
                     {
-                        par3List.add(EnumChatFormatting.BLUE + StatCollector.translateToLocalFormatted("attribute.modifier.plus." + var19.getOperation(), new Object[] {ItemStack.field_111284_a.format(var20), StatCollector.translateToLocal("attribute.name." + (String)var17.getKey())}));
+                        par3List.add(EnumChatFormatting.BLUE + StatCollector.translateToLocalFormatted("attribute.modifier.plus." + var18.getOperation(), new Object[] {ItemStack.field_111284_a.format(var20), StatCollector.translateToLocal("attribute.name." + (String)var17.getKey())}));
                     }
-                    else if (var18 < 0.0D)
+                    else if (var19 < 0.0D)
                     {
                         var20 *= -1.0D;
-                        par3List.add(EnumChatFormatting.RED + StatCollector.translateToLocalFormatted("attribute.modifier.take." + var19.getOperation(), new Object[] {ItemStack.field_111284_a.format(var20), StatCollector.translateToLocal("attribute.name." + (String)var17.getKey())}));
+                        par3List.add(EnumChatFormatting.RED + StatCollector.translateToLocalFormatted("attribute.modifier.take." + var18.getOperation(), new Object[] {ItemStack.field_111284_a.format(var20), StatCollector.translateToLocal("attribute.name." + (String)var17.getKey())}));
                     }
                 }
             }
diff --git a/net/minecraft/item/ItemStack.java b/net/minecraft/item/ItemStack.java
index 3976e16..8f19745 100644
--- a/net/minecraft/item/ItemStack.java
+++ b/net/minecraft/item/ItemStack.java
@@ -632,14 +632,14 @@ public final class ItemStack
 
         if (this.hasTagCompound())
         {
-            NBTTagList var13 = this.getEnchantmentTagList();
+            NBTTagList var14 = this.getEnchantmentTagList();
 
-            if (var13 != null)
+            if (var14 != null)
             {
-                for (var6 = 0; var6 < var13.tagCount(); ++var6)
+                for (var6 = 0; var6 < var14.tagCount(); ++var6)
                 {
-                    short var7 = var13.getCompoundTagAt(var6).getShort("id");
-                    short var8 = var13.getCompoundTagAt(var6).getShort("lvl");
+                    short var7 = var14.getCompoundTagAt(var6).getShort("id");
+                    short var8 = var14.getCompoundTagAt(var6).getShort("lvl");
 
                     if (Enchantment.enchantmentsList[var7] != null)
                     {
@@ -650,13 +650,13 @@ public final class ItemStack
 
             if (this.stackTagCompound.func_150297_b("display", 10))
             {
-                NBTTagCompound var15 = this.stackTagCompound.getCompoundTag("display");
+                NBTTagCompound var17 = this.stackTagCompound.getCompoundTag("display");
 
-                if (var15.func_150297_b("color", 3))
+                if (var17.func_150297_b("color", 3))
                 {
                     if (par2)
                     {
-                        var3.add("Color: #" + Integer.toHexString(var15.getInteger("color")).toUpperCase());
+                        var3.add("Color: #" + Integer.toHexString(var17.getInteger("color")).toUpperCase());
                     }
                     else
                     {
@@ -664,27 +664,27 @@ public final class ItemStack
                     }
                 }
 
-                if (var15.func_150299_b("Lore") == 9)
+                if (var17.func_150299_b("Lore") == 9)
                 {
-                    NBTTagList var17 = var15.getTagList("Lore", 8);
+                    NBTTagList var15 = var17.getTagList("Lore", 8);
 
-                    if (var17.tagCount() > 0)
+                    if (var15.tagCount() > 0)
                     {
-                        for (int var19 = 0; var19 < var17.tagCount(); ++var19)
+                        for (int var19 = 0; var19 < var15.tagCount(); ++var19)
                         {
-                            var3.add(EnumChatFormatting.DARK_PURPLE + "" + EnumChatFormatting.ITALIC + var17.getStringTagAt(var19));
+                            var3.add(EnumChatFormatting.DARK_PURPLE + "" + EnumChatFormatting.ITALIC + var15.getStringTagAt(var19));
                         }
                     }
                 }
             }
         }
 
-        Multimap var14 = this.getAttributeModifiers();
+        Multimap var13 = this.getAttributeModifiers();
 
-        if (!var14.isEmpty())
+        if (!var13.isEmpty())
         {
             var3.add("");
-            Iterator var16 = var14.entries().iterator();
+            Iterator var16 = var13.entries().iterator();
 
             while (var16.hasNext())
             {
diff --git a/net/minecraft/item/crafting/CraftingManager.java b/net/minecraft/item/crafting/CraftingManager.java
index 8ad5661..7fad309 100644
--- a/net/minecraft/item/crafting/CraftingManager.java
+++ b/net/minecraft/item/crafting/CraftingManager.java
@@ -207,25 +207,25 @@ public class CraftingManager
         for (var12 = new HashMap(); var4 < par2ArrayOfObj.length; var4 += 2)
         {
             Character var13 = (Character)par2ArrayOfObj[var4];
-            ItemStack var15 = null;
+            ItemStack var14 = null;
 
             if (par2ArrayOfObj[var4 + 1] instanceof Item)
             {
-                var15 = new ItemStack((Item)par2ArrayOfObj[var4 + 1]);
+                var14 = new ItemStack((Item)par2ArrayOfObj[var4 + 1]);
             }
             else if (par2ArrayOfObj[var4 + 1] instanceof Block)
             {
-                var15 = new ItemStack((Block)par2ArrayOfObj[var4 + 1], 1, 32767);
+                var14 = new ItemStack((Block)par2ArrayOfObj[var4 + 1], 1, 32767);
             }
             else if (par2ArrayOfObj[var4 + 1] instanceof ItemStack)
             {
-                var15 = (ItemStack)par2ArrayOfObj[var4 + 1];
+                var14 = (ItemStack)par2ArrayOfObj[var4 + 1];
             }
 
-            var12.put(var13, var15);
+            var12.put(var13, var14);
         }
 
-        ItemStack[] var14 = new ItemStack[var5 * var6];
+        ItemStack[] var15 = new ItemStack[var5 * var6];
 
         for (int var16 = 0; var16 < var5 * var6; ++var16)
         {
@@ -233,15 +233,15 @@ public class CraftingManager
 
             if (var12.containsKey(Character.valueOf(var10)))
             {
-                var14[var16] = ((ItemStack)var12.get(Character.valueOf(var10))).copy();
+                var15[var16] = ((ItemStack)var12.get(Character.valueOf(var10))).copy();
             }
             else
             {
-                var14[var16] = null;
+                var15[var16] = null;
             }
         }
 
-        ShapedRecipes var17 = new ShapedRecipes(var5, var6, var14, par1ItemStack);
+        ShapedRecipes var17 = new ShapedRecipes(var5, var6, var15, par1ItemStack);
         this.recipes.add(var17);
         return var17;
     }
diff --git a/net/minecraft/item/crafting/RecipeFireworks.java b/net/minecraft/item/crafting/RecipeFireworks.java
index 9702c96..044d68e 100644
--- a/net/minecraft/item/crafting/RecipeFireworks.java
+++ b/net/minecraft/item/crafting/RecipeFireworks.java
@@ -85,8 +85,8 @@ public class RecipeFireworks implements IRecipe
 
         if (var4 <= 3 && var3 <= 1)
         {
-            NBTTagCompound var16;
-            NBTTagCompound var19;
+            NBTTagCompound var15;
+            NBTTagCompound var18;
 
             if (var4 >= 1 && var3 == 1 && var7 == 0)
             {
@@ -94,8 +94,8 @@ public class RecipeFireworks implements IRecipe
 
                 if (var6 > 0)
                 {
-                    var16 = new NBTTagCompound();
-                    var19 = new NBTTagCompound();
+                    var15 = new NBTTagCompound();
+                    var18 = new NBTTagCompound();
                     NBTTagList var25 = new NBTTagList();
 
                     for (int var22 = 0; var22 < par1InventoryCrafting.getSizeInventory(); ++var22)
@@ -108,10 +108,10 @@ public class RecipeFireworks implements IRecipe
                         }
                     }
 
-                    var19.setTag("Explosions", var25);
-                    var19.setByte("Flight", (byte)var4);
-                    var16.setTag("Fireworks", var19);
-                    this.field_92102_a.setTagCompound(var16);
+                    var18.setTag("Explosions", var25);
+                    var18.setByte("Flight", (byte)var4);
+                    var15.setTag("Fireworks", var18);
+                    this.field_92102_a.setTagCompound(var15);
                 }
 
                 return true;
@@ -119,9 +119,9 @@ public class RecipeFireworks implements IRecipe
             else if (var4 == 1 && var3 == 0 && var6 == 0 && var5 > 0 && var8 <= 1)
             {
                 this.field_92102_a = new ItemStack(Items.firework_charge);
-                var16 = new NBTTagCompound();
-                var19 = new NBTTagCompound();
-                byte var23 = 0;
+                var15 = new NBTTagCompound();
+                var18 = new NBTTagCompound();
+                byte var21 = 0;
                 ArrayList var12 = new ArrayList();
 
                 for (int var13 = 0; var13 < par1InventoryCrafting.getSizeInventory(); ++var13)
@@ -136,27 +136,27 @@ public class RecipeFireworks implements IRecipe
                         }
                         else if (var14.getItem() == Items.glowstone_dust)
                         {
-                            var19.setBoolean("Flicker", true);
+                            var18.setBoolean("Flicker", true);
                         }
                         else if (var14.getItem() == Items.diamond)
                         {
-                            var19.setBoolean("Trail", true);
+                            var18.setBoolean("Trail", true);
                         }
                         else if (var14.getItem() == Items.fire_charge)
                         {
-                            var23 = 1;
+                            var21 = 1;
                         }
                         else if (var14.getItem() == Items.feather)
                         {
-                            var23 = 4;
+                            var21 = 4;
                         }
                         else if (var14.getItem() == Items.gold_nugget)
                         {
-                            var23 = 2;
+                            var21 = 2;
                         }
                         else if (var14.getItem() == Items.skull)
                         {
-                            var23 = 3;
+                            var21 = 3;
                         }
                     }
                 }
@@ -168,25 +168,25 @@ public class RecipeFireworks implements IRecipe
                     var24[var27] = ((Integer)var12.get(var27)).intValue();
                 }
 
-                var19.setIntArray("Colors", var24);
-                var19.setByte("Type", var23);
-                var16.setTag("Explosion", var19);
-                this.field_92102_a.setTagCompound(var16);
+                var18.setIntArray("Colors", var24);
+                var18.setByte("Type", var21);
+                var15.setTag("Explosion", var18);
+                this.field_92102_a.setTagCompound(var15);
                 return true;
             }
             else if (var4 == 0 && var3 == 0 && var6 == 1 && var5 > 0 && var5 == var7)
             {
-                ArrayList var15 = new ArrayList();
+                ArrayList var16 = new ArrayList();
 
-                for (int var17 = 0; var17 < par1InventoryCrafting.getSizeInventory(); ++var17)
+                for (int var20 = 0; var20 < par1InventoryCrafting.getSizeInventory(); ++var20)
                 {
-                    ItemStack var11 = par1InventoryCrafting.getStackInSlot(var17);
+                    ItemStack var11 = par1InventoryCrafting.getStackInSlot(var20);
 
                     if (var11 != null)
                     {
                         if (var11.getItem() == Items.dye)
                         {
-                            var15.add(Integer.valueOf(ItemDye.field_150922_c[var11.getItemDamage()]));
+                            var16.add(Integer.valueOf(ItemDye.field_150922_c[var11.getItemDamage()]));
                         }
                         else if (var11.getItem() == Items.firework_charge)
                         {
@@ -196,24 +196,24 @@ public class RecipeFireworks implements IRecipe
                     }
                 }
 
-                int[] var18 = new int[var15.size()];
+                int[] var17 = new int[var16.size()];
 
-                for (int var20 = 0; var20 < var18.length; ++var20)
+                for (int var19 = 0; var19 < var17.length; ++var19)
                 {
-                    var18[var20] = ((Integer)var15.get(var20)).intValue();
+                    var17[var19] = ((Integer)var16.get(var19)).intValue();
                 }
 
                 if (this.field_92102_a != null && this.field_92102_a.hasTagCompound())
                 {
-                    NBTTagCompound var21 = this.field_92102_a.getTagCompound().getCompoundTag("Explosion");
+                    NBTTagCompound var23 = this.field_92102_a.getTagCompound().getCompoundTag("Explosion");
 
-                    if (var21 == null)
+                    if (var23 == null)
                     {
                         return false;
                     }
                     else
                     {
-                        var21.setIntArray("FadeColors", var18);
+                        var23.setIntArray("FadeColors", var17);
                         return true;
                     }
                 }
diff --git a/net/minecraft/item/crafting/RecipesArmorDyes.java b/net/minecraft/item/crafting/RecipesArmorDyes.java
index b59bbd8..12971ab 100644
--- a/net/minecraft/item/crafting/RecipesArmorDyes.java
+++ b/net/minecraft/item/crafting/RecipesArmorDyes.java
@@ -108,12 +108,12 @@ public class RecipesArmorDyes implements IRecipe
                     }
 
                     float[] var14 = EntitySheep.fleeceColorTable[BlockColored.func_150032_b(var8.getItemDamage())];
-                    int var15 = (int)(var14[0] * 255.0F);
-                    int var16 = (int)(var14[1] * 255.0F);
+                    int var16 = (int)(var14[0] * 255.0F);
+                    int var15 = (int)(var14[1] * 255.0F);
                     var17 = (int)(var14[2] * 255.0F);
-                    var4 += Math.max(var15, Math.max(var16, var17));
-                    var3[0] += var15;
-                    var3[1] += var16;
+                    var4 += Math.max(var16, Math.max(var15, var17));
+                    var3[0] += var16;
+                    var3[1] += var15;
                     var3[2] += var17;
                     ++var5;
                 }
diff --git a/net/minecraft/nbt/JsonToNBT.java b/net/minecraft/nbt/JsonToNBT.java
index 971d3c0..578d1f0 100644
--- a/net/minecraft/nbt/JsonToNBT.java
+++ b/net/minecraft/nbt/JsonToNBT.java
@@ -396,6 +396,56 @@ public class JsonToNBT
         return -1;
     }
 
+    static class Compound extends JsonToNBT.Any
+    {
+        protected ArrayList field_150491_b = new ArrayList();
+        private static final String __OBFID = "CL_00001234";
+
+        public Compound(String p_i45137_1_)
+        {
+            this.field_150490_a = p_i45137_1_;
+        }
+
+        public NBTBase func_150489_a()
+        {
+            NBTTagCompound var1 = new NBTTagCompound();
+            Iterator var2 = this.field_150491_b.iterator();
+
+            while (var2.hasNext())
+            {
+                JsonToNBT.Any var3 = (JsonToNBT.Any)var2.next();
+                var1.setTag(var3.field_150490_a, var3.func_150489_a());
+            }
+
+            return var1;
+        }
+    }
+
+    static class List extends JsonToNBT.Any
+    {
+        protected ArrayList field_150492_b = new ArrayList();
+        private static final String __OBFID = "CL_00001235";
+
+        public List(String p_i45138_1_)
+        {
+            this.field_150490_a = p_i45138_1_;
+        }
+
+        public NBTBase func_150489_a()
+        {
+            NBTTagList var1 = new NBTTagList();
+            Iterator var2 = this.field_150492_b.iterator();
+
+            while (var2.hasNext())
+            {
+                JsonToNBT.Any var3 = (JsonToNBT.Any)var2.next();
+                var1.appendTag(var3.func_150489_a());
+            }
+
+            return var1;
+        }
+    }
+
     abstract static class Any
     {
         protected String field_150490_a;
@@ -507,54 +557,4 @@ public class JsonToNBT
             }
         }
     }
-
-    static class List extends JsonToNBT.Any
-    {
-        protected ArrayList field_150492_b = new ArrayList();
-        private static final String __OBFID = "CL_00001235";
-
-        public List(String p_i45138_1_)
-        {
-            this.field_150490_a = p_i45138_1_;
-        }
-
-        public NBTBase func_150489_a()
-        {
-            NBTTagList var1 = new NBTTagList();
-            Iterator var2 = this.field_150492_b.iterator();
-
-            while (var2.hasNext())
-            {
-                JsonToNBT.Any var3 = (JsonToNBT.Any)var2.next();
-                var1.appendTag(var3.func_150489_a());
-            }
-
-            return var1;
-        }
-    }
-
-    static class Compound extends JsonToNBT.Any
-    {
-        protected ArrayList field_150491_b = new ArrayList();
-        private static final String __OBFID = "CL_00001234";
-
-        public Compound(String p_i45137_1_)
-        {
-            this.field_150490_a = p_i45137_1_;
-        }
-
-        public NBTBase func_150489_a()
-        {
-            NBTTagCompound var1 = new NBTTagCompound();
-            Iterator var2 = this.field_150491_b.iterator();
-
-            while (var2.hasNext())
-            {
-                JsonToNBT.Any var3 = (JsonToNBT.Any)var2.next();
-                var1.setTag(var3.field_150490_a, var3.func_150489_a());
-            }
-
-            return var1;
-        }
-    }
 }
diff --git a/net/minecraft/network/NetHandlerPlayServer.java b/net/minecraft/network/NetHandlerPlayServer.java
index b09ad02..5061e68 100644
--- a/net/minecraft/network/NetHandlerPlayServer.java
+++ b/net/minecraft/network/NetHandlerPlayServer.java
@@ -1170,19 +1170,19 @@ public class NetHandlerPlayServer implements INetHandlerPlayServer
         else
         {
             DataInputStream var13;
-            int var15;
+            int var16;
 
             if ("MC|TrSel".equals(p_147349_1_.func_149559_c()))
             {
                 try
                 {
                     var13 = new DataInputStream(new ByteArrayInputStream(p_147349_1_.func_149558_e()));
-                    var15 = var13.readInt();
+                    var16 = var13.readInt();
                     Container var4 = this.playerEntity.openContainer;
 
                     if (var4 instanceof ContainerMerchant)
                     {
-                        ((ContainerMerchant)var4).setCurrentRecipeIndex(var15);
+                        ((ContainerMerchant)var4).setCurrentRecipeIndex(var16);
                     }
                 }
                 catch (Exception var10)
@@ -1223,13 +1223,13 @@ public class NetHandlerPlayServer implements INetHandlerPlayServer
                             }
                         }
 
-                        String var22 = var14.readStringFromBuffer(var14.readableBytes());
+                        String var23 = var14.readStringFromBuffer(var14.readableBytes());
 
                         if (var18 != null)
                         {
-                            var18.func_145752_a(var22);
+                            var18.func_145752_a(var23);
                             var18.func_145756_e();
-                            this.playerEntity.addChatMessage(new ChatComponentTranslation("advMode.setCommand.success", new Object[] {var22}));
+                            this.playerEntity.addChatMessage(new ChatComponentTranslation("advMode.setCommand.success", new Object[] {var23}));
                         }
                     }
                     catch (Exception var9)
@@ -1249,17 +1249,17 @@ public class NetHandlerPlayServer implements INetHandlerPlayServer
                     try
                     {
                         var13 = new DataInputStream(new ByteArrayInputStream(p_147349_1_.func_149558_e()));
-                        var15 = var13.readInt();
-                        int var21 = var13.readInt();
-                        ContainerBeacon var23 = (ContainerBeacon)this.playerEntity.openContainer;
-                        Slot var6 = var23.getSlot(0);
+                        var16 = var13.readInt();
+                        int var22 = var13.readInt();
+                        ContainerBeacon var21 = (ContainerBeacon)this.playerEntity.openContainer;
+                        Slot var6 = var21.getSlot(0);
 
                         if (var6.getHasStack())
                         {
                             var6.decrStackSize(1);
-                            TileEntityBeacon var7 = var23.func_148327_e();
-                            var7.func_146001_d(var15);
-                            var7.func_146004_e(var21);
+                            TileEntityBeacon var7 = var21.func_148327_e();
+                            var7.func_146001_d(var16);
+                            var7.func_146004_e(var22);
                             var7.onInventoryChanged();
                         }
                     }
@@ -1271,7 +1271,7 @@ public class NetHandlerPlayServer implements INetHandlerPlayServer
             }
             else if ("MC|ItemName".equals(p_147349_1_.func_149559_c()) && this.playerEntity.openContainer instanceof ContainerRepair)
             {
-                ContainerRepair var16 = (ContainerRepair)this.playerEntity.openContainer;
+                ContainerRepair var15 = (ContainerRepair)this.playerEntity.openContainer;
 
                 if (p_147349_1_.func_149558_e() != null && p_147349_1_.func_149558_e().length >= 1)
                 {
@@ -1279,12 +1279,12 @@ public class NetHandlerPlayServer implements INetHandlerPlayServer
 
                     if (var19.length() <= 30)
                     {
-                        var16.updateItemName(var19);
+                        var15.updateItemName(var19);
                     }
                 }
                 else
                 {
-                    var16.updateItemName("");
+                    var15.updateItemName("");
                 }
             }
         }
diff --git a/net/minecraft/network/PacketBuffer.java b/net/minecraft/network/PacketBuffer.java
index e0a4f43..3b1d43c 100644
--- a/net/minecraft/network/PacketBuffer.java
+++ b/net/minecraft/network/PacketBuffer.java
@@ -4,7 +4,6 @@ import com.google.common.base.Charsets;
 import io.netty.buffer.ByteBuf;
 import io.netty.buffer.ByteBufAllocator;
 import io.netty.buffer.ByteBufProcessor;
-import io.netty.util.ReferenceCounted;
 import java.io.IOException;
 import java.io.InputStream;
 import java.io.OutputStream;
diff --git a/net/minecraft/network/ServerStatusResponse.java b/net/minecraft/network/ServerStatusResponse.java
index 0b6b6fd..c3afc2c 100644
--- a/net/minecraft/network/ServerStatusResponse.java
+++ b/net/minecraft/network/ServerStatusResponse.java
@@ -60,6 +60,100 @@ public class ServerStatusResponse
         return this.field_151323_d;
     }
 
+    public static class PlayerCountData
+    {
+        private final int field_151336_a;
+        private final int field_151334_b;
+        private GameProfile[] field_151335_c;
+        private static final String __OBFID = "CL_00001386";
+
+        public PlayerCountData(int p_i45274_1_, int p_i45274_2_)
+        {
+            this.field_151336_a = p_i45274_1_;
+            this.field_151334_b = p_i45274_2_;
+        }
+
+        public int func_151332_a()
+        {
+            return this.field_151336_a;
+        }
+
+        public int func_151333_b()
+        {
+            return this.field_151334_b;
+        }
+
+        public GameProfile[] func_151331_c()
+        {
+            return this.field_151335_c;
+        }
+
+        public void func_151330_a(GameProfile[] p_151330_1_)
+        {
+            this.field_151335_c = p_151330_1_;
+        }
+
+        public static class Serializer implements JsonDeserializer, JsonSerializer
+        {
+            private static final String __OBFID = "CL_00001387";
+
+            public ServerStatusResponse.PlayerCountData deserialize(JsonElement p_151311_1_, Type p_151311_2_, JsonDeserializationContext p_151311_3_)
+            {
+                JsonObject var4 = JsonUtils.getJsonElementAsJsonObject(p_151311_1_, "players");
+                ServerStatusResponse.PlayerCountData var5 = new ServerStatusResponse.PlayerCountData(JsonUtils.getJsonObjectIntegerFieldValue(var4, "max"), JsonUtils.getJsonObjectIntegerFieldValue(var4, "online"));
+
+                if (JsonUtils.jsonObjectFieldTypeIsArray(var4, "sample"))
+                {
+                    JsonArray var6 = JsonUtils.getJsonObjectJsonArrayField(var4, "sample");
+
+                    if (var6.size() > 0)
+                    {
+                        GameProfile[] var7 = new GameProfile[var6.size()];
+
+                        for (int var8 = 0; var8 < var7.length; ++var8)
+                        {
+                            JsonObject var9 = JsonUtils.getJsonElementAsJsonObject(var6.get(var8), "player[" + var8 + "]");
+                            var7[var8] = new GameProfile(JsonUtils.getJsonObjectStringFieldValue(var9, "id"), JsonUtils.getJsonObjectStringFieldValue(var9, "name"));
+                        }
+
+                        var5.func_151330_a(var7);
+                    }
+                }
+
+                return var5;
+            }
+
+            public JsonElement serialize(ServerStatusResponse.PlayerCountData p_151312_1_, Type p_151312_2_, JsonSerializationContext p_151312_3_)
+            {
+                JsonObject var4 = new JsonObject();
+                var4.addProperty("max", Integer.valueOf(p_151312_1_.func_151332_a()));
+                var4.addProperty("online", Integer.valueOf(p_151312_1_.func_151333_b()));
+
+                if (p_151312_1_.func_151331_c() != null && p_151312_1_.func_151331_c().length > 0)
+                {
+                    JsonArray var5 = new JsonArray();
+
+                    for (int var6 = 0; var6 < p_151312_1_.func_151331_c().length; ++var6)
+                    {
+                        JsonObject var7 = new JsonObject();
+                        var7.addProperty("id", p_151312_1_.func_151331_c()[var6].getId());
+                        var7.addProperty("name", p_151312_1_.func_151331_c()[var6].getName());
+                        var5.add(var7);
+                    }
+
+                    var4.add("sample", var5);
+                }
+
+                return var4;
+            }
+
+            public JsonElement serialize(Object par1Obj, Type par2Type, JsonSerializationContext par3JsonSerializationContext)
+            {
+                return this.serialize((ServerStatusResponse.PlayerCountData)par1Obj, par2Type, par3JsonSerializationContext);
+            }
+        }
+    }
+
     public static class MinecraftProtocolVersionIdentifier
     {
         private final String field_151306_a;
@@ -171,98 +265,4 @@ public class ServerStatusResponse
             return this.serialize((ServerStatusResponse)par1Obj, par2Type, par3JsonSerializationContext);
         }
     }
-
-    public static class PlayerCountData
-    {
-        private final int field_151336_a;
-        private final int field_151334_b;
-        private GameProfile[] field_151335_c;
-        private static final String __OBFID = "CL_00001386";
-
-        public PlayerCountData(int p_i45274_1_, int p_i45274_2_)
-        {
-            this.field_151336_a = p_i45274_1_;
-            this.field_151334_b = p_i45274_2_;
-        }
-
-        public int func_151332_a()
-        {
-            return this.field_151336_a;
-        }
-
-        public int func_151333_b()
-        {
-            return this.field_151334_b;
-        }
-
-        public GameProfile[] func_151331_c()
-        {
-            return this.field_151335_c;
-        }
-
-        public void func_151330_a(GameProfile[] p_151330_1_)
-        {
-            this.field_151335_c = p_151330_1_;
-        }
-
-        public static class Serializer implements JsonDeserializer, JsonSerializer
-        {
-            private static final String __OBFID = "CL_00001387";
-
-            public ServerStatusResponse.PlayerCountData deserialize(JsonElement p_151311_1_, Type p_151311_2_, JsonDeserializationContext p_151311_3_)
-            {
-                JsonObject var4 = JsonUtils.getJsonElementAsJsonObject(p_151311_1_, "players");
-                ServerStatusResponse.PlayerCountData var5 = new ServerStatusResponse.PlayerCountData(JsonUtils.getJsonObjectIntegerFieldValue(var4, "max"), JsonUtils.getJsonObjectIntegerFieldValue(var4, "online"));
-
-                if (JsonUtils.jsonObjectFieldTypeIsArray(var4, "sample"))
-                {
-                    JsonArray var6 = JsonUtils.getJsonObjectJsonArrayField(var4, "sample");
-
-                    if (var6.size() > 0)
-                    {
-                        GameProfile[] var7 = new GameProfile[var6.size()];
-
-                        for (int var8 = 0; var8 < var7.length; ++var8)
-                        {
-                            JsonObject var9 = JsonUtils.getJsonElementAsJsonObject(var6.get(var8), "player[" + var8 + "]");
-                            var7[var8] = new GameProfile(JsonUtils.getJsonObjectStringFieldValue(var9, "id"), JsonUtils.getJsonObjectStringFieldValue(var9, "name"));
-                        }
-
-                        var5.func_151330_a(var7);
-                    }
-                }
-
-                return var5;
-            }
-
-            public JsonElement serialize(ServerStatusResponse.PlayerCountData p_151312_1_, Type p_151312_2_, JsonSerializationContext p_151312_3_)
-            {
-                JsonObject var4 = new JsonObject();
-                var4.addProperty("max", Integer.valueOf(p_151312_1_.func_151332_a()));
-                var4.addProperty("online", Integer.valueOf(p_151312_1_.func_151333_b()));
-
-                if (p_151312_1_.func_151331_c() != null && p_151312_1_.func_151331_c().length > 0)
-                {
-                    JsonArray var5 = new JsonArray();
-
-                    for (int var6 = 0; var6 < p_151312_1_.func_151331_c().length; ++var6)
-                    {
-                        JsonObject var7 = new JsonObject();
-                        var7.addProperty("id", p_151312_1_.func_151331_c()[var6].getId());
-                        var7.addProperty("name", p_151312_1_.func_151331_c()[var6].getName());
-                        var5.add(var7);
-                    }
-
-                    var4.add("sample", var5);
-                }
-
-                return var4;
-            }
-
-            public JsonElement serialize(Object par1Obj, Type par2Type, JsonSerializationContext par3JsonSerializationContext)
-            {
-                return this.serialize((ServerStatusResponse.PlayerCountData)par1Obj, par2Type, par3JsonSerializationContext);
-            }
-        }
-    }
 }
diff --git a/net/minecraft/network/handshake/client/C00Handshake.java b/net/minecraft/network/handshake/client/C00Handshake.java
index b2d6882..074ae85 100644
--- a/net/minecraft/network/handshake/client/C00Handshake.java
+++ b/net/minecraft/network/handshake/client/C00Handshake.java
@@ -1,11 +1,13 @@
 package net.minecraft.network.handshake.client;
 
 import java.io.IOException;
+
 import net.minecraft.network.EnumConnectionState;
 import net.minecraft.network.INetHandler;
 import net.minecraft.network.Packet;
 import net.minecraft.network.PacketBuffer;
 import net.minecraft.network.handshake.INetHandlerHandshakeServer;
+import tk.wurst_client.Client;
 
 public class C00Handshake extends Packet
 {
@@ -19,7 +21,8 @@ public class C00Handshake extends Packet
 
     public C00Handshake(int p_i45266_1_, String p_i45266_2_, int p_i45266_3_, EnumConnectionState p_i45266_4_)
     {
-        this.field_149600_a = p_i45266_1_;
+    	//TODO: Client
+        this.field_149600_a = Client.Wurst.MC_VERSION;
         this.field_149598_b = p_i45266_2_;
         this.field_149599_c = p_i45266_3_;
         this.field_149597_d = p_i45266_4_;
diff --git a/net/minecraft/network/play/client/C03PacketPlayer.java b/net/minecraft/network/play/client/C03PacketPlayer.java
index 75f61d3..52ef1ad 100644
--- a/net/minecraft/network/play/client/C03PacketPlayer.java
+++ b/net/minecraft/network/play/client/C03PacketPlayer.java
@@ -102,40 +102,34 @@ public class C03PacketPlayer extends Packet
         this.processPacket((INetHandlerPlayServer)p_148833_1_);
     }
 
-    public static class C04PacketPlayerPosition extends C03PacketPlayer
+    public static class C05PacketPlayerLook extends C03PacketPlayer
     {
-        private static final String __OBFID = "CL_00001361";
+        private static final String __OBFID = "CL_00001363";
 
-        public C04PacketPlayerPosition()
+        public C05PacketPlayerLook()
         {
-            this.field_149480_h = true;
+            this.field_149481_i = true;
         }
 
-        public C04PacketPlayerPosition(double p_i45253_1_, double p_i45253_3_, double p_i45253_5_, double p_i45253_7_, boolean p_i45253_9_)
+        public C05PacketPlayerLook(float p_i45255_1_, float p_i45255_2_, boolean p_i45255_3_)
         {
-            this.field_149479_a = p_i45253_1_;
-            this.field_149477_b = p_i45253_3_;
-            this.field_149475_d = p_i45253_5_;
-            this.field_149478_c = p_i45253_7_;
-            this.field_149474_g = p_i45253_9_;
-            this.field_149480_h = true;
+            this.field_149476_e = p_i45255_1_;
+            this.field_149473_f = p_i45255_2_;
+            this.field_149474_g = p_i45255_3_;
+            this.field_149481_i = true;
         }
 
         public void readPacketData(PacketBuffer p_148837_1_) throws IOException
         {
-            this.field_149479_a = p_148837_1_.readDouble();
-            this.field_149477_b = p_148837_1_.readDouble();
-            this.field_149475_d = p_148837_1_.readDouble();
-            this.field_149478_c = p_148837_1_.readDouble();
+            this.field_149476_e = p_148837_1_.readFloat();
+            this.field_149473_f = p_148837_1_.readFloat();
             super.readPacketData(p_148837_1_);
         }
 
         public void writePacketData(PacketBuffer p_148840_1_) throws IOException
         {
-            p_148840_1_.writeDouble(this.field_149479_a);
-            p_148840_1_.writeDouble(this.field_149477_b);
-            p_148840_1_.writeDouble(this.field_149475_d);
-            p_148840_1_.writeDouble(this.field_149478_c);
+            p_148840_1_.writeFloat(this.field_149476_e);
+            p_148840_1_.writeFloat(this.field_149473_f);
             super.writePacketData(p_148840_1_);
         }
 
@@ -196,34 +190,40 @@ public class C03PacketPlayer extends Packet
         }
     }
 
-    public static class C05PacketPlayerLook extends C03PacketPlayer
+    public static class C04PacketPlayerPosition extends C03PacketPlayer
     {
-        private static final String __OBFID = "CL_00001363";
+        private static final String __OBFID = "CL_00001361";
 
-        public C05PacketPlayerLook()
+        public C04PacketPlayerPosition()
         {
-            this.field_149481_i = true;
+            this.field_149480_h = true;
         }
 
-        public C05PacketPlayerLook(float p_i45255_1_, float p_i45255_2_, boolean p_i45255_3_)
+        public C04PacketPlayerPosition(double p_i45253_1_, double p_i45253_3_, double p_i45253_5_, double p_i45253_7_, boolean p_i45253_9_)
         {
-            this.field_149476_e = p_i45255_1_;
-            this.field_149473_f = p_i45255_2_;
-            this.field_149474_g = p_i45255_3_;
-            this.field_149481_i = true;
+            this.field_149479_a = p_i45253_1_;
+            this.field_149477_b = p_i45253_3_;
+            this.field_149475_d = p_i45253_5_;
+            this.field_149478_c = p_i45253_7_;
+            this.field_149474_g = p_i45253_9_;
+            this.field_149480_h = true;
         }
 
         public void readPacketData(PacketBuffer p_148837_1_) throws IOException
         {
-            this.field_149476_e = p_148837_1_.readFloat();
-            this.field_149473_f = p_148837_1_.readFloat();
+            this.field_149479_a = p_148837_1_.readDouble();
+            this.field_149477_b = p_148837_1_.readDouble();
+            this.field_149475_d = p_148837_1_.readDouble();
+            this.field_149478_c = p_148837_1_.readDouble();
             super.readPacketData(p_148837_1_);
         }
 
         public void writePacketData(PacketBuffer p_148840_1_) throws IOException
         {
-            p_148840_1_.writeFloat(this.field_149476_e);
-            p_148840_1_.writeFloat(this.field_149473_f);
+            p_148840_1_.writeDouble(this.field_149479_a);
+            p_148840_1_.writeDouble(this.field_149477_b);
+            p_148840_1_.writeDouble(this.field_149475_d);
+            p_148840_1_.writeDouble(this.field_149478_c);
             super.writePacketData(p_148840_1_);
         }
 
diff --git a/net/minecraft/network/play/server/S14PacketEntity.java b/net/minecraft/network/play/server/S14PacketEntity.java
index 7d4f19f..c9eec98 100644
--- a/net/minecraft/network/play/server/S14PacketEntity.java
+++ b/net/minecraft/network/play/server/S14PacketEntity.java
@@ -100,32 +100,26 @@ public class S14PacketEntity extends Packet
         this.processPacket((INetHandlerPlayClient)p_148833_1_);
     }
 
-    public static class S17PacketEntityLookMove extends S14PacketEntity
+    public static class S16PacketEntityLook extends S14PacketEntity
     {
-        private static final String __OBFID = "CL_00001314";
+        private static final String __OBFID = "CL_00001315";
 
-        public S17PacketEntityLookMove()
+        public S16PacketEntityLook()
         {
             this.field_149069_g = true;
         }
 
-        public S17PacketEntityLookMove(int p_i45204_1_, byte p_i45204_2_, byte p_i45204_3_, byte p_i45204_4_, byte p_i45204_5_, byte p_i45204_6_)
+        public S16PacketEntityLook(int p_i45205_1_, byte p_i45205_2_, byte p_i45205_3_)
         {
-            super(p_i45204_1_);
-            this.field_149072_b = p_i45204_2_;
-            this.field_149073_c = p_i45204_3_;
-            this.field_149070_d = p_i45204_4_;
-            this.field_149071_e = p_i45204_5_;
-            this.field_149068_f = p_i45204_6_;
+            super(p_i45205_1_);
+            this.field_149071_e = p_i45205_2_;
+            this.field_149068_f = p_i45205_3_;
             this.field_149069_g = true;
         }
 
         public void readPacketData(PacketBuffer p_148837_1_) throws IOException
         {
             super.readPacketData(p_148837_1_);
-            this.field_149072_b = p_148837_1_.readByte();
-            this.field_149073_c = p_148837_1_.readByte();
-            this.field_149070_d = p_148837_1_.readByte();
             this.field_149071_e = p_148837_1_.readByte();
             this.field_149068_f = p_148837_1_.readByte();
         }
@@ -133,16 +127,13 @@ public class S14PacketEntity extends Packet
         public void writePacketData(PacketBuffer p_148840_1_) throws IOException
         {
             super.writePacketData(p_148840_1_);
-            p_148840_1_.writeByte(this.field_149072_b);
-            p_148840_1_.writeByte(this.field_149073_c);
-            p_148840_1_.writeByte(this.field_149070_d);
             p_148840_1_.writeByte(this.field_149071_e);
             p_148840_1_.writeByte(this.field_149068_f);
         }
 
         public String serialize()
         {
-            return super.serialize() + String.format(", xa=%d, ya=%d, za=%d, yRot=%d, xRot=%d", new Object[] {Byte.valueOf(this.field_149072_b), Byte.valueOf(this.field_149073_c), Byte.valueOf(this.field_149070_d), Byte.valueOf(this.field_149071_e), Byte.valueOf(this.field_149068_f)});
+            return super.serialize() + String.format(", yRot=%d, xRot=%d", new Object[] {Byte.valueOf(this.field_149071_e), Byte.valueOf(this.field_149068_f)});
         }
 
         public void processPacket(INetHandler p_148833_1_)
@@ -151,40 +142,39 @@ public class S14PacketEntity extends Packet
         }
     }
 
-    public static class S16PacketEntityLook extends S14PacketEntity
+    public static class S15PacketEntityRelMove extends S14PacketEntity
     {
-        private static final String __OBFID = "CL_00001315";
+        private static final String __OBFID = "CL_00001313";
 
-        public S16PacketEntityLook()
-        {
-            this.field_149069_g = true;
-        }
+        public S15PacketEntityRelMove() {}
 
-        public S16PacketEntityLook(int p_i45205_1_, byte p_i45205_2_, byte p_i45205_3_)
+        public S15PacketEntityRelMove(int p_i45203_1_, byte p_i45203_2_, byte p_i45203_3_, byte p_i45203_4_)
         {
-            super(p_i45205_1_);
-            this.field_149071_e = p_i45205_2_;
-            this.field_149068_f = p_i45205_3_;
-            this.field_149069_g = true;
+            super(p_i45203_1_);
+            this.field_149072_b = p_i45203_2_;
+            this.field_149073_c = p_i45203_3_;
+            this.field_149070_d = p_i45203_4_;
         }
 
         public void readPacketData(PacketBuffer p_148837_1_) throws IOException
         {
             super.readPacketData(p_148837_1_);
-            this.field_149071_e = p_148837_1_.readByte();
-            this.field_149068_f = p_148837_1_.readByte();
+            this.field_149072_b = p_148837_1_.readByte();
+            this.field_149073_c = p_148837_1_.readByte();
+            this.field_149070_d = p_148837_1_.readByte();
         }
 
         public void writePacketData(PacketBuffer p_148840_1_) throws IOException
         {
             super.writePacketData(p_148840_1_);
-            p_148840_1_.writeByte(this.field_149071_e);
-            p_148840_1_.writeByte(this.field_149068_f);
+            p_148840_1_.writeByte(this.field_149072_b);
+            p_148840_1_.writeByte(this.field_149073_c);
+            p_148840_1_.writeByte(this.field_149070_d);
         }
 
         public String serialize()
         {
-            return super.serialize() + String.format(", yRot=%d, xRot=%d", new Object[] {Byte.valueOf(this.field_149071_e), Byte.valueOf(this.field_149068_f)});
+            return super.serialize() + String.format(", xa=%d, ya=%d, za=%d", new Object[] {Byte.valueOf(this.field_149072_b), Byte.valueOf(this.field_149073_c), Byte.valueOf(this.field_149070_d)});
         }
 
         public void processPacket(INetHandler p_148833_1_)
@@ -193,18 +183,24 @@ public class S14PacketEntity extends Packet
         }
     }
 
-    public static class S15PacketEntityRelMove extends S14PacketEntity
+    public static class S17PacketEntityLookMove extends S14PacketEntity
     {
-        private static final String __OBFID = "CL_00001313";
+        private static final String __OBFID = "CL_00001314";
 
-        public S15PacketEntityRelMove() {}
+        public S17PacketEntityLookMove()
+        {
+            this.field_149069_g = true;
+        }
 
-        public S15PacketEntityRelMove(int p_i45203_1_, byte p_i45203_2_, byte p_i45203_3_, byte p_i45203_4_)
+        public S17PacketEntityLookMove(int p_i45204_1_, byte p_i45204_2_, byte p_i45204_3_, byte p_i45204_4_, byte p_i45204_5_, byte p_i45204_6_)
         {
-            super(p_i45203_1_);
-            this.field_149072_b = p_i45203_2_;
-            this.field_149073_c = p_i45203_3_;
-            this.field_149070_d = p_i45203_4_;
+            super(p_i45204_1_);
+            this.field_149072_b = p_i45204_2_;
+            this.field_149073_c = p_i45204_3_;
+            this.field_149070_d = p_i45204_4_;
+            this.field_149071_e = p_i45204_5_;
+            this.field_149068_f = p_i45204_6_;
+            this.field_149069_g = true;
         }
 
         public void readPacketData(PacketBuffer p_148837_1_) throws IOException
@@ -213,6 +209,8 @@ public class S14PacketEntity extends Packet
             this.field_149072_b = p_148837_1_.readByte();
             this.field_149073_c = p_148837_1_.readByte();
             this.field_149070_d = p_148837_1_.readByte();
+            this.field_149071_e = p_148837_1_.readByte();
+            this.field_149068_f = p_148837_1_.readByte();
         }
 
         public void writePacketData(PacketBuffer p_148840_1_) throws IOException
@@ -221,11 +219,13 @@ public class S14PacketEntity extends Packet
             p_148840_1_.writeByte(this.field_149072_b);
             p_148840_1_.writeByte(this.field_149073_c);
             p_148840_1_.writeByte(this.field_149070_d);
+            p_148840_1_.writeByte(this.field_149071_e);
+            p_148840_1_.writeByte(this.field_149068_f);
         }
 
         public String serialize()
         {
-            return super.serialize() + String.format(", xa=%d, ya=%d, za=%d", new Object[] {Byte.valueOf(this.field_149072_b), Byte.valueOf(this.field_149073_c), Byte.valueOf(this.field_149070_d)});
+            return super.serialize() + String.format(", xa=%d, ya=%d, za=%d, yRot=%d, xRot=%d", new Object[] {Byte.valueOf(this.field_149072_b), Byte.valueOf(this.field_149073_c), Byte.valueOf(this.field_149070_d), Byte.valueOf(this.field_149071_e), Byte.valueOf(this.field_149068_f)});
         }
 
         public void processPacket(INetHandler p_148833_1_)
diff --git a/net/minecraft/profiler/Profiler.java b/net/minecraft/profiler/Profiler.java
index 3da79af..7152667 100644
--- a/net/minecraft/profiler/Profiler.java
+++ b/net/minecraft/profiler/Profiler.java
@@ -120,7 +120,7 @@ public class Profiler
                 }
             }
 
-            float var20 = (float)var8;
+            float var21 = (float)var8;
 
             if (var8 < var5)
             {
@@ -132,12 +132,12 @@ public class Profiler
                 var3 = var8;
             }
 
-            Iterator var21 = this.profilingMap.keySet().iterator();
+            Iterator var20 = this.profilingMap.keySet().iterator();
             String var12;
 
-            while (var21.hasNext())
+            while (var20.hasNext())
             {
-                var12 = (String)var21.next();
+                var12 = (String)var20.next();
 
                 if (var12.length() > par1Str.length() && var12.startsWith(par1Str) && var12.indexOf(".", par1Str.length() + 1) < 0)
                 {
@@ -149,17 +149,17 @@ public class Profiler
                 }
             }
 
-            var21 = this.profilingMap.keySet().iterator();
+            var20 = this.profilingMap.keySet().iterator();
 
-            while (var21.hasNext())
+            while (var20.hasNext())
             {
-                var12 = (String)var21.next();
+                var12 = (String)var20.next();
                 this.profilingMap.put(var12, Long.valueOf(((Long)this.profilingMap.get(var12)).longValue() * 999L / 1000L));
             }
 
-            if ((float)var8 > var20)
+            if ((float)var8 > var21)
             {
-                var7.add(new Profiler.Result("unspecified", (double)((float)var8 - var20) * 100.0D / (double)var8, (double)((float)var8 - var20) * 100.0D / (double)var3));
+                var7.add(new Profiler.Result("unspecified", (double)((float)var8 - var21) * 100.0D / (double)var8, (double)((float)var8 - var21) * 100.0D / (double)var3));
             }
 
             Collections.sort(var7);
diff --git a/net/minecraft/server/integrated/IntegratedPlayerList.java b/net/minecraft/server/integrated/IntegratedPlayerList.java
index 54dde6f..e9476c9 100644
--- a/net/minecraft/server/integrated/IntegratedPlayerList.java
+++ b/net/minecraft/server/integrated/IntegratedPlayerList.java
@@ -4,7 +4,6 @@ import com.mojang.authlib.GameProfile;
 import java.net.SocketAddress;
 import net.minecraft.entity.player.EntityPlayerMP;
 import net.minecraft.nbt.NBTTagCompound;
-import net.minecraft.server.MinecraftServer;
 import net.minecraft.server.management.ServerConfigurationManager;
 
 public class IntegratedPlayerList extends ServerConfigurationManager
diff --git a/net/minecraft/server/management/LowerStringMap.java b/net/minecraft/server/management/LowerStringMap.java
index 182a7b9..1ff73a3 100644
--- a/net/minecraft/server/management/LowerStringMap.java
+++ b/net/minecraft/server/management/LowerStringMap.java
@@ -5,7 +5,6 @@ import java.util.Iterator;
 import java.util.LinkedHashMap;
 import java.util.Map;
 import java.util.Set;
-import java.util.Map.Entry;
 
 public class LowerStringMap implements Map
 {
diff --git a/net/minecraft/util/AxisAlignedBB.java b/net/minecraft/util/AxisAlignedBB.java
index 5eca5cf..2f611c0 100644
--- a/net/minecraft/util/AxisAlignedBB.java
+++ b/net/minecraft/util/AxisAlignedBB.java
@@ -35,7 +35,8 @@ public class AxisAlignedBB
         return (AABBPool)theAABBLocalPool.get();
     }
 
-    protected AxisAlignedBB(double par1, double par3, double par5, double par7, double par9, double par11)
+    //TODO: Client
+    public AxisAlignedBB(double par1, double par3, double par5, double par7, double par9, double par11)
     {
         this.minX = par1;
         this.minY = par3;
diff --git a/net/minecraft/util/HttpUtil.java b/net/minecraft/util/HttpUtil.java
index fe39cd6..bf9f58c 100644
--- a/net/minecraft/util/HttpUtil.java
+++ b/net/minecraft/util/HttpUtil.java
@@ -209,12 +209,12 @@ public class HttpUtil
                             throw new IOException("Filesize is bigger than maximum allowed (file is " + var6 + ", limit is " + p_151223_4_ + ")");
                         }
 
-                        boolean var30 = false;
-                        int var31;
+                        boolean var31 = false;
+                        int var30;
 
-                        while ((var31 = var2.read(var4)) >= 0)
+                        while ((var30 = var2.read(var4)) >= 0)
                         {
-                            var6 += (float)var31;
+                            var6 += (float)var30;
 
                             if (p_151223_5_ != null)
                             {
@@ -231,7 +231,7 @@ public class HttpUtil
                                 throw new IOException("Filesize was bigger than maximum allowed (got >= " + var6 + ", limit was " + p_151223_4_ + ")");
                             }
 
-                            var3.write(var4, 0, var31);
+                            var3.write(var4, 0, var30);
                         }
 
                         p_151223_2_.func_148522_a(p_151223_0_);
diff --git a/net/minecraft/util/IChatComponent.java b/net/minecraft/util/IChatComponent.java
index f8cc755..b7b04ef 100644
--- a/net/minecraft/util/IChatComponent.java
+++ b/net/minecraft/util/IChatComponent.java
@@ -75,25 +75,25 @@ public interface IChatComponent extends Iterable
                 if (p_150698_1_.isJsonArray())
                 {
                     JsonArray var11 = p_150698_1_.getAsJsonArray();
-                    IChatComponent var13 = null;
-                    Iterator var14 = var11.iterator();
+                    IChatComponent var12 = null;
+                    Iterator var13 = var11.iterator();
 
-                    while (var14.hasNext())
+                    while (var13.hasNext())
                     {
-                        JsonElement var16 = (JsonElement)var14.next();
+                        JsonElement var16 = (JsonElement)var13.next();
                         IChatComponent var17 = this.deserialize(var16, var16.getClass(), p_150698_3_);
 
-                        if (var13 == null)
+                        if (var12 == null)
                         {
-                            var13 = var17;
+                            var12 = var17;
                         }
                         else
                         {
-                            var13.appendSibling(var17);
+                            var12.appendSibling(var17);
                         }
                     }
 
-                    return var13;
+                    return var12;
                 }
                 else
                 {
@@ -148,16 +148,16 @@ public interface IChatComponent extends Iterable
 
                 if (var4.has("extra"))
                 {
-                    JsonArray var12 = var4.getAsJsonArray("extra");
+                    JsonArray var14 = var4.getAsJsonArray("extra");
 
-                    if (var12.size() <= 0)
+                    if (var14.size() <= 0)
                     {
                         throw new JsonParseException("Unexpected empty array of components");
                     }
 
-                    for (int var15 = 0; var15 < var12.size(); ++var15)
+                    for (int var15 = 0; var15 < var14.size(); ++var15)
                     {
-                        ((IChatComponent)var5).appendSibling(this.deserialize(var12.get(var15), p_150698_2_, p_150698_3_));
+                        ((IChatComponent)var5).appendSibling(this.deserialize(var14.get(var15), p_150698_2_, p_150698_3_));
                     }
                 }
 
diff --git a/net/minecraft/util/JsonSerializableSet.java b/net/minecraft/util/JsonSerializableSet.java
index 970a303..3bff936 100644
--- a/net/minecraft/util/JsonSerializableSet.java
+++ b/net/minecraft/util/JsonSerializableSet.java
@@ -5,7 +5,6 @@ import com.google.common.collect.Sets;
 import com.google.gson.JsonArray;
 import com.google.gson.JsonElement;
 import com.google.gson.JsonPrimitive;
-import java.util.Collection;
 import java.util.Iterator;
 import java.util.Set;
 
diff --git a/net/minecraft/util/Timer.java b/net/minecraft/util/Timer.java
index cdf9c1c..aa332b1 100644
--- a/net/minecraft/util/Timer.java
+++ b/net/minecraft/util/Timer.java
@@ -1,6 +1,7 @@
 package net.minecraft.util;
 
 import net.minecraft.client.Minecraft;
+import tk.wurst_client.Client;
 
 public class Timer
 {
@@ -63,6 +64,11 @@ public class Timer
      */
     public void updateTimer()
     {
+    	//TODO: Client
+    	if(Client.Wurst.moduleManager.getModuleFromClass(tk.wurst_client.module.modules.Timer.class).getToggled())
+    		timerSpeed = tk.wurst_client.module.modules.Timer.speed;
+    	else
+    		timerSpeed = 1.0F;
         long var1 = Minecraft.getSystemTime();
         long var3 = var1 - this.lastSyncSysClock;
         long var5 = System.nanoTime() / 1000000L;
diff --git a/net/minecraft/world/Explosion.java b/net/minecraft/world/Explosion.java
index f2da3cb..666b900 100644
--- a/net/minecraft/world/Explosion.java
+++ b/net/minecraft/world/Explosion.java
@@ -133,15 +133,15 @@ public class Explosion
                 var15 = var32.posX - this.explosionX;
                 var17 = var32.posY + (double)var32.getEyeHeight() - this.explosionY;
                 var19 = var32.posZ - this.explosionZ;
-                double var33 = (double)MathHelper.sqrt_double(var15 * var15 + var17 * var17 + var19 * var19);
+                double var34 = (double)MathHelper.sqrt_double(var15 * var15 + var17 * var17 + var19 * var19);
 
-                if (var33 != 0.0D)
+                if (var34 != 0.0D)
                 {
-                    var15 /= var33;
-                    var17 /= var33;
-                    var19 /= var33;
-                    double var34 = (double)this.worldObj.getBlockDensity(var31, var32.boundingBox);
-                    double var35 = (1.0D - var13) * var34;
+                    var15 /= var34;
+                    var17 /= var34;
+                    var19 /= var34;
+                    double var33 = (double)this.worldObj.getBlockDensity(var31, var32.boundingBox);
+                    double var35 = (1.0D - var13) * var33;
                     var32.attackEntityFrom(DamageSource.setExplosionSource(this), (float)((int)((var35 * var35 + var35) / 2.0D * 8.0D * (double)this.explosionSize + 1.0D)));
                     double var27 = EnchantmentProtection.func_92092_a(var32, var35);
                     var32.motionX += var15 * var27;
diff --git a/net/minecraft/world/SpawnerAnimals.java b/net/minecraft/world/SpawnerAnimals.java
index 3b8ad73..270a28d 100644
--- a/net/minecraft/world/SpawnerAnimals.java
+++ b/net/minecraft/world/SpawnerAnimals.java
@@ -85,16 +85,16 @@ public final class SpawnerAnimals
 
                 if ((!var37.getPeacefulCreature() || par3) && (var37.getPeacefulCreature() || par2) && (!var37.getAnimal() || par4) && par1WorldServer.countEntities(var37.getCreatureClass()) <= var37.getMaxNumberOfCreature() * this.eligibleChunksForSpawning.size() / 256)
                 {
-                    Iterator var38 = this.eligibleChunksForSpawning.keySet().iterator();
+                    Iterator var39 = this.eligibleChunksForSpawning.keySet().iterator();
                     label110:
 
-                    while (var38.hasNext())
+                    while (var39.hasNext())
                     {
-                        ChunkCoordIntPair var39 = (ChunkCoordIntPair)var38.next();
+                        ChunkCoordIntPair var38 = (ChunkCoordIntPair)var39.next();
 
-                        if (!((Boolean)this.eligibleChunksForSpawning.get(var39)).booleanValue())
+                        if (!((Boolean)this.eligibleChunksForSpawning.get(var38)).booleanValue())
                         {
-                            ChunkPosition var40 = func_151350_a(par1WorldServer, var39.chunkXPos, var39.chunkZPos);
+                            ChunkPosition var40 = func_151350_a(par1WorldServer, var38.chunkXPos, var38.chunkZPos);
                             int var14 = var40.field_151329_a;
                             int var15 = var40.field_151327_b;
                             int var16 = var40.field_151328_c;
diff --git a/net/minecraft/world/Teleporter.java b/net/minecraft/world/Teleporter.java
index f1da435..7b571a3 100644
--- a/net/minecraft/world/Teleporter.java
+++ b/net/minecraft/world/Teleporter.java
@@ -277,17 +277,17 @@ public class Teleporter
         int var12 = this.random.nextInt(4);
         int var13;
         double var14;
-        int var16;
         double var17;
+        int var16;
         int var19;
-        int var20;
         int var21;
-        int var22;
+        int var20;
         int var23;
-        int var24;
+        int var22;
         int var25;
-        int var26;
+        int var24;
         int var27;
+        int var26;
         double var31;
         double var32;
 
@@ -338,12 +338,12 @@ public class Teleporter
                                 }
                             }
 
-                            var31 = (double)var19 + 0.5D - par1Entity.posY;
-                            var32 = var14 * var14 + var31 * var31 + var17 * var17;
+                            var32 = (double)var19 + 0.5D - par1Entity.posY;
+                            var31 = var14 * var14 + var32 * var32 + var17 * var17;
 
-                            if (var3 < 0.0D || var32 < var3)
+                            if (var3 < 0.0D || var31 < var3)
                             {
-                                var3 = var32;
+                                var3 = var31;
                                 var8 = var13;
                                 var9 = var19;
                                 var10 = var16;
@@ -395,12 +395,12 @@ public class Teleporter
                                     }
                                 }
 
-                                var31 = (double)var19 + 0.5D - par1Entity.posY;
-                                var32 = var14 * var14 + var31 * var31 + var17 * var17;
+                                var32 = (double)var19 + 0.5D - par1Entity.posY;
+                                var31 = var14 * var14 + var32 * var32 + var17 * var17;
 
-                                if (var3 < 0.0D || var32 < var3)
+                                if (var3 < 0.0D || var31 < var3)
                                 {
-                                    var3 = var32;
+                                    var3 = var31;
                                     var8 = var13;
                                     var9 = var19;
                                     var10 = var16;
diff --git a/net/minecraft/world/World.java b/net/minecraft/world/World.java
index 45b6cb7..ab37438 100644
--- a/net/minecraft/world/World.java
+++ b/net/minecraft/world/World.java
@@ -3154,8 +3154,8 @@ public abstract class World implements IBlockAccess
             int var13;
             int var14;
             int var15;
-            int var16;
             int var17;
+            int var16;
 
             if (var8 > var7)
             {
diff --git a/net/minecraft/world/WorldServer.java b/net/minecraft/world/WorldServer.java
index 58382f7..cd52ee8 100644
--- a/net/minecraft/world/WorldServer.java
+++ b/net/minecraft/world/WorldServer.java
@@ -372,11 +372,11 @@ public class WorldServer extends World
 
             for (var10 = 0; var10 < var9; ++var10)
             {
-                ExtendedBlockStorage var19 = var18[var10];
+                ExtendedBlockStorage var20 = var18[var10];
 
-                if (var19 != null && var19.getNeedsRandomTick())
+                if (var20 != null && var20.getNeedsRandomTick())
                 {
-                    for (int var20 = 0; var20 < 3; ++var20)
+                    for (int var19 = 0; var19 < 3; ++var19)
                     {
                         this.updateLCG = this.updateLCG * 3 + 1013904223;
                         int var13 = this.updateLCG >> 2;
@@ -384,12 +384,12 @@ public class WorldServer extends World
                         int var15 = var13 >> 8 & 15;
                         int var16 = var13 >> 16 & 15;
                         ++var2;
-                        Block var17 = var19.func_150819_a(var14, var16, var15);
+                        Block var17 = var20.func_150819_a(var14, var16, var15);
 
                         if (var17.getTickRandomly())
                         {
                             ++var1;
-                            var17.updateTick(this, var14 + var5, var16 + var19.getYLocation(), var15 + var6, this.rand);
+                            var17.updateTick(this, var14 + var5, var16 + var20.getYLocation(), var15 + var6, this.rand);
                         }
                     }
                 }
diff --git a/net/minecraft/world/chunk/Chunk.java b/net/minecraft/world/chunk/Chunk.java
index 7533dd2..d5ba4bd 100644
--- a/net/minecraft/world/chunk/Chunk.java
+++ b/net/minecraft/world/chunk/Chunk.java
@@ -1382,12 +1382,12 @@ public class Chunk
         this.isLightPopulated = true;
         this.isTerrainPopulated = true;
         this.generateHeightMap();
-        Iterator var11 = this.chunkTileEntityMap.values().iterator();
+        Iterator var10 = this.chunkTileEntityMap.values().iterator();
 
-        while (var11.hasNext())
+        while (var10.hasNext())
         {
-            TileEntity var10 = (TileEntity)var11.next();
-            var10.updateContainingBlockInfo();
+            TileEntity var11 = (TileEntity)var10.next();
+            var11.updateContainingBlockInfo();
         }
     }
 
diff --git a/net/minecraft/world/chunk/storage/AnvilChunkLoader.java b/net/minecraft/world/chunk/storage/AnvilChunkLoader.java
index 33aaedc..1f43598 100644
--- a/net/minecraft/world/chunk/storage/AnvilChunkLoader.java
+++ b/net/minecraft/world/chunk/storage/AnvilChunkLoader.java
@@ -283,10 +283,10 @@ public class AnvilChunkLoader implements IChunkLoader, IThreadedFileIO
 
             while (var18.hasNext())
             {
-                Entity var20 = (Entity)var18.next();
+                Entity var21 = (Entity)var18.next();
                 var11 = new NBTTagCompound();
 
-                if (var20.writeToNBTOptional(var11))
+                if (var21.writeToNBTOptional(var11))
                 {
                     par1Chunk.hasEntities = true;
                     var16.appendTag(var11);
@@ -300,20 +300,20 @@ public class AnvilChunkLoader implements IChunkLoader, IThreadedFileIO
 
         while (var18.hasNext())
         {
-            TileEntity var21 = (TileEntity)var18.next();
+            TileEntity var22 = (TileEntity)var18.next();
             var11 = new NBTTagCompound();
-            var21.writeToNBT(var11);
+            var22.writeToNBT(var11);
             var17.appendTag(var11);
         }
 
         par3NBTTagCompound.setTag("TileEntities", var17);
-        List var19 = par2World.getPendingBlockUpdates(par1Chunk, false);
+        List var20 = par2World.getPendingBlockUpdates(par1Chunk, false);
 
-        if (var19 != null)
+        if (var20 != null)
         {
-            long var22 = par2World.getTotalWorldTime();
+            long var19 = par2World.getTotalWorldTime();
             NBTTagList var12 = new NBTTagList();
-            Iterator var13 = var19.iterator();
+            Iterator var13 = var20.iterator();
 
             while (var13.hasNext())
             {
@@ -323,7 +323,7 @@ public class AnvilChunkLoader implements IChunkLoader, IThreadedFileIO
                 var15.setInteger("x", var14.xCoord);
                 var15.setInteger("y", var14.yCoord);
                 var15.setInteger("z", var14.zCoord);
-                var15.setInteger("t", (int)(var14.scheduledTime - var22));
+                var15.setInteger("t", (int)(var14.scheduledTime - var19));
                 var15.setInteger("p", var14.priority);
                 var12.appendTag(var15);
             }
@@ -381,22 +381,22 @@ public class AnvilChunkLoader implements IChunkLoader, IThreadedFileIO
             var5.setBiomeArray(par2NBTTagCompound.getByteArray("Biomes"));
         }
 
-        NBTTagList var17 = par2NBTTagCompound.getTagList("Entities", 10);
+        NBTTagList var18 = par2NBTTagCompound.getTagList("Entities", 10);
 
-        if (var17 != null)
+        if (var18 != null)
         {
-            for (int var18 = 0; var18 < var17.tagCount(); ++var18)
+            for (int var17 = 0; var17 < var18.tagCount(); ++var17)
             {
-                NBTTagCompound var20 = var17.getCompoundTagAt(var18);
-                Entity var22 = EntityList.createEntityFromNBT(var20, par1World);
+                NBTTagCompound var19 = var18.getCompoundTagAt(var17);
+                Entity var25 = EntityList.createEntityFromNBT(var19, par1World);
                 var5.hasEntities = true;
 
-                if (var22 != null)
+                if (var25 != null)
                 {
-                    var5.addEntity(var22);
-                    Entity var14 = var22;
+                    var5.addEntity(var25);
+                    Entity var14 = var25;
 
-                    for (NBTTagCompound var15 = var20; var15.func_150297_b("Riding", 10); var15 = var15.getCompoundTag("Riding"))
+                    for (NBTTagCompound var15 = var19; var15.func_150297_b("Riding", 10); var15 = var15.getCompoundTag("Riding"))
                     {
                         Entity var16 = EntityList.createEntityFromNBT(var15.getCompoundTag("Riding"), par1World);
 
@@ -412,32 +412,32 @@ public class AnvilChunkLoader implements IChunkLoader, IThreadedFileIO
             }
         }
 
-        NBTTagList var19 = par2NBTTagCompound.getTagList("TileEntities", 10);
+        NBTTagList var21 = par2NBTTagCompound.getTagList("TileEntities", 10);
 
-        if (var19 != null)
+        if (var21 != null)
         {
-            for (int var21 = 0; var21 < var19.tagCount(); ++var21)
+            for (int var20 = 0; var20 < var21.tagCount(); ++var20)
             {
-                NBTTagCompound var24 = var19.getCompoundTagAt(var21);
-                TileEntity var26 = TileEntity.createAndLoadEntity(var24);
+                NBTTagCompound var22 = var21.getCompoundTagAt(var20);
+                TileEntity var27 = TileEntity.createAndLoadEntity(var22);
 
-                if (var26 != null)
+                if (var27 != null)
                 {
-                    var5.addTileEntity(var26);
+                    var5.addTileEntity(var27);
                 }
             }
         }
 
         if (par2NBTTagCompound.func_150297_b("TileTicks", 9))
         {
-            NBTTagList var23 = par2NBTTagCompound.getTagList("TileTicks", 10);
+            NBTTagList var24 = par2NBTTagCompound.getTagList("TileTicks", 10);
 
-            if (var23 != null)
+            if (var24 != null)
             {
-                for (int var25 = 0; var25 < var23.tagCount(); ++var25)
+                for (int var23 = 0; var23 < var24.tagCount(); ++var23)
                 {
-                    NBTTagCompound var27 = var23.getCompoundTagAt(var25);
-                    par1World.func_147446_b(var27.getInteger("x"), var27.getInteger("y"), var27.getInteger("z"), Block.getBlockById(var27.getInteger("i")), var27.getInteger("t"), var27.getInteger("p"));
+                    NBTTagCompound var26 = var24.getCompoundTagAt(var23);
+                    par1World.func_147446_b(var26.getInteger("x"), var26.getInteger("y"), var26.getInteger("z"), Block.getBlockById(var26.getInteger("i")), var26.getInteger("t"), var26.getInteger("p"));
                 }
             }
         }
diff --git a/net/minecraft/world/chunk/storage/ChunkLoader.java b/net/minecraft/world/chunk/storage/ChunkLoader.java
index f233e96..a7643bc 100644
--- a/net/minecraft/world/chunk/storage/ChunkLoader.java
+++ b/net/minecraft/world/chunk/storage/ChunkLoader.java
@@ -92,20 +92,20 @@ public class ChunkLoader
                 byte[] var19 = new byte[4096];
                 NibbleArray var20 = new NibbleArray(var19.length, 4);
                 NibbleArray var21 = new NibbleArray(var19.length, 4);
-                NibbleArray var22 = new NibbleArray(var19.length, 4);
+                NibbleArray var23 = new NibbleArray(var19.length, 4);
 
-                for (int var23 = 0; var23 < 16; ++var23)
+                for (int var22 = 0; var22 < 16; ++var22)
                 {
                     for (int var12 = 0; var12 < 16; ++var12)
                     {
                         for (int var13 = 0; var13 < 16; ++var13)
                         {
-                            int var14 = var23 << 11 | var13 << 7 | var12 + (var5 << 4);
+                            int var14 = var22 << 11 | var13 << 7 | var12 + (var5 << 4);
                             byte var15 = par0AnvilConverterData.blocks[var14];
-                            var19[var12 << 8 | var13 << 4 | var23] = (byte)(var15 & 255);
-                            var20.set(var23, var12, var13, par0AnvilConverterData.data.get(var23, var12 + (var5 << 4), var13));
-                            var21.set(var23, var12, var13, par0AnvilConverterData.skyLight.get(var23, var12 + (var5 << 4), var13));
-                            var22.set(var23, var12, var13, par0AnvilConverterData.blockLight.get(var23, var12 + (var5 << 4), var13));
+                            var19[var12 << 8 | var13 << 4 | var22] = (byte)(var15 & 255);
+                            var20.set(var22, var12, var13, par0AnvilConverterData.data.get(var22, var12 + (var5 << 4), var13));
+                            var21.set(var22, var12, var13, par0AnvilConverterData.skyLight.get(var22, var12 + (var5 << 4), var13));
+                            var23.set(var22, var12, var13, par0AnvilConverterData.blockLight.get(var22, var12 + (var5 << 4), var13));
                         }
                     }
                 }
@@ -115,7 +115,7 @@ public class ChunkLoader
                 var24.setByteArray("Blocks", var19);
                 var24.setByteArray("Data", var20.data);
                 var24.setByteArray("SkyLight", var21.data);
-                var24.setByteArray("BlockLight", var22.data);
+                var24.setByteArray("BlockLight", var23.data);
                 var16.appendTag(var24);
             }
         }
diff --git a/net/minecraft/world/chunk/storage/RegionFile.java b/net/minecraft/world/chunk/storage/RegionFile.java
index 429f758..d5f4c32 100644
--- a/net/minecraft/world/chunk/storage/RegionFile.java
+++ b/net/minecraft/world/chunk/storage/RegionFile.java
@@ -12,6 +12,7 @@ import java.util.ArrayList;
 import java.util.zip.DeflaterOutputStream;
 import java.util.zip.GZIPInputStream;
 import java.util.zip.InflaterInputStream;
+
 import net.minecraft.server.MinecraftServer;
 
 public class RegionFile
diff --git a/net/minecraft/world/gen/ChunkProviderFlat.java b/net/minecraft/world/gen/ChunkProviderFlat.java
index 6f650ef..21e84a4 100644
--- a/net/minecraft/world/gen/ChunkProviderFlat.java
+++ b/net/minecraft/world/gen/ChunkProviderFlat.java
@@ -200,8 +200,8 @@ public class ChunkProviderFlat implements IChunkProvider
             }
         }
 
-        int var16;
         int var17;
+        int var16;
         int var18;
 
         if (this.waterLakeGenerator != null && !var7 && this.random.nextInt(4) == 0)
diff --git a/net/minecraft/world/gen/ChunkProviderGenerate.java b/net/minecraft/world/gen/ChunkProviderGenerate.java
index 1426aa6..8ddb594 100644
--- a/net/minecraft/world/gen/ChunkProviderGenerate.java
+++ b/net/minecraft/world/gen/ChunkProviderGenerate.java
@@ -289,43 +289,43 @@ public class ChunkProviderGenerate implements IChunkProvider
                 var19 /= var20;
                 var18 = var18 * 0.9F + 0.1F;
                 var19 = (var19 * 4.0F - 1.0F) / 8.0F;
-                double var46 = this.field_147426_g[var13] / 8000.0D;
+                double var47 = this.field_147426_g[var13] / 8000.0D;
 
-                if (var46 < 0.0D)
+                if (var47 < 0.0D)
                 {
-                    var46 = -var46 * 0.3D;
+                    var47 = -var47 * 0.3D;
                 }
 
-                var46 = var46 * 3.0D - 2.0D;
+                var47 = var47 * 3.0D - 2.0D;
 
-                if (var46 < 0.0D)
+                if (var47 < 0.0D)
                 {
-                    var46 /= 2.0D;
+                    var47 /= 2.0D;
 
-                    if (var46 < -1.0D)
+                    if (var47 < -1.0D)
                     {
-                        var46 = -1.0D;
+                        var47 = -1.0D;
                     }
 
-                    var46 /= 1.4D;
-                    var46 /= 2.0D;
+                    var47 /= 1.4D;
+                    var47 /= 2.0D;
                 }
                 else
                 {
-                    if (var46 > 1.0D)
+                    if (var47 > 1.0D)
                     {
-                        var46 = 1.0D;
+                        var47 = 1.0D;
                     }
 
-                    var46 /= 8.0D;
+                    var47 /= 8.0D;
                 }
 
                 ++var13;
-                double var47 = (double)var19;
+                double var46 = (double)var19;
                 double var48 = (double)var18;
-                var47 += var46 * 0.2D;
-                var47 = var47 * 8.5D / 8.0D;
-                double var29 = 8.5D + var47 * 4.0D;
+                var46 += var47 * 0.2D;
+                var46 = var46 * 8.5D / 8.0D;
+                double var29 = 8.5D + var46 * 4.0D;
 
                 for (int var31 = 0; var31 < 33; ++var31)
                 {
diff --git a/net/minecraft/world/gen/MapGenCaves.java b/net/minecraft/world/gen/MapGenCaves.java
index e174746..f6429ab 100644
--- a/net/minecraft/world/gen/MapGenCaves.java
+++ b/net/minecraft/world/gen/MapGenCaves.java
@@ -88,9 +88,9 @@ public class MapGenCaves extends MapGenBase
                 {
                     int var55 = MathHelper.floor_double(p_151541_6_ - var29) - p_151541_3_ * 16 - 1;
                     int var36 = MathHelper.floor_double(p_151541_6_ + var29) - p_151541_3_ * 16 + 1;
-                    int var56 = MathHelper.floor_double(p_151541_8_ - var31) - 1;
+                    int var57 = MathHelper.floor_double(p_151541_8_ - var31) - 1;
                     int var38 = MathHelper.floor_double(p_151541_8_ + var31) + 1;
-                    int var57 = MathHelper.floor_double(p_151541_10_ - var29) - p_151541_4_ * 16 - 1;
+                    int var56 = MathHelper.floor_double(p_151541_10_ - var29) - p_151541_4_ * 16 - 1;
                     int var40 = MathHelper.floor_double(p_151541_10_ + var29) - p_151541_4_ * 16 + 1;
 
                     if (var55 < 0)
@@ -103,9 +103,9 @@ public class MapGenCaves extends MapGenBase
                         var36 = 16;
                     }
 
-                    if (var56 < 1)
+                    if (var57 < 1)
                     {
-                        var56 = 1;
+                        var57 = 1;
                     }
 
                     if (var38 > 248)
@@ -113,9 +113,9 @@ public class MapGenCaves extends MapGenBase
                         var38 = 248;
                     }
 
-                    if (var57 < 0)
+                    if (var56 < 0)
                     {
-                        var57 = 0;
+                        var56 = 0;
                     }
 
                     if (var40 > 16)
@@ -129,9 +129,9 @@ public class MapGenCaves extends MapGenBase
 
                     for (var42 = var55; !var58 && var42 < var36; ++var42)
                     {
-                        for (int var43 = var57; !var58 && var43 < var40; ++var43)
+                        for (int var43 = var56; !var58 && var43 < var40; ++var43)
                         {
-                            for (int var44 = var38 + 1; !var58 && var44 >= var56 - 1; --var44)
+                            for (int var44 = var38 + 1; !var58 && var44 >= var57 - 1; --var44)
                             {
                                 var45 = (var42 * 16 + var43) * 256 + var44;
 
@@ -144,9 +144,9 @@ public class MapGenCaves extends MapGenBase
                                         var58 = true;
                                     }
 
-                                    if (var44 != var56 - 1 && var42 != var55 && var42 != var36 - 1 && var43 != var57 && var43 != var40 - 1)
+                                    if (var44 != var57 - 1 && var42 != var55 && var42 != var36 - 1 && var43 != var56 && var43 != var40 - 1)
                                     {
-                                        var44 = var56;
+                                        var44 = var57;
                                     }
                                 }
                             }
@@ -157,21 +157,21 @@ public class MapGenCaves extends MapGenBase
                     {
                         for (var42 = var55; var42 < var36; ++var42)
                         {
-                            double var59 = ((double)(var42 + p_151541_3_ * 16) + 0.5D - p_151541_6_) / var29;
+                            double var60 = ((double)(var42 + p_151541_3_ * 16) + 0.5D - p_151541_6_) / var29;
 
-                            for (var45 = var57; var45 < var40; ++var45)
+                            for (var45 = var56; var45 < var40; ++var45)
                             {
-                                double var60 = ((double)(var45 + p_151541_4_ * 16) + 0.5D - p_151541_10_) / var29;
+                                double var59 = ((double)(var45 + p_151541_4_ * 16) + 0.5D - p_151541_10_) / var29;
                                 int var48 = (var42 * 16 + var45) * 256 + var38;
                                 boolean var49 = false;
 
-                                if (var59 * var59 + var60 * var60 < 1.0D)
+                                if (var60 * var60 + var59 * var59 < 1.0D)
                                 {
-                                    for (int var50 = var38 - 1; var50 >= var56; --var50)
+                                    for (int var50 = var38 - 1; var50 >= var57; --var50)
                                     {
                                         double var51 = ((double)var50 + 0.5D - p_151541_8_) / var31;
 
-                                        if (var51 > -0.7D && var59 * var59 + var51 * var51 + var60 * var60 < 1.0D)
+                                        if (var51 > -0.7D && var60 * var60 + var51 * var51 + var59 * var59 < 1.0D)
                                         {
                                             Block var53 = p_151541_5_[var48];
 
diff --git a/net/minecraft/world/gen/MapGenCavesHell.java b/net/minecraft/world/gen/MapGenCavesHell.java
index 61d69df..66d2b9a 100644
--- a/net/minecraft/world/gen/MapGenCavesHell.java
+++ b/net/minecraft/world/gen/MapGenCavesHell.java
@@ -88,9 +88,9 @@ public class MapGenCavesHell extends MapGenBase
                 {
                     int var54 = MathHelper.floor_double(p_151543_6_ - var29) - p_151543_3_ * 16 - 1;
                     int var36 = MathHelper.floor_double(p_151543_6_ + var29) - p_151543_3_ * 16 + 1;
-                    int var55 = MathHelper.floor_double(p_151543_8_ - var31) - 1;
+                    int var56 = MathHelper.floor_double(p_151543_8_ - var31) - 1;
                     int var38 = MathHelper.floor_double(p_151543_8_ + var31) + 1;
-                    int var56 = MathHelper.floor_double(p_151543_10_ - var29) - p_151543_4_ * 16 - 1;
+                    int var55 = MathHelper.floor_double(p_151543_10_ - var29) - p_151543_4_ * 16 - 1;
                     int var40 = MathHelper.floor_double(p_151543_10_ + var29) - p_151543_4_ * 16 + 1;
 
                     if (var54 < 0)
@@ -103,9 +103,9 @@ public class MapGenCavesHell extends MapGenBase
                         var36 = 16;
                     }
 
-                    if (var55 < 1)
+                    if (var56 < 1)
                     {
-                        var55 = 1;
+                        var56 = 1;
                     }
 
                     if (var38 > 120)
@@ -113,9 +113,9 @@ public class MapGenCavesHell extends MapGenBase
                         var38 = 120;
                     }
 
-                    if (var56 < 0)
+                    if (var55 < 0)
                     {
-                        var56 = 0;
+                        var55 = 0;
                     }
 
                     if (var40 > 16)
@@ -129,9 +129,9 @@ public class MapGenCavesHell extends MapGenBase
 
                     for (var42 = var54; !var57 && var42 < var36; ++var42)
                     {
-                        for (int var43 = var56; !var57 && var43 < var40; ++var43)
+                        for (int var43 = var55; !var57 && var43 < var40; ++var43)
                         {
-                            for (int var44 = var38 + 1; !var57 && var44 >= var55 - 1; --var44)
+                            for (int var44 = var38 + 1; !var57 && var44 >= var56 - 1; --var44)
                             {
                                 var45 = (var42 * 16 + var43) * 128 + var44;
 
@@ -144,9 +144,9 @@ public class MapGenCavesHell extends MapGenBase
                                         var57 = true;
                                     }
 
-                                    if (var44 != var55 - 1 && var42 != var54 && var42 != var36 - 1 && var43 != var56 && var43 != var40 - 1)
+                                    if (var44 != var56 - 1 && var42 != var54 && var42 != var36 - 1 && var43 != var55 && var43 != var40 - 1)
                                     {
-                                        var44 = var55;
+                                        var44 = var56;
                                     }
                                 }
                             }
@@ -157,18 +157,18 @@ public class MapGenCavesHell extends MapGenBase
                     {
                         for (var42 = var54; var42 < var36; ++var42)
                         {
-                            double var58 = ((double)(var42 + p_151543_3_ * 16) + 0.5D - p_151543_6_) / var29;
+                            double var59 = ((double)(var42 + p_151543_3_ * 16) + 0.5D - p_151543_6_) / var29;
 
-                            for (var45 = var56; var45 < var40; ++var45)
+                            for (var45 = var55; var45 < var40; ++var45)
                             {
-                                double var59 = ((double)(var45 + p_151543_4_ * 16) + 0.5D - p_151543_10_) / var29;
+                                double var58 = ((double)(var45 + p_151543_4_ * 16) + 0.5D - p_151543_10_) / var29;
                                 int var48 = (var42 * 16 + var45) * 128 + var38;
 
-                                for (int var49 = var38 - 1; var49 >= var55; --var49)
+                                for (int var49 = var38 - 1; var49 >= var56; --var49)
                                 {
                                     double var50 = ((double)var49 + 0.5D - p_151543_8_) / var31;
 
-                                    if (var50 > -0.7D && var58 * var58 + var50 * var50 + var59 * var59 < 1.0D)
+                                    if (var50 > -0.7D && var59 * var59 + var50 * var50 + var58 * var58 < 1.0D)
                                     {
                                         Block var52 = p_151543_5_[var48];
 
diff --git a/net/minecraft/world/gen/MapGenRavine.java b/net/minecraft/world/gen/MapGenRavine.java
index fc50519..fc3e601 100644
--- a/net/minecraft/world/gen/MapGenRavine.java
+++ b/net/minecraft/world/gen/MapGenRavine.java
@@ -25,12 +25,12 @@ public class MapGenRavine extends MapGenBase
             p_151540_16_ = var26 - var19.nextInt(var26 / 4);
         }
 
-        boolean var53 = false;
+        boolean var54 = false;
 
         if (p_151540_15_ == -1)
         {
             p_151540_15_ = p_151540_16_ / 2;
-            var53 = true;
+            var54 = true;
         }
 
         float var27 = 1.0F;
@@ -47,9 +47,9 @@ public class MapGenRavine extends MapGenBase
 
         for (; p_151540_15_ < p_151540_16_; ++p_151540_15_)
         {
-            double var54 = 1.5D + (double)(MathHelper.sin((float)p_151540_15_ * (float)Math.PI / (float)p_151540_16_) * p_151540_12_ * 1.0F);
-            double var30 = var54 * p_151540_17_;
-            var54 *= (double)var19.nextFloat() * 0.25D + 0.75D;
+            double var53 = 1.5D + (double)(MathHelper.sin((float)p_151540_15_ * (float)Math.PI / (float)p_151540_16_) * p_151540_12_ * 1.0F);
+            double var30 = var53 * p_151540_17_;
+            var53 *= (double)var19.nextFloat() * 0.25D + 0.75D;
             var30 *= (double)var19.nextFloat() * 0.25D + 0.75D;
             float var32 = MathHelper.cos(p_151540_14_);
             float var33 = MathHelper.sin(p_151540_14_);
@@ -64,7 +64,7 @@ public class MapGenRavine extends MapGenBase
             var25 += (var19.nextFloat() - var19.nextFloat()) * var19.nextFloat() * 2.0F;
             var24 += (var19.nextFloat() - var19.nextFloat()) * var19.nextFloat() * 4.0F;
 
-            if (var53 || var19.nextInt(4) != 0)
+            if (var54 || var19.nextInt(4) != 0)
             {
                 double var34 = p_151540_6_ - var20;
                 double var36 = p_151540_10_ - var22;
@@ -76,18 +76,18 @@ public class MapGenRavine extends MapGenBase
                     return;
                 }
 
-                if (p_151540_6_ >= var20 - 16.0D - var54 * 2.0D && p_151540_10_ >= var22 - 16.0D - var54 * 2.0D && p_151540_6_ <= var20 + 16.0D + var54 * 2.0D && p_151540_10_ <= var22 + 16.0D + var54 * 2.0D)
+                if (p_151540_6_ >= var20 - 16.0D - var53 * 2.0D && p_151540_10_ >= var22 - 16.0D - var53 * 2.0D && p_151540_6_ <= var20 + 16.0D + var53 * 2.0D && p_151540_10_ <= var22 + 16.0D + var53 * 2.0D)
                 {
-                    int var55 = MathHelper.floor_double(p_151540_6_ - var54) - p_151540_3_ * 16 - 1;
-                    int var35 = MathHelper.floor_double(p_151540_6_ + var54) - p_151540_3_ * 16 + 1;
-                    int var56 = MathHelper.floor_double(p_151540_8_ - var30) - 1;
+                    int var56 = MathHelper.floor_double(p_151540_6_ - var53) - p_151540_3_ * 16 - 1;
+                    int var35 = MathHelper.floor_double(p_151540_6_ + var53) - p_151540_3_ * 16 + 1;
+                    int var55 = MathHelper.floor_double(p_151540_8_ - var30) - 1;
                     int var37 = MathHelper.floor_double(p_151540_8_ + var30) + 1;
-                    int var57 = MathHelper.floor_double(p_151540_10_ - var54) - p_151540_4_ * 16 - 1;
-                    int var39 = MathHelper.floor_double(p_151540_10_ + var54) - p_151540_4_ * 16 + 1;
+                    int var57 = MathHelper.floor_double(p_151540_10_ - var53) - p_151540_4_ * 16 - 1;
+                    int var39 = MathHelper.floor_double(p_151540_10_ + var53) - p_151540_4_ * 16 + 1;
 
-                    if (var55 < 0)
+                    if (var56 < 0)
                     {
-                        var55 = 0;
+                        var56 = 0;
                     }
 
                     if (var35 > 16)
@@ -95,9 +95,9 @@ public class MapGenRavine extends MapGenBase
                         var35 = 16;
                     }
 
-                    if (var56 < 1)
+                    if (var55 < 1)
                     {
-                        var56 = 1;
+                        var55 = 1;
                     }
 
                     if (var37 > 248)
@@ -119,11 +119,11 @@ public class MapGenRavine extends MapGenBase
                     int var41;
                     int var44;
 
-                    for (var41 = var55; !var58 && var41 < var35; ++var41)
+                    for (var41 = var56; !var58 && var41 < var35; ++var41)
                     {
                         for (int var42 = var57; !var58 && var42 < var39; ++var42)
                         {
-                            for (int var43 = var37 + 1; !var58 && var43 >= var56 - 1; --var43)
+                            for (int var43 = var37 + 1; !var58 && var43 >= var55 - 1; --var43)
                             {
                                 var44 = (var41 * 16 + var42) * 256 + var43;
 
@@ -136,9 +136,9 @@ public class MapGenRavine extends MapGenBase
                                         var58 = true;
                                     }
 
-                                    if (var43 != var56 - 1 && var41 != var55 && var41 != var35 - 1 && var42 != var57 && var42 != var39 - 1)
+                                    if (var43 != var55 - 1 && var41 != var56 && var41 != var35 - 1 && var42 != var57 && var42 != var39 - 1)
                                     {
-                                        var43 = var56;
+                                        var43 = var55;
                                     }
                                 }
                             }
@@ -147,23 +147,23 @@ public class MapGenRavine extends MapGenBase
 
                     if (!var58)
                     {
-                        for (var41 = var55; var41 < var35; ++var41)
+                        for (var41 = var56; var41 < var35; ++var41)
                         {
-                            double var59 = ((double)(var41 + p_151540_3_ * 16) + 0.5D - p_151540_6_) / var54;
+                            double var60 = ((double)(var41 + p_151540_3_ * 16) + 0.5D - p_151540_6_) / var53;
 
                             for (var44 = var57; var44 < var39; ++var44)
                             {
-                                double var60 = ((double)(var44 + p_151540_4_ * 16) + 0.5D - p_151540_10_) / var54;
+                                double var59 = ((double)(var44 + p_151540_4_ * 16) + 0.5D - p_151540_10_) / var53;
                                 int var47 = (var41 * 16 + var44) * 256 + var37;
                                 boolean var48 = false;
 
-                                if (var59 * var59 + var60 * var60 < 1.0D)
+                                if (var60 * var60 + var59 * var59 < 1.0D)
                                 {
-                                    for (int var49 = var37 - 1; var49 >= var56; --var49)
+                                    for (int var49 = var37 - 1; var49 >= var55; --var49)
                                     {
                                         double var50 = ((double)var49 + 0.5D - p_151540_8_) / var30;
 
-                                        if ((var59 * var59 + var60 * var60) * (double)this.field_75046_d[var49] + var50 * var50 / 6.0D < 1.0D)
+                                        if ((var60 * var60 + var59 * var59) * (double)this.field_75046_d[var49] + var50 * var50 / 6.0D < 1.0D)
                                         {
                                             Block var52 = p_151540_5_[var47];
 
@@ -196,7 +196,7 @@ public class MapGenRavine extends MapGenBase
                             }
                         }
 
-                        if (var53)
+                        if (var54)
                         {
                             break;
                         }
diff --git a/net/minecraft/world/gen/NoiseGeneratorImproved.java b/net/minecraft/world/gen/NoiseGeneratorImproved.java
index 90dda0f..6004093 100644
--- a/net/minecraft/world/gen/NoiseGeneratorImproved.java
+++ b/net/minecraft/world/gen/NoiseGeneratorImproved.java
@@ -65,28 +65,28 @@ public class NoiseGeneratorImproved extends NoiseGenerator
      */
     public void populateNoiseArray(double[] par1ArrayOfDouble, double par2, double par4, double par6, int par8, int par9, int par10, double par11, double par13, double par15, double par17)
     {
-        int var10001;
         int var19;
         int var22;
         double var31;
         double var35;
-        int var37;
         double var38;
+        int var37;
+        double var42;
         int var40;
         int var41;
-        double var42;
-        int var75;
+        int var10001;
+        int var77;
 
         if (par9 == 1)
         {
-            boolean var64 = false;
+            boolean var66 = false;
             boolean var65 = false;
             boolean var21 = false;
-            boolean var68 = false;
-            double var70 = 0.0D;
-            double var73 = 0.0D;
-            var75 = 0;
-            double var77 = 1.0D / par17;
+            boolean var67 = false;
+            double var72 = 0.0D;
+            double var71 = 0.0D;
+            var77 = 0;
+            double var74 = 1.0D / par17;
 
             for (int var30 = 0; var30 < par8; ++var30)
             {
@@ -116,14 +116,14 @@ public class NoiseGeneratorImproved extends NoiseGenerator
                     var38 -= (double)var40;
                     var42 = var38 * var38 * var38 * (var38 * (var38 * 6.0D - 15.0D) + 10.0D);
                     var19 = this.permutations[var34] + 0;
-                    int var66 = this.permutations[var19] + var41;
-                    int var67 = this.permutations[var34 + 1] + 0;
-                    var22 = this.permutations[var67] + var41;
-                    var70 = this.lerp(var35, this.func_76309_a(this.permutations[var66], var31, var38), this.grad(this.permutations[var22], var31 - 1.0D, 0.0D, var38));
-                    var73 = this.lerp(var35, this.grad(this.permutations[var66 + 1], var31, 0.0D, var38 - 1.0D), this.grad(this.permutations[var22 + 1], var31 - 1.0D, 0.0D, var38 - 1.0D));
-                    double var79 = this.lerp(var42, var70, var73);
-                    var10001 = var75++;
-                    par1ArrayOfDouble[var10001] += var79 * var77;
+                    int var64 = this.permutations[var19] + var41;
+                    int var69 = this.permutations[var34 + 1] + 0;
+                    var22 = this.permutations[var69] + var41;
+                    var72 = this.lerp(var35, this.func_76309_a(this.permutations[var64], var31, var38), this.grad(this.permutations[var22], var31 - 1.0D, 0.0D, var38));
+                    var71 = this.lerp(var35, this.grad(this.permutations[var64 + 1], var31, 0.0D, var38 - 1.0D), this.grad(this.permutations[var22 + 1], var31 - 1.0D, 0.0D, var38 - 1.0D));
+                    double var79 = this.lerp(var42, var72, var71);
+                    var10001 = var77++;
+                    par1ArrayOfDouble[var10001] += var79 * var74;
                 }
             }
         }
@@ -188,16 +188,16 @@ public class NoiseGeneratorImproved extends NoiseGenerator
                         if (var51 == 0 || var55 != var22)
                         {
                             var22 = var55;
-                            int var69 = this.permutations[var41] + var55;
-                            int var71 = this.permutations[var69] + var48;
-                            int var72 = this.permutations[var69 + 1] + var48;
-                            int var74 = this.permutations[var41 + 1] + var55;
-                            var75 = this.permutations[var74] + var48;
-                            int var76 = this.permutations[var74 + 1] + var48;
-                            var29 = this.lerp(var42, this.grad(this.permutations[var71], var38, var52, var45), this.grad(this.permutations[var75], var38 - 1.0D, var52, var45));
-                            var31 = this.lerp(var42, this.grad(this.permutations[var72], var38, var52 - 1.0D, var45), this.grad(this.permutations[var76], var38 - 1.0D, var52 - 1.0D, var45));
-                            var33 = this.lerp(var42, this.grad(this.permutations[var71 + 1], var38, var52, var45 - 1.0D), this.grad(this.permutations[var75 + 1], var38 - 1.0D, var52, var45 - 1.0D));
-                            var35 = this.lerp(var42, this.grad(this.permutations[var72 + 1], var38, var52 - 1.0D, var45 - 1.0D), this.grad(this.permutations[var76 + 1], var38 - 1.0D, var52 - 1.0D, var45 - 1.0D));
+                            int var68 = this.permutations[var41] + var55;
+                            int var73 = this.permutations[var68] + var48;
+                            int var70 = this.permutations[var68 + 1] + var48;
+                            int var76 = this.permutations[var41 + 1] + var55;
+                            var77 = this.permutations[var76] + var48;
+                            int var75 = this.permutations[var76 + 1] + var48;
+                            var29 = this.lerp(var42, this.grad(this.permutations[var73], var38, var52, var45), this.grad(this.permutations[var77], var38 - 1.0D, var52, var45));
+                            var31 = this.lerp(var42, this.grad(this.permutations[var70], var38, var52 - 1.0D, var45), this.grad(this.permutations[var75], var38 - 1.0D, var52 - 1.0D, var45));
+                            var33 = this.lerp(var42, this.grad(this.permutations[var73 + 1], var38, var52, var45 - 1.0D), this.grad(this.permutations[var77 + 1], var38 - 1.0D, var52, var45 - 1.0D));
+                            var35 = this.lerp(var42, this.grad(this.permutations[var70 + 1], var38, var52 - 1.0D, var45 - 1.0D), this.grad(this.permutations[var75 + 1], var38 - 1.0D, var52 - 1.0D, var45 - 1.0D));
                         }
 
                         double var58 = this.lerp(var56, var29, var31);
diff --git a/net/minecraft/world/gen/NoiseGeneratorSimplex.java b/net/minecraft/world/gen/NoiseGeneratorSimplex.java
index 811cfca..03febb5 100644
--- a/net/minecraft/world/gen/NoiseGeneratorSimplex.java
+++ b/net/minecraft/world/gen/NoiseGeneratorSimplex.java
@@ -148,8 +148,8 @@ public class NoiseGeneratorSimplex
                 double var35 = (double)var30 - var31;
                 double var37 = var19 - var33;
                 double var39 = var16 - var35;
-                byte var41;
                 byte var42;
+                byte var41;
 
                 if (var37 > var39)
                 {
diff --git a/net/minecraft/world/gen/feature/WorldGenBigMushroom.java b/net/minecraft/world/gen/feature/WorldGenBigMushroom.java
index 159542a..c9d21e0 100644
--- a/net/minecraft/world/gen/feature/WorldGenBigMushroom.java
+++ b/net/minecraft/world/gen/feature/WorldGenBigMushroom.java
@@ -105,18 +105,18 @@ public class WorldGenBigMushroom extends WorldGenerator
                             var12 = 3;
                         }
 
-                        for (int var18 = par3 - var12; var18 <= par3 + var12; ++var18)
+                        for (int var19 = par3 - var12; var19 <= par3 + var12; ++var19)
                         {
                             for (int var14 = par5 - var12; var14 <= par5 + var12; ++var14)
                             {
                                 int var15 = 5;
 
-                                if (var18 == par3 - var12)
+                                if (var19 == par3 - var12)
                                 {
                                     --var15;
                                 }
 
-                                if (var18 == par3 + var12)
+                                if (var19 == par3 + var12)
                                 {
                                     ++var15;
                                 }
@@ -133,47 +133,47 @@ public class WorldGenBigMushroom extends WorldGenerator
 
                                 if (var6 == 0 || var11 < par4 + var7)
                                 {
-                                    if ((var18 == par3 - var12 || var18 == par3 + var12) && (var14 == par5 - var12 || var14 == par5 + var12))
+                                    if ((var19 == par3 - var12 || var19 == par3 + var12) && (var14 == par5 - var12 || var14 == par5 + var12))
                                     {
                                         continue;
                                     }
 
-                                    if (var18 == par3 - (var12 - 1) && var14 == par5 - var12)
+                                    if (var19 == par3 - (var12 - 1) && var14 == par5 - var12)
                                     {
                                         var15 = 1;
                                     }
 
-                                    if (var18 == par3 - var12 && var14 == par5 - (var12 - 1))
+                                    if (var19 == par3 - var12 && var14 == par5 - (var12 - 1))
                                     {
                                         var15 = 1;
                                     }
 
-                                    if (var18 == par3 + (var12 - 1) && var14 == par5 - var12)
+                                    if (var19 == par3 + (var12 - 1) && var14 == par5 - var12)
                                     {
                                         var15 = 3;
                                     }
 
-                                    if (var18 == par3 + var12 && var14 == par5 - (var12 - 1))
+                                    if (var19 == par3 + var12 && var14 == par5 - (var12 - 1))
                                     {
                                         var15 = 3;
                                     }
 
-                                    if (var18 == par3 - (var12 - 1) && var14 == par5 + var12)
+                                    if (var19 == par3 - (var12 - 1) && var14 == par5 + var12)
                                     {
                                         var15 = 7;
                                     }
 
-                                    if (var18 == par3 - var12 && var14 == par5 + (var12 - 1))
+                                    if (var19 == par3 - var12 && var14 == par5 + (var12 - 1))
                                     {
                                         var15 = 7;
                                     }
 
-                                    if (var18 == par3 + (var12 - 1) && var14 == par5 + var12)
+                                    if (var19 == par3 + (var12 - 1) && var14 == par5 + var12)
                                     {
                                         var15 = 9;
                                     }
 
-                                    if (var18 == par3 + var12 && var14 == par5 + (var12 - 1))
+                                    if (var19 == par3 + var12 && var14 == par5 + (var12 - 1))
                                     {
                                         var15 = 9;
                                     }
@@ -184,9 +184,9 @@ public class WorldGenBigMushroom extends WorldGenerator
                                     var15 = 0;
                                 }
 
-                                if ((var15 != 0 || par4 >= par4 + var7 - 1) && !par1World.getBlock(var18, var11, var14).func_149730_j())
+                                if ((var15 != 0 || par4 >= par4 + var7 - 1) && !par1World.getBlock(var19, var11, var14).func_149730_j())
                                 {
-                                    this.func_150516_a(par1World, var18, var11, var14, Block.getBlockById(Block.getIdFromBlock(Blocks.brown_mushroom_block) + var6), var15);
+                                    this.func_150516_a(par1World, var19, var11, var14, Block.getBlockById(Block.getIdFromBlock(Blocks.brown_mushroom_block) + var6), var15);
                                 }
                             }
                         }
@@ -194,9 +194,9 @@ public class WorldGenBigMushroom extends WorldGenerator
 
                     for (var11 = 0; var11 < var7; ++var11)
                     {
-                        Block var19 = par1World.getBlock(par3, par4 + var11, par5);
+                        Block var18 = par1World.getBlock(par3, par4 + var11, par5);
 
-                        if (!var19.func_149730_j())
+                        if (!var18.func_149730_j())
                         {
                             this.func_150516_a(par1World, par3, par4 + var11, par5, Block.getBlockById(Block.getIdFromBlock(Blocks.brown_mushroom_block) + var6), 10);
                         }
diff --git a/net/minecraft/world/gen/feature/WorldGenCanopyTree.java b/net/minecraft/world/gen/feature/WorldGenCanopyTree.java
index 814b09a..86b296d 100644
--- a/net/minecraft/world/gen/feature/WorldGenCanopyTree.java
+++ b/net/minecraft/world/gen/feature/WorldGenCanopyTree.java
@@ -111,11 +111,11 @@ public class WorldGenCanopyTree extends WorldGenAbstractTree
                     {
                         for (var16 = -2; var16 <= 0; ++var16)
                         {
-                            byte var23 = -1;
-                            this.func_150526_a(par1World, var22 + var15, var14 + var23, var13 + var16);
-                            this.func_150526_a(par1World, 1 + var22 - var15, var14 + var23, var13 + var16);
-                            this.func_150526_a(par1World, var22 + var15, var14 + var23, 1 + var13 - var16);
-                            this.func_150526_a(par1World, 1 + var22 - var15, var14 + var23, 1 + var13 - var16);
+                            byte var25 = -1;
+                            this.func_150526_a(par1World, var22 + var15, var14 + var25, var13 + var16);
+                            this.func_150526_a(par1World, 1 + var22 - var15, var14 + var25, var13 + var16);
+                            this.func_150526_a(par1World, var22 + var15, var14 + var25, 1 + var13 - var16);
+                            this.func_150526_a(par1World, 1 + var22 - var15, var14 + var25, 1 + var13 - var16);
 
                             if ((var15 > -2 || var16 > -1) && (var15 != -1 || var16 != -2))
                             {
@@ -153,10 +153,10 @@ public class WorldGenCanopyTree extends WorldGenAbstractTree
                         {
                             if ((var15 < 0 || var15 > 1 || var16 < 0 || var16 > 1) && par2Random.nextInt(3) <= 0)
                             {
-                                int var25 = par2Random.nextInt(3) + 2;
+                                int var23 = par2Random.nextInt(3) + 2;
                                 int var18;
 
-                                for (var18 = 0; var18 < var25; ++var18)
+                                for (var18 = 0; var18 < var23; ++var18)
                                 {
                                     this.func_150516_a(par1World, par3 + var15, var14 - var18 - 1, par5 + var16, Blocks.log2, 1);
                                 }
diff --git a/net/minecraft/world/gen/feature/WorldGenDungeons.java b/net/minecraft/world/gen/feature/WorldGenDungeons.java
index f73dbd4..fdb8856 100644
--- a/net/minecraft/world/gen/feature/WorldGenDungeons.java
+++ b/net/minecraft/world/gen/feature/WorldGenDungeons.java
@@ -91,7 +91,7 @@ public class WorldGenDungeons extends WorldGenerator
                 {
                     if (var11 < 3)
                     {
-                        label197:
+                        label101:
                         {
                             var12 = par3 + par2Random.nextInt(var7 * 2 + 1) - var7;
                             int var14 = par5 + par2Random.nextInt(var8 * 2 + 1) - var8;
@@ -131,7 +131,7 @@ public class WorldGenDungeons extends WorldGenerator
                                         WeightedRandomChestContent.generateChestContents(par2Random, var16, var17, 8);
                                     }
 
-                                    break label197;
+                                    break label101;
                                 }
                             }
 
diff --git a/net/minecraft/world/gen/feature/WorldGenForest.java b/net/minecraft/world/gen/feature/WorldGenForest.java
index 868eafa..0252d0c 100644
--- a/net/minecraft/world/gen/feature/WorldGenForest.java
+++ b/net/minecraft/world/gen/feature/WorldGenForest.java
@@ -79,11 +79,11 @@ public class WorldGenForest extends WorldGenAbstractTree
                 if ((var17 == Blocks.grass || var17 == Blocks.dirt || var17 == Blocks.farmland) && par4 < 256 - var6 - 1)
                 {
                     this.func_150515_a(par1World, par3, par4 - 1, par5, Blocks.dirt);
-                    int var18;
+                    int var19;
 
-                    for (var18 = par4 - 3 + var6; var18 <= par4 + var6; ++var18)
+                    for (var19 = par4 - 3 + var6; var19 <= par4 + var6; ++var19)
                     {
-                        var10 = var18 - (par4 + var6);
+                        var10 = var19 - (par4 + var6);
                         var11 = 1 - var10 / 2;
 
                         for (int var20 = par3 - var11; var20 <= par3 + var11; ++var20)
@@ -96,24 +96,24 @@ public class WorldGenForest extends WorldGenAbstractTree
 
                                 if (Math.abs(var13) != var11 || Math.abs(var15) != var11 || par2Random.nextInt(2) != 0 && var10 != 0)
                                 {
-                                    Block var16 = par1World.getBlock(var20, var18, var14);
+                                    Block var16 = par1World.getBlock(var20, var19, var14);
 
                                     if (var16.getMaterial() == Material.air || var16.getMaterial() == Material.leaves)
                                     {
-                                        this.func_150516_a(par1World, var20, var18, var14, Blocks.leaves, 2);
+                                        this.func_150516_a(par1World, var20, var19, var14, Blocks.leaves, 2);
                                     }
                                 }
                             }
                         }
                     }
 
-                    for (var18 = 0; var18 < var6; ++var18)
+                    for (var19 = 0; var19 < var6; ++var19)
                     {
-                        Block var19 = par1World.getBlock(par3, par4 + var18, par5);
+                        Block var18 = par1World.getBlock(par3, par4 + var19, par5);
 
-                        if (var19.getMaterial() == Material.air || var19.getMaterial() == Material.leaves)
+                        if (var18.getMaterial() == Material.air || var18.getMaterial() == Material.leaves)
                         {
-                            this.func_150516_a(par1World, par3, par4 + var18, par5, Blocks.log, 2);
+                            this.func_150516_a(par1World, par3, par4 + var19, par5, Blocks.log, 2);
                         }
                     }
 
diff --git a/net/minecraft/world/gen/feature/WorldGenLakes.java b/net/minecraft/world/gen/feature/WorldGenLakes.java
index 482a342..a510355 100644
--- a/net/minecraft/world/gen/feature/WorldGenLakes.java
+++ b/net/minecraft/world/gen/feature/WorldGenLakes.java
@@ -119,9 +119,9 @@ public class WorldGenLakes extends WorldGenerator
                     {
                         if (var6[(var8 * 16 + var32) * 8 + var10] && par1World.getBlock(par3 + var8, par4 + var10 - 1, par5 + var32) == Blocks.dirt && par1World.getSavedLightValue(EnumSkyBlock.Sky, par3 + var8, par4 + var10, par5 + var32) > 0)
                         {
-                            BiomeGenBase var34 = par1World.getBiomeGenForCoords(par3 + var8, par5 + var32);
+                            BiomeGenBase var35 = par1World.getBiomeGenForCoords(par3 + var8, par5 + var32);
 
-                            if (var34.topBlock == Blocks.mycelium)
+                            if (var35.topBlock == Blocks.mycelium)
                             {
                                 par1World.setBlock(par3 + var8, par4 + var10 - 1, par5 + var32, Blocks.mycelium, 0, 2);
                             }
@@ -159,11 +159,11 @@ public class WorldGenLakes extends WorldGenerator
                 {
                     for (var32 = 0; var32 < 16; ++var32)
                     {
-                        byte var35 = 4;
+                        byte var34 = 4;
 
-                        if (par1World.isBlockFreezable(par3 + var8, par4 + var35, par5 + var32))
+                        if (par1World.isBlockFreezable(par3 + var8, par4 + var34, par5 + var32))
                         {
-                            par1World.setBlock(par3 + var8, par4 + var35, par5 + var32, Blocks.ice, 0, 2);
+                            par1World.setBlock(par3 + var8, par4 + var34, par5 + var32, Blocks.ice, 0, 2);
                         }
                     }
                 }
diff --git a/net/minecraft/world/gen/feature/WorldGenSavannaTree.java b/net/minecraft/world/gen/feature/WorldGenSavannaTree.java
index d720123..10f417f 100644
--- a/net/minecraft/world/gen/feature/WorldGenSavannaTree.java
+++ b/net/minecraft/world/gen/feature/WorldGenSavannaTree.java
@@ -134,8 +134,8 @@ public class WorldGenSavannaTree extends WorldGenAbstractTree
                         var16 = var10 - par2Random.nextInt(2) - 1;
                         int var24 = 1 + par2Random.nextInt(3);
                         var14 = 0;
-                        int var18;
                         int var19;
+                        int var18;
 
                         for (var18 = var16; var18 < var6 && var24 > 0; --var24)
                         {
diff --git a/net/minecraft/world/gen/feature/WorldGenSwamp.java b/net/minecraft/world/gen/feature/WorldGenSwamp.java
index 290c14a..496c44d 100644
--- a/net/minecraft/world/gen/feature/WorldGenSwamp.java
+++ b/net/minecraft/world/gen/feature/WorldGenSwamp.java
@@ -85,12 +85,12 @@ public class WorldGenSwamp extends WorldGenAbstractTree
                 {
                     this.func_150515_a(par1World, par3, par4 - 1, par5, Blocks.dirt);
                     int var13;
-                    int var17;
                     int var19;
+                    int var18;
 
-                    for (var17 = par4 - 3 + var6; var17 <= par4 + var6; ++var17)
+                    for (var18 = par4 - 3 + var6; var18 <= par4 + var6; ++var18)
                     {
-                        var10 = var17 - (par4 + var6);
+                        var10 = var18 - (par4 + var6);
                         var11 = 2 - var10 / 2;
 
                         for (var19 = par3 - var11; var19 <= par3 + var11; ++var19)
@@ -101,53 +101,53 @@ public class WorldGenSwamp extends WorldGenAbstractTree
                             {
                                 int var15 = var14 - par5;
 
-                                if ((Math.abs(var13) != var11 || Math.abs(var15) != var11 || par2Random.nextInt(2) != 0 && var10 != 0) && !par1World.getBlock(var19, var17, var14).func_149730_j())
+                                if ((Math.abs(var13) != var11 || Math.abs(var15) != var11 || par2Random.nextInt(2) != 0 && var10 != 0) && !par1World.getBlock(var19, var18, var14).func_149730_j())
                                 {
-                                    this.func_150515_a(par1World, var19, var17, var14, Blocks.leaves);
+                                    this.func_150515_a(par1World, var19, var18, var14, Blocks.leaves);
                                 }
                             }
                         }
                     }
 
-                    for (var17 = 0; var17 < var6; ++var17)
+                    for (var18 = 0; var18 < var6; ++var18)
                     {
-                        Block var18 = par1World.getBlock(par3, par4 + var17, par5);
+                        Block var17 = par1World.getBlock(par3, par4 + var18, par5);
 
-                        if (var18.getMaterial() == Material.air || var18.getMaterial() == Material.leaves || var18 == Blocks.flowing_water || var18 == Blocks.water)
+                        if (var17.getMaterial() == Material.air || var17.getMaterial() == Material.leaves || var17 == Blocks.flowing_water || var17 == Blocks.water)
                         {
-                            this.func_150515_a(par1World, par3, par4 + var17, par5, Blocks.log);
+                            this.func_150515_a(par1World, par3, par4 + var18, par5, Blocks.log);
                         }
                     }
 
-                    for (var17 = par4 - 3 + var6; var17 <= par4 + var6; ++var17)
+                    for (var18 = par4 - 3 + var6; var18 <= par4 + var6; ++var18)
                     {
-                        var10 = var17 - (par4 + var6);
+                        var10 = var18 - (par4 + var6);
                         var11 = 2 - var10 / 2;
 
                         for (var19 = par3 - var11; var19 <= par3 + var11; ++var19)
                         {
                             for (var13 = par5 - var11; var13 <= par5 + var11; ++var13)
                             {
-                                if (par1World.getBlock(var19, var17, var13).getMaterial() == Material.leaves)
+                                if (par1World.getBlock(var19, var18, var13).getMaterial() == Material.leaves)
                                 {
-                                    if (par2Random.nextInt(4) == 0 && par1World.getBlock(var19 - 1, var17, var13).getMaterial() == Material.air)
+                                    if (par2Random.nextInt(4) == 0 && par1World.getBlock(var19 - 1, var18, var13).getMaterial() == Material.air)
                                     {
-                                        this.generateVines(par1World, var19 - 1, var17, var13, 8);
+                                        this.generateVines(par1World, var19 - 1, var18, var13, 8);
                                     }
 
-                                    if (par2Random.nextInt(4) == 0 && par1World.getBlock(var19 + 1, var17, var13).getMaterial() == Material.air)
+                                    if (par2Random.nextInt(4) == 0 && par1World.getBlock(var19 + 1, var18, var13).getMaterial() == Material.air)
                                     {
-                                        this.generateVines(par1World, var19 + 1, var17, var13, 2);
+                                        this.generateVines(par1World, var19 + 1, var18, var13, 2);
                                     }
 
-                                    if (par2Random.nextInt(4) == 0 && par1World.getBlock(var19, var17, var13 - 1).getMaterial() == Material.air)
+                                    if (par2Random.nextInt(4) == 0 && par1World.getBlock(var19, var18, var13 - 1).getMaterial() == Material.air)
                                     {
-                                        this.generateVines(par1World, var19, var17, var13 - 1, 1);
+                                        this.generateVines(par1World, var19, var18, var13 - 1, 1);
                                     }
 
-                                    if (par2Random.nextInt(4) == 0 && par1World.getBlock(var19, var17, var13 + 1).getMaterial() == Material.air)
+                                    if (par2Random.nextInt(4) == 0 && par1World.getBlock(var19, var18, var13 + 1).getMaterial() == Material.air)
                                     {
-                                        this.generateVines(par1World, var19, var17, var13 + 1, 4);
+                                        this.generateVines(par1World, var19, var18, var13 + 1, 4);
                                     }
                                 }
                             }
diff --git a/net/minecraft/world/gen/feature/WorldGenTaiga1.java b/net/minecraft/world/gen/feature/WorldGenTaiga1.java
index 17624d1..a9bb37d 100644
--- a/net/minecraft/world/gen/feature/WorldGenTaiga1.java
+++ b/net/minecraft/world/gen/feature/WorldGenTaiga1.java
@@ -27,7 +27,7 @@ public class WorldGenTaiga1 extends WorldGenAbstractTree
         {
             int var13;
             int var14;
-            int var19;
+            int var18;
 
             for (int var11 = par4; var11 <= par4 + 1 + var6 && var10; ++var11)
             {
@@ -35,16 +35,16 @@ public class WorldGenTaiga1 extends WorldGenAbstractTree
 
                 if (var11 - par4 < var7)
                 {
-                    var19 = 0;
+                    var18 = 0;
                 }
                 else
                 {
-                    var19 = var9;
+                    var18 = var9;
                 }
 
-                for (var13 = par3 - var19; var13 <= par3 + var19 && var10; ++var13)
+                for (var13 = par3 - var18; var13 <= par3 + var18 && var10; ++var13)
                 {
-                    for (var14 = par5 - var19; var14 <= par5 + var19 && var10; ++var14)
+                    for (var14 = par5 - var18; var14 <= par5 + var18 && var10; ++var14)
                     {
                         if (var11 >= 0 && var11 < 256)
                         {
@@ -69,37 +69,37 @@ public class WorldGenTaiga1 extends WorldGenAbstractTree
             }
             else
             {
-                Block var18 = par1World.getBlock(par3, par4 - 1, par5);
+                Block var19 = par1World.getBlock(par3, par4 - 1, par5);
 
-                if ((var18 == Blocks.grass || var18 == Blocks.dirt) && par4 < 256 - var6 - 1)
+                if ((var19 == Blocks.grass || var19 == Blocks.dirt) && par4 < 256 - var6 - 1)
                 {
                     this.func_150515_a(par1World, par3, par4 - 1, par5, Blocks.dirt);
-                    var19 = 0;
+                    var18 = 0;
 
                     for (var13 = par4 + var6; var13 >= par4 + var7; --var13)
                     {
-                        for (var14 = par3 - var19; var14 <= par3 + var19; ++var14)
+                        for (var14 = par3 - var18; var14 <= par3 + var18; ++var14)
                         {
                             int var21 = var14 - par3;
 
-                            for (int var16 = par5 - var19; var16 <= par5 + var19; ++var16)
+                            for (int var16 = par5 - var18; var16 <= par5 + var18; ++var16)
                             {
                                 int var17 = var16 - par5;
 
-                                if ((Math.abs(var21) != var19 || Math.abs(var17) != var19 || var19 <= 0) && !par1World.getBlock(var14, var13, var16).func_149730_j())
+                                if ((Math.abs(var21) != var18 || Math.abs(var17) != var18 || var18 <= 0) && !par1World.getBlock(var14, var13, var16).func_149730_j())
                                 {
                                     this.func_150516_a(par1World, var14, var13, var16, Blocks.leaves, 1);
                                 }
                             }
                         }
 
-                        if (var19 >= 1 && var13 == par4 + var7 + 1)
+                        if (var18 >= 1 && var13 == par4 + var7 + 1)
                         {
-                            --var19;
+                            --var18;
                         }
-                        else if (var19 < var9)
+                        else if (var18 < var9)
                         {
-                            ++var19;
+                            ++var18;
                         }
                     }
 
diff --git a/net/minecraft/world/gen/feature/WorldGenTaiga2.java b/net/minecraft/world/gen/feature/WorldGenTaiga2.java
index 8b4b99c..e41db7e 100644
--- a/net/minecraft/world/gen/feature/WorldGenTaiga2.java
+++ b/net/minecraft/world/gen/feature/WorldGenTaiga2.java
@@ -26,7 +26,7 @@ public class WorldGenTaiga2 extends WorldGenAbstractTree
         if (par4 >= 1 && par4 + var6 + 1 <= 256)
         {
             int var13;
-            int var22;
+            int var21;
 
             for (int var11 = par4; var11 <= par4 + 1 + var6 && var10; ++var11)
             {
@@ -34,16 +34,16 @@ public class WorldGenTaiga2 extends WorldGenAbstractTree
 
                 if (var11 - par4 < var7)
                 {
-                    var22 = 0;
+                    var21 = 0;
                 }
                 else
                 {
-                    var22 = var9;
+                    var21 = var9;
                 }
 
-                for (var13 = par3 - var22; var13 <= par3 + var22 && var10; ++var13)
+                for (var13 = par3 - var21; var13 <= par3 + var21 && var10; ++var13)
                 {
-                    for (int var14 = par5 - var22; var14 <= par5 + var22 && var10; ++var14)
+                    for (int var14 = par5 - var21; var14 <= par5 + var21 && var10; ++var14)
                     {
                         if (var11 >= 0 && var11 < 256)
                         {
@@ -68,40 +68,40 @@ public class WorldGenTaiga2 extends WorldGenAbstractTree
             }
             else
             {
-                Block var21 = par1World.getBlock(par3, par4 - 1, par5);
+                Block var22 = par1World.getBlock(par3, par4 - 1, par5);
 
-                if ((var21 == Blocks.grass || var21 == Blocks.dirt || var21 == Blocks.farmland) && par4 < 256 - var6 - 1)
+                if ((var22 == Blocks.grass || var22 == Blocks.dirt || var22 == Blocks.farmland) && par4 < 256 - var6 - 1)
                 {
                     this.func_150515_a(par1World, par3, par4 - 1, par5, Blocks.dirt);
-                    var22 = par2Random.nextInt(2);
+                    var21 = par2Random.nextInt(2);
                     var13 = 1;
-                    byte var23 = 0;
+                    byte var24 = 0;
                     int var16;
-                    int var24;
+                    int var23;
 
-                    for (var24 = 0; var24 <= var8; ++var24)
+                    for (var23 = 0; var23 <= var8; ++var23)
                     {
-                        var16 = par4 + var6 - var24;
+                        var16 = par4 + var6 - var23;
 
-                        for (int var17 = par3 - var22; var17 <= par3 + var22; ++var17)
+                        for (int var17 = par3 - var21; var17 <= par3 + var21; ++var17)
                         {
                             int var18 = var17 - par3;
 
-                            for (int var19 = par5 - var22; var19 <= par5 + var22; ++var19)
+                            for (int var19 = par5 - var21; var19 <= par5 + var21; ++var19)
                             {
                                 int var20 = var19 - par5;
 
-                                if ((Math.abs(var18) != var22 || Math.abs(var20) != var22 || var22 <= 0) && !par1World.getBlock(var17, var16, var19).func_149730_j())
+                                if ((Math.abs(var18) != var21 || Math.abs(var20) != var21 || var21 <= 0) && !par1World.getBlock(var17, var16, var19).func_149730_j())
                                 {
                                     this.func_150516_a(par1World, var17, var16, var19, Blocks.leaves, 1);
                                 }
                             }
                         }
 
-                        if (var22 >= var13)
+                        if (var21 >= var13)
                         {
-                            var22 = var23;
-                            var23 = 1;
+                            var21 = var24;
+                            var24 = 1;
                             ++var13;
 
                             if (var13 > var9)
@@ -111,13 +111,13 @@ public class WorldGenTaiga2 extends WorldGenAbstractTree
                         }
                         else
                         {
-                            ++var22;
+                            ++var21;
                         }
                     }
 
-                    var24 = par2Random.nextInt(3);
+                    var23 = par2Random.nextInt(3);
 
-                    for (var16 = 0; var16 < var6 - var24; ++var16)
+                    for (var16 = 0; var16 < var6 - var23; ++var16)
                     {
                         Block var25 = par1World.getBlock(par3, par4 + var16, par5);
 
diff --git a/net/minecraft/world/gen/layer/GenLayer.java b/net/minecraft/world/gen/layer/GenLayer.java
index c3c651b..50a5581 100644
--- a/net/minecraft/world/gen/layer/GenLayer.java
+++ b/net/minecraft/world/gen/layer/GenLayer.java
@@ -39,18 +39,18 @@ public abstract class GenLayer
         var12 = new GenLayerAddIsland(2L, var13);
         var12 = new GenLayerAddIsland(50L, var12);
         var12 = new GenLayerAddIsland(70L, var12);
-        GenLayerRemoveTooMuchOcean var14 = new GenLayerRemoveTooMuchOcean(2L, var12);
-        GenLayerAddSnow var16 = new GenLayerAddSnow(2L, var14);
-        var12 = new GenLayerAddIsland(3L, var16);
-        GenLayerEdge var17 = new GenLayerEdge(2L, var12, GenLayerEdge.Mode.COOL_WARM);
-        var17 = new GenLayerEdge(2L, var17, GenLayerEdge.Mode.HEAT_ICE);
-        var17 = new GenLayerEdge(3L, var17, GenLayerEdge.Mode.SPECIAL);
-        var13 = new GenLayerZoom(2002L, var17);
+        GenLayerRemoveTooMuchOcean var16 = new GenLayerRemoveTooMuchOcean(2L, var12);
+        GenLayerAddSnow var14 = new GenLayerAddSnow(2L, var16);
+        var12 = new GenLayerAddIsland(3L, var14);
+        GenLayerEdge var19 = new GenLayerEdge(2L, var12, GenLayerEdge.Mode.COOL_WARM);
+        var19 = new GenLayerEdge(2L, var19, GenLayerEdge.Mode.HEAT_ICE);
+        var19 = new GenLayerEdge(3L, var19, GenLayerEdge.Mode.SPECIAL);
+        var13 = new GenLayerZoom(2002L, var19);
         var13 = new GenLayerZoom(2003L, var13);
         var12 = new GenLayerAddIsland(4L, var13);
         GenLayerAddMushroomIsland var22 = new GenLayerAddMushroomIsland(5L, var12);
-        GenLayerDeepOcean var23 = new GenLayerDeepOcean(4L, var22);
-        GenLayer var24 = GenLayerZoom.magnify(1000L, var23, 0);
+        GenLayerDeepOcean var24 = new GenLayerDeepOcean(4L, var22);
+        GenLayer var23 = GenLayerZoom.magnify(1000L, var24, 0);
         byte var5 = 4;
 
         if (par2WorldType == WorldType.LARGE_BIOMES)
@@ -63,9 +63,9 @@ public abstract class GenLayer
             var5 = 4;
         }
 
-        GenLayer var6 = GenLayerZoom.magnify(1000L, var24, 0);
+        GenLayer var6 = GenLayerZoom.magnify(1000L, var23, 0);
         GenLayerRiverInit var15 = new GenLayerRiverInit(100L, var6);
-        Object var7 = new GenLayerBiome(200L, var24, par2WorldType);
+        Object var7 = new GenLayerBiome(200L, var23, par2WorldType);
 
         if (!var3)
         {
@@ -77,8 +77,8 @@ public abstract class GenLayer
         GenLayerHills var21 = new GenLayerHills(1000L, (GenLayer)var7, var8);
         var6 = GenLayerZoom.magnify(1000L, var15, 2);
         var6 = GenLayerZoom.magnify(1000L, var6, var5);
-        GenLayerRiver var19 = new GenLayerRiver(1L, var6);
-        GenLayerSmooth var20 = new GenLayerSmooth(1000L, var19);
+        GenLayerRiver var17 = new GenLayerRiver(1L, var6);
+        GenLayerSmooth var20 = new GenLayerSmooth(1000L, var17);
         var7 = new GenLayerRareBiome(1001L, var21);
 
         for (int var9 = 0; var9 < var5; ++var9)
diff --git a/net/minecraft/world/gen/layer/GenLayerEdge.java b/net/minecraft/world/gen/layer/GenLayerEdge.java
index f3dc681..c16b6de 100644
--- a/net/minecraft/world/gen/layer/GenLayerEdge.java
+++ b/net/minecraft/world/gen/layer/GenLayerEdge.java
@@ -131,18 +131,6 @@ public class GenLayerEdge extends GenLayer
         return var6;
     }
 
-    public static enum Mode
-    {
-        COOL_WARM("COOL_WARM", 0),
-        HEAT_ICE("HEAT_ICE", 1),
-        SPECIAL("SPECIAL", 2);
-
-        private static final GenLayerEdge.Mode[] $VALUES = new GenLayerEdge.Mode[]{COOL_WARM, HEAT_ICE, SPECIAL};
-        private static final String __OBFID = "CL_00000549";
-
-        private Mode(String p_i45473_1_, int p_i45473_2_) {}
-    }
-
     static final class SwitchMode
     {
         static final int[] field_151642_a = new int[GenLayerEdge.Mode.values().length];
@@ -178,4 +166,16 @@ public class GenLayerEdge extends GenLayer
             }
         }
     }
+
+    public static enum Mode
+    {
+        COOL_WARM("COOL_WARM", 0),
+        HEAT_ICE("HEAT_ICE", 1),
+        SPECIAL("SPECIAL", 2);
+
+        private static final GenLayerEdge.Mode[] $VALUES = new GenLayerEdge.Mode[]{COOL_WARM, HEAT_ICE, SPECIAL};
+        private static final String __OBFID = "CL_00000549";
+
+        private Mode(String p_i45473_1_, int p_i45473_2_) {}
+    }
 }
diff --git a/net/minecraft/world/gen/structure/ComponentScatteredFeaturePieces.java b/net/minecraft/world/gen/structure/ComponentScatteredFeaturePieces.java
index 10195c1..c62c935 100644
--- a/net/minecraft/world/gen/structure/ComponentScatteredFeaturePieces.java
+++ b/net/minecraft/world/gen/structure/ComponentScatteredFeaturePieces.java
@@ -22,6 +22,89 @@ public class ComponentScatteredFeaturePieces
         MapGenStructureIO.func_143031_a(ComponentScatteredFeaturePieces.SwampHut.class, "TeSH");
     }
 
+    abstract static class Feature extends StructureComponent
+    {
+        protected int scatteredFeatureSizeX;
+        protected int scatteredFeatureSizeY;
+        protected int scatteredFeatureSizeZ;
+        protected int field_74936_d = -1;
+        private static final String __OBFID = "CL_00000479";
+
+        public Feature() {}
+
+        protected Feature(Random par1Random, int par2, int par3, int par4, int par5, int par6, int par7)
+        {
+            super(0);
+            this.scatteredFeatureSizeX = par5;
+            this.scatteredFeatureSizeY = par6;
+            this.scatteredFeatureSizeZ = par7;
+            this.coordBaseMode = par1Random.nextInt(4);
+
+            switch (this.coordBaseMode)
+            {
+                case 0:
+                case 2:
+                    this.boundingBox = new StructureBoundingBox(par2, par3, par4, par2 + par5 - 1, par3 + par6 - 1, par4 + par7 - 1);
+                    break;
+
+                default:
+                    this.boundingBox = new StructureBoundingBox(par2, par3, par4, par2 + par7 - 1, par3 + par6 - 1, par4 + par5 - 1);
+            }
+        }
+
+        protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
+        {
+            par1NBTTagCompound.setInteger("Width", this.scatteredFeatureSizeX);
+            par1NBTTagCompound.setInteger("Height", this.scatteredFeatureSizeY);
+            par1NBTTagCompound.setInteger("Depth", this.scatteredFeatureSizeZ);
+            par1NBTTagCompound.setInteger("HPos", this.field_74936_d);
+        }
+
+        protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
+        {
+            this.scatteredFeatureSizeX = par1NBTTagCompound.getInteger("Width");
+            this.scatteredFeatureSizeY = par1NBTTagCompound.getInteger("Height");
+            this.scatteredFeatureSizeZ = par1NBTTagCompound.getInteger("Depth");
+            this.field_74936_d = par1NBTTagCompound.getInteger("HPos");
+        }
+
+        protected boolean func_74935_a(World par1World, StructureBoundingBox par2StructureBoundingBox, int par3)
+        {
+            if (this.field_74936_d >= 0)
+            {
+                return true;
+            }
+            else
+            {
+                int var4 = 0;
+                int var5 = 0;
+
+                for (int var6 = this.boundingBox.minZ; var6 <= this.boundingBox.maxZ; ++var6)
+                {
+                    for (int var7 = this.boundingBox.minX; var7 <= this.boundingBox.maxX; ++var7)
+                    {
+                        if (par2StructureBoundingBox.isVecInside(var7, 64, var6))
+                        {
+                            var4 += Math.max(par1World.getTopSolidOrLiquidBlock(var7, var6), par1World.provider.getAverageGroundLevel());
+                            ++var5;
+                        }
+                    }
+                }
+
+                if (var5 == 0)
+                {
+                    return false;
+                }
+                else
+                {
+                    this.field_74936_d = var4 / var5;
+                    this.boundingBox.offset(0, this.field_74936_d - this.boundingBox.minY + par3, 0);
+                    return true;
+                }
+            }
+        }
+    }
+
     public static class JunglePyramid extends ComponentScatteredFeaturePieces.Feature
     {
         private boolean field_74947_h;
@@ -280,6 +363,99 @@ public class ComponentScatteredFeaturePieces
         }
     }
 
+    public static class SwampHut extends ComponentScatteredFeaturePieces.Feature
+    {
+        private boolean hasWitch;
+        private static final String __OBFID = "CL_00000480";
+
+        public SwampHut() {}
+
+        public SwampHut(Random par1Random, int par2, int par3)
+        {
+            super(par1Random, par2, 64, par3, 7, 5, 9);
+        }
+
+        protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
+        {
+            super.func_143012_a(par1NBTTagCompound);
+            par1NBTTagCompound.setBoolean("Witch", this.hasWitch);
+        }
+
+        protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
+        {
+            super.func_143011_b(par1NBTTagCompound);
+            this.hasWitch = par1NBTTagCompound.getBoolean("Witch");
+        }
+
+        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
+        {
+            if (!this.func_74935_a(par1World, par3StructureBoundingBox, 0))
+            {
+                return false;
+            }
+            else
+            {
+                this.func_151556_a(par1World, par3StructureBoundingBox, 1, 1, 1, 5, 1, 7, Blocks.planks, 1, Blocks.planks, 1, false);
+                this.func_151556_a(par1World, par3StructureBoundingBox, 1, 4, 2, 5, 4, 7, Blocks.planks, 1, Blocks.planks, 1, false);
+                this.func_151556_a(par1World, par3StructureBoundingBox, 2, 1, 0, 4, 1, 0, Blocks.planks, 1, Blocks.planks, 1, false);
+                this.func_151556_a(par1World, par3StructureBoundingBox, 2, 2, 2, 3, 3, 2, Blocks.planks, 1, Blocks.planks, 1, false);
+                this.func_151556_a(par1World, par3StructureBoundingBox, 1, 2, 3, 1, 3, 6, Blocks.planks, 1, Blocks.planks, 1, false);
+                this.func_151556_a(par1World, par3StructureBoundingBox, 5, 2, 3, 5, 3, 6, Blocks.planks, 1, Blocks.planks, 1, false);
+                this.func_151556_a(par1World, par3StructureBoundingBox, 2, 2, 7, 4, 3, 7, Blocks.planks, 1, Blocks.planks, 1, false);
+                this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 2, 1, 3, 2, Blocks.log, Blocks.log, false);
+                this.func_151549_a(par1World, par3StructureBoundingBox, 5, 0, 2, 5, 3, 2, Blocks.log, Blocks.log, false);
+                this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 7, 1, 3, 7, Blocks.log, Blocks.log, false);
+                this.func_151549_a(par1World, par3StructureBoundingBox, 5, 0, 7, 5, 3, 7, Blocks.log, Blocks.log, false);
+                this.func_151550_a(par1World, Blocks.fence, 0, 2, 3, 2, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.fence, 0, 3, 3, 7, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.air, 0, 1, 3, 4, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.air, 0, 5, 3, 4, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.air, 0, 5, 3, 5, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.flower_pot, 7, 1, 3, 5, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.crafting_table, 0, 3, 2, 6, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.cauldron, 0, 4, 2, 6, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.fence, 0, 1, 2, 1, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.fence, 0, 5, 2, 1, par3StructureBoundingBox);
+                int var4 = this.func_151555_a(Blocks.oak_stairs, 3);
+                int var5 = this.func_151555_a(Blocks.oak_stairs, 1);
+                int var6 = this.func_151555_a(Blocks.oak_stairs, 0);
+                int var7 = this.func_151555_a(Blocks.oak_stairs, 2);
+                this.func_151556_a(par1World, par3StructureBoundingBox, 0, 4, 1, 6, 4, 1, Blocks.spruce_stairs, var4, Blocks.spruce_stairs, var4, false);
+                this.func_151556_a(par1World, par3StructureBoundingBox, 0, 4, 2, 0, 4, 7, Blocks.spruce_stairs, var6, Blocks.spruce_stairs, var6, false);
+                this.func_151556_a(par1World, par3StructureBoundingBox, 6, 4, 2, 6, 4, 7, Blocks.spruce_stairs, var5, Blocks.spruce_stairs, var5, false);
+                this.func_151556_a(par1World, par3StructureBoundingBox, 0, 4, 8, 6, 4, 8, Blocks.spruce_stairs, var7, Blocks.spruce_stairs, var7, false);
+                int var8;
+                int var9;
+
+                for (var8 = 2; var8 <= 7; var8 += 5)
+                {
+                    for (var9 = 1; var9 <= 5; var9 += 4)
+                    {
+                        this.func_151554_b(par1World, Blocks.log, 0, var9, -1, var8, par3StructureBoundingBox);
+                    }
+                }
+
+                if (!this.hasWitch)
+                {
+                    var8 = this.getXWithOffset(2, 5);
+                    var9 = this.getYWithOffset(2);
+                    int var10 = this.getZWithOffset(2, 5);
+
+                    if (par3StructureBoundingBox.isVecInside(var8, var9, var10))
+                    {
+                        this.hasWitch = true;
+                        EntityWitch var11 = new EntityWitch(par1World);
+                        var11.setLocationAndAngles((double)var8 + 0.5D, (double)var9, (double)var10 + 0.5D, 0.0F, 0.0F);
+                        var11.onSpawnWithEgg((IEntityLivingData)null);
+                        par1World.spawnEntityInWorld(var11);
+                    }
+                }
+
+                return true;
+            }
+        }
+    }
+
     public static class DesertPyramid extends ComponentScatteredFeaturePieces.Feature
     {
         private boolean[] field_74940_h = new boolean[4];
@@ -517,180 +693,4 @@ public class ComponentScatteredFeaturePieces
             return true;
         }
     }
-
-    public static class SwampHut extends ComponentScatteredFeaturePieces.Feature
-    {
-        private boolean hasWitch;
-        private static final String __OBFID = "CL_00000480";
-
-        public SwampHut() {}
-
-        public SwampHut(Random par1Random, int par2, int par3)
-        {
-            super(par1Random, par2, 64, par3, 7, 5, 9);
-        }
-
-        protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
-        {
-            super.func_143012_a(par1NBTTagCompound);
-            par1NBTTagCompound.setBoolean("Witch", this.hasWitch);
-        }
-
-        protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
-        {
-            super.func_143011_b(par1NBTTagCompound);
-            this.hasWitch = par1NBTTagCompound.getBoolean("Witch");
-        }
-
-        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
-        {
-            if (!this.func_74935_a(par1World, par3StructureBoundingBox, 0))
-            {
-                return false;
-            }
-            else
-            {
-                this.func_151556_a(par1World, par3StructureBoundingBox, 1, 1, 1, 5, 1, 7, Blocks.planks, 1, Blocks.planks, 1, false);
-                this.func_151556_a(par1World, par3StructureBoundingBox, 1, 4, 2, 5, 4, 7, Blocks.planks, 1, Blocks.planks, 1, false);
-                this.func_151556_a(par1World, par3StructureBoundingBox, 2, 1, 0, 4, 1, 0, Blocks.planks, 1, Blocks.planks, 1, false);
-                this.func_151556_a(par1World, par3StructureBoundingBox, 2, 2, 2, 3, 3, 2, Blocks.planks, 1, Blocks.planks, 1, false);
-                this.func_151556_a(par1World, par3StructureBoundingBox, 1, 2, 3, 1, 3, 6, Blocks.planks, 1, Blocks.planks, 1, false);
-                this.func_151556_a(par1World, par3StructureBoundingBox, 5, 2, 3, 5, 3, 6, Blocks.planks, 1, Blocks.planks, 1, false);
-                this.func_151556_a(par1World, par3StructureBoundingBox, 2, 2, 7, 4, 3, 7, Blocks.planks, 1, Blocks.planks, 1, false);
-                this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 2, 1, 3, 2, Blocks.log, Blocks.log, false);
-                this.func_151549_a(par1World, par3StructureBoundingBox, 5, 0, 2, 5, 3, 2, Blocks.log, Blocks.log, false);
-                this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 7, 1, 3, 7, Blocks.log, Blocks.log, false);
-                this.func_151549_a(par1World, par3StructureBoundingBox, 5, 0, 7, 5, 3, 7, Blocks.log, Blocks.log, false);
-                this.func_151550_a(par1World, Blocks.fence, 0, 2, 3, 2, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.fence, 0, 3, 3, 7, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.air, 0, 1, 3, 4, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.air, 0, 5, 3, 4, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.air, 0, 5, 3, 5, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.flower_pot, 7, 1, 3, 5, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.crafting_table, 0, 3, 2, 6, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.cauldron, 0, 4, 2, 6, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.fence, 0, 1, 2, 1, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.fence, 0, 5, 2, 1, par3StructureBoundingBox);
-                int var4 = this.func_151555_a(Blocks.oak_stairs, 3);
-                int var5 = this.func_151555_a(Blocks.oak_stairs, 1);
-                int var6 = this.func_151555_a(Blocks.oak_stairs, 0);
-                int var7 = this.func_151555_a(Blocks.oak_stairs, 2);
-                this.func_151556_a(par1World, par3StructureBoundingBox, 0, 4, 1, 6, 4, 1, Blocks.spruce_stairs, var4, Blocks.spruce_stairs, var4, false);
-                this.func_151556_a(par1World, par3StructureBoundingBox, 0, 4, 2, 0, 4, 7, Blocks.spruce_stairs, var6, Blocks.spruce_stairs, var6, false);
-                this.func_151556_a(par1World, par3StructureBoundingBox, 6, 4, 2, 6, 4, 7, Blocks.spruce_stairs, var5, Blocks.spruce_stairs, var5, false);
-                this.func_151556_a(par1World, par3StructureBoundingBox, 0, 4, 8, 6, 4, 8, Blocks.spruce_stairs, var7, Blocks.spruce_stairs, var7, false);
-                int var8;
-                int var9;
-
-                for (var8 = 2; var8 <= 7; var8 += 5)
-                {
-                    for (var9 = 1; var9 <= 5; var9 += 4)
-                    {
-                        this.func_151554_b(par1World, Blocks.log, 0, var9, -1, var8, par3StructureBoundingBox);
-                    }
-                }
-
-                if (!this.hasWitch)
-                {
-                    var8 = this.getXWithOffset(2, 5);
-                    var9 = this.getYWithOffset(2);
-                    int var10 = this.getZWithOffset(2, 5);
-
-                    if (par3StructureBoundingBox.isVecInside(var8, var9, var10))
-                    {
-                        this.hasWitch = true;
-                        EntityWitch var11 = new EntityWitch(par1World);
-                        var11.setLocationAndAngles((double)var8 + 0.5D, (double)var9, (double)var10 + 0.5D, 0.0F, 0.0F);
-                        var11.onSpawnWithEgg((IEntityLivingData)null);
-                        par1World.spawnEntityInWorld(var11);
-                    }
-                }
-
-                return true;
-            }
-        }
-    }
-
-    abstract static class Feature extends StructureComponent
-    {
-        protected int scatteredFeatureSizeX;
-        protected int scatteredFeatureSizeY;
-        protected int scatteredFeatureSizeZ;
-        protected int field_74936_d = -1;
-        private static final String __OBFID = "CL_00000479";
-
-        public Feature() {}
-
-        protected Feature(Random par1Random, int par2, int par3, int par4, int par5, int par6, int par7)
-        {
-            super(0);
-            this.scatteredFeatureSizeX = par5;
-            this.scatteredFeatureSizeY = par6;
-            this.scatteredFeatureSizeZ = par7;
-            this.coordBaseMode = par1Random.nextInt(4);
-
-            switch (this.coordBaseMode)
-            {
-                case 0:
-                case 2:
-                    this.boundingBox = new StructureBoundingBox(par2, par3, par4, par2 + par5 - 1, par3 + par6 - 1, par4 + par7 - 1);
-                    break;
-
-                default:
-                    this.boundingBox = new StructureBoundingBox(par2, par3, par4, par2 + par7 - 1, par3 + par6 - 1, par4 + par5 - 1);
-            }
-        }
-
-        protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
-        {
-            par1NBTTagCompound.setInteger("Width", this.scatteredFeatureSizeX);
-            par1NBTTagCompound.setInteger("Height", this.scatteredFeatureSizeY);
-            par1NBTTagCompound.setInteger("Depth", this.scatteredFeatureSizeZ);
-            par1NBTTagCompound.setInteger("HPos", this.field_74936_d);
-        }
-
-        protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
-        {
-            this.scatteredFeatureSizeX = par1NBTTagCompound.getInteger("Width");
-            this.scatteredFeatureSizeY = par1NBTTagCompound.getInteger("Height");
-            this.scatteredFeatureSizeZ = par1NBTTagCompound.getInteger("Depth");
-            this.field_74936_d = par1NBTTagCompound.getInteger("HPos");
-        }
-
-        protected boolean func_74935_a(World par1World, StructureBoundingBox par2StructureBoundingBox, int par3)
-        {
-            if (this.field_74936_d >= 0)
-            {
-                return true;
-            }
-            else
-            {
-                int var4 = 0;
-                int var5 = 0;
-
-                for (int var6 = this.boundingBox.minZ; var6 <= this.boundingBox.maxZ; ++var6)
-                {
-                    for (int var7 = this.boundingBox.minX; var7 <= this.boundingBox.maxX; ++var7)
-                    {
-                        if (par2StructureBoundingBox.isVecInside(var7, 64, var6))
-                        {
-                            var4 += Math.max(par1World.getTopSolidOrLiquidBlock(var7, var6), par1World.provider.getAverageGroundLevel());
-                            ++var5;
-                        }
-                    }
-                }
-
-                if (var5 == 0)
-                {
-                    return false;
-                }
-                else
-                {
-                    this.field_74936_d = var4 / var5;
-                    this.boundingBox.offset(0, this.field_74936_d - this.boundingBox.minY + par3, 0);
-                    return true;
-                }
-            }
-        }
-    }
 }
diff --git a/net/minecraft/world/gen/structure/MapGenScatteredFeature.java b/net/minecraft/world/gen/structure/MapGenScatteredFeature.java
index 7783080..e86d123 100644
--- a/net/minecraft/world/gen/structure/MapGenScatteredFeature.java
+++ b/net/minecraft/world/gen/structure/MapGenScatteredFeature.java
@@ -140,13 +140,13 @@ public class MapGenScatteredFeature extends MapGenStructure
             {
                 if (var5 == BiomeGenBase.swampland)
                 {
-                    ComponentScatteredFeaturePieces.SwampHut var7 = new ComponentScatteredFeaturePieces.SwampHut(par2Random, par3 * 16, par4 * 16);
-                    this.components.add(var7);
+                    ComponentScatteredFeaturePieces.SwampHut var8 = new ComponentScatteredFeaturePieces.SwampHut(par2Random, par3 * 16, par4 * 16);
+                    this.components.add(var8);
                 }
                 else
                 {
-                    ComponentScatteredFeaturePieces.DesertPyramid var8 = new ComponentScatteredFeaturePieces.DesertPyramid(par2Random, par3 * 16, par4 * 16);
-                    this.components.add(var8);
+                    ComponentScatteredFeaturePieces.DesertPyramid var7 = new ComponentScatteredFeaturePieces.DesertPyramid(par2Random, par3 * 16, par4 * 16);
+                    this.components.add(var7);
                 }
             }
             else
diff --git a/net/minecraft/world/gen/structure/MapGenStructure.java b/net/minecraft/world/gen/structure/MapGenStructure.java
index 919c899..4a8da44 100644
--- a/net/minecraft/world/gen/structure/MapGenStructure.java
+++ b/net/minecraft/world/gen/structure/MapGenStructure.java
@@ -179,10 +179,10 @@ public abstract class MapGenStructure extends MapGenBase
         ChunkPosition var15 = null;
         Iterator var16 = this.structureMap.values().iterator();
         ChunkPosition var19;
-        int var20;
         int var21;
-        int var22;
+        int var20;
         double var23;
+        int var22;
 
         while (var16.hasNext())
         {
diff --git a/net/minecraft/world/gen/structure/StructureMineshaftPieces.java b/net/minecraft/world/gen/structure/StructureMineshaftPieces.java
index 75b32d4..a843294 100644
--- a/net/minecraft/world/gen/structure/StructureMineshaftPieces.java
+++ b/net/minecraft/world/gen/structure/StructureMineshaftPieces.java
@@ -401,96 +401,6 @@ public class StructureMineshaftPieces
         }
     }
 
-    public static class Stairs extends StructureComponent
-    {
-        private static final String __OBFID = "CL_00000449";
-
-        public Stairs() {}
-
-        public Stairs(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
-        {
-            super(par1);
-            this.coordBaseMode = par4;
-            this.boundingBox = par3StructureBoundingBox;
-        }
-
-        protected void func_143012_a(NBTTagCompound par1NBTTagCompound) {}
-
-        protected void func_143011_b(NBTTagCompound par1NBTTagCompound) {}
-
-        public static StructureBoundingBox findValidPlacement(List par0List, Random par1Random, int par2, int par3, int par4, int par5)
-        {
-            StructureBoundingBox var6 = new StructureBoundingBox(par2, par3 - 5, par4, par2, par3 + 2, par4);
-
-            switch (par5)
-            {
-                case 0:
-                    var6.maxX = par2 + 2;
-                    var6.maxZ = par4 + 8;
-                    break;
-
-                case 1:
-                    var6.minX = par2 - 8;
-                    var6.maxZ = par4 + 2;
-                    break;
-
-                case 2:
-                    var6.maxX = par2 + 2;
-                    var6.minZ = par4 - 8;
-                    break;
-
-                case 3:
-                    var6.maxX = par2 + 8;
-                    var6.maxZ = par4 + 2;
-            }
-
-            return StructureComponent.findIntersecting(par0List, var6) != null ? null : var6;
-        }
-
-        public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
-        {
-            int var4 = this.getComponentType();
-
-            switch (this.coordBaseMode)
-            {
-                case 0:
-                    StructureMineshaftPieces.getNextMineShaftComponent(par1StructureComponent, par2List, par3Random, this.boundingBox.minX, this.boundingBox.minY, this.boundingBox.maxZ + 1, 0, var4);
-                    break;
-
-                case 1:
-                    StructureMineshaftPieces.getNextMineShaftComponent(par1StructureComponent, par2List, par3Random, this.boundingBox.minX - 1, this.boundingBox.minY, this.boundingBox.minZ, 1, var4);
-                    break;
-
-                case 2:
-                    StructureMineshaftPieces.getNextMineShaftComponent(par1StructureComponent, par2List, par3Random, this.boundingBox.minX, this.boundingBox.minY, this.boundingBox.minZ - 1, 2, var4);
-                    break;
-
-                case 3:
-                    StructureMineshaftPieces.getNextMineShaftComponent(par1StructureComponent, par2List, par3Random, this.boundingBox.maxX + 1, this.boundingBox.minY, this.boundingBox.minZ, 3, var4);
-            }
-        }
-
-        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
-        {
-            if (this.isLiquidInStructureBoundingBox(par1World, par3StructureBoundingBox))
-            {
-                return false;
-            }
-            else
-            {
-                this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 0, 2, 7, 1, Blocks.air, Blocks.air, false);
-                this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 7, 2, 2, 8, Blocks.air, Blocks.air, false);
-
-                for (int var4 = 0; var4 < 5; ++var4)
-                {
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5 - var4 - (var4 < 4 ? 1 : 0), 2 + var4, 2, 7 - var4, 2 + var4, Blocks.air, Blocks.air, false);
-                }
-
-                return true;
-            }
-        }
-    }
-
     public static class Corridor extends StructureComponent
     {
         private boolean hasRails;
@@ -820,4 +730,94 @@ public class StructureMineshaftPieces
             }
         }
     }
+
+    public static class Stairs extends StructureComponent
+    {
+        private static final String __OBFID = "CL_00000449";
+
+        public Stairs() {}
+
+        public Stairs(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
+        {
+            super(par1);
+            this.coordBaseMode = par4;
+            this.boundingBox = par3StructureBoundingBox;
+        }
+
+        protected void func_143012_a(NBTTagCompound par1NBTTagCompound) {}
+
+        protected void func_143011_b(NBTTagCompound par1NBTTagCompound) {}
+
+        public static StructureBoundingBox findValidPlacement(List par0List, Random par1Random, int par2, int par3, int par4, int par5)
+        {
+            StructureBoundingBox var6 = new StructureBoundingBox(par2, par3 - 5, par4, par2, par3 + 2, par4);
+
+            switch (par5)
+            {
+                case 0:
+                    var6.maxX = par2 + 2;
+                    var6.maxZ = par4 + 8;
+                    break;
+
+                case 1:
+                    var6.minX = par2 - 8;
+                    var6.maxZ = par4 + 2;
+                    break;
+
+                case 2:
+                    var6.maxX = par2 + 2;
+                    var6.minZ = par4 - 8;
+                    break;
+
+                case 3:
+                    var6.maxX = par2 + 8;
+                    var6.maxZ = par4 + 2;
+            }
+
+            return StructureComponent.findIntersecting(par0List, var6) != null ? null : var6;
+        }
+
+        public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
+        {
+            int var4 = this.getComponentType();
+
+            switch (this.coordBaseMode)
+            {
+                case 0:
+                    StructureMineshaftPieces.getNextMineShaftComponent(par1StructureComponent, par2List, par3Random, this.boundingBox.minX, this.boundingBox.minY, this.boundingBox.maxZ + 1, 0, var4);
+                    break;
+
+                case 1:
+                    StructureMineshaftPieces.getNextMineShaftComponent(par1StructureComponent, par2List, par3Random, this.boundingBox.minX - 1, this.boundingBox.minY, this.boundingBox.minZ, 1, var4);
+                    break;
+
+                case 2:
+                    StructureMineshaftPieces.getNextMineShaftComponent(par1StructureComponent, par2List, par3Random, this.boundingBox.minX, this.boundingBox.minY, this.boundingBox.minZ - 1, 2, var4);
+                    break;
+
+                case 3:
+                    StructureMineshaftPieces.getNextMineShaftComponent(par1StructureComponent, par2List, par3Random, this.boundingBox.maxX + 1, this.boundingBox.minY, this.boundingBox.minZ, 3, var4);
+            }
+        }
+
+        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
+        {
+            if (this.isLiquidInStructureBoundingBox(par1World, par3StructureBoundingBox))
+            {
+                return false;
+            }
+            else
+            {
+                this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 0, 2, 7, 1, Blocks.air, Blocks.air, false);
+                this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 7, 2, 2, 8, Blocks.air, Blocks.air, false);
+
+                for (int var4 = 0; var4 < 5; ++var4)
+                {
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5 - var4 - (var4 < 4 ? 1 : 0), 2 + var4, 2, 7 - var4, 2 + var4, Blocks.air, Blocks.air, false);
+                }
+
+                return true;
+            }
+        }
+    }
 }
diff --git a/net/minecraft/world/gen/structure/StructureNetherBridgePieces.java b/net/minecraft/world/gen/structure/StructureNetherBridgePieces.java
index 8ac043d..b821175 100644
--- a/net/minecraft/world/gen/structure/StructureNetherBridgePieces.java
+++ b/net/minecraft/world/gen/structure/StructureNetherBridgePieces.java
@@ -97,107 +97,90 @@ public class StructureNetherBridgePieces
         return (StructureNetherBridgePieces.Piece)var9;
     }
 
-    public static class Start extends StructureNetherBridgePieces.Crossing3
+    public static class Crossing3 extends StructureNetherBridgePieces.Piece
     {
-        public StructureNetherBridgePieces.PieceWeight theNetherBridgePieceWeight;
-        public List primaryWeights;
-        public List secondaryWeights;
-        public ArrayList field_74967_d = new ArrayList();
-        private static final String __OBFID = "CL_00000470";
-
-        public Start() {}
+        private static final String __OBFID = "CL_00000454";
 
-        public Start(Random par1Random, int par2, int par3)
-        {
-            super(par1Random, par2, par3);
-            this.primaryWeights = new ArrayList();
-            StructureNetherBridgePieces.PieceWeight[] var4 = StructureNetherBridgePieces.primaryComponents;
-            int var5 = var4.length;
-            int var6;
-            StructureNetherBridgePieces.PieceWeight var7;
+        public Crossing3() {}
 
-            for (var6 = 0; var6 < var5; ++var6)
+        public Crossing3(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
         {
-                var7 = var4[var6];
-                var7.field_78827_c = 0;
-                this.primaryWeights.add(var7);
+            super(par1);
+            this.coordBaseMode = par4;
+            this.boundingBox = par3StructureBoundingBox;
         }
 
-            this.secondaryWeights = new ArrayList();
-            var4 = StructureNetherBridgePieces.secondaryComponents;
-            var5 = var4.length;
+        protected Crossing3(Random par1Random, int par2, int par3)
+        {
+            super(0);
+            this.coordBaseMode = par1Random.nextInt(4);
 
-            for (var6 = 0; var6 < var5; ++var6)
+            switch (this.coordBaseMode)
             {
-                var7 = var4[var6];
-                var7.field_78827_c = 0;
-                this.secondaryWeights.add(var7);
+                case 0:
+                case 2:
+                    this.boundingBox = new StructureBoundingBox(par2, 64, par3, par2 + 19 - 1, 73, par3 + 19 - 1);
+                    break;
+
+                default:
+                    this.boundingBox = new StructureBoundingBox(par2, 64, par3, par2 + 19 - 1, 73, par3 + 19 - 1);
             }
         }
 
-        protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
+        public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
         {
-            super.func_143011_b(par1NBTTagCompound);
+            this.getNextComponentNormal((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 8, 3, false);
+            this.getNextComponentX((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 3, 8, false);
+            this.getNextComponentZ((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 3, 8, false);
         }
 
-        protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
+        public static StructureNetherBridgePieces.Crossing3 createValidComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
         {
-            super.func_143012_a(par1NBTTagCompound);
-        }
+            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -8, -3, 0, 19, 10, 19, par5);
+            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.Crossing3(par6, par1Random, var7, par5) : null;
         }
 
-    public static class Crossing extends StructureNetherBridgePieces.Piece
+        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
         {
-        private static final String __OBFID = "CL_00000468";
-
-        public Crossing() {}
+            this.func_151549_a(par1World, par3StructureBoundingBox, 7, 3, 0, 11, 4, 18, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 3, 7, 18, 4, 11, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 5, 0, 10, 7, 18, Blocks.air, Blocks.air, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 8, 18, 7, 10, Blocks.air, Blocks.air, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 7, 5, 0, 7, 5, 7, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 7, 5, 11, 7, 5, 18, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 11, 5, 0, 11, 5, 7, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 11, 5, 11, 11, 5, 18, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 7, 7, 5, 7, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 11, 5, 7, 18, 5, 7, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 11, 7, 5, 11, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 11, 5, 11, 18, 5, 11, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 7, 2, 0, 11, 2, 5, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 7, 2, 13, 11, 2, 18, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 7, 0, 0, 11, 1, 3, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 7, 0, 15, 11, 1, 18, Blocks.nether_brick, Blocks.nether_brick, false);
+            int var4;
+            int var5;
 
-        public Crossing(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
+            for (var4 = 7; var4 <= 11; ++var4)
             {
-            super(par1);
-            this.coordBaseMode = par4;
-            this.boundingBox = par3StructureBoundingBox;
-        }
-
-        public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
+                for (var5 = 0; var5 <= 2; ++var5)
                 {
-            this.getNextComponentNormal((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 2, 0, false);
-            this.getNextComponentX((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 0, 2, false);
-            this.getNextComponentZ((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 0, 2, false);
+                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var4, -1, var5, par3StructureBoundingBox);
+                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var4, -1, 18 - var5, par3StructureBoundingBox);
                 }
-
-        public static StructureNetherBridgePieces.Crossing createValidComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
-        {
-            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -2, 0, 0, 7, 9, 7, par5);
-            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.Crossing(par6, par1Random, var7, par5) : null;
             }
 
-        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
-        {
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 0, 6, 1, 6, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 6, 7, 6, Blocks.air, Blocks.air, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 1, 6, 0, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 6, 1, 6, 6, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 2, 0, 6, 6, 0, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 2, 6, 6, 6, 6, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 0, 6, 1, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 5, 0, 6, 6, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 2, 0, 6, 6, 1, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 2, 5, 6, 6, 6, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 6, 0, 4, 6, 0, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 5, 0, 4, 5, 0, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 6, 6, 4, 6, 6, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 5, 6, 4, 5, 6, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 6, 2, 0, 6, 4, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 2, 0, 5, 4, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 6, 2, 6, 6, 4, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 5, 2, 6, 5, 4, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 7, 5, 2, 11, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 13, 2, 7, 18, 2, 11, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 7, 3, 1, 11, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 15, 0, 7, 18, 1, 11, Blocks.nether_brick, Blocks.nether_brick, false);
 
-            for (int var4 = 0; var4 <= 6; ++var4)
+            for (var4 = 0; var4 <= 2; ++var4)
             {
-                for (int var5 = 0; var5 <= 6; ++var5)
+                for (var5 = 7; var5 <= 11; ++var5)
                 {
                     this.func_151554_b(par1World, Blocks.nether_brick, 0, var4, -1, var5, par3StructureBoundingBox);
+                    this.func_151554_b(par1World, Blocks.nether_brick, 0, 18 - var4, -1, var5, par3StructureBoundingBox);
                 }
             }
 
@@ -309,104 +292,13 @@ public class StructureNetherBridgePieces
         }
     }
 
-    public static class Crossing3 extends StructureNetherBridgePieces.Piece
-    {
-        private static final String __OBFID = "CL_00000454";
-
-        public Crossing3() {}
-
-        public Crossing3(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
-        {
-            super(par1);
-            this.coordBaseMode = par4;
-            this.boundingBox = par3StructureBoundingBox;
-        }
-
-        protected Crossing3(Random par1Random, int par2, int par3)
-        {
-            super(0);
-            this.coordBaseMode = par1Random.nextInt(4);
-
-            switch (this.coordBaseMode)
-            {
-                case 0:
-                case 2:
-                    this.boundingBox = new StructureBoundingBox(par2, 64, par3, par2 + 19 - 1, 73, par3 + 19 - 1);
-                    break;
-
-                default:
-                    this.boundingBox = new StructureBoundingBox(par2, 64, par3, par2 + 19 - 1, 73, par3 + 19 - 1);
-            }
-        }
-
-        public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
-        {
-            this.getNextComponentNormal((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 8, 3, false);
-            this.getNextComponentX((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 3, 8, false);
-            this.getNextComponentZ((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 3, 8, false);
-        }
-
-        public static StructureNetherBridgePieces.Crossing3 createValidComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
-        {
-            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -8, -3, 0, 19, 10, 19, par5);
-            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.Crossing3(par6, par1Random, var7, par5) : null;
-        }
-
-        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
-        {
-            this.func_151549_a(par1World, par3StructureBoundingBox, 7, 3, 0, 11, 4, 18, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 3, 7, 18, 4, 11, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 5, 0, 10, 7, 18, Blocks.air, Blocks.air, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 8, 18, 7, 10, Blocks.air, Blocks.air, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 7, 5, 0, 7, 5, 7, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 7, 5, 11, 7, 5, 18, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 11, 5, 0, 11, 5, 7, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 11, 5, 11, 11, 5, 18, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 7, 7, 5, 7, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 11, 5, 7, 18, 5, 7, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 11, 7, 5, 11, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 11, 5, 11, 18, 5, 11, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 7, 2, 0, 11, 2, 5, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 7, 2, 13, 11, 2, 18, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 7, 0, 0, 11, 1, 3, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 7, 0, 15, 11, 1, 18, Blocks.nether_brick, Blocks.nether_brick, false);
-            int var4;
-            int var5;
-
-            for (var4 = 7; var4 <= 11; ++var4)
-            {
-                for (var5 = 0; var5 <= 2; ++var5)
-                {
-                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var4, -1, var5, par3StructureBoundingBox);
-                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var4, -1, 18 - var5, par3StructureBoundingBox);
-                }
-            }
-
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 7, 5, 2, 11, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 13, 2, 7, 18, 2, 11, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 7, 3, 1, 11, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 15, 0, 7, 18, 1, 11, Blocks.nether_brick, Blocks.nether_brick, false);
-
-            for (var4 = 0; var4 <= 2; ++var4)
-            {
-                for (var5 = 7; var5 <= 11; ++var5)
-                {
-                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var4, -1, var5, par3StructureBoundingBox);
-                    this.func_151554_b(par1World, Blocks.nether_brick, 0, 18 - var4, -1, var5, par3StructureBoundingBox);
-                }
-            }
-
-            return true;
-        }
-    }
-
-    public static class NetherStalkRoom extends StructureNetherBridgePieces.Piece
+    public static class Entrance extends StructureNetherBridgePieces.Piece
     {
-        private static final String __OBFID = "CL_00000464";
+        private static final String __OBFID = "CL_00000459";
 
-        public NetherStalkRoom() {}
+        public Entrance() {}
 
-        public NetherStalkRoom(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
+        public Entrance(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
         {
             super(par1);
             this.coordBaseMode = par4;
@@ -416,13 +308,12 @@ public class StructureNetherBridgePieces
         public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
         {
             this.getNextComponentNormal((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 5, 3, true);
-            this.getNextComponentNormal((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 5, 11, true);
         }
 
-        public static StructureNetherBridgePieces.NetherStalkRoom createValidComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
+        public static StructureNetherBridgePieces.Entrance createValidComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
         {
             StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -5, -3, 0, 13, 14, 13, par5);
-            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.NetherStalkRoom(par6, par1Random, var7, par5) : null;
+            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.Entrance(par6, par1Random, var7, par5) : null;
         }
 
         public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
@@ -438,6 +329,7 @@ public class StructureNetherBridgePieces
             this.func_151549_a(par1World, par3StructureBoundingBox, 8, 5, 0, 10, 12, 1, Blocks.nether_brick, Blocks.nether_brick, false);
             this.func_151549_a(par1World, par3StructureBoundingBox, 5, 9, 0, 7, 12, 1, Blocks.nether_brick, Blocks.nether_brick, false);
             this.func_151549_a(par1World, par3StructureBoundingBox, 2, 11, 2, 10, 12, 10, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 8, 0, 7, 8, 0, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
             int var4;
 
             for (var4 = 1; var4 <= 11; var4 += 2)
@@ -467,86 +359,211 @@ public class StructureNetherBridgePieces
                 this.func_151549_a(par1World, par3StructureBoundingBox, 11, 7, var4, 11, 8, var4, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
             }
 
-            var4 = this.func_151555_a(Blocks.nether_brick_stairs, 3);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 2, 0, 8, 2, 12, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 4, 12, 2, 8, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 0, 0, 8, 1, 3, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 0, 9, 8, 1, 12, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 4, 3, 1, 8, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 9, 0, 4, 12, 1, 8, Blocks.nether_brick, Blocks.nether_brick, false);
             int var5;
-            int var6;
-            int var7;
 
-            for (var5 = 0; var5 <= 6; ++var5)
+            for (var4 = 4; var4 <= 8; ++var4)
             {
-                var6 = var5 + 4;
-
-                for (var7 = 5; var7 <= 7; ++var7)
+                for (var5 = 0; var5 <= 2; ++var5)
                 {
-                    this.func_151550_a(par1World, Blocks.nether_brick_stairs, var4, var7, 5 + var5, var6, par3StructureBoundingBox);
+                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var4, -1, var5, par3StructureBoundingBox);
+                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var4, -1, 12 - var5, par3StructureBoundingBox);
+                }
             }
 
-                if (var6 >= 5 && var6 <= 8)
+            for (var4 = 0; var4 <= 2; ++var4)
             {
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 5, 5, var6, 7, var5 + 4, var6, Blocks.nether_brick, Blocks.nether_brick, false);
+                for (var5 = 4; var5 <= 8; ++var5)
+                {
+                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var4, -1, var5, par3StructureBoundingBox);
+                    this.func_151554_b(par1World, Blocks.nether_brick, 0, 12 - var4, -1, var5, par3StructureBoundingBox);
                 }
-                else if (var6 >= 9 && var6 <= 10)
+            }
+
+            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 5, 5, 7, 5, 7, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 1, 6, 6, 4, 6, Blocks.air, Blocks.air, false);
+            this.func_151550_a(par1World, Blocks.nether_brick, 0, 6, 0, 6, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.flowing_lava, 0, 6, 5, 6, par3StructureBoundingBox);
+            var4 = this.getXWithOffset(6, 6);
+            var5 = this.getYWithOffset(5);
+            int var6 = this.getZWithOffset(6, 6);
+
+            if (par3StructureBoundingBox.isVecInside(var4, var5, var6))
             {
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 5, 8, var6, 7, var5 + 4, var6, Blocks.nether_brick, Blocks.nether_brick, false);
+                par1World.scheduledUpdatesAreImmediate = true;
+                Blocks.flowing_lava.updateTick(par1World, var4, var5, var6, par2Random);
+                par1World.scheduledUpdatesAreImmediate = false;
             }
 
-                if (var5 >= 1)
+            return true;
+        }
+    }
+
+    static class PieceWeight
     {
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 5, 6 + var5, var6, 7, 9 + var5, var6, Blocks.air, Blocks.air, false);
+        public Class weightClass;
+        public final int field_78826_b;
+        public int field_78827_c;
+        public int field_78824_d;
+        public boolean field_78825_e;
+        private static final String __OBFID = "CL_00000467";
+
+        public PieceWeight(Class par1Class, int par2, int par3, boolean par4)
+        {
+            this.weightClass = par1Class;
+            this.field_78826_b = par2;
+            this.field_78824_d = par3;
+            this.field_78825_e = par4;
         }
+
+        public PieceWeight(Class par1Class, int par2, int par3)
+        {
+            this(par1Class, par2, par3, false);
         }
 
-            for (var5 = 5; var5 <= 7; ++var5)
+        public boolean func_78822_a(int par1)
         {
-                this.func_151550_a(par1World, Blocks.nether_brick_stairs, var4, var5, 12, 11, par3StructureBoundingBox);
+            return this.field_78824_d == 0 || this.field_78827_c < this.field_78824_d;
         }
 
-            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 6, 7, 5, 7, 7, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 7, 6, 7, 7, 7, 7, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 13, 12, 7, 13, 12, Blocks.air, Blocks.air, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 5, 2, 3, 5, 3, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 5, 9, 3, 5, 10, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 5, 4, 2, 5, 8, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 9, 5, 2, 10, 5, 3, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 9, 5, 9, 10, 5, 10, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 10, 5, 4, 10, 5, 8, Blocks.nether_brick, Blocks.nether_brick, false);
-            var5 = this.func_151555_a(Blocks.nether_brick_stairs, 0);
-            var6 = this.func_151555_a(Blocks.nether_brick_stairs, 1);
-            this.func_151550_a(par1World, Blocks.nether_brick_stairs, var6, 4, 5, 2, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.nether_brick_stairs, var6, 4, 5, 3, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.nether_brick_stairs, var6, 4, 5, 9, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.nether_brick_stairs, var6, 4, 5, 10, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.nether_brick_stairs, var5, 8, 5, 2, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.nether_brick_stairs, var5, 8, 5, 3, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.nether_brick_stairs, var5, 8, 5, 9, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.nether_brick_stairs, var5, 8, 5, 10, par3StructureBoundingBox);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 3, 4, 4, 4, 4, 8, Blocks.soul_sand, Blocks.soul_sand, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 4, 4, 9, 4, 8, Blocks.soul_sand, Blocks.soul_sand, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 3, 5, 4, 4, 5, 8, Blocks.nether_wart, Blocks.nether_wart, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 5, 4, 9, 5, 8, Blocks.nether_wart, Blocks.nether_wart, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 2, 0, 8, 2, 12, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 4, 12, 2, 8, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 0, 0, 8, 1, 3, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 0, 9, 8, 1, 12, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 4, 3, 1, 8, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 9, 0, 4, 12, 1, 8, Blocks.nether_brick, Blocks.nether_brick, false);
-            int var8;
+        public boolean func_78823_a()
+        {
+            return this.field_78824_d == 0 || this.field_78827_c < this.field_78824_d;
+        }
+    }
 
-            for (var7 = 4; var7 <= 8; ++var7)
+    public static class Throne extends StructureNetherBridgePieces.Piece
     {
-                for (var8 = 0; var8 <= 2; ++var8)
+        private boolean hasSpawner;
+        private static final String __OBFID = "CL_00000465";
+
+        public Throne() {}
+
+        public Throne(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
         {
-                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var7, -1, var8, par3StructureBoundingBox);
-                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var7, -1, 12 - var8, par3StructureBoundingBox);
+            super(par1);
+            this.coordBaseMode = par4;
+            this.boundingBox = par3StructureBoundingBox;
         }
+
+        protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
+        {
+            super.func_143011_b(par1NBTTagCompound);
+            this.hasSpawner = par1NBTTagCompound.getBoolean("Mob");
         }
 
-            for (var7 = 0; var7 <= 2; ++var7)
+        protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
         {
-                for (var8 = 4; var8 <= 8; ++var8)
+            super.func_143012_a(par1NBTTagCompound);
+            par1NBTTagCompound.setBoolean("Mob", this.hasSpawner);
+        }
+
+        public static StructureNetherBridgePieces.Throne createValidComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
         {
-                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var7, -1, var8, par3StructureBoundingBox);
-                    this.func_151554_b(par1World, Blocks.nether_brick, 0, 12 - var7, -1, var8, par3StructureBoundingBox);
+            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -2, 0, 0, 7, 8, 9, par5);
+            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.Throne(par6, par1Random, var7, par5) : null;
+        }
+
+        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
+        {
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 6, 7, 7, Blocks.air, Blocks.air, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 0, 5, 1, 7, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 2, 1, 5, 2, 7, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 3, 2, 5, 3, 7, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 4, 3, 5, 4, 7, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 2, 0, 1, 4, 2, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 2, 0, 5, 4, 2, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 5, 2, 1, 5, 3, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 5, 2, 5, 5, 3, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 3, 0, 5, 8, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 5, 3, 6, 5, 8, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 5, 8, 5, 5, 8, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151550_a(par1World, Blocks.nether_brick_fence, 0, 1, 6, 3, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.nether_brick_fence, 0, 5, 6, 3, par3StructureBoundingBox);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 6, 3, 0, 6, 8, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 6, 3, 6, 6, 8, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 6, 8, 5, 7, 8, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 8, 8, 4, 8, 8, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            int var4;
+            int var5;
+
+            if (!this.hasSpawner)
+            {
+                var4 = this.getYWithOffset(5);
+                var5 = this.getXWithOffset(3, 5);
+                int var6 = this.getZWithOffset(3, 5);
+
+                if (par3StructureBoundingBox.isVecInside(var5, var4, var6))
+                {
+                    this.hasSpawner = true;
+                    par1World.setBlock(var5, var4, var6, Blocks.mob_spawner, 0, 2);
+                    TileEntityMobSpawner var7 = (TileEntityMobSpawner)par1World.getTileEntity(var5, var4, var6);
+
+                    if (var7 != null)
+                    {
+                        var7.func_145881_a().setMobID("Blaze");
+                    }
+                }
+            }
+
+            for (var4 = 0; var4 <= 6; ++var4)
+            {
+                for (var5 = 0; var5 <= 6; ++var5)
+                {
+                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var4, -1, var5, par3StructureBoundingBox);
+                }
+            }
+
+            return true;
+        }
+    }
+
+    public static class Corridor5 extends StructureNetherBridgePieces.Piece
+    {
+        private static final String __OBFID = "CL_00000462";
+
+        public Corridor5() {}
+
+        public Corridor5(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
+        {
+            super(par1);
+            this.coordBaseMode = par4;
+            this.boundingBox = par3StructureBoundingBox;
+        }
+
+        public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
+        {
+            this.getNextComponentNormal((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 1, 0, true);
+        }
+
+        public static StructureNetherBridgePieces.Corridor5 createValidComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
+        {
+            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -1, 0, 0, 5, 7, 5, par5);
+            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.Corridor5(par6, par1Random, var7, par5) : null;
+        }
+
+        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
+        {
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 0, 4, 1, 4, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 4, 5, 4, Blocks.air, Blocks.air, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 0, 5, 4, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 2, 0, 4, 5, 4, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 3, 1, 0, 4, 1, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 3, 3, 0, 4, 3, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 3, 1, 4, 4, 1, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 3, 3, 4, 4, 3, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 6, 0, 4, 6, 4, Blocks.nether_brick, Blocks.nether_brick, false);
+
+            for (int var4 = 0; var4 <= 4; ++var4)
+            {
+                for (int var5 = 0; var5 <= 4; ++var5)
+                {
+                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var4, -1, var5, par3StructureBoundingBox);
                 }
             }
 
@@ -730,174 +747,175 @@ public class StructureNetherBridgePieces
         }
     }
 
-    public static class End extends StructureNetherBridgePieces.Piece
+    public static class Start extends StructureNetherBridgePieces.Crossing3
     {
-        private int fillSeed;
-        private static final String __OBFID = "CL_00000455";
+        public StructureNetherBridgePieces.PieceWeight theNetherBridgePieceWeight;
+        public List primaryWeights;
+        public List secondaryWeights;
+        public ArrayList field_74967_d = new ArrayList();
+        private static final String __OBFID = "CL_00000470";
 
-        public End() {}
+        public Start() {}
 
-        public End(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
+        public Start(Random par1Random, int par2, int par3)
         {
-            super(par1);
-            this.coordBaseMode = par4;
-            this.boundingBox = par3StructureBoundingBox;
-            this.fillSeed = par2Random.nextInt();
+            super(par1Random, par2, par3);
+            this.primaryWeights = new ArrayList();
+            StructureNetherBridgePieces.PieceWeight[] var4 = StructureNetherBridgePieces.primaryComponents;
+            int var5 = var4.length;
+            int var6;
+            StructureNetherBridgePieces.PieceWeight var7;
+
+            for (var6 = 0; var6 < var5; ++var6)
+            {
+                var7 = var4[var6];
+                var7.field_78827_c = 0;
+                this.primaryWeights.add(var7);
             }
 
-        public static StructureNetherBridgePieces.End func_74971_a(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
+            this.secondaryWeights = new ArrayList();
+            var4 = StructureNetherBridgePieces.secondaryComponents;
+            var5 = var4.length;
+
+            for (var6 = 0; var6 < var5; ++var6)
             {
-            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -1, -3, 0, 5, 10, 8, par5);
-            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.End(par6, par1Random, var7, par5) : null;
+                var7 = var4[var6];
+                var7.field_78827_c = 0;
+                this.secondaryWeights.add(var7);
+            }
         }
 
         protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
         {
             super.func_143011_b(par1NBTTagCompound);
-            this.fillSeed = par1NBTTagCompound.getInteger("Seed");
         }
 
         protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
         {
             super.func_143012_a(par1NBTTagCompound);
-            par1NBTTagCompound.setInteger("Seed", this.fillSeed);
+        }
     }
 
-        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
-        {
-            Random var4 = new Random((long)this.fillSeed);
-            int var5;
-            int var6;
-            int var7;
-
-            for (var5 = 0; var5 <= 4; ++var5)
-            {
-                for (var6 = 3; var6 <= 4; ++var6)
+    public static class Stairs extends StructureNetherBridgePieces.Piece
     {
-                    var7 = var4.nextInt(8);
-                    this.func_151549_a(par1World, par3StructureBoundingBox, var5, var6, 0, var5, var6, var7, Blocks.nether_brick, Blocks.nether_brick, false);
-                }
-            }
+        private static final String __OBFID = "CL_00000469";
 
-            var5 = var4.nextInt(8);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 0, 0, 5, var5, Blocks.nether_brick, Blocks.nether_brick, false);
-            var5 = var4.nextInt(8);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 5, 0, 4, 5, var5, Blocks.nether_brick, Blocks.nether_brick, false);
+        public Stairs() {}
 
-            for (var5 = 0; var5 <= 4; ++var5)
+        public Stairs(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
         {
-                var6 = var4.nextInt(5);
-                this.func_151549_a(par1World, par3StructureBoundingBox, var5, 2, 0, var5, 2, var6, Blocks.nether_brick, Blocks.nether_brick, false);
+            super(par1);
+            this.coordBaseMode = par4;
+            this.boundingBox = par3StructureBoundingBox;
         }
 
-            for (var5 = 0; var5 <= 4; ++var5)
-            {
-                for (var6 = 0; var6 <= 1; ++var6)
+        public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
         {
-                    var7 = var4.nextInt(3);
-                    this.func_151549_a(par1World, par3StructureBoundingBox, var5, var6, 0, var5, var6, var7, Blocks.nether_brick, Blocks.nether_brick, false);
-                }
+            this.getNextComponentZ((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 6, 2, false);
         }
 
-            return true;
-        }
+        public static StructureNetherBridgePieces.Stairs createValidComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
+        {
+            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -2, 0, 0, 7, 11, 7, par5);
+            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.Stairs(par6, par1Random, var7, par5) : null;
         }
 
-    static class PieceWeight
+        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
         {
-        public Class weightClass;
-        public final int field_78826_b;
-        public int field_78827_c;
-        public int field_78824_d;
-        public boolean field_78825_e;
-        private static final String __OBFID = "CL_00000467";
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 0, 6, 1, 6, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 6, 10, 6, Blocks.air, Blocks.air, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 1, 8, 0, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 2, 0, 6, 8, 0, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 1, 0, 8, 6, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 2, 1, 6, 8, 6, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 2, 6, 5, 8, 6, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 3, 2, 0, 5, 4, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 3, 2, 6, 5, 2, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 3, 4, 6, 5, 4, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151550_a(par1World, Blocks.nether_brick, 0, 5, 2, 5, par3StructureBoundingBox);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 2, 5, 4, 3, 5, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 3, 2, 5, 3, 4, 5, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 2, 5, 2, 5, 5, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 2, 5, 1, 6, 5, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 7, 1, 5, 7, 4, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 8, 2, 6, 8, 4, Blocks.air, Blocks.air, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 6, 0, 4, 8, 0, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 5, 0, 4, 5, 0, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
 
-        public PieceWeight(Class par1Class, int par2, int par3, boolean par4)
+            for (int var4 = 0; var4 <= 6; ++var4)
             {
-            this.weightClass = par1Class;
-            this.field_78826_b = par2;
-            this.field_78824_d = par3;
-            this.field_78825_e = par4;
-        }
-
-        public PieceWeight(Class par1Class, int par2, int par3)
+                for (int var5 = 0; var5 <= 6; ++var5)
                 {
-            this(par1Class, par2, par3, false);
+                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var4, -1, var5, par3StructureBoundingBox);
                 }
-
-        public boolean func_78822_a(int par1)
-        {
-            return this.field_78824_d == 0 || this.field_78827_c < this.field_78824_d;
             }
 
-        public boolean func_78823_a()
-        {
-            return this.field_78824_d == 0 || this.field_78827_c < this.field_78824_d;
+            return true;
         }
     }
 
-    public static class Corridor extends StructureNetherBridgePieces.Piece
+    public static class Corridor2 extends StructureNetherBridgePieces.Piece
     {
-        private boolean field_111021_b;
-        private static final String __OBFID = "CL_00000461";
+        private boolean field_111020_b;
+        private static final String __OBFID = "CL_00000463";
 
-        public Corridor() {}
+        public Corridor2() {}
 
-        public Corridor(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
+        public Corridor2(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
         {
             super(par1);
             this.coordBaseMode = par4;
             this.boundingBox = par3StructureBoundingBox;
-            this.field_111021_b = par2Random.nextInt(3) == 0;
+            this.field_111020_b = par2Random.nextInt(3) == 0;
         }
 
         protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
         {
             super.func_143011_b(par1NBTTagCompound);
-            this.field_111021_b = par1NBTTagCompound.getBoolean("Chest");
+            this.field_111020_b = par1NBTTagCompound.getBoolean("Chest");
         }
 
         protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
         {
             super.func_143012_a(par1NBTTagCompound);
-            par1NBTTagCompound.setBoolean("Chest", this.field_111021_b);
+            par1NBTTagCompound.setBoolean("Chest", this.field_111020_b);
         }
 
         public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
         {
-            this.getNextComponentX((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 0, 1, true);
+            this.getNextComponentZ((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 0, 1, true);
         }
 
-        public static StructureNetherBridgePieces.Corridor createValidComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
+        public static StructureNetherBridgePieces.Corridor2 createValidComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
         {
             StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -1, 0, 0, 5, 7, 5, par5);
-            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.Corridor(par6, par1Random, var7, par5) : null;
+            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.Corridor2(par6, par1Random, var7, par5) : null;
         }
 
         public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
         {
             this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 0, 4, 1, 4, Blocks.nether_brick, Blocks.nether_brick, false);
             this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 4, 5, 4, Blocks.air, Blocks.air, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 2, 0, 4, 5, 4, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 3, 1, 4, 4, 1, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 3, 3, 4, 4, 3, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 0, 5, 0, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 4, 3, 5, 4, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 0, 5, 4, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 3, 1, 0, 4, 1, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 3, 3, 0, 4, 3, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 2, 0, 4, 5, 0, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 2, 4, 4, 5, 4, Blocks.nether_brick, Blocks.nether_brick, false);
             this.func_151549_a(par1World, par3StructureBoundingBox, 1, 3, 4, 1, 4, 4, Blocks.nether_brick_fence, Blocks.nether_brick, false);
             this.func_151549_a(par1World, par3StructureBoundingBox, 3, 3, 4, 3, 4, 4, Blocks.nether_brick_fence, Blocks.nether_brick, false);
             int var4;
             int var5;
 
-            if (this.field_111021_b)
+            if (this.field_111020_b)
             {
                 var4 = this.getYWithOffset(2);
-                var5 = this.getXWithOffset(3, 3);
-                int var6 = this.getZWithOffset(3, 3);
+                var5 = this.getXWithOffset(1, 3);
+                int var6 = this.getZWithOffset(1, 3);
 
                 if (par3StructureBoundingBox.isVecInside(var5, var4, var6))
                 {
-                    this.field_111021_b = false;
-                    this.generateStructureChestContents(par1World, par3StructureBoundingBox, par2Random, 3, 2, 3, field_111019_a, 2 + par2Random.nextInt(4));
+                    this.field_111020_b = false;
+                    this.generateStructureChestContents(par1World, par3StructureBoundingBox, par2Random, 1, 2, 3, field_111019_a, 2 + par2Random.nextInt(4));
                 }
             }
 
@@ -915,85 +933,62 @@ public class StructureNetherBridgePieces
         }
     }
 
-    public static class Throne extends StructureNetherBridgePieces.Piece
+    public static class Corridor3 extends StructureNetherBridgePieces.Piece
     {
-        private boolean hasSpawner;
-        private static final String __OBFID = "CL_00000465";
+        private static final String __OBFID = "CL_00000457";
 
-        public Throne() {}
+        public Corridor3() {}
 
-        public Throne(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
+        public Corridor3(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
         {
             super(par1);
             this.coordBaseMode = par4;
             this.boundingBox = par3StructureBoundingBox;
         }
 
-        protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
-        {
-            super.func_143011_b(par1NBTTagCompound);
-            this.hasSpawner = par1NBTTagCompound.getBoolean("Mob");
-        }
-
-        protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
+        public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
         {
-            super.func_143012_a(par1NBTTagCompound);
-            par1NBTTagCompound.setBoolean("Mob", this.hasSpawner);
+            this.getNextComponentNormal((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 1, 0, true);
         }
 
-        public static StructureNetherBridgePieces.Throne createValidComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
+        public static StructureNetherBridgePieces.Corridor3 createValidComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
         {
-            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -2, 0, 0, 7, 8, 9, par5);
-            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.Throne(par6, par1Random, var7, par5) : null;
+            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -1, -7, 0, 5, 14, 10, par5);
+            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.Corridor3(par6, par1Random, var7, par5) : null;
         }
 
         public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
         {
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 6, 7, 7, Blocks.air, Blocks.air, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 0, 5, 1, 7, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 2, 1, 5, 2, 7, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 3, 2, 5, 3, 7, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 4, 3, 5, 4, 7, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 2, 0, 1, 4, 2, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 2, 0, 5, 4, 2, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 5, 2, 1, 5, 3, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 5, 2, 5, 5, 3, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 3, 0, 5, 8, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 5, 3, 6, 5, 8, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 5, 8, 5, 5, 8, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151550_a(par1World, Blocks.nether_brick_fence, 0, 1, 6, 3, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.nether_brick_fence, 0, 5, 6, 3, par3StructureBoundingBox);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 6, 3, 0, 6, 8, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 6, 3, 6, 6, 8, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 6, 8, 5, 7, 8, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 8, 8, 4, 8, 8, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            int var4;
-            int var5;
+            int var4 = this.func_151555_a(Blocks.nether_brick_stairs, 2);
 
-            if (!this.hasSpawner)
+            for (int var5 = 0; var5 <= 9; ++var5)
             {
-                var4 = this.getYWithOffset(5);
-                var5 = this.getXWithOffset(3, 5);
-                int var6 = this.getZWithOffset(3, 5);
+                int var6 = Math.max(1, 7 - var5);
+                int var7 = Math.min(Math.max(var6 + 5, 14 - var5), 13);
+                int var8 = var5;
+                this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, var5, 4, var6, var5, Blocks.nether_brick, Blocks.nether_brick, false);
+                this.func_151549_a(par1World, par3StructureBoundingBox, 1, var6 + 1, var5, 3, var7 - 1, var5, Blocks.air, Blocks.air, false);
 
-                if (par3StructureBoundingBox.isVecInside(var5, var4, var6))
+                if (var5 <= 6)
                 {
-                    this.hasSpawner = true;
-                    par1World.setBlock(var5, var4, var6, Blocks.mob_spawner, 0, 2);
-                    TileEntityMobSpawner var7 = (TileEntityMobSpawner)par1World.getTileEntity(var5, var4, var6);
+                    this.func_151550_a(par1World, Blocks.nether_brick_stairs, var4, 1, var6 + 1, var5, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.nether_brick_stairs, var4, 2, var6 + 1, var5, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.nether_brick_stairs, var4, 3, var6 + 1, var5, par3StructureBoundingBox);
+                }
 
-                    if (var7 != null)
+                this.func_151549_a(par1World, par3StructureBoundingBox, 0, var7, var5, 4, var7, var5, Blocks.nether_brick, Blocks.nether_brick, false);
+                this.func_151549_a(par1World, par3StructureBoundingBox, 0, var6 + 1, var5, 0, var7 - 1, var5, Blocks.nether_brick, Blocks.nether_brick, false);
+                this.func_151549_a(par1World, par3StructureBoundingBox, 4, var6 + 1, var5, 4, var7 - 1, var5, Blocks.nether_brick, Blocks.nether_brick, false);
+
+                if ((var5 & 1) == 0)
                 {
-                        var7.func_145881_a().setMobID("Blaze");
-                    }
-                }
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 0, var6 + 2, var5, 0, var6 + 3, var5, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 4, var6 + 2, var5, 4, var6 + 3, var5, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
                 }
 
-            for (var4 = 0; var4 <= 6; ++var4)
-            {
-                for (var5 = 0; var5 <= 6; ++var5)
+                for (int var9 = 0; var9 <= 4; ++var9)
                 {
-                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var4, -1, var5, par3StructureBoundingBox);
+                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var9, -1, var8, par3StructureBoundingBox);
                 }
             }
 
@@ -1001,13 +996,13 @@ public class StructureNetherBridgePieces
         }
     }
 
-    public static class Entrance extends StructureNetherBridgePieces.Piece
+    public static class Corridor4 extends StructureNetherBridgePieces.Piece
     {
-        private static final String __OBFID = "CL_00000459";
+        private static final String __OBFID = "CL_00000458";
 
-        public Entrance() {}
+        public Corridor4() {}
 
-        public Entrance(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
+        public Corridor4(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
         {
             super(par1);
             this.coordBaseMode = par4;
@@ -1016,154 +1011,123 @@ public class StructureNetherBridgePieces
 
         public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
         {
-            this.getNextComponentNormal((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 5, 3, true);
-        }
+            byte var4 = 1;
 
-        public static StructureNetherBridgePieces.Entrance createValidComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
+            if (this.coordBaseMode == 1 || this.coordBaseMode == 2)
             {
-            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -5, -3, 0, 13, 14, 13, par5);
-            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.Entrance(par6, par1Random, var7, par5) : null;
+                var4 = 5;
             }
 
-        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
+            this.getNextComponentX((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 0, var4, par3Random.nextInt(8) > 0);
+            this.getNextComponentZ((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 0, var4, par3Random.nextInt(8) > 0);
+        }
+
+        public static StructureNetherBridgePieces.Corridor4 createValidComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
         {
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 3, 0, 12, 4, 12, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 0, 12, 13, 12, Blocks.air, Blocks.air, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 0, 1, 12, 12, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 11, 5, 0, 12, 12, 12, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 5, 11, 4, 12, 12, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 5, 11, 10, 12, 12, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 9, 11, 7, 12, 12, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 5, 0, 4, 12, 1, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 5, 0, 10, 12, 1, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 9, 0, 7, 12, 1, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 11, 2, 10, 12, 10, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 8, 0, 7, 8, 0, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            int var4;
+            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -3, 0, 0, 9, 7, 9, par5);
+            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.Corridor4(par6, par1Random, var7, par5) : null;
+        }
 
-            for (var4 = 1; var4 <= 11; var4 += 2)
+        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
         {
-                this.func_151549_a(par1World, par3StructureBoundingBox, var4, 10, 0, var4, 11, 0, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-                this.func_151549_a(par1World, par3StructureBoundingBox, var4, 10, 12, var4, 11, 12, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-                this.func_151549_a(par1World, par3StructureBoundingBox, 0, 10, var4, 0, 11, var4, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-                this.func_151549_a(par1World, par3StructureBoundingBox, 12, 10, var4, 12, 11, var4, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-                this.func_151550_a(par1World, Blocks.nether_brick, 0, var4, 13, 0, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.nether_brick, 0, var4, 13, 12, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.nether_brick, 0, 0, 13, var4, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.nether_brick, 0, 12, 13, var4, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.nether_brick_fence, 0, var4 + 1, 13, 0, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.nether_brick_fence, 0, var4 + 1, 13, 12, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.nether_brick_fence, 0, 0, 13, var4 + 1, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.nether_brick_fence, 0, 12, 13, var4 + 1, par3StructureBoundingBox);
-            }
-
-            this.func_151550_a(par1World, Blocks.nether_brick_fence, 0, 0, 13, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.nether_brick_fence, 0, 0, 13, 12, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.nether_brick_fence, 0, 0, 13, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.nether_brick_fence, 0, 12, 13, 0, par3StructureBoundingBox);
-
-            for (var4 = 3; var4 <= 9; var4 += 2)
-            {
-                this.func_151549_a(par1World, par3StructureBoundingBox, 1, 7, var4, 1, 8, var4, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-                this.func_151549_a(par1World, par3StructureBoundingBox, 11, 7, var4, 11, 8, var4, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            }
-
-            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 2, 0, 8, 2, 12, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 4, 12, 2, 8, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 0, 0, 8, 1, 3, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 0, 9, 8, 1, 12, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 4, 3, 1, 8, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 9, 0, 4, 12, 1, 8, Blocks.nether_brick, Blocks.nether_brick, false);
-            int var5;
-
-            for (var4 = 4; var4 <= 8; ++var4)
-            {
-                for (var5 = 0; var5 <= 2; ++var5)
-                {
-                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var4, -1, var5, par3StructureBoundingBox);
-                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var4, -1, 12 - var5, par3StructureBoundingBox);
-                }
-            }
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 0, 8, 1, 8, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 8, 5, 8, Blocks.air, Blocks.air, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 6, 0, 8, 6, 5, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 2, 5, 0, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 2, 0, 8, 5, 0, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 3, 0, 1, 4, 0, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 7, 3, 0, 7, 4, 0, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 4, 8, 2, 8, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 1, 4, 2, 2, 4, Blocks.air, Blocks.air, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 1, 4, 7, 2, 4, Blocks.air, Blocks.air, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 3, 8, 8, 3, 8, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 3, 6, 0, 3, 7, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 3, 6, 8, 3, 7, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 3, 4, 0, 5, 5, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 3, 4, 8, 5, 5, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 3, 5, 2, 5, 5, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 3, 5, 7, 5, 5, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 4, 5, 1, 5, 5, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 7, 4, 5, 7, 5, 5, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
 
-            for (var4 = 0; var4 <= 2; ++var4)
+            for (int var4 = 0; var4 <= 5; ++var4)
             {
-                for (var5 = 4; var5 <= 8; ++var5)
+                for (int var5 = 0; var5 <= 8; ++var5)
                 {
-                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var4, -1, var5, par3StructureBoundingBox);
-                    this.func_151554_b(par1World, Blocks.nether_brick, 0, 12 - var4, -1, var5, par3StructureBoundingBox);
+                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var5, -1, var4, par3StructureBoundingBox);
                 }
             }
 
-            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 5, 5, 7, 5, 7, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 1, 6, 6, 4, 6, Blocks.air, Blocks.air, false);
-            this.func_151550_a(par1World, Blocks.nether_brick, 0, 6, 0, 6, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.flowing_lava, 0, 6, 5, 6, par3StructureBoundingBox);
-            var4 = this.getXWithOffset(6, 6);
-            var5 = this.getYWithOffset(5);
-            int var6 = this.getZWithOffset(6, 6);
-
-            if (par3StructureBoundingBox.isVecInside(var4, var5, var6))
-            {
-                par1World.scheduledUpdatesAreImmediate = true;
-                Blocks.flowing_lava.updateTick(par1World, var4, var5, var6, par2Random);
-                par1World.scheduledUpdatesAreImmediate = false;
-            }
-
             return true;
         }
     }
 
-    public static class Stairs extends StructureNetherBridgePieces.Piece
+    public static class End extends StructureNetherBridgePieces.Piece
     {
-        private static final String __OBFID = "CL_00000469";
+        private int fillSeed;
+        private static final String __OBFID = "CL_00000455";
 
-        public Stairs() {}
+        public End() {}
 
-        public Stairs(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
+        public End(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
         {
             super(par1);
             this.coordBaseMode = par4;
             this.boundingBox = par3StructureBoundingBox;
+            this.fillSeed = par2Random.nextInt();
         }
 
-        public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
+        public static StructureNetherBridgePieces.End func_74971_a(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
         {
-            this.getNextComponentZ((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 6, 2, false);
+            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -1, -3, 0, 5, 10, 8, par5);
+            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.End(par6, par1Random, var7, par5) : null;
         }
 
-        public static StructureNetherBridgePieces.Stairs createValidComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
+        protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
         {
-            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -2, 0, 0, 7, 11, 7, par5);
-            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.Stairs(par6, par1Random, var7, par5) : null;
+            super.func_143011_b(par1NBTTagCompound);
+            this.fillSeed = par1NBTTagCompound.getInteger("Seed");
+        }
+
+        protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
+        {
+            super.func_143012_a(par1NBTTagCompound);
+            par1NBTTagCompound.setInteger("Seed", this.fillSeed);
         }
 
         public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
         {
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 0, 6, 1, 6, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 6, 10, 6, Blocks.air, Blocks.air, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 1, 8, 0, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 2, 0, 6, 8, 0, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 1, 0, 8, 6, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 2, 1, 6, 8, 6, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 2, 6, 5, 8, 6, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 3, 2, 0, 5, 4, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 3, 2, 6, 5, 2, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 3, 4, 6, 5, 4, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            this.func_151550_a(par1World, Blocks.nether_brick, 0, 5, 2, 5, par3StructureBoundingBox);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 2, 5, 4, 3, 5, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 3, 2, 5, 3, 4, 5, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 2, 5, 2, 5, 5, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 2, 5, 1, 6, 5, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 7, 1, 5, 7, 4, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 8, 2, 6, 8, 4, Blocks.air, Blocks.air, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 6, 0, 4, 8, 0, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 5, 0, 4, 5, 0, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            Random var4 = new Random((long)this.fillSeed);
+            int var5;
+            int var6;
+            int var7;
 
-            for (int var4 = 0; var4 <= 6; ++var4)
+            for (var5 = 0; var5 <= 4; ++var5)
             {
-                for (int var5 = 0; var5 <= 6; ++var5)
+                for (var6 = 3; var6 <= 4; ++var6)
                 {
-                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var4, -1, var5, par3StructureBoundingBox);
+                    var7 = var4.nextInt(8);
+                    this.func_151549_a(par1World, par3StructureBoundingBox, var5, var6, 0, var5, var6, var7, Blocks.nether_brick, Blocks.nether_brick, false);
+                }
+            }
+
+            var5 = var4.nextInt(8);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 0, 0, 5, var5, Blocks.nether_brick, Blocks.nether_brick, false);
+            var5 = var4.nextInt(8);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 5, 0, 4, 5, var5, Blocks.nether_brick, Blocks.nether_brick, false);
+
+            for (var5 = 0; var5 <= 4; ++var5)
+            {
+                var6 = var4.nextInt(5);
+                this.func_151549_a(par1World, par3StructureBoundingBox, var5, 2, 0, var5, 2, var6, Blocks.nether_brick, Blocks.nether_brick, false);
+            }
+
+            for (var5 = 0; var5 <= 4; ++var5)
+            {
+                for (var6 = 0; var6 <= 1; ++var6)
+                {
+                    var7 = var4.nextInt(3);
+                    this.func_151549_a(par1World, par3StructureBoundingBox, var5, var6, 0, var5, var6, var7, Blocks.nether_brick, Blocks.nether_brick, false);
                 }
             }
 
@@ -1171,141 +1135,153 @@ public class StructureNetherBridgePieces
         }
     }
 
-    public static class Corridor2 extends StructureNetherBridgePieces.Piece
+    public static class NetherStalkRoom extends StructureNetherBridgePieces.Piece
     {
-        private boolean field_111020_b;
-        private static final String __OBFID = "CL_00000463";
+        private static final String __OBFID = "CL_00000464";
 
-        public Corridor2() {}
+        public NetherStalkRoom() {}
 
-        public Corridor2(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
+        public NetherStalkRoom(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
         {
             super(par1);
             this.coordBaseMode = par4;
             this.boundingBox = par3StructureBoundingBox;
-            this.field_111020_b = par2Random.nextInt(3) == 0;
-        }
-
-        protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
-        {
-            super.func_143011_b(par1NBTTagCompound);
-            this.field_111020_b = par1NBTTagCompound.getBoolean("Chest");
-        }
-
-        protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
-        {
-            super.func_143012_a(par1NBTTagCompound);
-            par1NBTTagCompound.setBoolean("Chest", this.field_111020_b);
         }
 
         public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
         {
-            this.getNextComponentZ((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 0, 1, true);
+            this.getNextComponentNormal((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 5, 3, true);
+            this.getNextComponentNormal((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 5, 11, true);
         }
 
-        public static StructureNetherBridgePieces.Corridor2 createValidComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
+        public static StructureNetherBridgePieces.NetherStalkRoom createValidComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
         {
-            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -1, 0, 0, 5, 7, 5, par5);
-            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.Corridor2(par6, par1Random, var7, par5) : null;
+            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -5, -3, 0, 13, 14, 13, par5);
+            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.NetherStalkRoom(par6, par1Random, var7, par5) : null;
         }
 
         public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
         {
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 0, 4, 1, 4, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 4, 5, 4, Blocks.air, Blocks.air, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 0, 5, 4, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 3, 1, 0, 4, 1, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 3, 3, 0, 4, 3, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 2, 0, 4, 5, 0, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 2, 4, 4, 5, 4, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 3, 4, 1, 4, 4, Blocks.nether_brick_fence, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 3, 3, 4, 3, 4, 4, Blocks.nether_brick_fence, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 3, 0, 12, 4, 12, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 0, 12, 13, 12, Blocks.air, Blocks.air, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 0, 1, 12, 12, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 11, 5, 0, 12, 12, 12, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 5, 11, 4, 12, 12, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 5, 11, 10, 12, 12, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 9, 11, 7, 12, 12, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 5, 0, 4, 12, 1, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 5, 0, 10, 12, 1, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 9, 0, 7, 12, 1, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 11, 2, 10, 12, 10, Blocks.nether_brick, Blocks.nether_brick, false);
             int var4;
-            int var5;
 
-            if (this.field_111020_b)
-            {
-                var4 = this.getYWithOffset(2);
-                var5 = this.getXWithOffset(1, 3);
-                int var6 = this.getZWithOffset(1, 3);
-
-                if (par3StructureBoundingBox.isVecInside(var5, var4, var6))
+            for (var4 = 1; var4 <= 11; var4 += 2)
             {
-                    this.field_111020_b = false;
-                    this.generateStructureChestContents(par1World, par3StructureBoundingBox, par2Random, 1, 2, 3, field_111019_a, 2 + par2Random.nextInt(4));
-                }
+                this.func_151549_a(par1World, par3StructureBoundingBox, var4, 10, 0, var4, 11, 0, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+                this.func_151549_a(par1World, par3StructureBoundingBox, var4, 10, 12, var4, 11, 12, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+                this.func_151549_a(par1World, par3StructureBoundingBox, 0, 10, var4, 0, 11, var4, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+                this.func_151549_a(par1World, par3StructureBoundingBox, 12, 10, var4, 12, 11, var4, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+                this.func_151550_a(par1World, Blocks.nether_brick, 0, var4, 13, 0, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.nether_brick, 0, var4, 13, 12, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.nether_brick, 0, 0, 13, var4, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.nether_brick, 0, 12, 13, var4, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.nether_brick_fence, 0, var4 + 1, 13, 0, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.nether_brick_fence, 0, var4 + 1, 13, 12, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.nether_brick_fence, 0, 0, 13, var4 + 1, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.nether_brick_fence, 0, 12, 13, var4 + 1, par3StructureBoundingBox);
             }
 
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 6, 0, 4, 6, 4, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151550_a(par1World, Blocks.nether_brick_fence, 0, 0, 13, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.nether_brick_fence, 0, 0, 13, 12, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.nether_brick_fence, 0, 0, 13, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.nether_brick_fence, 0, 12, 13, 0, par3StructureBoundingBox);
 
-            for (var4 = 0; var4 <= 4; ++var4)
-            {
-                for (var5 = 0; var5 <= 4; ++var5)
+            for (var4 = 3; var4 <= 9; var4 += 2)
             {
-                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var4, -1, var5, par3StructureBoundingBox);
-                }
+                this.func_151549_a(par1World, par3StructureBoundingBox, 1, 7, var4, 1, 8, var4, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+                this.func_151549_a(par1World, par3StructureBoundingBox, 11, 7, var4, 11, 8, var4, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
             }
 
-            return true;
-        }
-    }
+            var4 = this.func_151555_a(Blocks.nether_brick_stairs, 3);
+            int var5;
+            int var6;
+            int var7;
 
-    public static class Corridor3 extends StructureNetherBridgePieces.Piece
+            for (var5 = 0; var5 <= 6; ++var5)
             {
-        private static final String __OBFID = "CL_00000457";
-
-        public Corridor3() {}
+                var6 = var5 + 4;
 
-        public Corridor3(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
+                for (var7 = 5; var7 <= 7; ++var7)
                 {
-            super(par1);
-            this.coordBaseMode = par4;
-            this.boundingBox = par3StructureBoundingBox;
+                    this.func_151550_a(par1World, Blocks.nether_brick_stairs, var4, var7, 5 + var5, var6, par3StructureBoundingBox);
                 }
 
-        public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
+                if (var6 >= 5 && var6 <= 8)
                 {
-            this.getNextComponentNormal((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 1, 0, true);
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 5, 5, var6, 7, var5 + 4, var6, Blocks.nether_brick, Blocks.nether_brick, false);
                 }
-
-        public static StructureNetherBridgePieces.Corridor3 createValidComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
+                else if (var6 >= 9 && var6 <= 10)
                 {
-            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -1, -7, 0, 5, 14, 10, par5);
-            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.Corridor3(par6, par1Random, var7, par5) : null;
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 5, 8, var6, 7, var5 + 4, var6, Blocks.nether_brick, Blocks.nether_brick, false);
                 }
 
-        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
-        {
-            int var4 = this.func_151555_a(Blocks.nether_brick_stairs, 2);
-
-            for (int var5 = 0; var5 <= 9; ++var5)
+                if (var5 >= 1)
                 {
-                int var6 = Math.max(1, 7 - var5);
-                int var7 = Math.min(Math.max(var6 + 5, 14 - var5), 13);
-                int var8 = var5;
-                this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, var5, 4, var6, var5, Blocks.nether_brick, Blocks.nether_brick, false);
-                this.func_151549_a(par1World, par3StructureBoundingBox, 1, var6 + 1, var5, 3, var7 - 1, var5, Blocks.air, Blocks.air, false);
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 5, 6 + var5, var6, 7, 9 + var5, var6, Blocks.air, Blocks.air, false);
+                }
+            }
 
-                if (var5 <= 6)
+            for (var5 = 5; var5 <= 7; ++var5)
             {
-                    this.func_151550_a(par1World, Blocks.nether_brick_stairs, var4, 1, var6 + 1, var5, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.nether_brick_stairs, var4, 2, var6 + 1, var5, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.nether_brick_stairs, var4, 3, var6 + 1, var5, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.nether_brick_stairs, var4, var5, 12, 11, par3StructureBoundingBox);
             }
 
-                this.func_151549_a(par1World, par3StructureBoundingBox, 0, var7, var5, 4, var7, var5, Blocks.nether_brick, Blocks.nether_brick, false);
-                this.func_151549_a(par1World, par3StructureBoundingBox, 0, var6 + 1, var5, 0, var7 - 1, var5, Blocks.nether_brick, Blocks.nether_brick, false);
-                this.func_151549_a(par1World, par3StructureBoundingBox, 4, var6 + 1, var5, 4, var7 - 1, var5, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 6, 7, 5, 7, 7, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 7, 6, 7, 7, 7, 7, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 13, 12, 7, 13, 12, Blocks.air, Blocks.air, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 5, 2, 3, 5, 3, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 5, 9, 3, 5, 10, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 5, 4, 2, 5, 8, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 9, 5, 2, 10, 5, 3, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 9, 5, 9, 10, 5, 10, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 10, 5, 4, 10, 5, 8, Blocks.nether_brick, Blocks.nether_brick, false);
+            var5 = this.func_151555_a(Blocks.nether_brick_stairs, 0);
+            var6 = this.func_151555_a(Blocks.nether_brick_stairs, 1);
+            this.func_151550_a(par1World, Blocks.nether_brick_stairs, var6, 4, 5, 2, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.nether_brick_stairs, var6, 4, 5, 3, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.nether_brick_stairs, var6, 4, 5, 9, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.nether_brick_stairs, var6, 4, 5, 10, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.nether_brick_stairs, var5, 8, 5, 2, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.nether_brick_stairs, var5, 8, 5, 3, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.nether_brick_stairs, var5, 8, 5, 9, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.nether_brick_stairs, var5, 8, 5, 10, par3StructureBoundingBox);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 3, 4, 4, 4, 4, 8, Blocks.soul_sand, Blocks.soul_sand, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 4, 4, 9, 4, 8, Blocks.soul_sand, Blocks.soul_sand, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 3, 5, 4, 4, 5, 8, Blocks.nether_wart, Blocks.nether_wart, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 5, 4, 9, 5, 8, Blocks.nether_wart, Blocks.nether_wart, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 2, 0, 8, 2, 12, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 4, 12, 2, 8, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 0, 0, 8, 1, 3, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 0, 9, 8, 1, 12, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 4, 3, 1, 8, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 9, 0, 4, 12, 1, 8, Blocks.nether_brick, Blocks.nether_brick, false);
+            int var8;
 
-                if ((var5 & 1) == 0)
+            for (var7 = 4; var7 <= 8; ++var7)
             {
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 0, var6 + 2, var5, 0, var6 + 3, var5, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 4, var6 + 2, var5, 4, var6 + 3, var5, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+                for (var8 = 0; var8 <= 2; ++var8)
+                {
+                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var7, -1, var8, par3StructureBoundingBox);
+                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var7, -1, 12 - var8, par3StructureBoundingBox);
+                }
             }
 
-                for (int var9 = 0; var9 <= 4; ++var9)
+            for (var7 = 0; var7 <= 2; ++var7)
             {
-                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var9, -1, var8, par3StructureBoundingBox);
+                for (var8 = 4; var8 <= 8; ++var8)
+                {
+                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var7, -1, var8, par3StructureBoundingBox);
+                    this.func_151554_b(par1World, Blocks.nether_brick, 0, 12 - var7, -1, var8, par3StructureBoundingBox);
                 }
             }
 
@@ -1313,13 +1289,13 @@ public class StructureNetherBridgePieces
         }
     }
 
-    public static class Corridor4 extends StructureNetherBridgePieces.Piece
+    public static class Crossing extends StructureNetherBridgePieces.Piece
     {
-        private static final String __OBFID = "CL_00000458";
+        private static final String __OBFID = "CL_00000468";
 
-        public Corridor4() {}
+        public Crossing() {}
 
-        public Corridor4(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
+        public Crossing(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
         {
             super(par1);
             this.coordBaseMode = par4;
@@ -1328,50 +1304,43 @@ public class StructureNetherBridgePieces
 
         public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
         {
-            byte var4 = 1;
-
-            if (this.coordBaseMode == 1 || this.coordBaseMode == 2)
-            {
-                var4 = 5;
-            }
-
-            this.getNextComponentX((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 0, var4, par3Random.nextInt(8) > 0);
-            this.getNextComponentZ((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 0, var4, par3Random.nextInt(8) > 0);
+            this.getNextComponentNormal((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 2, 0, false);
+            this.getNextComponentX((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 0, 2, false);
+            this.getNextComponentZ((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 0, 2, false);
         }
 
-        public static StructureNetherBridgePieces.Corridor4 createValidComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
+        public static StructureNetherBridgePieces.Crossing createValidComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
         {
-            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -3, 0, 0, 9, 7, 9, par5);
-            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.Corridor4(par6, par1Random, var7, par5) : null;
+            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -2, 0, 0, 7, 9, 7, par5);
+            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.Crossing(par6, par1Random, var7, par5) : null;
         }
 
         public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
         {
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 0, 8, 1, 8, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 8, 5, 8, Blocks.air, Blocks.air, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 6, 0, 8, 6, 5, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 2, 5, 0, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 2, 0, 8, 5, 0, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 3, 0, 1, 4, 0, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 7, 3, 0, 7, 4, 0, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 4, 8, 2, 8, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 1, 4, 2, 2, 4, Blocks.air, Blocks.air, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 1, 4, 7, 2, 4, Blocks.air, Blocks.air, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 3, 8, 8, 3, 8, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 3, 6, 0, 3, 7, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 3, 6, 8, 3, 7, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 3, 4, 0, 5, 5, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 3, 4, 8, 5, 5, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 3, 5, 2, 5, 5, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 3, 5, 7, 5, 5, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 4, 5, 1, 5, 5, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 7, 4, 5, 7, 5, 5, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 0, 6, 1, 6, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 6, 7, 6, Blocks.air, Blocks.air, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 1, 6, 0, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 6, 1, 6, 6, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 2, 0, 6, 6, 0, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 2, 6, 6, 6, 6, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 0, 6, 1, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 5, 0, 6, 6, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 2, 0, 6, 6, 1, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 2, 5, 6, 6, 6, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 6, 0, 4, 6, 0, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 5, 0, 4, 5, 0, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 6, 6, 4, 6, 6, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 5, 6, 4, 5, 6, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 6, 2, 0, 6, 4, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 2, 0, 5, 4, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 6, 2, 6, 6, 4, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 5, 2, 6, 5, 4, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
 
-            for (int var4 = 0; var4 <= 5; ++var4)
+            for (int var4 = 0; var4 <= 6; ++var4)
             {
-                for (int var5 = 0; var5 <= 8; ++var5)
+                for (int var5 = 0; var5 <= 6; ++var5)
                 {
-                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var5, -1, var4, par3StructureBoundingBox);
+                    this.func_151554_b(par1World, Blocks.nether_brick, 0, var4, -1, var5, par3StructureBoundingBox);
                 }
             }
 
@@ -1379,45 +1348,76 @@ public class StructureNetherBridgePieces
         }
     }
 
-    public static class Corridor5 extends StructureNetherBridgePieces.Piece
+    public static class Corridor extends StructureNetherBridgePieces.Piece
     {
-        private static final String __OBFID = "CL_00000462";
+        private boolean field_111021_b;
+        private static final String __OBFID = "CL_00000461";
 
-        public Corridor5() {}
+        public Corridor() {}
 
-        public Corridor5(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
+        public Corridor(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
         {
             super(par1);
             this.coordBaseMode = par4;
             this.boundingBox = par3StructureBoundingBox;
+            this.field_111021_b = par2Random.nextInt(3) == 0;
+        }
+
+        protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
+        {
+            super.func_143011_b(par1NBTTagCompound);
+            this.field_111021_b = par1NBTTagCompound.getBoolean("Chest");
+        }
+
+        protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
+        {
+            super.func_143012_a(par1NBTTagCompound);
+            par1NBTTagCompound.setBoolean("Chest", this.field_111021_b);
         }
 
         public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
         {
-            this.getNextComponentNormal((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 1, 0, true);
+            this.getNextComponentX((StructureNetherBridgePieces.Start)par1StructureComponent, par2List, par3Random, 0, 1, true);
         }
 
-        public static StructureNetherBridgePieces.Corridor5 createValidComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
+        public static StructureNetherBridgePieces.Corridor createValidComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
         {
             StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -1, 0, 0, 5, 7, 5, par5);
-            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.Corridor5(par6, par1Random, var7, par5) : null;
+            return isAboveGround(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureNetherBridgePieces.Corridor(par6, par1Random, var7, par5) : null;
         }
 
         public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
         {
             this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 0, 4, 1, 4, Blocks.nether_brick, Blocks.nether_brick, false);
             this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 4, 5, 4, Blocks.air, Blocks.air, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 0, 5, 4, Blocks.nether_brick, Blocks.nether_brick, false);
             this.func_151549_a(par1World, par3StructureBoundingBox, 4, 2, 0, 4, 5, 4, Blocks.nether_brick, Blocks.nether_brick, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 3, 1, 0, 4, 1, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 3, 3, 0, 4, 3, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
             this.func_151549_a(par1World, par3StructureBoundingBox, 4, 3, 1, 4, 4, 1, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
             this.func_151549_a(par1World, par3StructureBoundingBox, 4, 3, 3, 4, 4, 3, Blocks.nether_brick_fence, Blocks.nether_brick_fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 0, 5, 0, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 4, 3, 5, 4, Blocks.nether_brick, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 3, 4, 1, 4, 4, Blocks.nether_brick_fence, Blocks.nether_brick, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 3, 3, 4, 3, 4, 4, Blocks.nether_brick_fence, Blocks.nether_brick, false);
+            int var4;
+            int var5;
+
+            if (this.field_111021_b)
+            {
+                var4 = this.getYWithOffset(2);
+                var5 = this.getXWithOffset(3, 3);
+                int var6 = this.getZWithOffset(3, 3);
+
+                if (par3StructureBoundingBox.isVecInside(var5, var4, var6))
+                {
+                    this.field_111021_b = false;
+                    this.generateStructureChestContents(par1World, par3StructureBoundingBox, par2Random, 3, 2, 3, field_111019_a, 2 + par2Random.nextInt(4));
+                }
+            }
+
             this.func_151549_a(par1World, par3StructureBoundingBox, 0, 6, 0, 4, 6, 4, Blocks.nether_brick, Blocks.nether_brick, false);
 
-            for (int var4 = 0; var4 <= 4; ++var4)
+            for (var4 = 0; var4 <= 4; ++var4)
             {
-                for (int var5 = 0; var5 <= 4; ++var5)
+                for (var5 = 0; var5 <= 4; ++var5)
                 {
                     this.func_151554_b(par1World, Blocks.nether_brick, 0, var4, -1, var5, par3StructureBoundingBox);
                 }
diff --git a/net/minecraft/world/gen/structure/StructureStrongholdPieces.java b/net/minecraft/world/gen/structure/StructureStrongholdPieces.java
index c9ed747..3d9b490 100644
--- a/net/minecraft/world/gen/structure/StructureStrongholdPieces.java
+++ b/net/minecraft/world/gen/structure/StructureStrongholdPieces.java
@@ -240,42 +240,97 @@ public class StructureStrongholdPieces
         }
     }
 
-    public static class RightTurn extends StructureStrongholdPieces.LeftTurn
+    public static class Stairs extends StructureStrongholdPieces.Stronghold
     {
-        private static final String __OBFID = "CL_00000495";
+        private boolean field_75024_a;
+        private static final String __OBFID = "CL_00000498";
 
-        public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
+        public Stairs() {}
+
+        public Stairs(int par1, Random par2Random, int par3, int par4)
         {
-            if (this.coordBaseMode != 2 && this.coordBaseMode != 3)
+            super(par1);
+            this.field_75024_a = true;
+            this.coordBaseMode = par2Random.nextInt(4);
+            this.field_143013_d = StructureStrongholdPieces.Stronghold.Door.OPENING;
+
+            switch (this.coordBaseMode)
             {
-                this.getNextComponentX((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, 1, 1);
+                case 0:
+                case 2:
+                    this.boundingBox = new StructureBoundingBox(par3, 64, par4, par3 + 5 - 1, 74, par4 + 5 - 1);
+                    break;
+
+                default:
+                    this.boundingBox = new StructureBoundingBox(par3, 64, par4, par3 + 5 - 1, 74, par4 + 5 - 1);
             }
-            else
+        }
+
+        public Stairs(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
         {
-                this.getNextComponentZ((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, 1, 1);
+            super(par1);
+            this.field_75024_a = false;
+            this.coordBaseMode = par4;
+            this.field_143013_d = this.getRandomDoor(par2Random);
+            this.boundingBox = par3StructureBoundingBox;
         }
+
+        protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
+        {
+            super.func_143012_a(par1NBTTagCompound);
+            par1NBTTagCompound.setBoolean("Source", this.field_75024_a);
         }
 
-        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
+        protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
         {
-            if (this.isLiquidInStructureBoundingBox(par1World, par3StructureBoundingBox))
+            super.func_143011_b(par1NBTTagCompound);
+            this.field_75024_a = par1NBTTagCompound.getBoolean("Source");
+        }
+
+        public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
         {
-                return false;
+            if (this.field_75024_a)
+            {
+                StructureStrongholdPieces.strongComponentType = StructureStrongholdPieces.Crossing.class;
             }
-            else
+
+            this.getNextComponentNormal((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, 1, 1);
+        }
+
+        public static StructureStrongholdPieces.Stairs getStrongholdStairsComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
         {
-                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 0, 0, 0, 4, 4, 4, true, par2Random, StructureStrongholdPieces.strongholdStones);
-                this.placeDoor(par1World, par2Random, par3StructureBoundingBox, this.field_143013_d, 1, 1, 0);
+            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -1, -7, 0, 5, 11, 5, par5);
+            return canStrongholdGoDeeper(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureStrongholdPieces.Stairs(par6, par1Random, var7, par5) : null;
+        }
 
-                if (this.coordBaseMode != 2 && this.coordBaseMode != 3)
+        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
         {
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 0, 1, 1, 0, 3, 3, Blocks.air, Blocks.air, false);
+            if (this.isLiquidInStructureBoundingBox(par1World, par3StructureBoundingBox))
+            {
+                return false;
             }
             else
             {
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 4, 1, 1, 4, 3, 3, Blocks.air, Blocks.air, false);
-                }
-
+                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 0, 0, 0, 4, 10, 4, true, par2Random, StructureStrongholdPieces.strongholdStones);
+                this.placeDoor(par1World, par2Random, par3StructureBoundingBox, this.field_143013_d, 1, 7, 0);
+                this.placeDoor(par1World, par2Random, par3StructureBoundingBox, StructureStrongholdPieces.Stronghold.Door.OPENING, 1, 1, 4);
+                this.func_151550_a(par1World, Blocks.stonebrick, 0, 2, 6, 1, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.stonebrick, 0, 1, 5, 1, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.stone_slab, 0, 1, 6, 1, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.stonebrick, 0, 1, 5, 2, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.stonebrick, 0, 1, 4, 3, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.stone_slab, 0, 1, 5, 3, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.stonebrick, 0, 2, 4, 3, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.stonebrick, 0, 3, 3, 3, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.stone_slab, 0, 3, 4, 3, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.stonebrick, 0, 3, 3, 2, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.stonebrick, 0, 3, 2, 1, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.stone_slab, 0, 3, 3, 1, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.stonebrick, 0, 2, 2, 1, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.stonebrick, 0, 1, 1, 1, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.stone_slab, 0, 1, 2, 1, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.stonebrick, 0, 1, 1, 2, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.stone_slab, 0, 1, 1, 3, par3StructureBoundingBox);
                 return true;
             }
         }
@@ -365,29 +420,165 @@ public class StructureStrongholdPieces
         }
     }
 
-    static class PieceWeight
+    public static class Library extends StructureStrongholdPieces.Stronghold
     {
-        public Class pieceClass;
-        public final int pieceWeight;
-        public int instancesSpawned;
-        public int instancesLimit;
-        private static final String __OBFID = "CL_00000492";
+        private static final WeightedRandomChestContent[] strongholdLibraryChestContents = new WeightedRandomChestContent[] {new WeightedRandomChestContent(Items.book, 0, 1, 3, 20), new WeightedRandomChestContent(Items.paper, 0, 2, 7, 20), new WeightedRandomChestContent(Items.map, 0, 1, 1, 1), new WeightedRandomChestContent(Items.compass, 0, 1, 1, 1)};
+        private boolean isLargeRoom;
+        private static final String __OBFID = "CL_00000491";
 
-        public PieceWeight(Class par1Class, int par2, int par3)
+        public Library() {}
+
+        public Library(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
         {
-            this.pieceClass = par1Class;
-            this.pieceWeight = par2;
-            this.instancesLimit = par3;
+            super(par1);
+            this.coordBaseMode = par4;
+            this.field_143013_d = this.getRandomDoor(par2Random);
+            this.boundingBox = par3StructureBoundingBox;
+            this.isLargeRoom = par3StructureBoundingBox.getYSize() > 6;
         }
 
-        public boolean canSpawnMoreStructuresOfType(int par1)
+        protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
         {
-            return this.instancesLimit == 0 || this.instancesSpawned < this.instancesLimit;
+            super.func_143012_a(par1NBTTagCompound);
+            par1NBTTagCompound.setBoolean("Tall", this.isLargeRoom);
         }
 
-        public boolean canSpawnMoreStructures()
+        protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
         {
-            return this.instancesLimit == 0 || this.instancesSpawned < this.instancesLimit;
+            super.func_143011_b(par1NBTTagCompound);
+            this.isLargeRoom = par1NBTTagCompound.getBoolean("Tall");
+        }
+
+        public static StructureStrongholdPieces.Library findValidPlacement(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
+        {
+            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -4, -1, 0, 14, 11, 15, par5);
+
+            if (!canStrongholdGoDeeper(var7) || StructureComponent.findIntersecting(par0List, var7) != null)
+            {
+                var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -4, -1, 0, 14, 6, 15, par5);
+
+                if (!canStrongholdGoDeeper(var7) || StructureComponent.findIntersecting(par0List, var7) != null)
+                {
+                    return null;
+                }
+            }
+
+            return new StructureStrongholdPieces.Library(par6, par1Random, var7, par5);
+        }
+
+        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
+        {
+            if (this.isLiquidInStructureBoundingBox(par1World, par3StructureBoundingBox))
+            {
+                return false;
+            }
+            else
+            {
+                byte var4 = 11;
+
+                if (!this.isLargeRoom)
+                {
+                    var4 = 6;
+                }
+
+                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 0, 0, 0, 13, var4 - 1, 14, true, par2Random, StructureStrongholdPieces.strongholdStones);
+                this.placeDoor(par1World, par2Random, par3StructureBoundingBox, this.field_143013_d, 4, 1, 0);
+                this.func_151551_a(par1World, par3StructureBoundingBox, par2Random, 0.07F, 2, 1, 1, 11, 4, 13, Blocks.web, Blocks.web, false);
+                boolean var5 = true;
+                boolean var6 = true;
+                int var7;
+
+                for (var7 = 1; var7 <= 13; ++var7)
+                {
+                    if ((var7 - 1) % 4 == 0)
+                    {
+                        this.func_151549_a(par1World, par3StructureBoundingBox, 1, 1, var7, 1, 4, var7, Blocks.planks, Blocks.planks, false);
+                        this.func_151549_a(par1World, par3StructureBoundingBox, 12, 1, var7, 12, 4, var7, Blocks.planks, Blocks.planks, false);
+                        this.func_151550_a(par1World, Blocks.torch, 0, 2, 3, var7, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.torch, 0, 11, 3, var7, par3StructureBoundingBox);
+
+                        if (this.isLargeRoom)
+                        {
+                            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 6, var7, 1, 9, var7, Blocks.planks, Blocks.planks, false);
+                            this.func_151549_a(par1World, par3StructureBoundingBox, 12, 6, var7, 12, 9, var7, Blocks.planks, Blocks.planks, false);
+                        }
+                    }
+                    else
+                    {
+                        this.func_151549_a(par1World, par3StructureBoundingBox, 1, 1, var7, 1, 4, var7, Blocks.bookshelf, Blocks.bookshelf, false);
+                        this.func_151549_a(par1World, par3StructureBoundingBox, 12, 1, var7, 12, 4, var7, Blocks.bookshelf, Blocks.bookshelf, false);
+
+                        if (this.isLargeRoom)
+                        {
+                            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 6, var7, 1, 9, var7, Blocks.bookshelf, Blocks.bookshelf, false);
+                            this.func_151549_a(par1World, par3StructureBoundingBox, 12, 6, var7, 12, 9, var7, Blocks.bookshelf, Blocks.bookshelf, false);
+                        }
+                    }
+                }
+
+                for (var7 = 3; var7 < 12; var7 += 2)
+                {
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 3, 1, var7, 4, 3, var7, Blocks.bookshelf, Blocks.bookshelf, false);
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 6, 1, var7, 7, 3, var7, Blocks.bookshelf, Blocks.bookshelf, false);
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 9, 1, var7, 10, 3, var7, Blocks.bookshelf, Blocks.bookshelf, false);
+                }
+
+                if (this.isLargeRoom)
+                {
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 1, 5, 1, 3, 5, 13, Blocks.planks, Blocks.planks, false);
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 10, 5, 1, 12, 5, 13, Blocks.planks, Blocks.planks, false);
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 4, 5, 1, 9, 5, 2, Blocks.planks, Blocks.planks, false);
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 4, 5, 12, 9, 5, 13, Blocks.planks, Blocks.planks, false);
+                    this.func_151550_a(par1World, Blocks.planks, 0, 9, 5, 11, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.planks, 0, 8, 5, 11, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.planks, 0, 9, 5, 10, par3StructureBoundingBox);
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 3, 6, 2, 3, 6, 12, Blocks.fence, Blocks.fence, false);
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 10, 6, 2, 10, 6, 10, Blocks.fence, Blocks.fence, false);
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 4, 6, 2, 9, 6, 2, Blocks.fence, Blocks.fence, false);
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 4, 6, 12, 8, 6, 12, Blocks.fence, Blocks.fence, false);
+                    this.func_151550_a(par1World, Blocks.fence, 0, 9, 6, 11, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.fence, 0, 8, 6, 11, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.fence, 0, 9, 6, 10, par3StructureBoundingBox);
+                    var7 = this.func_151555_a(Blocks.ladder, 3);
+                    this.func_151550_a(par1World, Blocks.ladder, var7, 10, 1, 13, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.ladder, var7, 10, 2, 13, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.ladder, var7, 10, 3, 13, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.ladder, var7, 10, 4, 13, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.ladder, var7, 10, 5, 13, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.ladder, var7, 10, 6, 13, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.ladder, var7, 10, 7, 13, par3StructureBoundingBox);
+                    byte var8 = 7;
+                    byte var9 = 7;
+                    this.func_151550_a(par1World, Blocks.fence, 0, var8 - 1, 9, var9, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.fence, 0, var8, 9, var9, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.fence, 0, var8 - 1, 8, var9, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.fence, 0, var8, 8, var9, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.fence, 0, var8 - 1, 7, var9, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.fence, 0, var8, 7, var9, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.fence, 0, var8 - 2, 7, var9, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.fence, 0, var8 + 1, 7, var9, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.fence, 0, var8 - 1, 7, var9 - 1, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.fence, 0, var8 - 1, 7, var9 + 1, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.fence, 0, var8, 7, var9 - 1, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.fence, 0, var8, 7, var9 + 1, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.torch, 0, var8 - 2, 8, var9, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.torch, 0, var8 + 1, 8, var9, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.torch, 0, var8 - 1, 8, var9 - 1, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.torch, 0, var8 - 1, 8, var9 + 1, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.torch, 0, var8, 8, var9 - 1, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.torch, 0, var8, 8, var9 + 1, par3StructureBoundingBox);
+                }
+
+                this.generateStructureChestContents(par1World, par3StructureBoundingBox, par2Random, 3, 3, 5, WeightedRandomChestContent.func_92080_a(strongholdLibraryChestContents, new WeightedRandomChestContent[] {Items.enchanted_book.func_92112_a(par2Random, 1, 5, 2)}), 1 + par2Random.nextInt(4));
+
+                if (this.isLargeRoom)
+                {
+                    this.func_151550_a(par1World, Blocks.air, 0, 12, 9, 1, par3StructureBoundingBox);
+                    this.generateStructureChestContents(par1World, par3StructureBoundingBox, par2Random, 12, 8, 1, WeightedRandomChestContent.func_92080_a(strongholdLibraryChestContents, new WeightedRandomChestContent[] {Items.enchanted_book.func_92112_a(par2Random, 1, 5, 2)}), 1 + par2Random.nextInt(4));
+                }
+
+                return true;
+            }
         }
     }
 
@@ -536,84 +727,43 @@ public class StructureStrongholdPieces
         }
     }
 
-    public static class Crossing extends StructureStrongholdPieces.Stronghold
+    public static class ChestCorridor extends StructureStrongholdPieces.Stronghold
     {
-        private boolean field_74996_b;
-        private boolean field_74997_c;
-        private boolean field_74995_d;
-        private boolean field_74999_h;
-        private static final String __OBFID = "CL_00000489";
+        private static final WeightedRandomChestContent[] strongholdChestContents = new WeightedRandomChestContent[] {new WeightedRandomChestContent(Items.ender_pearl, 0, 1, 1, 10), new WeightedRandomChestContent(Items.diamond, 0, 1, 3, 3), new WeightedRandomChestContent(Items.iron_ingot, 0, 1, 5, 10), new WeightedRandomChestContent(Items.gold_ingot, 0, 1, 3, 5), new WeightedRandomChestContent(Items.redstone, 0, 4, 9, 5), new WeightedRandomChestContent(Items.bread, 0, 1, 3, 15), new WeightedRandomChestContent(Items.apple, 0, 1, 3, 15), new WeightedRandomChestContent(Items.iron_pickaxe, 0, 1, 1, 5), new WeightedRandomChestContent(Items.iron_sword, 0, 1, 1, 5), new WeightedRandomChestContent(Items.iron_chestplate, 0, 1, 1, 5), new WeightedRandomChestContent(Items.iron_helmet, 0, 1, 1, 5), new WeightedRandomChestContent(Items.iron_leggings, 0, 1, 1, 5), new WeightedRandomChestContent(Items.iron_boots, 0, 1, 1, 5), new WeightedRandomChestContent(Items.golden_apple, 0, 1, 1, 1), new WeightedRandomChestContent(Items.saddle, 0, 1, 1, 1), new WeightedRandomChestContent(Items.iron_horse_armor, 0, 1, 1, 1), new WeightedRandomChestContent(Items.golden_horse_armor, 0, 1, 1, 1), new WeightedRandomChestContent(Items.diamond_horse_armor, 0, 1, 1, 1)};
+        private boolean hasMadeChest;
+        private static final String __OBFID = "CL_00000487";
 
-        public Crossing() {}
+        public ChestCorridor() {}
 
-        public Crossing(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
+        public ChestCorridor(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
         {
             super(par1);
             this.coordBaseMode = par4;
             this.field_143013_d = this.getRandomDoor(par2Random);
             this.boundingBox = par3StructureBoundingBox;
-            this.field_74996_b = par2Random.nextBoolean();
-            this.field_74997_c = par2Random.nextBoolean();
-            this.field_74995_d = par2Random.nextBoolean();
-            this.field_74999_h = par2Random.nextInt(3) > 0;
         }
 
         protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
         {
             super.func_143012_a(par1NBTTagCompound);
-            par1NBTTagCompound.setBoolean("leftLow", this.field_74996_b);
-            par1NBTTagCompound.setBoolean("leftHigh", this.field_74997_c);
-            par1NBTTagCompound.setBoolean("rightLow", this.field_74995_d);
-            par1NBTTagCompound.setBoolean("rightHigh", this.field_74999_h);
+            par1NBTTagCompound.setBoolean("Chest", this.hasMadeChest);
         }
 
         protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
         {
             super.func_143011_b(par1NBTTagCompound);
-            this.field_74996_b = par1NBTTagCompound.getBoolean("leftLow");
-            this.field_74997_c = par1NBTTagCompound.getBoolean("leftHigh");
-            this.field_74995_d = par1NBTTagCompound.getBoolean("rightLow");
-            this.field_74999_h = par1NBTTagCompound.getBoolean("rightHigh");
+            this.hasMadeChest = par1NBTTagCompound.getBoolean("Chest");
         }
 
         public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
         {
-            int var4 = 3;
-            int var5 = 5;
-
-            if (this.coordBaseMode == 1 || this.coordBaseMode == 2)
-            {
-                var4 = 8 - var4;
-                var5 = 8 - var5;
-            }
-
-            this.getNextComponentNormal((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, 5, 1);
-
-            if (this.field_74996_b)
-            {
-                this.getNextComponentX((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, var4, 1);
-            }
-
-            if (this.field_74997_c)
-            {
-                this.getNextComponentX((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, var5, 7);
-            }
-
-            if (this.field_74995_d)
-            {
-                this.getNextComponentZ((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, var4, 1);
-            }
-
-            if (this.field_74999_h)
-            {
-                this.getNextComponentZ((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, var5, 7);
-            }
+            this.getNextComponentNormal((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, 1, 1);
         }
 
-        public static StructureStrongholdPieces.Crossing findValidPlacement(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
+        public static StructureStrongholdPieces.ChestCorridor findValidPlacement(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
         {
-            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -4, -3, 0, 10, 9, 11, par5);
-            return canStrongholdGoDeeper(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureStrongholdPieces.Crossing(par6, par1Random, var7, par5) : null;
+            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -1, -1, 0, 5, 5, 7, par5);
+            return canStrongholdGoDeeper(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureStrongholdPieces.ChestCorridor(par6, par1Random, var7, par5) : null;
         }
 
         public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
@@ -624,79 +774,79 @@ public class StructureStrongholdPieces
             }
             else
             {
-                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 0, 0, 0, 9, 8, 10, true, par2Random, StructureStrongholdPieces.strongholdStones);
-                this.placeDoor(par1World, par2Random, par3StructureBoundingBox, this.field_143013_d, 4, 3, 0);
+                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 0, 0, 0, 4, 4, 6, true, par2Random, StructureStrongholdPieces.strongholdStones);
+                this.placeDoor(par1World, par2Random, par3StructureBoundingBox, this.field_143013_d, 1, 1, 0);
+                this.placeDoor(par1World, par2Random, par3StructureBoundingBox, StructureStrongholdPieces.Stronghold.Door.OPENING, 1, 1, 6);
+                this.func_151549_a(par1World, par3StructureBoundingBox, 3, 1, 2, 3, 1, 4, Blocks.stonebrick, Blocks.stonebrick, false);
+                this.func_151550_a(par1World, Blocks.stone_slab, 5, 3, 1, 1, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.stone_slab, 5, 3, 1, 5, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.stone_slab, 5, 3, 2, 2, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.stone_slab, 5, 3, 2, 4, par3StructureBoundingBox);
+                int var4;
 
-                if (this.field_74996_b)
+                for (var4 = 2; var4 <= 4; ++var4)
                 {
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 0, 3, 1, 0, 5, 3, Blocks.air, Blocks.air, false);
+                    this.func_151550_a(par1World, Blocks.stone_slab, 5, 2, 1, var4, par3StructureBoundingBox);
                 }
 
-                if (this.field_74995_d)
+                if (!this.hasMadeChest)
                 {
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 9, 3, 1, 9, 5, 3, Blocks.air, Blocks.air, false);
-                }
+                    var4 = this.getYWithOffset(2);
+                    int var5 = this.getXWithOffset(3, 3);
+                    int var6 = this.getZWithOffset(3, 3);
 
-                if (this.field_74997_c)
+                    if (par3StructureBoundingBox.isVecInside(var5, var4, var6))
                     {
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 7, 0, 7, 9, Blocks.air, Blocks.air, false);
+                        this.hasMadeChest = true;
+                        this.generateStructureChestContents(par1World, par3StructureBoundingBox, par2Random, 3, 2, 3, WeightedRandomChestContent.func_92080_a(strongholdChestContents, new WeightedRandomChestContent[] {Items.enchanted_book.func_92114_b(par2Random)}), 2 + par2Random.nextInt(2));
                     }
-
-                if (this.field_74999_h)
-                {
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 9, 5, 7, 9, 7, 9, Blocks.air, Blocks.air, false);
                 }
 
-                this.func_151549_a(par1World, par3StructureBoundingBox, 5, 1, 10, 7, 3, 10, Blocks.air, Blocks.air, false);
-                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 1, 2, 1, 8, 2, 6, false, par2Random, StructureStrongholdPieces.strongholdStones);
-                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 4, 1, 5, 4, 4, 9, false, par2Random, StructureStrongholdPieces.strongholdStones);
-                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 8, 1, 5, 8, 4, 9, false, par2Random, StructureStrongholdPieces.strongholdStones);
-                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 1, 4, 7, 3, 4, 9, false, par2Random, StructureStrongholdPieces.strongholdStones);
-                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 1, 3, 5, 3, 3, 6, false, par2Random, StructureStrongholdPieces.strongholdStones);
-                this.func_151549_a(par1World, par3StructureBoundingBox, 1, 3, 4, 3, 3, 4, Blocks.stone_slab, Blocks.stone_slab, false);
-                this.func_151549_a(par1World, par3StructureBoundingBox, 1, 4, 6, 3, 4, 6, Blocks.stone_slab, Blocks.stone_slab, false);
-                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 5, 1, 7, 7, 1, 8, false, par2Random, StructureStrongholdPieces.strongholdStones);
-                this.func_151549_a(par1World, par3StructureBoundingBox, 5, 1, 9, 7, 1, 9, Blocks.stone_slab, Blocks.stone_slab, false);
-                this.func_151549_a(par1World, par3StructureBoundingBox, 5, 2, 7, 7, 2, 7, Blocks.stone_slab, Blocks.stone_slab, false);
-                this.func_151549_a(par1World, par3StructureBoundingBox, 4, 5, 7, 4, 5, 9, Blocks.stone_slab, Blocks.stone_slab, false);
-                this.func_151549_a(par1World, par3StructureBoundingBox, 8, 5, 7, 8, 5, 9, Blocks.stone_slab, Blocks.stone_slab, false);
-                this.func_151549_a(par1World, par3StructureBoundingBox, 5, 5, 7, 7, 5, 9, Blocks.double_stone_slab, Blocks.double_stone_slab, false);
-                this.func_151550_a(par1World, Blocks.torch, 0, 6, 5, 6, par3StructureBoundingBox);
                 return true;
             }
         }
     }
 
-    public static class LeftTurn extends StructureStrongholdPieces.Stronghold
+    public static class RoomCrossing extends StructureStrongholdPieces.Stronghold
     {
-        private static final String __OBFID = "CL_00000490";
+        private static final WeightedRandomChestContent[] strongholdRoomCrossingChestContents = new WeightedRandomChestContent[] {new WeightedRandomChestContent(Items.iron_ingot, 0, 1, 5, 10), new WeightedRandomChestContent(Items.gold_ingot, 0, 1, 3, 5), new WeightedRandomChestContent(Items.redstone, 0, 4, 9, 5), new WeightedRandomChestContent(Items.coal, 0, 3, 8, 10), new WeightedRandomChestContent(Items.bread, 0, 1, 3, 15), new WeightedRandomChestContent(Items.apple, 0, 1, 3, 15), new WeightedRandomChestContent(Items.iron_pickaxe, 0, 1, 1, 1)};
+        protected int roomType;
+        private static final String __OBFID = "CL_00000496";
 
-        public LeftTurn() {}
+        public RoomCrossing() {}
 
-        public LeftTurn(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
+        public RoomCrossing(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
         {
             super(par1);
             this.coordBaseMode = par4;
             this.field_143013_d = this.getRandomDoor(par2Random);
             this.boundingBox = par3StructureBoundingBox;
+            this.roomType = par2Random.nextInt(5);
         }
 
-        public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
-        {
-            if (this.coordBaseMode != 2 && this.coordBaseMode != 3)
+        protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
         {
-                this.getNextComponentZ((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, 1, 1);
+            super.func_143012_a(par1NBTTagCompound);
+            par1NBTTagCompound.setInteger("Type", this.roomType);
         }
-            else
+
+        protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
         {
-                this.getNextComponentX((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, 1, 1);
+            super.func_143011_b(par1NBTTagCompound);
+            this.roomType = par1NBTTagCompound.getInteger("Type");
         }
+
+        public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
+        {
+            this.getNextComponentNormal((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, 4, 1);
+            this.getNextComponentX((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, 1, 4);
+            this.getNextComponentZ((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, 1, 4);
         }
 
-        public static StructureStrongholdPieces.LeftTurn findValidPlacement(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
+        public static StructureStrongholdPieces.RoomCrossing findValidPlacement(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
         {
-            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -1, -1, 0, 5, 5, 5, par5);
-            return canStrongholdGoDeeper(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureStrongholdPieces.LeftTurn(par6, par1Random, var7, par5) : null;
+            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -4, -1, 0, 11, 7, 11, par5);
+            return canStrongholdGoDeeper(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureStrongholdPieces.RoomCrossing(par6, par1Random, var7, par5) : null;
         }
 
         public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
@@ -707,468 +857,103 @@ public class StructureStrongholdPieces
             }
             else
             {
-                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 0, 0, 0, 4, 4, 4, true, par2Random, StructureStrongholdPieces.strongholdStones);
-                this.placeDoor(par1World, par2Random, par3StructureBoundingBox, this.field_143013_d, 1, 1, 0);
+                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 0, 0, 0, 10, 6, 10, true, par2Random, StructureStrongholdPieces.strongholdStones);
+                this.placeDoor(par1World, par2Random, par3StructureBoundingBox, this.field_143013_d, 4, 1, 0);
+                this.func_151549_a(par1World, par3StructureBoundingBox, 4, 1, 10, 6, 3, 10, Blocks.air, Blocks.air, false);
+                this.func_151549_a(par1World, par3StructureBoundingBox, 0, 1, 4, 0, 3, 6, Blocks.air, Blocks.air, false);
+                this.func_151549_a(par1World, par3StructureBoundingBox, 10, 1, 4, 10, 3, 6, Blocks.air, Blocks.air, false);
+                int var4;
 
-                if (this.coordBaseMode != 2 && this.coordBaseMode != 3)
+                switch (this.roomType)
                 {
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 4, 1, 1, 4, 3, 3, Blocks.air, Blocks.air, false);
-                }
-                else
+                    case 0:
+                        this.func_151550_a(par1World, Blocks.stonebrick, 0, 5, 1, 5, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.stonebrick, 0, 5, 2, 5, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.stonebrick, 0, 5, 3, 5, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.torch, 0, 4, 3, 5, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.torch, 0, 6, 3, 5, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.torch, 0, 5, 3, 4, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.torch, 0, 5, 3, 6, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.stone_slab, 0, 4, 1, 4, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.stone_slab, 0, 4, 1, 5, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.stone_slab, 0, 4, 1, 6, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.stone_slab, 0, 6, 1, 4, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.stone_slab, 0, 6, 1, 5, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.stone_slab, 0, 6, 1, 6, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.stone_slab, 0, 5, 1, 4, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.stone_slab, 0, 5, 1, 6, par3StructureBoundingBox);
+                        break;
+
+                    case 1:
+                        for (var4 = 0; var4 < 5; ++var4)
                         {
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 0, 1, 1, 0, 3, 3, Blocks.air, Blocks.air, false);
+                            this.func_151550_a(par1World, Blocks.stonebrick, 0, 3, 1, 3 + var4, par3StructureBoundingBox);
+                            this.func_151550_a(par1World, Blocks.stonebrick, 0, 7, 1, 3 + var4, par3StructureBoundingBox);
+                            this.func_151550_a(par1World, Blocks.stonebrick, 0, 3 + var4, 1, 3, par3StructureBoundingBox);
+                            this.func_151550_a(par1World, Blocks.stonebrick, 0, 3 + var4, 1, 7, par3StructureBoundingBox);
                         }
 
-                return true;
-            }
-        }
+                        this.func_151550_a(par1World, Blocks.stonebrick, 0, 5, 1, 5, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.stonebrick, 0, 5, 2, 5, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.stonebrick, 0, 5, 3, 5, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.flowing_water, 0, 5, 4, 5, par3StructureBoundingBox);
+                        break;
+
+                    case 2:
+                        for (var4 = 1; var4 <= 9; ++var4)
+                        {
+                            this.func_151550_a(par1World, Blocks.cobblestone, 0, 1, 3, var4, par3StructureBoundingBox);
+                            this.func_151550_a(par1World, Blocks.cobblestone, 0, 9, 3, var4, par3StructureBoundingBox);
                         }
 
-    static class Stones extends StructureComponent.BlockSelector
+                        for (var4 = 1; var4 <= 9; ++var4)
                         {
-        private static final String __OBFID = "CL_00000497";
+                            this.func_151550_a(par1World, Blocks.cobblestone, 0, var4, 3, 1, par3StructureBoundingBox);
+                            this.func_151550_a(par1World, Blocks.cobblestone, 0, var4, 3, 9, par3StructureBoundingBox);
+                        }
 
-        private Stones() {}
+                        this.func_151550_a(par1World, Blocks.cobblestone, 0, 5, 1, 4, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.cobblestone, 0, 5, 1, 6, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.cobblestone, 0, 5, 3, 4, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.cobblestone, 0, 5, 3, 6, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.cobblestone, 0, 4, 1, 5, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.cobblestone, 0, 6, 1, 5, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.cobblestone, 0, 4, 3, 5, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.cobblestone, 0, 6, 3, 5, par3StructureBoundingBox);
 
-        public void selectBlocks(Random par1Random, int par2, int par3, int par4, boolean par5)
+                        for (var4 = 1; var4 <= 3; ++var4)
                         {
-            if (par5)
+                            this.func_151550_a(par1World, Blocks.cobblestone, 0, 4, var4, 4, par3StructureBoundingBox);
+                            this.func_151550_a(par1World, Blocks.cobblestone, 0, 6, var4, 4, par3StructureBoundingBox);
+                            this.func_151550_a(par1World, Blocks.cobblestone, 0, 4, var4, 6, par3StructureBoundingBox);
+                            this.func_151550_a(par1World, Blocks.cobblestone, 0, 6, var4, 6, par3StructureBoundingBox);
+                        }
+
+                        this.func_151550_a(par1World, Blocks.torch, 0, 5, 3, 5, par3StructureBoundingBox);
+
+                        for (var4 = 2; var4 <= 8; ++var4)
                         {
-                this.field_151562_a = Blocks.stonebrick;
-                float var6 = par1Random.nextFloat();
+                            this.func_151550_a(par1World, Blocks.planks, 0, 2, 3, var4, par3StructureBoundingBox);
+                            this.func_151550_a(par1World, Blocks.planks, 0, 3, 3, var4, par3StructureBoundingBox);
 
-                if (var6 < 0.2F)
+                            if (var4 <= 3 || var4 >= 7)
                             {
-                    this.selectedBlockMetaData = 2;
+                                this.func_151550_a(par1World, Blocks.planks, 0, 4, 3, var4, par3StructureBoundingBox);
+                                this.func_151550_a(par1World, Blocks.planks, 0, 5, 3, var4, par3StructureBoundingBox);
+                                this.func_151550_a(par1World, Blocks.planks, 0, 6, 3, var4, par3StructureBoundingBox);
                             }
-                else if (var6 < 0.5F)
-                {
-                    this.selectedBlockMetaData = 1;
+
+                            this.func_151550_a(par1World, Blocks.planks, 0, 7, 3, var4, par3StructureBoundingBox);
+                            this.func_151550_a(par1World, Blocks.planks, 0, 8, 3, var4, par3StructureBoundingBox);
                         }
-                else if (var6 < 0.55F)
-                {
-                    this.field_151562_a = Blocks.monster_egg;
-                    this.selectedBlockMetaData = 2;
+
+                        this.func_151550_a(par1World, Blocks.ladder, this.func_151555_a(Blocks.ladder, 4), 9, 1, 3, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.ladder, this.func_151555_a(Blocks.ladder, 4), 9, 2, 3, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.ladder, this.func_151555_a(Blocks.ladder, 4), 9, 3, 3, par3StructureBoundingBox);
+                        this.generateStructureChestContents(par1World, par3StructureBoundingBox, par2Random, 3, 4, 8, WeightedRandomChestContent.func_92080_a(strongholdRoomCrossingChestContents, new WeightedRandomChestContent[] {Items.enchanted_book.func_92114_b(par2Random)}), 1 + par2Random.nextInt(4));
                 }
-                else
-                {
-                    this.selectedBlockMetaData = 0;
-                }
-            }
-            else
-            {
-                this.field_151562_a = Blocks.air;
-                this.selectedBlockMetaData = 0;
-            }
-        }
-
-        Stones(Object par1StructureStrongholdPieceWeight2)
-        {
-            this();
-        }
-    }
-
-    static final class SwitchDoor
-    {
-        static final int[] doorEnum = new int[StructureStrongholdPieces.Stronghold.Door.values().length];
-        private static final String __OBFID = "CL_00000486";
-
-        static
-        {
-            try
-            {
-                doorEnum[StructureStrongholdPieces.Stronghold.Door.OPENING.ordinal()] = 1;
-            }
-            catch (NoSuchFieldError var4)
-            {
-                ;
-            }
-
-            try
-            {
-                doorEnum[StructureStrongholdPieces.Stronghold.Door.WOOD_DOOR.ordinal()] = 2;
-            }
-            catch (NoSuchFieldError var3)
-            {
-                ;
-            }
-
-            try
-            {
-                doorEnum[StructureStrongholdPieces.Stronghold.Door.GRATES.ordinal()] = 3;
-            }
-            catch (NoSuchFieldError var2)
-            {
-                ;
-            }
-
-            try
-            {
-                doorEnum[StructureStrongholdPieces.Stronghold.Door.IRON_DOOR.ordinal()] = 4;
-            }
-            catch (NoSuchFieldError var1)
-            {
-                ;
-            }
-        }
-    }
-
-    abstract static class Stronghold extends StructureComponent
-    {
-        protected StructureStrongholdPieces.Stronghold.Door field_143013_d;
-        private static final String __OBFID = "CL_00000503";
-
-        public Stronghold()
-        {
-            this.field_143013_d = StructureStrongholdPieces.Stronghold.Door.OPENING;
-        }
-
-        protected Stronghold(int par1)
-        {
-            super(par1);
-            this.field_143013_d = StructureStrongholdPieces.Stronghold.Door.OPENING;
-        }
-
-        protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
-        {
-            par1NBTTagCompound.setString("EntryDoor", this.field_143013_d.name());
-        }
-
-        protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
-        {
-            this.field_143013_d = StructureStrongholdPieces.Stronghold.Door.valueOf(par1NBTTagCompound.getString("EntryDoor"));
-        }
-
-        protected void placeDoor(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox, StructureStrongholdPieces.Stronghold.Door par4EnumDoor, int par5, int par6, int par7)
-        {
-            switch (StructureStrongholdPieces.SwitchDoor.doorEnum[par4EnumDoor.ordinal()])
-            {
-                case 1:
-                default:
-                    this.func_151549_a(par1World, par3StructureBoundingBox, par5, par6, par7, par5 + 3 - 1, par6 + 3 - 1, par7, Blocks.air, Blocks.air, false);
-                    break;
-
-                case 2:
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5, par6, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5, par6 + 1, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5, par6 + 2, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5 + 1, par6 + 2, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5 + 2, par6 + 2, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5 + 2, par6 + 1, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5 + 2, par6, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.wooden_door, 0, par5 + 1, par6, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.wooden_door, 8, par5 + 1, par6 + 1, par7, par3StructureBoundingBox);
-                    break;
-
-                case 3:
-                    this.func_151550_a(par1World, Blocks.air, 0, par5 + 1, par6, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.air, 0, par5 + 1, par6 + 1, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.iron_bars, 0, par5, par6, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.iron_bars, 0, par5, par6 + 1, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.iron_bars, 0, par5, par6 + 2, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.iron_bars, 0, par5 + 1, par6 + 2, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.iron_bars, 0, par5 + 2, par6 + 2, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.iron_bars, 0, par5 + 2, par6 + 1, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.iron_bars, 0, par5 + 2, par6, par7, par3StructureBoundingBox);
-                    break;
-
-                case 4:
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5, par6, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5, par6 + 1, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5, par6 + 2, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5 + 1, par6 + 2, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5 + 2, par6 + 2, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5 + 2, par6 + 1, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5 + 2, par6, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.iron_door, 0, par5 + 1, par6, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.iron_door, 8, par5 + 1, par6 + 1, par7, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.stone_button, this.func_151555_a(Blocks.stone_button, 4), par5 + 2, par6 + 1, par7 + 1, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.stone_button, this.func_151555_a(Blocks.stone_button, 3), par5 + 2, par6 + 1, par7 - 1, par3StructureBoundingBox);
-            }
-        }
-
-        protected StructureStrongholdPieces.Stronghold.Door getRandomDoor(Random par1Random)
-        {
-            int var2 = par1Random.nextInt(5);
-
-            switch (var2)
-            {
-                case 0:
-                case 1:
-                default:
-                    return StructureStrongholdPieces.Stronghold.Door.OPENING;
-
-                case 2:
-                    return StructureStrongholdPieces.Stronghold.Door.WOOD_DOOR;
-
-                case 3:
-                    return StructureStrongholdPieces.Stronghold.Door.GRATES;
-
-                case 4:
-                    return StructureStrongholdPieces.Stronghold.Door.IRON_DOOR;
-            }
-        }
-
-        protected StructureComponent getNextComponentNormal(StructureStrongholdPieces.Stairs2 par1ComponentStrongholdStairs2, List par2List, Random par3Random, int par4, int par5)
-        {
-            switch (this.coordBaseMode)
-            {
-                case 0:
-                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.minX + par4, this.boundingBox.minY + par5, this.boundingBox.maxZ + 1, this.coordBaseMode, this.getComponentType());
-
-                case 1:
-                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.minX - 1, this.boundingBox.minY + par5, this.boundingBox.minZ + par4, this.coordBaseMode, this.getComponentType());
-
-                case 2:
-                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.minX + par4, this.boundingBox.minY + par5, this.boundingBox.minZ - 1, this.coordBaseMode, this.getComponentType());
-
-                case 3:
-                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.maxX + 1, this.boundingBox.minY + par5, this.boundingBox.minZ + par4, this.coordBaseMode, this.getComponentType());
-
-                default:
-                    return null;
-            }
-        }
-
-        protected StructureComponent getNextComponentX(StructureStrongholdPieces.Stairs2 par1ComponentStrongholdStairs2, List par2List, Random par3Random, int par4, int par5)
-        {
-            switch (this.coordBaseMode)
-            {
-                case 0:
-                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.minX - 1, this.boundingBox.minY + par4, this.boundingBox.minZ + par5, 1, this.getComponentType());
-
-                case 1:
-                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.minX + par5, this.boundingBox.minY + par4, this.boundingBox.minZ - 1, 2, this.getComponentType());
-
-                case 2:
-                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.minX - 1, this.boundingBox.minY + par4, this.boundingBox.minZ + par5, 1, this.getComponentType());
-
-                case 3:
-                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.minX + par5, this.boundingBox.minY + par4, this.boundingBox.minZ - 1, 2, this.getComponentType());
-
-                default:
-                    return null;
-            }
-        }
-
-        protected StructureComponent getNextComponentZ(StructureStrongholdPieces.Stairs2 par1ComponentStrongholdStairs2, List par2List, Random par3Random, int par4, int par5)
-        {
-            switch (this.coordBaseMode)
-            {
-                case 0:
-                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.maxX + 1, this.boundingBox.minY + par4, this.boundingBox.minZ + par5, 3, this.getComponentType());
-
-                case 1:
-                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.minX + par5, this.boundingBox.minY + par4, this.boundingBox.maxZ + 1, 0, this.getComponentType());
-
-                case 2:
-                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.maxX + 1, this.boundingBox.minY + par4, this.boundingBox.minZ + par5, 3, this.getComponentType());
-
-                case 3:
-                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.minX + par5, this.boundingBox.minY + par4, this.boundingBox.maxZ + 1, 0, this.getComponentType());
-
-                default:
-                    return null;
-            }
-        }
-
-        protected static boolean canStrongholdGoDeeper(StructureBoundingBox par0StructureBoundingBox)
-        {
-            return par0StructureBoundingBox != null && par0StructureBoundingBox.minY > 10;
-        }
-
-        public static enum Door
-        {
-            OPENING("OPENING", 0),
-            WOOD_DOOR("WOOD_DOOR", 1),
-            GRATES("GRATES", 2),
-            IRON_DOOR("IRON_DOOR", 3);
-
-            private static final StructureStrongholdPieces.Stronghold.Door[] $VALUES = new StructureStrongholdPieces.Stronghold.Door[]{OPENING, WOOD_DOOR, GRATES, IRON_DOOR};
-            private static final String __OBFID = "CL_00000504";
-
-            private Door(String par1Str, int par2) {}
-        }
-    }
-
-    public static class Stairs2 extends StructureStrongholdPieces.Stairs
-    {
-        public StructureStrongholdPieces.PieceWeight strongholdPieceWeight;
-        public StructureStrongholdPieces.PortalRoom strongholdPortalRoom;
-        public List field_75026_c = new ArrayList();
-        private static final String __OBFID = "CL_00000499";
-
-        public Stairs2() {}
-
-        public Stairs2(int par1, Random par2Random, int par3, int par4)
-        {
-            super(0, par2Random, par3, par4);
-        }
-
-        public ChunkPosition func_151553_a()
-        {
-            return this.strongholdPortalRoom != null ? this.strongholdPortalRoom.func_151553_a() : super.func_151553_a();
-        }
-    }
-
-    public static class Library extends StructureStrongholdPieces.Stronghold
-    {
-        private static final WeightedRandomChestContent[] strongholdLibraryChestContents = new WeightedRandomChestContent[] {new WeightedRandomChestContent(Items.book, 0, 1, 3, 20), new WeightedRandomChestContent(Items.paper, 0, 2, 7, 20), new WeightedRandomChestContent(Items.map, 0, 1, 1, 1), new WeightedRandomChestContent(Items.compass, 0, 1, 1, 1)};
-        private boolean isLargeRoom;
-        private static final String __OBFID = "CL_00000491";
-
-        public Library() {}
-
-        public Library(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
-        {
-            super(par1);
-            this.coordBaseMode = par4;
-            this.field_143013_d = this.getRandomDoor(par2Random);
-            this.boundingBox = par3StructureBoundingBox;
-            this.isLargeRoom = par3StructureBoundingBox.getYSize() > 6;
-        }
-
-        protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
-        {
-            super.func_143012_a(par1NBTTagCompound);
-            par1NBTTagCompound.setBoolean("Tall", this.isLargeRoom);
-        }
-
-        protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
-        {
-            super.func_143011_b(par1NBTTagCompound);
-            this.isLargeRoom = par1NBTTagCompound.getBoolean("Tall");
-        }
-
-        public static StructureStrongholdPieces.Library findValidPlacement(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
-        {
-            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -4, -1, 0, 14, 11, 15, par5);
-
-            if (!canStrongholdGoDeeper(var7) || StructureComponent.findIntersecting(par0List, var7) != null)
-            {
-                var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -4, -1, 0, 14, 6, 15, par5);
-
-                if (!canStrongholdGoDeeper(var7) || StructureComponent.findIntersecting(par0List, var7) != null)
-                {
-                    return null;
-                }
-            }
-
-            return new StructureStrongholdPieces.Library(par6, par1Random, var7, par5);
-        }
-
-        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
-        {
-            if (this.isLiquidInStructureBoundingBox(par1World, par3StructureBoundingBox))
-            {
-                return false;
-            }
-            else
-            {
-                byte var4 = 11;
-
-                if (!this.isLargeRoom)
-                {
-                    var4 = 6;
-                }
-
-                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 0, 0, 0, 13, var4 - 1, 14, true, par2Random, StructureStrongholdPieces.strongholdStones);
-                this.placeDoor(par1World, par2Random, par3StructureBoundingBox, this.field_143013_d, 4, 1, 0);
-                this.func_151551_a(par1World, par3StructureBoundingBox, par2Random, 0.07F, 2, 1, 1, 11, 4, 13, Blocks.web, Blocks.web, false);
-                boolean var5 = true;
-                boolean var6 = true;
-                int var7;
-
-                for (var7 = 1; var7 <= 13; ++var7)
-                {
-                    if ((var7 - 1) % 4 == 0)
-                    {
-                        this.func_151549_a(par1World, par3StructureBoundingBox, 1, 1, var7, 1, 4, var7, Blocks.planks, Blocks.planks, false);
-                        this.func_151549_a(par1World, par3StructureBoundingBox, 12, 1, var7, 12, 4, var7, Blocks.planks, Blocks.planks, false);
-                        this.func_151550_a(par1World, Blocks.torch, 0, 2, 3, var7, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.torch, 0, 11, 3, var7, par3StructureBoundingBox);
-
-                        if (this.isLargeRoom)
-                        {
-                            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 6, var7, 1, 9, var7, Blocks.planks, Blocks.planks, false);
-                            this.func_151549_a(par1World, par3StructureBoundingBox, 12, 6, var7, 12, 9, var7, Blocks.planks, Blocks.planks, false);
-                        }
-                    }
-                    else
-                    {
-                        this.func_151549_a(par1World, par3StructureBoundingBox, 1, 1, var7, 1, 4, var7, Blocks.bookshelf, Blocks.bookshelf, false);
-                        this.func_151549_a(par1World, par3StructureBoundingBox, 12, 1, var7, 12, 4, var7, Blocks.bookshelf, Blocks.bookshelf, false);
-
-                        if (this.isLargeRoom)
-                        {
-                            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 6, var7, 1, 9, var7, Blocks.bookshelf, Blocks.bookshelf, false);
-                            this.func_151549_a(par1World, par3StructureBoundingBox, 12, 6, var7, 12, 9, var7, Blocks.bookshelf, Blocks.bookshelf, false);
-                        }
-                    }
-                }
-
-                for (var7 = 3; var7 < 12; var7 += 2)
-                {
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 3, 1, var7, 4, 3, var7, Blocks.bookshelf, Blocks.bookshelf, false);
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 6, 1, var7, 7, 3, var7, Blocks.bookshelf, Blocks.bookshelf, false);
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 9, 1, var7, 10, 3, var7, Blocks.bookshelf, Blocks.bookshelf, false);
-                }
-
-                if (this.isLargeRoom)
-                {
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 1, 5, 1, 3, 5, 13, Blocks.planks, Blocks.planks, false);
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 10, 5, 1, 12, 5, 13, Blocks.planks, Blocks.planks, false);
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 4, 5, 1, 9, 5, 2, Blocks.planks, Blocks.planks, false);
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 4, 5, 12, 9, 5, 13, Blocks.planks, Blocks.planks, false);
-                    this.func_151550_a(par1World, Blocks.planks, 0, 9, 5, 11, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.planks, 0, 8, 5, 11, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.planks, 0, 9, 5, 10, par3StructureBoundingBox);
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 3, 6, 2, 3, 6, 12, Blocks.fence, Blocks.fence, false);
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 10, 6, 2, 10, 6, 10, Blocks.fence, Blocks.fence, false);
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 4, 6, 2, 9, 6, 2, Blocks.fence, Blocks.fence, false);
-                    this.func_151549_a(par1World, par3StructureBoundingBox, 4, 6, 12, 8, 6, 12, Blocks.fence, Blocks.fence, false);
-                    this.func_151550_a(par1World, Blocks.fence, 0, 9, 6, 11, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.fence, 0, 8, 6, 11, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.fence, 0, 9, 6, 10, par3StructureBoundingBox);
-                    var7 = this.func_151555_a(Blocks.ladder, 3);
-                    this.func_151550_a(par1World, Blocks.ladder, var7, 10, 1, 13, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.ladder, var7, 10, 2, 13, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.ladder, var7, 10, 3, 13, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.ladder, var7, 10, 4, 13, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.ladder, var7, 10, 5, 13, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.ladder, var7, 10, 6, 13, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.ladder, var7, 10, 7, 13, par3StructureBoundingBox);
-                    byte var8 = 7;
-                    byte var9 = 7;
-                    this.func_151550_a(par1World, Blocks.fence, 0, var8 - 1, 9, var9, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.fence, 0, var8, 9, var9, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.fence, 0, var8 - 1, 8, var9, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.fence, 0, var8, 8, var9, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.fence, 0, var8 - 1, 7, var9, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.fence, 0, var8, 7, var9, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.fence, 0, var8 - 2, 7, var9, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.fence, 0, var8 + 1, 7, var9, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.fence, 0, var8 - 1, 7, var9 - 1, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.fence, 0, var8 - 1, 7, var9 + 1, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.fence, 0, var8, 7, var9 - 1, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.fence, 0, var8, 7, var9 + 1, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.torch, 0, var8 - 2, 8, var9, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.torch, 0, var8 + 1, 8, var9, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.torch, 0, var8 - 1, 8, var9 - 1, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.torch, 0, var8 - 1, 8, var9 + 1, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.torch, 0, var8, 8, var9 - 1, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.torch, 0, var8, 8, var9 + 1, par3StructureBoundingBox);
-                }
-
-                this.generateStructureChestContents(par1World, par3StructureBoundingBox, par2Random, 3, 3, 5, WeightedRandomChestContent.func_92080_a(strongholdLibraryChestContents, new WeightedRandomChestContent[] {Items.enchanted_book.func_92112_a(par2Random, 1, 5, 2)}), 1 + par2Random.nextInt(4));
-
-                if (this.isLargeRoom)
-                {
-                    this.func_151550_a(par1World, Blocks.air, 0, 12, 9, 1, par3StructureBoundingBox);
-                    this.generateStructureChestContents(par1World, par3StructureBoundingBox, par2Random, 12, 8, 1, WeightedRandomChestContent.func_92080_a(strongholdLibraryChestContents, new WeightedRandomChestContent[] {Items.enchanted_book.func_92112_a(par2Random, 1, 5, 2)}), 1 + par2Random.nextInt(4));
-                }
-
-                return true;
+
+                return true;
             }
         }
     }
@@ -1230,6 +1015,26 @@ public class StructureStrongholdPieces
         }
     }
 
+    public static class Stairs2 extends StructureStrongholdPieces.Stairs
+    {
+        public StructureStrongholdPieces.PieceWeight strongholdPieceWeight;
+        public StructureStrongholdPieces.PortalRoom strongholdPortalRoom;
+        public List field_75026_c = new ArrayList();
+        private static final String __OBFID = "CL_00000499";
+
+        public Stairs2() {}
+
+        public Stairs2(int par1, Random par2Random, int par3, int par4)
+        {
+            super(0, par2Random, par3, par4);
+        }
+
+        public ChunkPosition func_151553_a()
+        {
+            return this.strongholdPortalRoom != null ? this.strongholdPortalRoom.func_151553_a() : super.func_151553_a();
+        }
+    }
+
     public static class Prison extends StructureStrongholdPieces.Stronghold
     {
         private static final String __OBFID = "CL_00000494";
@@ -1283,315 +1088,511 @@ public class StructureStrongholdPieces
         }
     }
 
-    public static class Corridor extends StructureStrongholdPieces.Stronghold
+    public static class LeftTurn extends StructureStrongholdPieces.Stronghold
+    {
+        private static final String __OBFID = "CL_00000490";
+
+        public LeftTurn() {}
+
+        public LeftTurn(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
+        {
+            super(par1);
+            this.coordBaseMode = par4;
+            this.field_143013_d = this.getRandomDoor(par2Random);
+            this.boundingBox = par3StructureBoundingBox;
+        }
+
+        public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
+        {
+            if (this.coordBaseMode != 2 && this.coordBaseMode != 3)
+            {
+                this.getNextComponentZ((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, 1, 1);
+            }
+            else
+            {
+                this.getNextComponentX((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, 1, 1);
+            }
+        }
+
+        public static StructureStrongholdPieces.LeftTurn findValidPlacement(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
+        {
+            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -1, -1, 0, 5, 5, 5, par5);
+            return canStrongholdGoDeeper(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureStrongholdPieces.LeftTurn(par6, par1Random, var7, par5) : null;
+        }
+
+        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
+        {
+            if (this.isLiquidInStructureBoundingBox(par1World, par3StructureBoundingBox))
+            {
+                return false;
+            }
+            else
+            {
+                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 0, 0, 0, 4, 4, 4, true, par2Random, StructureStrongholdPieces.strongholdStones);
+                this.placeDoor(par1World, par2Random, par3StructureBoundingBox, this.field_143013_d, 1, 1, 0);
+
+                if (this.coordBaseMode != 2 && this.coordBaseMode != 3)
+                {
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 4, 1, 1, 4, 3, 3, Blocks.air, Blocks.air, false);
+                }
+                else
+                {
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 0, 1, 1, 0, 3, 3, Blocks.air, Blocks.air, false);
+                }
+
+                return true;
+            }
+        }
+    }
+
+    public static class RightTurn extends StructureStrongholdPieces.LeftTurn
+    {
+        private static final String __OBFID = "CL_00000495";
+
+        public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
+        {
+            if (this.coordBaseMode != 2 && this.coordBaseMode != 3)
+            {
+                this.getNextComponentX((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, 1, 1);
+            }
+            else
+            {
+                this.getNextComponentZ((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, 1, 1);
+            }
+        }
+
+        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
+        {
+            if (this.isLiquidInStructureBoundingBox(par1World, par3StructureBoundingBox))
+            {
+                return false;
+            }
+            else
+            {
+                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 0, 0, 0, 4, 4, 4, true, par2Random, StructureStrongholdPieces.strongholdStones);
+                this.placeDoor(par1World, par2Random, par3StructureBoundingBox, this.field_143013_d, 1, 1, 0);
+
+                if (this.coordBaseMode != 2 && this.coordBaseMode != 3)
+                {
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 0, 1, 1, 0, 3, 3, Blocks.air, Blocks.air, false);
+                }
+                else
+                {
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 4, 1, 1, 4, 3, 3, Blocks.air, Blocks.air, false);
+                }
+
+                return true;
+            }
+        }
+    }
+
+    static class Stones extends StructureComponent.BlockSelector
+    {
+        private static final String __OBFID = "CL_00000497";
+
+        private Stones() {}
+
+        public void selectBlocks(Random par1Random, int par2, int par3, int par4, boolean par5)
+        {
+            if (par5)
+            {
+                this.field_151562_a = Blocks.stonebrick;
+                float var6 = par1Random.nextFloat();
+
+                if (var6 < 0.2F)
+                {
+                    this.selectedBlockMetaData = 2;
+                }
+                else if (var6 < 0.5F)
+                {
+                    this.selectedBlockMetaData = 1;
+                }
+                else if (var6 < 0.55F)
+                {
+                    this.field_151562_a = Blocks.monster_egg;
+                    this.selectedBlockMetaData = 2;
+                }
+                else
+                {
+                    this.selectedBlockMetaData = 0;
+                }
+            }
+            else
+            {
+                this.field_151562_a = Blocks.air;
+                this.selectedBlockMetaData = 0;
+            }
+        }
+
+        Stones(Object par1StructureStrongholdPieceWeight2)
+        {
+            this();
+        }
+    }
+
+    abstract static class Stronghold extends StructureComponent
+    {
+        protected StructureStrongholdPieces.Stronghold.Door field_143013_d;
+        private static final String __OBFID = "CL_00000503";
+
+        public Stronghold()
+        {
+            this.field_143013_d = StructureStrongholdPieces.Stronghold.Door.OPENING;
+        }
+
+        protected Stronghold(int par1)
+        {
+            super(par1);
+            this.field_143013_d = StructureStrongholdPieces.Stronghold.Door.OPENING;
+        }
+
+        protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
+        {
+            par1NBTTagCompound.setString("EntryDoor", this.field_143013_d.name());
+        }
+
+        protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
+        {
+            this.field_143013_d = StructureStrongholdPieces.Stronghold.Door.valueOf(par1NBTTagCompound.getString("EntryDoor"));
+        }
+
+        protected void placeDoor(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox, StructureStrongholdPieces.Stronghold.Door par4EnumDoor, int par5, int par6, int par7)
+        {
+            switch (StructureStrongholdPieces.SwitchDoor.doorEnum[par4EnumDoor.ordinal()])
+            {
+                case 1:
+                default:
+                    this.func_151549_a(par1World, par3StructureBoundingBox, par5, par6, par7, par5 + 3 - 1, par6 + 3 - 1, par7, Blocks.air, Blocks.air, false);
+                    break;
+
+                case 2:
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5, par6, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5, par6 + 1, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5, par6 + 2, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5 + 1, par6 + 2, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5 + 2, par6 + 2, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5 + 2, par6 + 1, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5 + 2, par6, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.wooden_door, 0, par5 + 1, par6, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.wooden_door, 8, par5 + 1, par6 + 1, par7, par3StructureBoundingBox);
+                    break;
+
+                case 3:
+                    this.func_151550_a(par1World, Blocks.air, 0, par5 + 1, par6, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.air, 0, par5 + 1, par6 + 1, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.iron_bars, 0, par5, par6, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.iron_bars, 0, par5, par6 + 1, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.iron_bars, 0, par5, par6 + 2, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.iron_bars, 0, par5 + 1, par6 + 2, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.iron_bars, 0, par5 + 2, par6 + 2, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.iron_bars, 0, par5 + 2, par6 + 1, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.iron_bars, 0, par5 + 2, par6, par7, par3StructureBoundingBox);
+                    break;
+
+                case 4:
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5, par6, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5, par6 + 1, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5, par6 + 2, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5 + 1, par6 + 2, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5 + 2, par6 + 2, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5 + 2, par6 + 1, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, par5 + 2, par6, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.iron_door, 0, par5 + 1, par6, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.iron_door, 8, par5 + 1, par6 + 1, par7, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stone_button, this.func_151555_a(Blocks.stone_button, 4), par5 + 2, par6 + 1, par7 + 1, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stone_button, this.func_151555_a(Blocks.stone_button, 3), par5 + 2, par6 + 1, par7 - 1, par3StructureBoundingBox);
+            }
+        }
+
+        protected StructureStrongholdPieces.Stronghold.Door getRandomDoor(Random par1Random)
+        {
+            int var2 = par1Random.nextInt(5);
+
+            switch (var2)
+            {
+                case 0:
+                case 1:
+                default:
+                    return StructureStrongholdPieces.Stronghold.Door.OPENING;
+
+                case 2:
+                    return StructureStrongholdPieces.Stronghold.Door.WOOD_DOOR;
+
+                case 3:
+                    return StructureStrongholdPieces.Stronghold.Door.GRATES;
+
+                case 4:
+                    return StructureStrongholdPieces.Stronghold.Door.IRON_DOOR;
+            }
+        }
+
+        protected StructureComponent getNextComponentNormal(StructureStrongholdPieces.Stairs2 par1ComponentStrongholdStairs2, List par2List, Random par3Random, int par4, int par5)
         {
-        private int field_74993_a;
-        private static final String __OBFID = "CL_00000488";
+            switch (this.coordBaseMode)
+            {
+                case 0:
+                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.minX + par4, this.boundingBox.minY + par5, this.boundingBox.maxZ + 1, this.coordBaseMode, this.getComponentType());
 
-        public Corridor() {}
+                case 1:
+                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.minX - 1, this.boundingBox.minY + par5, this.boundingBox.minZ + par4, this.coordBaseMode, this.getComponentType());
 
-        public Corridor(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
-        {
-            super(par1);
-            this.coordBaseMode = par4;
-            this.boundingBox = par3StructureBoundingBox;
-            this.field_74993_a = par4 != 2 && par4 != 0 ? par3StructureBoundingBox.getXSize() : par3StructureBoundingBox.getZSize();
-        }
+                case 2:
+                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.minX + par4, this.boundingBox.minY + par5, this.boundingBox.minZ - 1, this.coordBaseMode, this.getComponentType());
 
-        protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
-        {
-            super.func_143012_a(par1NBTTagCompound);
-            par1NBTTagCompound.setInteger("Steps", this.field_74993_a);
-        }
+                case 3:
+                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.maxX + 1, this.boundingBox.minY + par5, this.boundingBox.minZ + par4, this.coordBaseMode, this.getComponentType());
 
-        protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
-        {
-            super.func_143011_b(par1NBTTagCompound);
-            this.field_74993_a = par1NBTTagCompound.getInteger("Steps");
+                default:
+                    return null;
+            }
         }
 
-        public static StructureBoundingBox func_74992_a(List par0List, Random par1Random, int par2, int par3, int par4, int par5)
+        protected StructureComponent getNextComponentX(StructureStrongholdPieces.Stairs2 par1ComponentStrongholdStairs2, List par2List, Random par3Random, int par4, int par5)
         {
-            boolean var6 = true;
-            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -1, -1, 0, 5, 5, 4, par5);
-            StructureComponent var8 = StructureComponent.findIntersecting(par0List, var7);
-
-            if (var8 == null)
+            switch (this.coordBaseMode)
             {
+                case 0:
+                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.minX - 1, this.boundingBox.minY + par4, this.boundingBox.minZ + par5, 1, this.getComponentType());
+
+                case 1:
+                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.minX + par5, this.boundingBox.minY + par4, this.boundingBox.minZ - 1, 2, this.getComponentType());
+
+                case 2:
+                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.minX - 1, this.boundingBox.minY + par4, this.boundingBox.minZ + par5, 1, this.getComponentType());
+
+                case 3:
+                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.minX + par5, this.boundingBox.minY + par4, this.boundingBox.minZ - 1, 2, this.getComponentType());
+
+                default:
                     return null;
             }
-            else
-            {
-                if (var8.getBoundingBox().minY == var7.minY)
+        }
+
+        protected StructureComponent getNextComponentZ(StructureStrongholdPieces.Stairs2 par1ComponentStrongholdStairs2, List par2List, Random par3Random, int par4, int par5)
         {
-                    for (int var9 = 3; var9 >= 1; --var9)
+            switch (this.coordBaseMode)
             {
-                        var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -1, -1, 0, 5, 5, var9 - 1, par5);
+                case 0:
+                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.maxX + 1, this.boundingBox.minY + par4, this.boundingBox.minZ + par5, 3, this.getComponentType());
 
-                        if (!var8.getBoundingBox().intersectsWith(var7))
-                        {
-                            return StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -1, -1, 0, 5, 5, var9, par5);
-                        }
-                    }
-                }
+                case 1:
+                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.minX + par5, this.boundingBox.minY + par4, this.boundingBox.maxZ + 1, 0, this.getComponentType());
+
+                case 2:
+                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.maxX + 1, this.boundingBox.minY + par4, this.boundingBox.minZ + par5, 3, this.getComponentType());
 
+                case 3:
+                    return StructureStrongholdPieces.getNextValidComponent(par1ComponentStrongholdStairs2, par2List, par3Random, this.boundingBox.minX + par5, this.boundingBox.minY + par4, this.boundingBox.maxZ + 1, 0, this.getComponentType());
+
+                default:
                     return null;
             }
         }
 
-        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
-        {
-            if (this.isLiquidInStructureBoundingBox(par1World, par3StructureBoundingBox))
+        protected static boolean canStrongholdGoDeeper(StructureBoundingBox par0StructureBoundingBox)
         {
-                return false;
+            return par0StructureBoundingBox != null && par0StructureBoundingBox.minY > 10;
         }
-            else
-            {
-                for (int var4 = 0; var4 < this.field_74993_a; ++var4)
-                {
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, 0, 0, var4, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, 1, 0, var4, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, 2, 0, var4, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, 3, 0, var4, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, 4, 0, var4, par3StructureBoundingBox);
 
-                    for (int var5 = 1; var5 <= 3; ++var5)
+        public static enum Door
         {
-                        this.func_151550_a(par1World, Blocks.stonebrick, 0, 0, var5, var4, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.air, 0, 1, var5, var4, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.air, 0, 2, var5, var4, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.air, 0, 3, var5, var4, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.stonebrick, 0, 4, var5, var4, par3StructureBoundingBox);
-                    }
+            OPENING("OPENING", 0),
+            WOOD_DOOR("WOOD_DOOR", 1),
+            GRATES("GRATES", 2),
+            IRON_DOOR("IRON_DOOR", 3);
 
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, 0, 4, var4, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, 1, 4, var4, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, 2, 4, var4, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, 3, 4, var4, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.stonebrick, 0, 4, 4, var4, par3StructureBoundingBox);
-                }
+            private static final StructureStrongholdPieces.Stronghold.Door[] $VALUES = new StructureStrongholdPieces.Stronghold.Door[]{OPENING, WOOD_DOOR, GRATES, IRON_DOOR};
+            private static final String __OBFID = "CL_00000504";
 
-                return true;
-            }
+            private Door(String par1Str, int par2) {}
         }
     }
 
-    public static class ChestCorridor extends StructureStrongholdPieces.Stronghold
+    public static class Crossing extends StructureStrongholdPieces.Stronghold
     {
-        private static final WeightedRandomChestContent[] strongholdChestContents = new WeightedRandomChestContent[] {new WeightedRandomChestContent(Items.ender_pearl, 0, 1, 1, 10), new WeightedRandomChestContent(Items.diamond, 0, 1, 3, 3), new WeightedRandomChestContent(Items.iron_ingot, 0, 1, 5, 10), new WeightedRandomChestContent(Items.gold_ingot, 0, 1, 3, 5), new WeightedRandomChestContent(Items.redstone, 0, 4, 9, 5), new WeightedRandomChestContent(Items.bread, 0, 1, 3, 15), new WeightedRandomChestContent(Items.apple, 0, 1, 3, 15), new WeightedRandomChestContent(Items.iron_pickaxe, 0, 1, 1, 5), new WeightedRandomChestContent(Items.iron_sword, 0, 1, 1, 5), new WeightedRandomChestContent(Items.iron_chestplate, 0, 1, 1, 5), new WeightedRandomChestContent(Items.iron_helmet, 0, 1, 1, 5), new WeightedRandomChestContent(Items.iron_leggings, 0, 1, 1, 5), new WeightedRandomChestContent(Items.iron_boots, 0, 1, 1, 5), new WeightedRandomChestContent(Items.golden_apple, 0, 1, 1, 1), new WeightedRandomChestContent(Items.saddle, 0, 1, 1, 1), new WeightedRandomChestContent(Items.iron_horse_armor, 0, 1, 1, 1), new WeightedRandomChestContent(Items.golden_horse_armor, 0, 1, 1, 1), new WeightedRandomChestContent(Items.diamond_horse_armor, 0, 1, 1, 1)};
-        private boolean hasMadeChest;
-        private static final String __OBFID = "CL_00000487";
+        private boolean field_74996_b;
+        private boolean field_74997_c;
+        private boolean field_74995_d;
+        private boolean field_74999_h;
+        private static final String __OBFID = "CL_00000489";
 
-        public ChestCorridor() {}
+        public Crossing() {}
 
-        public ChestCorridor(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
+        public Crossing(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
         {
             super(par1);
             this.coordBaseMode = par4;
             this.field_143013_d = this.getRandomDoor(par2Random);
             this.boundingBox = par3StructureBoundingBox;
+            this.field_74996_b = par2Random.nextBoolean();
+            this.field_74997_c = par2Random.nextBoolean();
+            this.field_74995_d = par2Random.nextBoolean();
+            this.field_74999_h = par2Random.nextInt(3) > 0;
         }
 
         protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
         {
             super.func_143012_a(par1NBTTagCompound);
-            par1NBTTagCompound.setBoolean("Chest", this.hasMadeChest);
+            par1NBTTagCompound.setBoolean("leftLow", this.field_74996_b);
+            par1NBTTagCompound.setBoolean("leftHigh", this.field_74997_c);
+            par1NBTTagCompound.setBoolean("rightLow", this.field_74995_d);
+            par1NBTTagCompound.setBoolean("rightHigh", this.field_74999_h);
         }
 
         protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
         {
             super.func_143011_b(par1NBTTagCompound);
-            this.hasMadeChest = par1NBTTagCompound.getBoolean("Chest");
+            this.field_74996_b = par1NBTTagCompound.getBoolean("leftLow");
+            this.field_74997_c = par1NBTTagCompound.getBoolean("leftHigh");
+            this.field_74995_d = par1NBTTagCompound.getBoolean("rightLow");
+            this.field_74999_h = par1NBTTagCompound.getBoolean("rightHigh");
         }
 
         public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
         {
-            this.getNextComponentNormal((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, 1, 1);
-        }
+            int var4 = 3;
+            int var5 = 5;
 
-        public static StructureStrongholdPieces.ChestCorridor findValidPlacement(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
+            if (this.coordBaseMode == 1 || this.coordBaseMode == 2)
             {
-            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -1, -1, 0, 5, 5, 7, par5);
-            return canStrongholdGoDeeper(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureStrongholdPieces.ChestCorridor(par6, par1Random, var7, par5) : null;
+                var4 = 8 - var4;
+                var5 = 8 - var5;
             }
 
-        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
-        {
-            if (this.isLiquidInStructureBoundingBox(par1World, par3StructureBoundingBox))
-            {
-                return false;
-            }
-            else
-            {
-                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 0, 0, 0, 4, 4, 6, true, par2Random, StructureStrongholdPieces.strongholdStones);
-                this.placeDoor(par1World, par2Random, par3StructureBoundingBox, this.field_143013_d, 1, 1, 0);
-                this.placeDoor(par1World, par2Random, par3StructureBoundingBox, StructureStrongholdPieces.Stronghold.Door.OPENING, 1, 1, 6);
-                this.func_151549_a(par1World, par3StructureBoundingBox, 3, 1, 2, 3, 1, 4, Blocks.stonebrick, Blocks.stonebrick, false);
-                this.func_151550_a(par1World, Blocks.stone_slab, 5, 3, 1, 1, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.stone_slab, 5, 3, 1, 5, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.stone_slab, 5, 3, 2, 2, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.stone_slab, 5, 3, 2, 4, par3StructureBoundingBox);
-                int var4;
+            this.getNextComponentNormal((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, 5, 1);
 
-                for (var4 = 2; var4 <= 4; ++var4)
+            if (this.field_74996_b)
             {
-                    this.func_151550_a(par1World, Blocks.stone_slab, 5, 2, 1, var4, par3StructureBoundingBox);
+                this.getNextComponentX((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, var4, 1);
             }
 
-                if (!this.hasMadeChest)
-                {
-                    var4 = this.getYWithOffset(2);
-                    int var5 = this.getXWithOffset(3, 3);
-                    int var6 = this.getZWithOffset(3, 3);
-
-                    if (par3StructureBoundingBox.isVecInside(var5, var4, var6))
+            if (this.field_74997_c)
             {
-                        this.hasMadeChest = true;
-                        this.generateStructureChestContents(par1World, par3StructureBoundingBox, par2Random, 3, 2, 3, WeightedRandomChestContent.func_92080_a(strongholdChestContents, new WeightedRandomChestContent[] {Items.enchanted_book.func_92114_b(par2Random)}), 2 + par2Random.nextInt(2));
-                    }
-                }
-
-                return true;
-            }
-        }
+                this.getNextComponentX((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, var5, 7);
             }
 
-    public static class Stairs extends StructureStrongholdPieces.Stronghold
-    {
-        private boolean field_75024_a;
-        private static final String __OBFID = "CL_00000498";
-
-        public Stairs() {}
-
-        public Stairs(int par1, Random par2Random, int par3, int par4)
+            if (this.field_74995_d)
             {
-            super(par1);
-            this.field_75024_a = true;
-            this.coordBaseMode = par2Random.nextInt(4);
-            this.field_143013_d = StructureStrongholdPieces.Stronghold.Door.OPENING;
+                this.getNextComponentZ((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, var4, 1);
+            }
 
-            switch (this.coordBaseMode)
+            if (this.field_74999_h)
             {
-                case 0:
-                case 2:
-                    this.boundingBox = new StructureBoundingBox(par3, 64, par4, par3 + 5 - 1, 74, par4 + 5 - 1);
-                    break;
-
-                default:
-                    this.boundingBox = new StructureBoundingBox(par3, 64, par4, par3 + 5 - 1, 74, par4 + 5 - 1);
+                this.getNextComponentZ((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, var5, 7);
             }
         }
 
-        public Stairs(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
+        public static StructureStrongholdPieces.Crossing findValidPlacement(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
         {
-            super(par1);
-            this.field_75024_a = false;
-            this.coordBaseMode = par4;
-            this.field_143013_d = this.getRandomDoor(par2Random);
-            this.boundingBox = par3StructureBoundingBox;
+            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -4, -3, 0, 10, 9, 11, par5);
+            return canStrongholdGoDeeper(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureStrongholdPieces.Crossing(par6, par1Random, var7, par5) : null;
         }
 
-        protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
+        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
         {
-            super.func_143012_a(par1NBTTagCompound);
-            par1NBTTagCompound.setBoolean("Source", this.field_75024_a);
-        }
-
-        protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
+            if (this.isLiquidInStructureBoundingBox(par1World, par3StructureBoundingBox))
             {
-            super.func_143011_b(par1NBTTagCompound);
-            this.field_75024_a = par1NBTTagCompound.getBoolean("Source");
+                return false;
             }
+            else
+            {
+                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 0, 0, 0, 9, 8, 10, true, par2Random, StructureStrongholdPieces.strongholdStones);
+                this.placeDoor(par1World, par2Random, par3StructureBoundingBox, this.field_143013_d, 4, 3, 0);
 
-        public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
-        {
-            if (this.field_75024_a)
+                if (this.field_74996_b)
                 {
-                StructureStrongholdPieces.strongComponentType = StructureStrongholdPieces.Crossing.class;
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 0, 3, 1, 0, 5, 3, Blocks.air, Blocks.air, false);
                 }
 
-            this.getNextComponentNormal((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, 1, 1);
+                if (this.field_74995_d)
+                {
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 9, 3, 1, 9, 5, 3, Blocks.air, Blocks.air, false);
                 }
 
-        public static StructureStrongholdPieces.Stairs getStrongholdStairsComponent(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
+                if (this.field_74997_c)
                 {
-            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -1, -7, 0, 5, 11, 5, par5);
-            return canStrongholdGoDeeper(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureStrongholdPieces.Stairs(par6, par1Random, var7, par5) : null;
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 7, 0, 7, 9, Blocks.air, Blocks.air, false);
                 }
 
-        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
-        {
-            if (this.isLiquidInStructureBoundingBox(par1World, par3StructureBoundingBox))
+                if (this.field_74999_h)
                 {
-                return false;
+                    this.func_151549_a(par1World, par3StructureBoundingBox, 9, 5, 7, 9, 7, 9, Blocks.air, Blocks.air, false);
                 }
-            else
-            {
-                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 0, 0, 0, 4, 10, 4, true, par2Random, StructureStrongholdPieces.strongholdStones);
-                this.placeDoor(par1World, par2Random, par3StructureBoundingBox, this.field_143013_d, 1, 7, 0);
-                this.placeDoor(par1World, par2Random, par3StructureBoundingBox, StructureStrongholdPieces.Stronghold.Door.OPENING, 1, 1, 4);
-                this.func_151550_a(par1World, Blocks.stonebrick, 0, 2, 6, 1, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.stonebrick, 0, 1, 5, 1, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.stone_slab, 0, 1, 6, 1, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.stonebrick, 0, 1, 5, 2, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.stonebrick, 0, 1, 4, 3, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.stone_slab, 0, 1, 5, 3, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.stonebrick, 0, 2, 4, 3, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.stonebrick, 0, 3, 3, 3, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.stone_slab, 0, 3, 4, 3, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.stonebrick, 0, 3, 3, 2, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.stonebrick, 0, 3, 2, 1, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.stone_slab, 0, 3, 3, 1, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.stonebrick, 0, 2, 2, 1, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.stonebrick, 0, 1, 1, 1, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.stone_slab, 0, 1, 2, 1, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.stonebrick, 0, 1, 1, 2, par3StructureBoundingBox);
-                this.func_151550_a(par1World, Blocks.stone_slab, 0, 1, 1, 3, par3StructureBoundingBox);
+
+                this.func_151549_a(par1World, par3StructureBoundingBox, 5, 1, 10, 7, 3, 10, Blocks.air, Blocks.air, false);
+                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 1, 2, 1, 8, 2, 6, false, par2Random, StructureStrongholdPieces.strongholdStones);
+                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 4, 1, 5, 4, 4, 9, false, par2Random, StructureStrongholdPieces.strongholdStones);
+                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 8, 1, 5, 8, 4, 9, false, par2Random, StructureStrongholdPieces.strongholdStones);
+                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 1, 4, 7, 3, 4, 9, false, par2Random, StructureStrongholdPieces.strongholdStones);
+                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 1, 3, 5, 3, 3, 6, false, par2Random, StructureStrongholdPieces.strongholdStones);
+                this.func_151549_a(par1World, par3StructureBoundingBox, 1, 3, 4, 3, 3, 4, Blocks.stone_slab, Blocks.stone_slab, false);
+                this.func_151549_a(par1World, par3StructureBoundingBox, 1, 4, 6, 3, 4, 6, Blocks.stone_slab, Blocks.stone_slab, false);
+                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 5, 1, 7, 7, 1, 8, false, par2Random, StructureStrongholdPieces.strongholdStones);
+                this.func_151549_a(par1World, par3StructureBoundingBox, 5, 1, 9, 7, 1, 9, Blocks.stone_slab, Blocks.stone_slab, false);
+                this.func_151549_a(par1World, par3StructureBoundingBox, 5, 2, 7, 7, 2, 7, Blocks.stone_slab, Blocks.stone_slab, false);
+                this.func_151549_a(par1World, par3StructureBoundingBox, 4, 5, 7, 4, 5, 9, Blocks.stone_slab, Blocks.stone_slab, false);
+                this.func_151549_a(par1World, par3StructureBoundingBox, 8, 5, 7, 8, 5, 9, Blocks.stone_slab, Blocks.stone_slab, false);
+                this.func_151549_a(par1World, par3StructureBoundingBox, 5, 5, 7, 7, 5, 9, Blocks.double_stone_slab, Blocks.double_stone_slab, false);
+                this.func_151550_a(par1World, Blocks.torch, 0, 6, 5, 6, par3StructureBoundingBox);
                 return true;
             }
         }
     }
 
-    public static class RoomCrossing extends StructureStrongholdPieces.Stronghold
+    public static class Corridor extends StructureStrongholdPieces.Stronghold
     {
-        private static final WeightedRandomChestContent[] strongholdRoomCrossingChestContents = new WeightedRandomChestContent[] {new WeightedRandomChestContent(Items.iron_ingot, 0, 1, 5, 10), new WeightedRandomChestContent(Items.gold_ingot, 0, 1, 3, 5), new WeightedRandomChestContent(Items.redstone, 0, 4, 9, 5), new WeightedRandomChestContent(Items.coal, 0, 3, 8, 10), new WeightedRandomChestContent(Items.bread, 0, 1, 3, 15), new WeightedRandomChestContent(Items.apple, 0, 1, 3, 15), new WeightedRandomChestContent(Items.iron_pickaxe, 0, 1, 1, 1)};
-        protected int roomType;
-        private static final String __OBFID = "CL_00000496";
+        private int field_74993_a;
+        private static final String __OBFID = "CL_00000488";
 
-        public RoomCrossing() {}
+        public Corridor() {}
 
-        public RoomCrossing(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
+        public Corridor(int par1, Random par2Random, StructureBoundingBox par3StructureBoundingBox, int par4)
         {
             super(par1);
             this.coordBaseMode = par4;
-            this.field_143013_d = this.getRandomDoor(par2Random);
             this.boundingBox = par3StructureBoundingBox;
-            this.roomType = par2Random.nextInt(5);
+            this.field_74993_a = par4 != 2 && par4 != 0 ? par3StructureBoundingBox.getXSize() : par3StructureBoundingBox.getZSize();
         }
 
         protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
         {
             super.func_143012_a(par1NBTTagCompound);
-            par1NBTTagCompound.setInteger("Type", this.roomType);
+            par1NBTTagCompound.setInteger("Steps", this.field_74993_a);
         }
 
         protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
         {
             super.func_143011_b(par1NBTTagCompound);
-            this.roomType = par1NBTTagCompound.getInteger("Type");
+            this.field_74993_a = par1NBTTagCompound.getInteger("Steps");
         }
 
-        public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
+        public static StructureBoundingBox func_74992_a(List par0List, Random par1Random, int par2, int par3, int par4, int par5)
         {
-            this.getNextComponentNormal((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, 4, 1);
-            this.getNextComponentX((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, 1, 4);
-            this.getNextComponentZ((StructureStrongholdPieces.Stairs2)par1StructureComponent, par2List, par3Random, 1, 4);
+            boolean var6 = true;
+            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -1, -1, 0, 5, 5, 4, par5);
+            StructureComponent var8 = StructureComponent.findIntersecting(par0List, var7);
+
+            if (var8 == null)
+            {
+                return null;
             }
+            else
+            {
+                if (var8.getBoundingBox().minY == var7.minY)
+                {
+                    for (int var9 = 3; var9 >= 1; --var9)
+                    {
+                        var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -1, -1, 0, 5, 5, var9 - 1, par5);
 
-        public static StructureStrongholdPieces.RoomCrossing findValidPlacement(List par0List, Random par1Random, int par2, int par3, int par4, int par5, int par6)
+                        if (!var8.getBoundingBox().intersectsWith(var7))
                         {
-            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -4, -1, 0, 11, 7, 11, par5);
-            return canStrongholdGoDeeper(var7) && StructureComponent.findIntersecting(par0List, var7) == null ? new StructureStrongholdPieces.RoomCrossing(par6, par1Random, var7, par5) : null;
+                            return StructureBoundingBox.getComponentToAddBoundingBox(par2, par3, par4, -1, -1, 0, 5, 5, var9, par5);
+                        }
+                    }
+                }
+
+                return null;
+            }
         }
 
         public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
@@ -1602,104 +1603,103 @@ public class StructureStrongholdPieces
             }
             else
             {
-                this.fillWithRandomizedBlocks(par1World, par3StructureBoundingBox, 0, 0, 0, 10, 6, 10, true, par2Random, StructureStrongholdPieces.strongholdStones);
-                this.placeDoor(par1World, par2Random, par3StructureBoundingBox, this.field_143013_d, 4, 1, 0);
-                this.func_151549_a(par1World, par3StructureBoundingBox, 4, 1, 10, 6, 3, 10, Blocks.air, Blocks.air, false);
-                this.func_151549_a(par1World, par3StructureBoundingBox, 0, 1, 4, 0, 3, 6, Blocks.air, Blocks.air, false);
-                this.func_151549_a(par1World, par3StructureBoundingBox, 10, 1, 4, 10, 3, 6, Blocks.air, Blocks.air, false);
-                int var4;
-
-                switch (this.roomType)
+                for (int var4 = 0; var4 < this.field_74993_a; ++var4)
                 {
-                    case 0:
-                        this.func_151550_a(par1World, Blocks.stonebrick, 0, 5, 1, 5, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.stonebrick, 0, 5, 2, 5, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.stonebrick, 0, 5, 3, 5, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.torch, 0, 4, 3, 5, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.torch, 0, 6, 3, 5, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.torch, 0, 5, 3, 4, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.torch, 0, 5, 3, 6, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.stone_slab, 0, 4, 1, 4, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.stone_slab, 0, 4, 1, 5, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.stone_slab, 0, 4, 1, 6, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.stone_slab, 0, 6, 1, 4, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.stone_slab, 0, 6, 1, 5, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.stone_slab, 0, 6, 1, 6, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.stone_slab, 0, 5, 1, 4, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.stone_slab, 0, 5, 1, 6, par3StructureBoundingBox);
-                        break;
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, 0, 0, var4, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, 1, 0, var4, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, 2, 0, var4, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, 3, 0, var4, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, 4, 0, var4, par3StructureBoundingBox);
 
-                    case 1:
-                        for (var4 = 0; var4 < 5; ++var4)
+                    for (int var5 = 1; var5 <= 3; ++var5)
                     {
-                            this.func_151550_a(par1World, Blocks.stonebrick, 0, 3, 1, 3 + var4, par3StructureBoundingBox);
-                            this.func_151550_a(par1World, Blocks.stonebrick, 0, 7, 1, 3 + var4, par3StructureBoundingBox);
-                            this.func_151550_a(par1World, Blocks.stonebrick, 0, 3 + var4, 1, 3, par3StructureBoundingBox);
-                            this.func_151550_a(par1World, Blocks.stonebrick, 0, 3 + var4, 1, 7, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.stonebrick, 0, 0, var5, var4, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.air, 0, 1, var5, var4, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.air, 0, 2, var5, var4, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.air, 0, 3, var5, var4, par3StructureBoundingBox);
+                        this.func_151550_a(par1World, Blocks.stonebrick, 0, 4, var5, var4, par3StructureBoundingBox);
                     }
 
-                        this.func_151550_a(par1World, Blocks.stonebrick, 0, 5, 1, 5, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.stonebrick, 0, 5, 2, 5, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.stonebrick, 0, 5, 3, 5, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.flowing_water, 0, 5, 4, 5, par3StructureBoundingBox);
-                        break;
-
-                    case 2:
-                        for (var4 = 1; var4 <= 9; ++var4)
-                        {
-                            this.func_151550_a(par1World, Blocks.cobblestone, 0, 1, 3, var4, par3StructureBoundingBox);
-                            this.func_151550_a(par1World, Blocks.cobblestone, 0, 9, 3, var4, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, 0, 4, var4, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, 1, 4, var4, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, 2, 4, var4, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, 3, 4, var4, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.stonebrick, 0, 4, 4, var4, par3StructureBoundingBox);
                 }
 
-                        for (var4 = 1; var4 <= 9; ++var4)
-                        {
-                            this.func_151550_a(par1World, Blocks.cobblestone, 0, var4, 3, 1, par3StructureBoundingBox);
-                            this.func_151550_a(par1World, Blocks.cobblestone, 0, var4, 3, 9, par3StructureBoundingBox);
+                return true;
+            }
+        }
     }
 
-                        this.func_151550_a(par1World, Blocks.cobblestone, 0, 5, 1, 4, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.cobblestone, 0, 5, 1, 6, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.cobblestone, 0, 5, 3, 4, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.cobblestone, 0, 5, 3, 6, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.cobblestone, 0, 4, 1, 5, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.cobblestone, 0, 6, 1, 5, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.cobblestone, 0, 4, 3, 5, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.cobblestone, 0, 6, 3, 5, par3StructureBoundingBox);
+    static final class SwitchDoor
+    {
+        static final int[] doorEnum = new int[StructureStrongholdPieces.Stronghold.Door.values().length];
+        private static final String __OBFID = "CL_00000486";
 
-                        for (var4 = 1; var4 <= 3; ++var4)
+        static
         {
-                            this.func_151550_a(par1World, Blocks.cobblestone, 0, 4, var4, 4, par3StructureBoundingBox);
-                            this.func_151550_a(par1World, Blocks.cobblestone, 0, 6, var4, 4, par3StructureBoundingBox);
-                            this.func_151550_a(par1World, Blocks.cobblestone, 0, 4, var4, 6, par3StructureBoundingBox);
-                            this.func_151550_a(par1World, Blocks.cobblestone, 0, 6, var4, 6, par3StructureBoundingBox);
+            try
+            {
+                doorEnum[StructureStrongholdPieces.Stronghold.Door.OPENING.ordinal()] = 1;
+            }
+            catch (NoSuchFieldError var4)
+            {
+                ;
             }
 
-                        this.func_151550_a(par1World, Blocks.torch, 0, 5, 3, 5, par3StructureBoundingBox);
-
-                        for (var4 = 2; var4 <= 8; ++var4)
+            try
             {
-                            this.func_151550_a(par1World, Blocks.planks, 0, 2, 3, var4, par3StructureBoundingBox);
-                            this.func_151550_a(par1World, Blocks.planks, 0, 3, 3, var4, par3StructureBoundingBox);
+                doorEnum[StructureStrongholdPieces.Stronghold.Door.WOOD_DOOR.ordinal()] = 2;
+            }
+            catch (NoSuchFieldError var3)
+            {
+                ;
+            }
 
-                            if (var4 <= 3 || var4 >= 7)
+            try
             {
-                                this.func_151550_a(par1World, Blocks.planks, 0, 4, 3, var4, par3StructureBoundingBox);
-                                this.func_151550_a(par1World, Blocks.planks, 0, 5, 3, var4, par3StructureBoundingBox);
-                                this.func_151550_a(par1World, Blocks.planks, 0, 6, 3, var4, par3StructureBoundingBox);
+                doorEnum[StructureStrongholdPieces.Stronghold.Door.GRATES.ordinal()] = 3;
+            }
+            catch (NoSuchFieldError var2)
+            {
+                ;
             }
 
-                            this.func_151550_a(par1World, Blocks.planks, 0, 7, 3, var4, par3StructureBoundingBox);
-                            this.func_151550_a(par1World, Blocks.planks, 0, 8, 3, var4, par3StructureBoundingBox);
+            try
+            {
+                doorEnum[StructureStrongholdPieces.Stronghold.Door.IRON_DOOR.ordinal()] = 4;
+            }
+            catch (NoSuchFieldError var1)
+            {
+                ;
+            }
+        }
     }
 
-                        this.func_151550_a(par1World, Blocks.ladder, this.func_151555_a(Blocks.ladder, 4), 9, 1, 3, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.ladder, this.func_151555_a(Blocks.ladder, 4), 9, 2, 3, par3StructureBoundingBox);
-                        this.func_151550_a(par1World, Blocks.ladder, this.func_151555_a(Blocks.ladder, 4), 9, 3, 3, par3StructureBoundingBox);
-                        this.generateStructureChestContents(par1World, par3StructureBoundingBox, par2Random, 3, 4, 8, WeightedRandomChestContent.func_92080_a(strongholdRoomCrossingChestContents, new WeightedRandomChestContent[] {Items.enchanted_book.func_92114_b(par2Random)}), 1 + par2Random.nextInt(4));
+    static class PieceWeight
+    {
+        public Class pieceClass;
+        public final int pieceWeight;
+        public int instancesSpawned;
+        public int instancesLimit;
+        private static final String __OBFID = "CL_00000492";
+
+        public PieceWeight(Class par1Class, int par2, int par3)
+        {
+            this.pieceClass = par1Class;
+            this.pieceWeight = par2;
+            this.instancesLimit = par3;
         }
 
-                return true;
+        public boolean canSpawnMoreStructuresOfType(int par1)
+        {
+            return this.instancesLimit == 0 || this.instancesSpawned < this.instancesLimit;
         }
+
+        public boolean canSpawnMoreStructures()
+        {
+            return this.instancesLimit == 0 || this.instancesSpawned < this.instancesLimit;
         }
     }
 }
diff --git a/net/minecraft/world/gen/structure/StructureVillagePieces.java b/net/minecraft/world/gen/structure/StructureVillagePieces.java
index 5d829a8..dfc294e 100644
--- a/net/minecraft/world/gen/structure/StructureVillagePieces.java
+++ b/net/minecraft/world/gen/structure/StructureVillagePieces.java
@@ -339,93 +339,243 @@ public class StructureVillagePieces
         }
     }
 
-    public static class Start extends StructureVillagePieces.Well
+    abstract static class Village extends StructureComponent
     {
-        public WorldChunkManager worldChunkMngr;
-        public boolean inDesert;
-        public int terrainType;
-        public StructureVillagePieces.PieceWeight structVillagePieceWeight;
-        public List structureVillageWeightedPieceList;
-        public List field_74932_i = new ArrayList();
-        public List field_74930_j = new ArrayList();
-        private static final String __OBFID = "CL_00000527";
+        protected int field_143015_k = -1;
+        private int villagersSpawned;
+        private boolean field_143014_b;
+        private static final String __OBFID = "CL_00000531";
 
-        public Start() {}
+        public Village() {}
 
-        public Start(WorldChunkManager par1WorldChunkManager, int par2, Random par3Random, int par4, int par5, List par6List, int par7)
+        protected Village(StructureVillagePieces.Start par1ComponentVillageStartPiece, int par2)
         {
-            super((StructureVillagePieces.Start)null, 0, par3Random, par4, par5);
-            this.worldChunkMngr = par1WorldChunkManager;
-            this.structureVillageWeightedPieceList = par6List;
-            this.terrainType = par7;
-            BiomeGenBase var8 = par1WorldChunkManager.getBiomeGenAt(par4, par5);
-            this.inDesert = var8 == BiomeGenBase.desert || var8 == BiomeGenBase.desertHills;
+            super(par2);
+
+            if (par1ComponentVillageStartPiece != null)
+            {
+                this.field_143014_b = par1ComponentVillageStartPiece.inDesert;
+            }
         }
 
-        public WorldChunkManager getWorldChunkManager()
+        protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
         {
-            return this.worldChunkMngr;
+            par1NBTTagCompound.setInteger("HPos", this.field_143015_k);
+            par1NBTTagCompound.setInteger("VCount", this.villagersSpawned);
+            par1NBTTagCompound.setBoolean("Desert", this.field_143014_b);
         }
+
+        protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
+        {
+            this.field_143015_k = par1NBTTagCompound.getInteger("HPos");
+            this.villagersSpawned = par1NBTTagCompound.getInteger("VCount");
+            this.field_143014_b = par1NBTTagCompound.getBoolean("Desert");
         }
 
-    public static class Field1 extends StructureVillagePieces.Village
+        protected StructureComponent getNextComponentNN(StructureVillagePieces.Start par1ComponentVillageStartPiece, List par2List, Random par3Random, int par4, int par5)
         {
-        private Block cropTypeA;
-        private Block cropTypeB;
-        private Block cropTypeC;
-        private Block cropTypeD;
-        private static final String __OBFID = "CL_00000518";
+            switch (this.coordBaseMode)
+            {
+                case 0:
+                    return StructureVillagePieces.getNextVillageStructureComponent(par1ComponentVillageStartPiece, par2List, par3Random, this.boundingBox.minX - 1, this.boundingBox.minY + par4, this.boundingBox.minZ + par5, 1, this.getComponentType());
 
-        public Field1() {}
+                case 1:
+                    return StructureVillagePieces.getNextVillageStructureComponent(par1ComponentVillageStartPiece, par2List, par3Random, this.boundingBox.minX + par5, this.boundingBox.minY + par4, this.boundingBox.minZ - 1, 2, this.getComponentType());
 
-        public Field1(StructureVillagePieces.Start par1ComponentVillageStartPiece, int par2, Random par3Random, StructureBoundingBox par4StructureBoundingBox, int par5)
+                case 2:
+                    return StructureVillagePieces.getNextVillageStructureComponent(par1ComponentVillageStartPiece, par2List, par3Random, this.boundingBox.minX - 1, this.boundingBox.minY + par4, this.boundingBox.minZ + par5, 1, this.getComponentType());
+
+                case 3:
+                    return StructureVillagePieces.getNextVillageStructureComponent(par1ComponentVillageStartPiece, par2List, par3Random, this.boundingBox.minX + par5, this.boundingBox.minY + par4, this.boundingBox.minZ - 1, 2, this.getComponentType());
+
+                default:
+                    return null;
+            }
+        }
+
+        protected StructureComponent getNextComponentPP(StructureVillagePieces.Start par1ComponentVillageStartPiece, List par2List, Random par3Random, int par4, int par5)
         {
-            super(par1ComponentVillageStartPiece, par2);
-            this.coordBaseMode = par5;
-            this.boundingBox = par4StructureBoundingBox;
-            this.cropTypeA = this.func_151559_a(par3Random);
-            this.cropTypeB = this.func_151559_a(par3Random);
-            this.cropTypeC = this.func_151559_a(par3Random);
-            this.cropTypeD = this.func_151559_a(par3Random);
+            switch (this.coordBaseMode)
+            {
+                case 0:
+                    return StructureVillagePieces.getNextVillageStructureComponent(par1ComponentVillageStartPiece, par2List, par3Random, this.boundingBox.maxX + 1, this.boundingBox.minY + par4, this.boundingBox.minZ + par5, 3, this.getComponentType());
+
+                case 1:
+                    return StructureVillagePieces.getNextVillageStructureComponent(par1ComponentVillageStartPiece, par2List, par3Random, this.boundingBox.minX + par5, this.boundingBox.minY + par4, this.boundingBox.maxZ + 1, 0, this.getComponentType());
+
+                case 2:
+                    return StructureVillagePieces.getNextVillageStructureComponent(par1ComponentVillageStartPiece, par2List, par3Random, this.boundingBox.maxX + 1, this.boundingBox.minY + par4, this.boundingBox.minZ + par5, 3, this.getComponentType());
+
+                case 3:
+                    return StructureVillagePieces.getNextVillageStructureComponent(par1ComponentVillageStartPiece, par2List, par3Random, this.boundingBox.minX + par5, this.boundingBox.minY + par4, this.boundingBox.maxZ + 1, 0, this.getComponentType());
+
+                default:
+                    return null;
+            }
         }
 
-        protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
+        protected int getAverageGroundLevel(World par1World, StructureBoundingBox par2StructureBoundingBox)
         {
-            super.func_143012_a(par1NBTTagCompound);
-            par1NBTTagCompound.setInteger("CA", Block.blockRegistry.getIDForObject(this.cropTypeA));
-            par1NBTTagCompound.setInteger("CB", Block.blockRegistry.getIDForObject(this.cropTypeB));
-            par1NBTTagCompound.setInteger("CC", Block.blockRegistry.getIDForObject(this.cropTypeC));
-            par1NBTTagCompound.setInteger("CD", Block.blockRegistry.getIDForObject(this.cropTypeD));
+            int var3 = 0;
+            int var4 = 0;
+
+            for (int var5 = this.boundingBox.minZ; var5 <= this.boundingBox.maxZ; ++var5)
+            {
+                for (int var6 = this.boundingBox.minX; var6 <= this.boundingBox.maxX; ++var6)
+                {
+                    if (par2StructureBoundingBox.isVecInside(var6, 64, var5))
+                    {
+                        var3 += Math.max(par1World.getTopSolidOrLiquidBlock(var6, var5), par1World.provider.getAverageGroundLevel());
+                        ++var4;
+                    }
+                }
             }
 
-        protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
+            if (var4 == 0)
             {
-            super.func_143011_b(par1NBTTagCompound);
-            this.cropTypeA = Block.getBlockById(par1NBTTagCompound.getInteger("CA"));
-            this.cropTypeB = Block.getBlockById(par1NBTTagCompound.getInteger("CB"));
-            this.cropTypeC = Block.getBlockById(par1NBTTagCompound.getInteger("CC"));
-            this.cropTypeD = Block.getBlockById(par1NBTTagCompound.getInteger("CD"));
+                return -1;
+            }
+            else
+            {
+                return var3 / var4;
+            }
         }
 
-        private Block func_151559_a(Random p_151559_1_)
+        protected static boolean canVillageGoDeeper(StructureBoundingBox par0StructureBoundingBox)
         {
-            switch (p_151559_1_.nextInt(5))
+            return par0StructureBoundingBox != null && par0StructureBoundingBox.minY > 10;
+        }
+
+        protected void spawnVillagers(World par1World, StructureBoundingBox par2StructureBoundingBox, int par3, int par4, int par5, int par6)
         {
-                case 0:
-                    return Blocks.carrots;
+            if (this.villagersSpawned < par6)
+            {
+                for (int var7 = this.villagersSpawned; var7 < par6; ++var7)
+                {
+                    int var8 = this.getXWithOffset(par3 + var7, par5);
+                    int var9 = this.getYWithOffset(par4);
+                    int var10 = this.getZWithOffset(par3 + var7, par5);
 
-                case 1:
-                    return Blocks.potatoes;
+                    if (!par2StructureBoundingBox.isVecInside(var8, var9, var10))
+                    {
+                        break;
+                    }
 
-                default:
-                    return Blocks.wheat;
+                    ++this.villagersSpawned;
+                    EntityVillager var11 = new EntityVillager(par1World, this.getVillagerType(var7));
+                    var11.setLocationAndAngles((double)var8 + 0.5D, (double)var9, (double)var10 + 0.5D, 0.0F, 0.0F);
+                    par1World.spawnEntityInWorld(var11);
+                }
             }
         }
 
-        public static StructureVillagePieces.Field1 func_74900_a(StructureVillagePieces.Start par0ComponentVillageStartPiece, List par1List, Random par2Random, int par3, int par4, int par5, int par6, int par7)
+        protected int getVillagerType(int par1)
         {
-            StructureBoundingBox var8 = StructureBoundingBox.getComponentToAddBoundingBox(par3, par4, par5, 0, 0, 0, 13, 4, 9, par6);
-            return canVillageGoDeeper(var8) && StructureComponent.findIntersecting(par1List, var8) == null ? new StructureVillagePieces.Field1(par0ComponentVillageStartPiece, par7, par2Random, var8, par6) : null;
+            return 0;
+        }
+
+        protected Block func_151558_b(Block p_151558_1_, int p_151558_2_)
+        {
+            if (this.field_143014_b)
+            {
+                if (p_151558_1_ == Blocks.log || p_151558_1_ == Blocks.log2)
+                {
+                    return Blocks.sandstone;
+                }
+
+                if (p_151558_1_ == Blocks.cobblestone)
+                {
+                    return Blocks.sandstone;
+                }
+
+                if (p_151558_1_ == Blocks.planks)
+                {
+                    return Blocks.sandstone;
+                }
+
+                if (p_151558_1_ == Blocks.oak_stairs)
+                {
+                    return Blocks.sandstone_stairs;
+                }
+
+                if (p_151558_1_ == Blocks.stone_stairs)
+                {
+                    return Blocks.sandstone_stairs;
+                }
+
+                if (p_151558_1_ == Blocks.gravel)
+                {
+                    return Blocks.sandstone;
+                }
+            }
+
+            return p_151558_1_;
+        }
+
+        protected int func_151557_c(Block p_151557_1_, int p_151557_2_)
+        {
+            if (this.field_143014_b)
+            {
+                if (p_151557_1_ == Blocks.log || p_151557_1_ == Blocks.log2)
+                {
+                    return 0;
+                }
+
+                if (p_151557_1_ == Blocks.cobblestone)
+                {
+                    return 0;
+                }
+
+                if (p_151557_1_ == Blocks.planks)
+                {
+                    return 2;
+                }
+            }
+
+            return p_151557_2_;
+        }
+
+        protected void func_151550_a(World p_151550_1_, Block p_151550_2_, int p_151550_3_, int p_151550_4_, int p_151550_5_, int p_151550_6_, StructureBoundingBox p_151550_7_)
+        {
+            Block var8 = this.func_151558_b(p_151550_2_, p_151550_3_);
+            int var9 = this.func_151557_c(p_151550_2_, p_151550_3_);
+            super.func_151550_a(p_151550_1_, var8, var9, p_151550_4_, p_151550_5_, p_151550_6_, p_151550_7_);
+        }
+
+        protected void func_151549_a(World p_151549_1_, StructureBoundingBox p_151549_2_, int p_151549_3_, int p_151549_4_, int p_151549_5_, int p_151549_6_, int p_151549_7_, int p_151549_8_, Block p_151549_9_, Block p_151549_10_, boolean p_151549_11_)
+        {
+            Block var12 = this.func_151558_b(p_151549_9_, 0);
+            int var13 = this.func_151557_c(p_151549_9_, 0);
+            Block var14 = this.func_151558_b(p_151549_10_, 0);
+            int var15 = this.func_151557_c(p_151549_10_, 0);
+            super.func_151556_a(p_151549_1_, p_151549_2_, p_151549_3_, p_151549_4_, p_151549_5_, p_151549_6_, p_151549_7_, p_151549_8_, var12, var13, var14, var15, p_151549_11_);
+        }
+
+        protected void func_151554_b(World p_151554_1_, Block p_151554_2_, int p_151554_3_, int p_151554_4_, int p_151554_5_, int p_151554_6_, StructureBoundingBox p_151554_7_)
+        {
+            Block var8 = this.func_151558_b(p_151554_2_, p_151554_3_);
+            int var9 = this.func_151557_c(p_151554_2_, p_151554_3_);
+            super.func_151554_b(p_151554_1_, var8, var9, p_151554_4_, p_151554_5_, p_151554_6_, p_151554_7_);
+        }
+    }
+
+    public static class Hall extends StructureVillagePieces.Village
+    {
+        private static final String __OBFID = "CL_00000522";
+
+        public Hall() {}
+
+        public Hall(StructureVillagePieces.Start par1ComponentVillageStartPiece, int par2, Random par3Random, StructureBoundingBox par4StructureBoundingBox, int par5)
+        {
+            super(par1ComponentVillageStartPiece, par2);
+            this.coordBaseMode = par5;
+            this.boundingBox = par4StructureBoundingBox;
+        }
+
+        public static StructureVillagePieces.Hall func_74906_a(StructureVillagePieces.Start par0ComponentVillageStartPiece, List par1List, Random par2Random, int par3, int par4, int par5, int par6, int par7)
+        {
+            StructureBoundingBox var8 = StructureBoundingBox.getComponentToAddBoundingBox(par3, par4, par5, 0, 0, 0, 9, 7, 11, par6);
+            return canVillageGoDeeper(var8) && StructureComponent.findIntersecting(par1List, var8) == null ? new StructureVillagePieces.Hall(par0ComponentVillageStartPiece, par7, par2Random, var8, par6) : null;
         }
 
         public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
@@ -439,124 +589,240 @@ public class StructureVillagePieces
                     return true;
                 }
 
-                this.boundingBox.offset(0, this.field_143015_k - this.boundingBox.maxY + 4 - 1, 0);
+                this.boundingBox.offset(0, this.field_143015_k - this.boundingBox.maxY + 7 - 1, 0);
             }
 
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 1, 0, 12, 4, 8, Blocks.air, Blocks.air, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 1, 2, 0, 7, Blocks.farmland, Blocks.farmland, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 0, 1, 5, 0, 7, Blocks.farmland, Blocks.farmland, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 7, 0, 1, 8, 0, 7, Blocks.farmland, Blocks.farmland, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 10, 0, 1, 11, 0, 7, Blocks.farmland, Blocks.farmland, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 0, 0, 0, 8, Blocks.log, Blocks.log, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 0, 0, 6, 0, 8, Blocks.log, Blocks.log, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 12, 0, 0, 12, 0, 8, Blocks.log, Blocks.log, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 0, 11, 0, 0, Blocks.log, Blocks.log, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 8, 11, 0, 8, Blocks.log, Blocks.log, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 3, 0, 1, 3, 0, 7, Blocks.water, Blocks.water, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 9, 0, 1, 9, 0, 7, Blocks.water, Blocks.water, false);
-            int var4;
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 1, 1, 7, 4, 4, Blocks.air, Blocks.air, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 1, 6, 8, 4, 10, Blocks.air, Blocks.air, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 0, 6, 8, 0, 10, Blocks.dirt, Blocks.dirt, false);
+            this.func_151550_a(par1World, Blocks.cobblestone, 0, 6, 0, 6, par3StructureBoundingBox);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 1, 6, 2, 1, 10, Blocks.fence, Blocks.fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 1, 6, 8, 1, 10, Blocks.fence, Blocks.fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 3, 1, 10, 7, 1, 10, Blocks.fence, Blocks.fence, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 1, 7, 0, 4, Blocks.planks, Blocks.planks, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 0, 0, 3, 5, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 0, 0, 8, 3, 5, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 0, 7, 1, 0, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 5, 7, 1, 5, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 2, 0, 7, 3, 0, Blocks.planks, Blocks.planks, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 2, 5, 7, 3, 5, Blocks.planks, Blocks.planks, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 4, 1, 8, 4, 1, Blocks.planks, Blocks.planks, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 4, 4, 8, 4, 4, Blocks.planks, Blocks.planks, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 2, 8, 5, 3, Blocks.planks, Blocks.planks, false);
+            this.func_151550_a(par1World, Blocks.planks, 0, 0, 4, 2, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.planks, 0, 0, 4, 3, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.planks, 0, 8, 4, 2, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.planks, 0, 8, 4, 3, par3StructureBoundingBox);
+            int var4 = this.func_151555_a(Blocks.oak_stairs, 3);
+            int var5 = this.func_151555_a(Blocks.oak_stairs, 2);
+            int var6;
+            int var7;
 
-            for (var4 = 1; var4 <= 7; ++var4)
+            for (var6 = -1; var6 <= 2; ++var6)
             {
-                this.func_151550_a(par1World, this.cropTypeA, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 1, 1, var4, par3StructureBoundingBox);
-                this.func_151550_a(par1World, this.cropTypeA, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 2, 1, var4, par3StructureBoundingBox);
-                this.func_151550_a(par1World, this.cropTypeB, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 4, 1, var4, par3StructureBoundingBox);
-                this.func_151550_a(par1World, this.cropTypeB, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 5, 1, var4, par3StructureBoundingBox);
-                this.func_151550_a(par1World, this.cropTypeC, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 7, 1, var4, par3StructureBoundingBox);
-                this.func_151550_a(par1World, this.cropTypeC, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 8, 1, var4, par3StructureBoundingBox);
-                this.func_151550_a(par1World, this.cropTypeD, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 10, 1, var4, par3StructureBoundingBox);
-                this.func_151550_a(par1World, this.cropTypeD, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 11, 1, var4, par3StructureBoundingBox);
+                for (var7 = 0; var7 <= 8; ++var7)
+                {
+                    this.func_151550_a(par1World, Blocks.oak_stairs, var4, var7, 4 + var6, var6, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.oak_stairs, var5, var7, 4 + var6, 5 - var6, par3StructureBoundingBox);
+                }
             }
 
-            for (var4 = 0; var4 < 9; ++var4)
+            this.func_151550_a(par1World, Blocks.log, 0, 0, 2, 1, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.log, 0, 0, 2, 4, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.log, 0, 8, 2, 1, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.log, 0, 8, 2, 4, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 0, 2, 2, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 0, 2, 3, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 8, 2, 2, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 8, 2, 3, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 2, 2, 5, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 3, 2, 5, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 5, 2, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 6, 2, 5, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.fence, 0, 2, 1, 3, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.wooden_pressure_plate, 0, 2, 2, 3, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.planks, 0, 1, 1, 4, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.oak_stairs, this.func_151555_a(Blocks.oak_stairs, 3), 2, 1, 4, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.oak_stairs, this.func_151555_a(Blocks.oak_stairs, 1), 1, 1, 3, par3StructureBoundingBox);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 0, 1, 7, 0, 3, Blocks.double_stone_slab, Blocks.double_stone_slab, false);
+            this.func_151550_a(par1World, Blocks.double_stone_slab, 0, 6, 1, 1, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.double_stone_slab, 0, 6, 1, 2, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.air, 0, 2, 1, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.air, 0, 2, 2, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.torch, 0, 2, 3, 1, par3StructureBoundingBox);
+            this.placeDoorAtCurrentPosition(par1World, par3StructureBoundingBox, par2Random, 2, 1, 0, this.func_151555_a(Blocks.wooden_door, 1));
+
+            if (this.func_151548_a(par1World, 2, 0, -1, par3StructureBoundingBox).getMaterial() == Material.air && this.func_151548_a(par1World, 2, -1, -1, par3StructureBoundingBox).getMaterial() != Material.air)
             {
-                for (int var5 = 0; var5 < 13; ++var5)
+                this.func_151550_a(par1World, Blocks.stone_stairs, this.func_151555_a(Blocks.stone_stairs, 3), 2, 0, -1, par3StructureBoundingBox);
+            }
+
+            this.func_151550_a(par1World, Blocks.air, 0, 6, 1, 5, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.air, 0, 6, 2, 5, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.torch, 0, 6, 3, 4, par3StructureBoundingBox);
+            this.placeDoorAtCurrentPosition(par1World, par3StructureBoundingBox, par2Random, 6, 1, 5, this.func_151555_a(Blocks.wooden_door, 1));
+
+            for (var6 = 0; var6 < 5; ++var6)
             {
-                    this.clearCurrentPositionBlocksUpwards(par1World, var5, 4, var4, par3StructureBoundingBox);
-                    this.func_151554_b(par1World, Blocks.dirt, 0, var5, -1, var4, par3StructureBoundingBox);
+                for (var7 = 0; var7 < 9; ++var7)
+                {
+                    this.clearCurrentPositionBlocksUpwards(par1World, var7, 7, var6, par3StructureBoundingBox);
+                    this.func_151554_b(par1World, Blocks.cobblestone, 0, var7, -1, var6, par3StructureBoundingBox);
                 }
             }
 
+            this.spawnVillagers(par1World, par3StructureBoundingBox, 4, 1, 2, 2);
             return true;
         }
+
+        protected int getVillagerType(int par1)
+        {
+            return par1 == 0 ? 4 : 0;
+        }
     }
 
-    public static class PieceWeight
+    public static class House1 extends StructureVillagePieces.Village
     {
-        public Class villagePieceClass;
-        public final int villagePieceWeight;
-        public int villagePiecesSpawned;
-        public int villagePiecesLimit;
-        private static final String __OBFID = "CL_00000521";
+        private static final String __OBFID = "CL_00000517";
 
-        public PieceWeight(Class par1Class, int par2, int par3)
+        public House1() {}
+
+        public House1(StructureVillagePieces.Start par1ComponentVillageStartPiece, int par2, Random par3Random, StructureBoundingBox par4StructureBoundingBox, int par5)
         {
-            this.villagePieceClass = par1Class;
-            this.villagePieceWeight = par2;
-            this.villagePiecesLimit = par3;
+            super(par1ComponentVillageStartPiece, par2);
+            this.coordBaseMode = par5;
+            this.boundingBox = par4StructureBoundingBox;
         }
 
-        public boolean canSpawnMoreVillagePiecesOfType(int par1)
+        public static StructureVillagePieces.House1 func_74898_a(StructureVillagePieces.Start par0ComponentVillageStartPiece, List par1List, Random par2Random, int par3, int par4, int par5, int par6, int par7)
         {
-            return this.villagePiecesLimit == 0 || this.villagePiecesSpawned < this.villagePiecesLimit;
+            StructureBoundingBox var8 = StructureBoundingBox.getComponentToAddBoundingBox(par3, par4, par5, 0, 0, 0, 9, 9, 6, par6);
+            return canVillageGoDeeper(var8) && StructureComponent.findIntersecting(par1List, var8) == null ? new StructureVillagePieces.House1(par0ComponentVillageStartPiece, par7, par2Random, var8, par6) : null;
         }
 
-        public boolean canSpawnMoreVillagePieces()
+        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
         {
-            return this.villagePiecesLimit == 0 || this.villagePiecesSpawned < this.villagePiecesLimit;
+            if (this.field_143015_k < 0)
+            {
+                this.field_143015_k = this.getAverageGroundLevel(par1World, par3StructureBoundingBox);
+
+                if (this.field_143015_k < 0)
+                {
+                    return true;
                 }
+
+                this.boundingBox.offset(0, this.field_143015_k - this.boundingBox.maxY + 9 - 1, 0);
             }
 
-    public static class Field2 extends StructureVillagePieces.Village
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 1, 1, 7, 5, 4, Blocks.air, Blocks.air, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 0, 8, 0, 5, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 0, 8, 5, 5, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 6, 1, 8, 6, 4, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 7, 2, 8, 7, 3, Blocks.cobblestone, Blocks.cobblestone, false);
+            int var4 = this.func_151555_a(Blocks.oak_stairs, 3);
+            int var5 = this.func_151555_a(Blocks.oak_stairs, 2);
+            int var6;
+            int var7;
+
+            for (var6 = -1; var6 <= 2; ++var6)
             {
-        private Block cropTypeA;
-        private Block cropTypeB;
-        private static final String __OBFID = "CL_00000519";
+                for (var7 = 0; var7 <= 8; ++var7)
+                {
+                    this.func_151550_a(par1World, Blocks.oak_stairs, var4, var7, 6 + var6, var6, par3StructureBoundingBox);
+                    this.func_151550_a(par1World, Blocks.oak_stairs, var5, var7, 6 + var6, 5 - var6, par3StructureBoundingBox);
+                }
+            }
 
-        public Field2() {}
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 1, 0, 0, 1, 5, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 1, 5, 8, 1, 5, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 1, 0, 8, 1, 4, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 1, 0, 7, 1, 0, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 0, 4, 0, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 5, 0, 4, 5, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 2, 5, 8, 4, 5, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 2, 0, 8, 4, 0, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 1, 0, 4, 4, Blocks.planks, Blocks.planks, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 2, 5, 7, 4, 5, Blocks.planks, Blocks.planks, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 2, 1, 8, 4, 4, Blocks.planks, Blocks.planks, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 2, 0, 7, 4, 0, Blocks.planks, Blocks.planks, false);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 4, 2, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 5, 2, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 6, 2, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 4, 3, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 5, 3, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 6, 3, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 0, 2, 2, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 0, 2, 3, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 0, 3, 2, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 0, 3, 3, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 8, 2, 2, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 8, 2, 3, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 8, 3, 2, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 8, 3, 3, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 2, 2, 5, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 3, 2, 5, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 5, 2, 5, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 6, 2, 5, par3StructureBoundingBox);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 4, 1, 7, 4, 1, Blocks.planks, Blocks.planks, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 4, 4, 7, 4, 4, Blocks.planks, Blocks.planks, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 3, 4, 7, 3, 4, Blocks.bookshelf, Blocks.bookshelf, false);
+            this.func_151550_a(par1World, Blocks.planks, 0, 7, 1, 4, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.oak_stairs, this.func_151555_a(Blocks.oak_stairs, 0), 7, 1, 3, par3StructureBoundingBox);
+            var6 = this.func_151555_a(Blocks.oak_stairs, 3);
+            this.func_151550_a(par1World, Blocks.oak_stairs, var6, 6, 1, 4, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.oak_stairs, var6, 5, 1, 4, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.oak_stairs, var6, 4, 1, 4, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.oak_stairs, var6, 3, 1, 4, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.fence, 0, 6, 1, 3, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.wooden_pressure_plate, 0, 6, 2, 3, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.fence, 0, 4, 1, 3, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.wooden_pressure_plate, 0, 4, 2, 3, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.crafting_table, 0, 7, 1, 1, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.air, 0, 1, 1, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.air, 0, 1, 2, 0, par3StructureBoundingBox);
+            this.placeDoorAtCurrentPosition(par1World, par3StructureBoundingBox, par2Random, 1, 1, 0, this.func_151555_a(Blocks.wooden_door, 1));
 
-        public Field2(StructureVillagePieces.Start par1ComponentVillageStartPiece, int par2, Random par3Random, StructureBoundingBox par4StructureBoundingBox, int par5)
+            if (this.func_151548_a(par1World, 1, 0, -1, par3StructureBoundingBox).getMaterial() == Material.air && this.func_151548_a(par1World, 1, -1, -1, par3StructureBoundingBox).getMaterial() != Material.air)
             {
-            super(par1ComponentVillageStartPiece, par2);
-            this.coordBaseMode = par5;
-            this.boundingBox = par4StructureBoundingBox;
-            this.cropTypeA = this.func_151560_a(par3Random);
-            this.cropTypeB = this.func_151560_a(par3Random);
+                this.func_151550_a(par1World, Blocks.stone_stairs, this.func_151555_a(Blocks.stone_stairs, 3), 1, 0, -1, par3StructureBoundingBox);
             }
 
-        protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
+            for (var7 = 0; var7 < 6; ++var7)
             {
-            super.func_143012_a(par1NBTTagCompound);
-            par1NBTTagCompound.setInteger("CA", Block.blockRegistry.getIDForObject(this.cropTypeA));
-            par1NBTTagCompound.setInteger("CB", Block.blockRegistry.getIDForObject(this.cropTypeB));
+                for (int var8 = 0; var8 < 9; ++var8)
+                {
+                    this.clearCurrentPositionBlocksUpwards(par1World, var8, 9, var7, par3StructureBoundingBox);
+                    this.func_151554_b(par1World, Blocks.cobblestone, 0, var8, -1, var7, par3StructureBoundingBox);
+                }
             }
 
-        protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
-        {
-            super.func_143011_b(par1NBTTagCompound);
-            this.cropTypeA = Block.getBlockById(par1NBTTagCompound.getInteger("CA"));
-            this.cropTypeB = Block.getBlockById(par1NBTTagCompound.getInteger("CB"));
+            this.spawnVillagers(par1World, par3StructureBoundingBox, 2, 1, 2, 1);
+            return true;
         }
 
-        private Block func_151560_a(Random p_151560_1_)
+        protected int getVillagerType(int par1)
         {
-            switch (p_151560_1_.nextInt(5))
+            return 1;
+        }
+    }
+
+    public static class Church extends StructureVillagePieces.Village
     {
-                case 0:
-                    return Blocks.carrots;
+        private static final String __OBFID = "CL_00000525";
 
-                case 1:
-                    return Blocks.potatoes;
+        public Church() {}
 
-                default:
-                    return Blocks.wheat;
-            }
+        public Church(StructureVillagePieces.Start par1ComponentVillageStartPiece, int par2, Random par3Random, StructureBoundingBox par4StructureBoundingBox, int par5)
+        {
+            super(par1ComponentVillageStartPiece, par2);
+            this.coordBaseMode = par5;
+            this.boundingBox = par4StructureBoundingBox;
         }
 
-        public static StructureVillagePieces.Field2 func_74902_a(StructureVillagePieces.Start par0ComponentVillageStartPiece, List par1List, Random par2Random, int par3, int par4, int par5, int par6, int par7)
+        public static StructureVillagePieces.Church func_74919_a(StructureVillagePieces.Start par0ComponentVillageStartPiece, List par1List, Random par2Random, int par3, int par4, int par5, int par6, int par7)
         {
-            StructureBoundingBox var8 = StructureBoundingBox.getComponentToAddBoundingBox(par3, par4, par5, 0, 0, 0, 7, 4, 9, par6);
-            return canVillageGoDeeper(var8) && StructureComponent.findIntersecting(par1List, var8) == null ? new StructureVillagePieces.Field2(par0ComponentVillageStartPiece, par7, par2Random, var8, par6) : null;
+            StructureBoundingBox var8 = StructureBoundingBox.getComponentToAddBoundingBox(par3, par4, par5, 0, 0, 0, 5, 12, 9, par6);
+            return canVillageGoDeeper(var8) && StructureComponent.findIntersecting(par1List, var8) == null ? new StructureVillagePieces.Church(par0ComponentVillageStartPiece, par7, par2Random, var8, par6) : null;
         }
 
         public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
@@ -570,38 +836,89 @@ public class StructureVillagePieces
                     return true;
                 }
 
-                this.boundingBox.offset(0, this.field_143015_k - this.boundingBox.maxY + 4 - 1, 0);
+                this.boundingBox.offset(0, this.field_143015_k - this.boundingBox.maxY + 12 - 1, 0);
             }
 
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 1, 0, 6, 4, 8, Blocks.air, Blocks.air, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 1, 2, 0, 7, Blocks.farmland, Blocks.farmland, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 0, 1, 5, 0, 7, Blocks.farmland, Blocks.farmland, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 0, 0, 0, 8, Blocks.log, Blocks.log, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 0, 0, 6, 0, 8, Blocks.log, Blocks.log, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 0, 5, 0, 0, Blocks.log, Blocks.log, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 8, 5, 0, 8, Blocks.log, Blocks.log, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 3, 0, 1, 3, 0, 7, Blocks.water, Blocks.water, false);
-            int var4;
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 1, 1, 3, 3, 7, Blocks.air, Blocks.air, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 5, 1, 3, 9, 3, Blocks.air, Blocks.air, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 0, 3, 0, 8, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 1, 0, 3, 10, 0, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 1, 1, 0, 10, 3, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 1, 1, 4, 10, 3, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 4, 0, 4, 7, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 0, 4, 4, 4, 7, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 1, 8, 3, 4, 8, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 5, 4, 3, 10, 4, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 5, 5, 3, 5, 7, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 9, 0, 4, 9, 4, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 4, 0, 4, 4, 4, Blocks.cobblestone, Blocks.cobblestone, false);
+            this.func_151550_a(par1World, Blocks.cobblestone, 0, 0, 11, 2, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.cobblestone, 0, 4, 11, 2, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.cobblestone, 0, 2, 11, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.cobblestone, 0, 2, 11, 4, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.cobblestone, 0, 1, 1, 6, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.cobblestone, 0, 1, 1, 7, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.cobblestone, 0, 2, 1, 7, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.cobblestone, 0, 3, 1, 6, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.cobblestone, 0, 3, 1, 7, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.stone_stairs, this.func_151555_a(Blocks.stone_stairs, 3), 1, 1, 5, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.stone_stairs, this.func_151555_a(Blocks.stone_stairs, 3), 2, 1, 6, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.stone_stairs, this.func_151555_a(Blocks.stone_stairs, 3), 3, 1, 5, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.stone_stairs, this.func_151555_a(Blocks.stone_stairs, 1), 1, 2, 7, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.stone_stairs, this.func_151555_a(Blocks.stone_stairs, 0), 3, 2, 7, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 0, 2, 2, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 0, 3, 2, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 4, 2, 2, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 4, 3, 2, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 0, 6, 2, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 0, 7, 2, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 4, 6, 2, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 4, 7, 2, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 2, 6, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 2, 7, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 2, 6, 4, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 2, 7, 4, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 0, 3, 6, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 4, 3, 6, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 2, 3, 8, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.torch, 0, 2, 4, 7, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.torch, 0, 1, 4, 6, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.torch, 0, 3, 4, 6, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.torch, 0, 2, 4, 5, par3StructureBoundingBox);
+            int var4 = this.func_151555_a(Blocks.ladder, 4);
+            int var5;
 
-            for (var4 = 1; var4 <= 7; ++var4)
+            for (var5 = 1; var5 <= 9; ++var5)
             {
-                this.func_151550_a(par1World, this.cropTypeA, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 1, 1, var4, par3StructureBoundingBox);
-                this.func_151550_a(par1World, this.cropTypeA, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 2, 1, var4, par3StructureBoundingBox);
-                this.func_151550_a(par1World, this.cropTypeB, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 4, 1, var4, par3StructureBoundingBox);
-                this.func_151550_a(par1World, this.cropTypeB, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 5, 1, var4, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.ladder, var4, 3, var5, 3, par3StructureBoundingBox);
             }
 
-            for (var4 = 0; var4 < 9; ++var4)
+            this.func_151550_a(par1World, Blocks.air, 0, 2, 1, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.air, 0, 2, 2, 0, par3StructureBoundingBox);
+            this.placeDoorAtCurrentPosition(par1World, par3StructureBoundingBox, par2Random, 2, 1, 0, this.func_151555_a(Blocks.wooden_door, 1));
+
+            if (this.func_151548_a(par1World, 2, 0, -1, par3StructureBoundingBox).getMaterial() == Material.air && this.func_151548_a(par1World, 2, -1, -1, par3StructureBoundingBox).getMaterial() != Material.air)
             {
-                for (int var5 = 0; var5 < 7; ++var5)
+                this.func_151550_a(par1World, Blocks.stone_stairs, this.func_151555_a(Blocks.stone_stairs, 3), 2, 0, -1, par3StructureBoundingBox);
+            }
+
+            for (var5 = 0; var5 < 9; ++var5)
             {
-                    this.clearCurrentPositionBlocksUpwards(par1World, var5, 4, var4, par3StructureBoundingBox);
-                    this.func_151554_b(par1World, Blocks.dirt, 0, var5, -1, var4, par3StructureBoundingBox);
+                for (int var6 = 0; var6 < 5; ++var6)
+                {
+                    this.clearCurrentPositionBlocksUpwards(par1World, var6, 12, var5, par3StructureBoundingBox);
+                    this.func_151554_b(par1World, Blocks.cobblestone, 0, var6, -1, var5, par3StructureBoundingBox);
                 }
             }
 
+            this.spawnVillagers(par1World, par3StructureBoundingBox, 2, 1, 2, 1);
             return true;
         }
+
+        protected int getVillagerType(int par1)
+        {
+            return 2;
+        }
     }
 
     public static class House4Garden extends StructureVillagePieces.Village
@@ -734,240 +1051,136 @@ public class StructureVillagePieces
         }
     }
 
-    public static class Church extends StructureVillagePieces.Village
+    public static class Path extends StructureVillagePieces.Road
     {
-        private static final String __OBFID = "CL_00000525";
+        private int averageGroundLevel;
+        private static final String __OBFID = "CL_00000528";
 
-        public Church() {}
+        public Path() {}
 
-        public Church(StructureVillagePieces.Start par1ComponentVillageStartPiece, int par2, Random par3Random, StructureBoundingBox par4StructureBoundingBox, int par5)
+        public Path(StructureVillagePieces.Start par1ComponentVillageStartPiece, int par2, Random par3Random, StructureBoundingBox par4StructureBoundingBox, int par5)
         {
             super(par1ComponentVillageStartPiece, par2);
             this.coordBaseMode = par5;
             this.boundingBox = par4StructureBoundingBox;
+            this.averageGroundLevel = Math.max(par4StructureBoundingBox.getXSize(), par4StructureBoundingBox.getZSize());
         }
 
-        public static StructureVillagePieces.Church func_74919_a(StructureVillagePieces.Start par0ComponentVillageStartPiece, List par1List, Random par2Random, int par3, int par4, int par5, int par6, int par7)
+        protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
         {
-            StructureBoundingBox var8 = StructureBoundingBox.getComponentToAddBoundingBox(par3, par4, par5, 0, 0, 0, 5, 12, 9, par6);
-            return canVillageGoDeeper(var8) && StructureComponent.findIntersecting(par1List, var8) == null ? new StructureVillagePieces.Church(par0ComponentVillageStartPiece, par7, par2Random, var8, par6) : null;
+            super.func_143012_a(par1NBTTagCompound);
+            par1NBTTagCompound.setInteger("Length", this.averageGroundLevel);
         }
 
-        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
-        {
-            if (this.field_143015_k < 0)
-            {
-                this.field_143015_k = this.getAverageGroundLevel(par1World, par3StructureBoundingBox);
-
-                if (this.field_143015_k < 0)
+        protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
         {
-                    return true;
-                }
-
-                this.boundingBox.offset(0, this.field_143015_k - this.boundingBox.maxY + 12 - 1, 0);
+            super.func_143011_b(par1NBTTagCompound);
+            this.averageGroundLevel = par1NBTTagCompound.getInteger("Length");
         }
 
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 1, 1, 3, 3, 7, Blocks.air, Blocks.air, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 5, 1, 3, 9, 3, Blocks.air, Blocks.air, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 0, 3, 0, 8, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 1, 0, 3, 10, 0, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 1, 1, 0, 10, 3, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 1, 1, 4, 10, 3, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 4, 0, 4, 7, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 0, 4, 4, 4, 7, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 1, 8, 3, 4, 8, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 5, 4, 3, 10, 4, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 5, 5, 3, 5, 7, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 9, 0, 4, 9, 4, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 4, 0, 4, 4, 4, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151550_a(par1World, Blocks.cobblestone, 0, 0, 11, 2, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.cobblestone, 0, 4, 11, 2, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.cobblestone, 0, 2, 11, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.cobblestone, 0, 2, 11, 4, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.cobblestone, 0, 1, 1, 6, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.cobblestone, 0, 1, 1, 7, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.cobblestone, 0, 2, 1, 7, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.cobblestone, 0, 3, 1, 6, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.cobblestone, 0, 3, 1, 7, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.stone_stairs, this.func_151555_a(Blocks.stone_stairs, 3), 1, 1, 5, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.stone_stairs, this.func_151555_a(Blocks.stone_stairs, 3), 2, 1, 6, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.stone_stairs, this.func_151555_a(Blocks.stone_stairs, 3), 3, 1, 5, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.stone_stairs, this.func_151555_a(Blocks.stone_stairs, 1), 1, 2, 7, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.stone_stairs, this.func_151555_a(Blocks.stone_stairs, 0), 3, 2, 7, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 0, 2, 2, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 0, 3, 2, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 4, 2, 2, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 4, 3, 2, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 0, 6, 2, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 0, 7, 2, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 4, 6, 2, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 4, 7, 2, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 2, 6, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 2, 7, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 2, 6, 4, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 2, 7, 4, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 0, 3, 6, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 4, 3, 6, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 2, 3, 8, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.torch, 0, 2, 4, 7, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.torch, 0, 1, 4, 6, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.torch, 0, 3, 4, 6, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.torch, 0, 2, 4, 5, par3StructureBoundingBox);
-            int var4 = this.func_151555_a(Blocks.ladder, 4);
+        public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
+        {
+            boolean var4 = false;
             int var5;
+            StructureComponent var6;
 
-            for (var5 = 1; var5 <= 9; ++var5)
+            for (var5 = par3Random.nextInt(5); var5 < this.averageGroundLevel - 8; var5 += 2 + par3Random.nextInt(5))
             {
-                this.func_151550_a(par1World, Blocks.ladder, var4, 3, var5, 3, par3StructureBoundingBox);
-            }
-
-            this.func_151550_a(par1World, Blocks.air, 0, 2, 1, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.air, 0, 2, 2, 0, par3StructureBoundingBox);
-            this.placeDoorAtCurrentPosition(par1World, par3StructureBoundingBox, par2Random, 2, 1, 0, this.func_151555_a(Blocks.wooden_door, 1));
+                var6 = this.getNextComponentNN((StructureVillagePieces.Start)par1StructureComponent, par2List, par3Random, 0, var5);
 
-            if (this.func_151548_a(par1World, 2, 0, -1, par3StructureBoundingBox).getMaterial() == Material.air && this.func_151548_a(par1World, 2, -1, -1, par3StructureBoundingBox).getMaterial() != Material.air)
+                if (var6 != null)
                 {
-                this.func_151550_a(par1World, Blocks.stone_stairs, this.func_151555_a(Blocks.stone_stairs, 3), 2, 0, -1, par3StructureBoundingBox);
+                    var5 += Math.max(var6.boundingBox.getXSize(), var6.boundingBox.getZSize());
+                    var4 = true;
+                }
             }
 
-            for (var5 = 0; var5 < 9; ++var5)
+            for (var5 = par3Random.nextInt(5); var5 < this.averageGroundLevel - 8; var5 += 2 + par3Random.nextInt(5))
             {
-                for (int var6 = 0; var6 < 5; ++var6)
+                var6 = this.getNextComponentPP((StructureVillagePieces.Start)par1StructureComponent, par2List, par3Random, 0, var5);
+
+                if (var6 != null)
                 {
-                    this.clearCurrentPositionBlocksUpwards(par1World, var6, 12, var5, par3StructureBoundingBox);
-                    this.func_151554_b(par1World, Blocks.cobblestone, 0, var6, -1, var5, par3StructureBoundingBox);
-                }
+                    var5 += Math.max(var6.boundingBox.getXSize(), var6.boundingBox.getZSize());
+                    var4 = true;
                 }
-
-            this.spawnVillagers(par1World, par3StructureBoundingBox, 2, 1, 2, 1);
-            return true;
             }
 
-        protected int getVillagerType(int par1)
+            if (var4 && par3Random.nextInt(3) > 0)
             {
-            return 2;
+                switch (this.coordBaseMode)
+                {
+                    case 0:
+                        StructureVillagePieces.getNextComponentVillagePath((StructureVillagePieces.Start)par1StructureComponent, par2List, par3Random, this.boundingBox.minX - 1, this.boundingBox.minY, this.boundingBox.maxZ - 2, 1, this.getComponentType());
+                        break;
+
+                    case 1:
+                        StructureVillagePieces.getNextComponentVillagePath((StructureVillagePieces.Start)par1StructureComponent, par2List, par3Random, this.boundingBox.minX, this.boundingBox.minY, this.boundingBox.minZ - 1, 2, this.getComponentType());
+                        break;
+
+                    case 2:
+                        StructureVillagePieces.getNextComponentVillagePath((StructureVillagePieces.Start)par1StructureComponent, par2List, par3Random, this.boundingBox.minX - 1, this.boundingBox.minY, this.boundingBox.minZ, 1, this.getComponentType());
+                        break;
+
+                    case 3:
+                        StructureVillagePieces.getNextComponentVillagePath((StructureVillagePieces.Start)par1StructureComponent, par2List, par3Random, this.boundingBox.maxX - 2, this.boundingBox.minY, this.boundingBox.minZ - 1, 2, this.getComponentType());
                 }
             }
 
-    public static class Hall extends StructureVillagePieces.Village
+            if (var4 && par3Random.nextInt(3) > 0)
             {
-        private static final String __OBFID = "CL_00000522";
+                switch (this.coordBaseMode)
+                {
+                    case 0:
+                        StructureVillagePieces.getNextComponentVillagePath((StructureVillagePieces.Start)par1StructureComponent, par2List, par3Random, this.boundingBox.maxX + 1, this.boundingBox.minY, this.boundingBox.maxZ - 2, 3, this.getComponentType());
+                        break;
 
-        public Hall() {}
+                    case 1:
+                        StructureVillagePieces.getNextComponentVillagePath((StructureVillagePieces.Start)par1StructureComponent, par2List, par3Random, this.boundingBox.minX, this.boundingBox.minY, this.boundingBox.maxZ + 1, 0, this.getComponentType());
+                        break;
 
-        public Hall(StructureVillagePieces.Start par1ComponentVillageStartPiece, int par2, Random par3Random, StructureBoundingBox par4StructureBoundingBox, int par5)
-        {
-            super(par1ComponentVillageStartPiece, par2);
-            this.coordBaseMode = par5;
-            this.boundingBox = par4StructureBoundingBox;
+                    case 2:
+                        StructureVillagePieces.getNextComponentVillagePath((StructureVillagePieces.Start)par1StructureComponent, par2List, par3Random, this.boundingBox.maxX + 1, this.boundingBox.minY, this.boundingBox.minZ, 3, this.getComponentType());
+                        break;
+
+                    case 3:
+                        StructureVillagePieces.getNextComponentVillagePath((StructureVillagePieces.Start)par1StructureComponent, par2List, par3Random, this.boundingBox.maxX - 2, this.boundingBox.minY, this.boundingBox.maxZ + 1, 0, this.getComponentType());
+                }
             }
-
-        public static StructureVillagePieces.Hall func_74906_a(StructureVillagePieces.Start par0ComponentVillageStartPiece, List par1List, Random par2Random, int par3, int par4, int par5, int par6, int par7)
-        {
-            StructureBoundingBox var8 = StructureBoundingBox.getComponentToAddBoundingBox(par3, par4, par5, 0, 0, 0, 9, 7, 11, par6);
-            return canVillageGoDeeper(var8) && StructureComponent.findIntersecting(par1List, var8) == null ? new StructureVillagePieces.Hall(par0ComponentVillageStartPiece, par7, par2Random, var8, par6) : null;
         }
 
-        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
+        public static StructureBoundingBox func_74933_a(StructureVillagePieces.Start par0ComponentVillageStartPiece, List par1List, Random par2Random, int par3, int par4, int par5, int par6)
         {
-            if (this.field_143015_k < 0)
+            for (int var7 = 7 * MathHelper.getRandomIntegerInRange(par2Random, 3, 5); var7 >= 7; var7 -= 7)
             {
-                this.field_143015_k = this.getAverageGroundLevel(par1World, par3StructureBoundingBox);
+                StructureBoundingBox var8 = StructureBoundingBox.getComponentToAddBoundingBox(par3, par4, par5, 0, 0, 0, 3, 3, var7, par6);
 
-                if (this.field_143015_k < 0)
+                if (StructureComponent.findIntersecting(par1List, var8) == null)
                 {
-                    return true;
+                    return var8;
                 }
-
-                this.boundingBox.offset(0, this.field_143015_k - this.boundingBox.maxY + 7 - 1, 0);
             }
 
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 1, 1, 7, 4, 4, Blocks.air, Blocks.air, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 1, 6, 8, 4, 10, Blocks.air, Blocks.air, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 0, 6, 8, 0, 10, Blocks.dirt, Blocks.dirt, false);
-            this.func_151550_a(par1World, Blocks.cobblestone, 0, 6, 0, 6, par3StructureBoundingBox);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 1, 6, 2, 1, 10, Blocks.fence, Blocks.fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 1, 6, 8, 1, 10, Blocks.fence, Blocks.fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 3, 1, 10, 7, 1, 10, Blocks.fence, Blocks.fence, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 1, 7, 0, 4, Blocks.planks, Blocks.planks, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 0, 0, 3, 5, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 0, 0, 8, 3, 5, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 0, 7, 1, 0, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 5, 7, 1, 5, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 2, 0, 7, 3, 0, Blocks.planks, Blocks.planks, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 2, 5, 7, 3, 5, Blocks.planks, Blocks.planks, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 4, 1, 8, 4, 1, Blocks.planks, Blocks.planks, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 4, 4, 8, 4, 4, Blocks.planks, Blocks.planks, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 2, 8, 5, 3, Blocks.planks, Blocks.planks, false);
-            this.func_151550_a(par1World, Blocks.planks, 0, 0, 4, 2, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.planks, 0, 0, 4, 3, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.planks, 0, 8, 4, 2, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.planks, 0, 8, 4, 3, par3StructureBoundingBox);
-            int var4 = this.func_151555_a(Blocks.oak_stairs, 3);
-            int var5 = this.func_151555_a(Blocks.oak_stairs, 2);
-            int var6;
-            int var7;
-
-            for (var6 = -1; var6 <= 2; ++var6)
-            {
-                for (var7 = 0; var7 <= 8; ++var7)
-                {
-                    this.func_151550_a(par1World, Blocks.oak_stairs, var4, var7, 4 + var6, var6, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.oak_stairs, var5, var7, 4 + var6, 5 - var6, par3StructureBoundingBox);
-                }
+            return null;
         }
 
-            this.func_151550_a(par1World, Blocks.log, 0, 0, 2, 1, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.log, 0, 0, 2, 4, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.log, 0, 8, 2, 1, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.log, 0, 8, 2, 4, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 0, 2, 2, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 0, 2, 3, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 8, 2, 2, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 8, 2, 3, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 2, 2, 5, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 3, 2, 5, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 5, 2, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 6, 2, 5, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.fence, 0, 2, 1, 3, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.wooden_pressure_plate, 0, 2, 2, 3, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.planks, 0, 1, 1, 4, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.oak_stairs, this.func_151555_a(Blocks.oak_stairs, 3), 2, 1, 4, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.oak_stairs, this.func_151555_a(Blocks.oak_stairs, 1), 1, 1, 3, par3StructureBoundingBox);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 5, 0, 1, 7, 0, 3, Blocks.double_stone_slab, Blocks.double_stone_slab, false);
-            this.func_151550_a(par1World, Blocks.double_stone_slab, 0, 6, 1, 1, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.double_stone_slab, 0, 6, 1, 2, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.air, 0, 2, 1, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.air, 0, 2, 2, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.torch, 0, 2, 3, 1, par3StructureBoundingBox);
-            this.placeDoorAtCurrentPosition(par1World, par3StructureBoundingBox, par2Random, 2, 1, 0, this.func_151555_a(Blocks.wooden_door, 1));
-
-            if (this.func_151548_a(par1World, 2, 0, -1, par3StructureBoundingBox).getMaterial() == Material.air && this.func_151548_a(par1World, 2, -1, -1, par3StructureBoundingBox).getMaterial() != Material.air)
+        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
         {
-                this.func_151550_a(par1World, Blocks.stone_stairs, this.func_151555_a(Blocks.stone_stairs, 3), 2, 0, -1, par3StructureBoundingBox);
-            }
-
-            this.func_151550_a(par1World, Blocks.air, 0, 6, 1, 5, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.air, 0, 6, 2, 5, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.torch, 0, 6, 3, 4, par3StructureBoundingBox);
-            this.placeDoorAtCurrentPosition(par1World, par3StructureBoundingBox, par2Random, 6, 1, 5, this.func_151555_a(Blocks.wooden_door, 1));
+            Block var4 = this.func_151558_b(Blocks.gravel, 0);
 
-            for (var6 = 0; var6 < 5; ++var6)
+            for (int var5 = this.boundingBox.minX; var5 <= this.boundingBox.maxX; ++var5)
             {
-                for (var7 = 0; var7 < 9; ++var7)
+                for (int var6 = this.boundingBox.minZ; var6 <= this.boundingBox.maxZ; ++var6)
                 {
-                    this.clearCurrentPositionBlocksUpwards(par1World, var7, 7, var6, par3StructureBoundingBox);
-                    this.func_151554_b(par1World, Blocks.cobblestone, 0, var7, -1, var6, par3StructureBoundingBox);
+                    if (par3StructureBoundingBox.isVecInside(var5, 64, var6))
+                    {
+                        int var7 = par1World.getTopSolidOrLiquidBlock(var5, var6) - 1;
+                        par1World.setBlock(var5, var7, var6, var4, 0, 2);
                     }
                 }
-
-            this.spawnVillagers(par1World, par3StructureBoundingBox, 4, 1, 2, 2);
-            return true;
             }
 
-        protected int getVillagerType(int par1)
-        {
-            return par1 == 0 ? 4 : 0;
+            return true;
         }
     }
 
@@ -1096,6 +1309,35 @@ public class StructureVillagePieces
         }
     }
 
+    public static class Start extends StructureVillagePieces.Well
+    {
+        public WorldChunkManager worldChunkMngr;
+        public boolean inDesert;
+        public int terrainType;
+        public StructureVillagePieces.PieceWeight structVillagePieceWeight;
+        public List structureVillageWeightedPieceList;
+        public List field_74932_i = new ArrayList();
+        public List field_74930_j = new ArrayList();
+        private static final String __OBFID = "CL_00000527";
+
+        public Start() {}
+
+        public Start(WorldChunkManager par1WorldChunkManager, int par2, Random par3Random, int par4, int par5, List par6List, int par7)
+        {
+            super((StructureVillagePieces.Start)null, 0, par3Random, par4, par5);
+            this.worldChunkMngr = par1WorldChunkManager;
+            this.structureVillageWeightedPieceList = par6List;
+            this.terrainType = par7;
+            BiomeGenBase var8 = par1WorldChunkManager.getBiomeGenAt(par4, par5);
+            this.inDesert = var8 == BiomeGenBase.desert || var8 == BiomeGenBase.desertHills;
+        }
+
+        public WorldChunkManager getWorldChunkManager()
+        {
+            return this.worldChunkMngr;
+        }
+    }
+
     public static class House3 extends StructureVillagePieces.Village
     {
         private static final String __OBFID = "CL_00000530";
@@ -1209,176 +1451,51 @@ public class StructureVillagePieces
             this.func_151550_a(par1World, Blocks.log, 0, 8, 2, 1, par3StructureBoundingBox);
             this.func_151550_a(par1World, Blocks.glass_pane, 0, 8, 2, 2, par3StructureBoundingBox);
             this.func_151550_a(par1World, Blocks.glass_pane, 0, 8, 2, 3, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.log, 0, 8, 2, 4, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.planks, 0, 8, 2, 5, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.log, 0, 8, 2, 6, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 8, 2, 7, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 8, 2, 8, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.log, 0, 8, 2, 9, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.log, 0, 2, 2, 6, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 2, 2, 7, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 2, 2, 8, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.log, 0, 2, 2, 9, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.log, 0, 4, 4, 10, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 5, 4, 10, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.log, 0, 6, 4, 10, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.planks, 0, 5, 5, 10, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.air, 0, 2, 1, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.air, 0, 2, 2, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.torch, 0, 2, 3, 1, par3StructureBoundingBox);
-            this.placeDoorAtCurrentPosition(par1World, par3StructureBoundingBox, par2Random, 2, 1, 0, this.func_151555_a(Blocks.wooden_door, 1));
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, -1, 3, 2, -1, Blocks.air, Blocks.air, false);
-
-            if (this.func_151548_a(par1World, 2, 0, -1, par3StructureBoundingBox).getMaterial() == Material.air && this.func_151548_a(par1World, 2, -1, -1, par3StructureBoundingBox).getMaterial() != Material.air)
-            {
-                this.func_151550_a(par1World, Blocks.stone_stairs, this.func_151555_a(Blocks.stone_stairs, 3), 2, 0, -1, par3StructureBoundingBox);
-            }
-
-            for (var8 = 0; var8 < 5; ++var8)
-            {
-                for (var9 = 0; var9 < 9; ++var9)
-                {
-                    this.clearCurrentPositionBlocksUpwards(par1World, var9, 7, var8, par3StructureBoundingBox);
-                    this.func_151554_b(par1World, Blocks.cobblestone, 0, var9, -1, var8, par3StructureBoundingBox);
-                }
-            }
-
-            for (var8 = 5; var8 < 11; ++var8)
-            {
-                for (var9 = 2; var9 < 9; ++var9)
-                {
-                    this.clearCurrentPositionBlocksUpwards(par1World, var9, 7, var8, par3StructureBoundingBox);
-                    this.func_151554_b(par1World, Blocks.cobblestone, 0, var9, -1, var8, par3StructureBoundingBox);
-                }
-            }
-
-            this.spawnVillagers(par1World, par3StructureBoundingBox, 4, 1, 2, 2);
-            return true;
-        }
-    }
-
-    public static class House1 extends StructureVillagePieces.Village
-    {
-        private static final String __OBFID = "CL_00000517";
-
-        public House1() {}
-
-        public House1(StructureVillagePieces.Start par1ComponentVillageStartPiece, int par2, Random par3Random, StructureBoundingBox par4StructureBoundingBox, int par5)
-        {
-            super(par1ComponentVillageStartPiece, par2);
-            this.coordBaseMode = par5;
-            this.boundingBox = par4StructureBoundingBox;
-        }
-
-        public static StructureVillagePieces.House1 func_74898_a(StructureVillagePieces.Start par0ComponentVillageStartPiece, List par1List, Random par2Random, int par3, int par4, int par5, int par6, int par7)
-        {
-            StructureBoundingBox var8 = StructureBoundingBox.getComponentToAddBoundingBox(par3, par4, par5, 0, 0, 0, 9, 9, 6, par6);
-            return canVillageGoDeeper(var8) && StructureComponent.findIntersecting(par1List, var8) == null ? new StructureVillagePieces.House1(par0ComponentVillageStartPiece, par7, par2Random, var8, par6) : null;
-        }
-
-        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
-        {
-            if (this.field_143015_k < 0)
-            {
-                this.field_143015_k = this.getAverageGroundLevel(par1World, par3StructureBoundingBox);
-
-                if (this.field_143015_k < 0)
-                {
-                    return true;
-                }
-
-                this.boundingBox.offset(0, this.field_143015_k - this.boundingBox.maxY + 9 - 1, 0);
-            }
-
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 1, 1, 7, 5, 4, Blocks.air, Blocks.air, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 0, 8, 0, 5, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 5, 0, 8, 5, 5, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 6, 1, 8, 6, 4, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 7, 2, 8, 7, 3, Blocks.cobblestone, Blocks.cobblestone, false);
-            int var4 = this.func_151555_a(Blocks.oak_stairs, 3);
-            int var5 = this.func_151555_a(Blocks.oak_stairs, 2);
-            int var6;
-            int var7;
-
-            for (var6 = -1; var6 <= 2; ++var6)
-            {
-                for (var7 = 0; var7 <= 8; ++var7)
-                {
-                    this.func_151550_a(par1World, Blocks.oak_stairs, var4, var7, 6 + var6, var6, par3StructureBoundingBox);
-                    this.func_151550_a(par1World, Blocks.oak_stairs, var5, var7, 6 + var6, 5 - var6, par3StructureBoundingBox);
-                }
-            }
-
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 1, 0, 0, 1, 5, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 1, 5, 8, 1, 5, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 1, 0, 8, 1, 4, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 2, 1, 0, 7, 1, 0, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 0, 0, 4, 0, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 5, 0, 4, 5, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 2, 5, 8, 4, 5, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 2, 0, 8, 4, 0, Blocks.cobblestone, Blocks.cobblestone, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 2, 1, 0, 4, 4, Blocks.planks, Blocks.planks, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 2, 5, 7, 4, 5, Blocks.planks, Blocks.planks, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 8, 2, 1, 8, 4, 4, Blocks.planks, Blocks.planks, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 2, 0, 7, 4, 0, Blocks.planks, Blocks.planks, false);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 4, 2, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 5, 2, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 6, 2, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 4, 3, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 5, 3, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 6, 3, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 0, 2, 2, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 0, 2, 3, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 0, 3, 2, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 0, 3, 3, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 8, 2, 2, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 8, 2, 3, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 8, 3, 2, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 8, 3, 3, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 2, 2, 5, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 3, 2, 5, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 5, 2, 5, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.glass_pane, 0, 6, 2, 5, par3StructureBoundingBox);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 4, 1, 7, 4, 1, Blocks.planks, Blocks.planks, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 4, 4, 7, 4, 4, Blocks.planks, Blocks.planks, false);
-            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 3, 4, 7, 3, 4, Blocks.bookshelf, Blocks.bookshelf, false);
-            this.func_151550_a(par1World, Blocks.planks, 0, 7, 1, 4, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.oak_stairs, this.func_151555_a(Blocks.oak_stairs, 0), 7, 1, 3, par3StructureBoundingBox);
-            var6 = this.func_151555_a(Blocks.oak_stairs, 3);
-            this.func_151550_a(par1World, Blocks.oak_stairs, var6, 6, 1, 4, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.oak_stairs, var6, 5, 1, 4, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.oak_stairs, var6, 4, 1, 4, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.oak_stairs, var6, 3, 1, 4, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.fence, 0, 6, 1, 3, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.wooden_pressure_plate, 0, 6, 2, 3, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.fence, 0, 4, 1, 3, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.wooden_pressure_plate, 0, 4, 2, 3, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.crafting_table, 0, 7, 1, 1, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.air, 0, 1, 1, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.air, 0, 1, 2, 0, par3StructureBoundingBox);
-            this.placeDoorAtCurrentPosition(par1World, par3StructureBoundingBox, par2Random, 1, 1, 0, this.func_151555_a(Blocks.wooden_door, 1));
+            this.func_151550_a(par1World, Blocks.log, 0, 8, 2, 4, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.planks, 0, 8, 2, 5, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.log, 0, 8, 2, 6, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 8, 2, 7, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 8, 2, 8, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.log, 0, 8, 2, 9, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.log, 0, 2, 2, 6, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 2, 2, 7, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 2, 2, 8, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.log, 0, 2, 2, 9, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.log, 0, 4, 4, 10, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.glass_pane, 0, 5, 4, 10, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.log, 0, 6, 4, 10, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.planks, 0, 5, 5, 10, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.air, 0, 2, 1, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.air, 0, 2, 2, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.torch, 0, 2, 3, 1, par3StructureBoundingBox);
+            this.placeDoorAtCurrentPosition(par1World, par3StructureBoundingBox, par2Random, 2, 1, 0, this.func_151555_a(Blocks.wooden_door, 1));
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, -1, 3, 2, -1, Blocks.air, Blocks.air, false);
 
-            if (this.func_151548_a(par1World, 1, 0, -1, par3StructureBoundingBox).getMaterial() == Material.air && this.func_151548_a(par1World, 1, -1, -1, par3StructureBoundingBox).getMaterial() != Material.air)
+            if (this.func_151548_a(par1World, 2, 0, -1, par3StructureBoundingBox).getMaterial() == Material.air && this.func_151548_a(par1World, 2, -1, -1, par3StructureBoundingBox).getMaterial() != Material.air)
             {
-                this.func_151550_a(par1World, Blocks.stone_stairs, this.func_151555_a(Blocks.stone_stairs, 3), 1, 0, -1, par3StructureBoundingBox);
+                this.func_151550_a(par1World, Blocks.stone_stairs, this.func_151555_a(Blocks.stone_stairs, 3), 2, 0, -1, par3StructureBoundingBox);
             }
 
-            for (var7 = 0; var7 < 6; ++var7)
+            for (var8 = 0; var8 < 5; ++var8)
             {
-                for (int var8 = 0; var8 < 9; ++var8)
+                for (var9 = 0; var9 < 9; ++var9)
                 {
-                    this.clearCurrentPositionBlocksUpwards(par1World, var8, 9, var7, par3StructureBoundingBox);
-                    this.func_151554_b(par1World, Blocks.cobblestone, 0, var8, -1, var7, par3StructureBoundingBox);
+                    this.clearCurrentPositionBlocksUpwards(par1World, var9, 7, var8, par3StructureBoundingBox);
+                    this.func_151554_b(par1World, Blocks.cobblestone, 0, var9, -1, var8, par3StructureBoundingBox);
                 }
             }
 
-            this.spawnVillagers(par1World, par3StructureBoundingBox, 2, 1, 2, 1);
-            return true;
+            for (var8 = 5; var8 < 11; ++var8)
+            {
+                for (var9 = 2; var9 < 9; ++var9)
+                {
+                    this.clearCurrentPositionBlocksUpwards(par1World, var9, 7, var8, par3StructureBoundingBox);
+                    this.func_151554_b(par1World, Blocks.cobblestone, 0, var9, -1, var8, par3StructureBoundingBox);
+                }
             }
 
-        protected int getVillagerType(int par1)
-        {
-            return 1;
+            this.spawnVillagers(par1World, par3StructureBoundingBox, 4, 1, 2, 2);
+            return true;
         }
     }
 
@@ -1496,178 +1613,112 @@ public class StructureVillagePieces
         }
     }
 
-    public static class Torch extends StructureVillagePieces.Village
-    {
-        private static final String __OBFID = "CL_00000520";
-
-        public Torch() {}
-
-        public Torch(StructureVillagePieces.Start par1ComponentVillageStartPiece, int par2, Random par3Random, StructureBoundingBox par4StructureBoundingBox, int par5)
-        {
-            super(par1ComponentVillageStartPiece, par2);
-            this.coordBaseMode = par5;
-            this.boundingBox = par4StructureBoundingBox;
-        }
-
-        public static StructureBoundingBox func_74904_a(StructureVillagePieces.Start par0ComponentVillageStartPiece, List par1List, Random par2Random, int par3, int par4, int par5, int par6)
-        {
-            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par3, par4, par5, 0, 0, 0, 3, 4, 2, par6);
-            return StructureComponent.findIntersecting(par1List, var7) != null ? null : var7;
-        }
-
-        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
-        {
-            if (this.field_143015_k < 0)
-            {
-                this.field_143015_k = this.getAverageGroundLevel(par1World, par3StructureBoundingBox);
-
-                if (this.field_143015_k < 0)
-                {
-                    return true;
-                }
-
-                this.boundingBox.offset(0, this.field_143015_k - this.boundingBox.maxY + 4 - 1, 0);
-            }
-
-            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 0, 2, 3, 1, Blocks.air, Blocks.air, false);
-            this.func_151550_a(par1World, Blocks.fence, 0, 1, 0, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.fence, 0, 1, 1, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.fence, 0, 1, 2, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.wool, 15, 1, 3, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.torch, 0, 0, 3, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.torch, 0, 1, 3, 1, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.torch, 0, 2, 3, 0, par3StructureBoundingBox);
-            this.func_151550_a(par1World, Blocks.torch, 0, 1, 3, -1, par3StructureBoundingBox);
-            return true;
-        }
-    }
-
-    public static class Path extends StructureVillagePieces.Road
+    public static class Field1 extends StructureVillagePieces.Village
     {
-        private int averageGroundLevel;
-        private static final String __OBFID = "CL_00000528";
+        private Block cropTypeA;
+        private Block cropTypeB;
+        private Block cropTypeC;
+        private Block cropTypeD;
+        private static final String __OBFID = "CL_00000518";
 
-        public Path() {}
+        public Field1() {}
 
-        public Path(StructureVillagePieces.Start par1ComponentVillageStartPiece, int par2, Random par3Random, StructureBoundingBox par4StructureBoundingBox, int par5)
+        public Field1(StructureVillagePieces.Start par1ComponentVillageStartPiece, int par2, Random par3Random, StructureBoundingBox par4StructureBoundingBox, int par5)
         {
             super(par1ComponentVillageStartPiece, par2);
             this.coordBaseMode = par5;
             this.boundingBox = par4StructureBoundingBox;
-            this.averageGroundLevel = Math.max(par4StructureBoundingBox.getXSize(), par4StructureBoundingBox.getZSize());
+            this.cropTypeA = this.func_151559_a(par3Random);
+            this.cropTypeB = this.func_151559_a(par3Random);
+            this.cropTypeC = this.func_151559_a(par3Random);
+            this.cropTypeD = this.func_151559_a(par3Random);
         }
 
         protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
         {
             super.func_143012_a(par1NBTTagCompound);
-            par1NBTTagCompound.setInteger("Length", this.averageGroundLevel);
+            par1NBTTagCompound.setInteger("CA", Block.blockRegistry.getIDForObject(this.cropTypeA));
+            par1NBTTagCompound.setInteger("CB", Block.blockRegistry.getIDForObject(this.cropTypeB));
+            par1NBTTagCompound.setInteger("CC", Block.blockRegistry.getIDForObject(this.cropTypeC));
+            par1NBTTagCompound.setInteger("CD", Block.blockRegistry.getIDForObject(this.cropTypeD));
         }
 
         protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
         {
             super.func_143011_b(par1NBTTagCompound);
-            this.averageGroundLevel = par1NBTTagCompound.getInteger("Length");
-        }
-
-        public void buildComponent(StructureComponent par1StructureComponent, List par2List, Random par3Random)
-        {
-            boolean var4 = false;
-            int var5;
-            StructureComponent var6;
-
-            for (var5 = par3Random.nextInt(5); var5 < this.averageGroundLevel - 8; var5 += 2 + par3Random.nextInt(5))
-            {
-                var6 = this.getNextComponentNN((StructureVillagePieces.Start)par1StructureComponent, par2List, par3Random, 0, var5);
-
-                if (var6 != null)
-                {
-                    var5 += Math.max(var6.boundingBox.getXSize(), var6.boundingBox.getZSize());
-                    var4 = true;
-                }
-            }
-
-            for (var5 = par3Random.nextInt(5); var5 < this.averageGroundLevel - 8; var5 += 2 + par3Random.nextInt(5))
-            {
-                var6 = this.getNextComponentPP((StructureVillagePieces.Start)par1StructureComponent, par2List, par3Random, 0, var5);
-
-                if (var6 != null)
-                {
-                    var5 += Math.max(var6.boundingBox.getXSize(), var6.boundingBox.getZSize());
-                    var4 = true;
-                }
+            this.cropTypeA = Block.getBlockById(par1NBTTagCompound.getInteger("CA"));
+            this.cropTypeB = Block.getBlockById(par1NBTTagCompound.getInteger("CB"));
+            this.cropTypeC = Block.getBlockById(par1NBTTagCompound.getInteger("CC"));
+            this.cropTypeD = Block.getBlockById(par1NBTTagCompound.getInteger("CD"));
         }
 
-            if (var4 && par3Random.nextInt(3) > 0)
+        private Block func_151559_a(Random p_151559_1_)
         {
-                switch (this.coordBaseMode)
+            switch (p_151559_1_.nextInt(5))
             {
                 case 0:
-                        StructureVillagePieces.getNextComponentVillagePath((StructureVillagePieces.Start)par1StructureComponent, par2List, par3Random, this.boundingBox.minX - 1, this.boundingBox.minY, this.boundingBox.maxZ - 2, 1, this.getComponentType());
-                        break;
+                    return Blocks.carrots;
 
                 case 1:
-                        StructureVillagePieces.getNextComponentVillagePath((StructureVillagePieces.Start)par1StructureComponent, par2List, par3Random, this.boundingBox.minX, this.boundingBox.minY, this.boundingBox.minZ - 1, 2, this.getComponentType());
-                        break;
-
-                    case 2:
-                        StructureVillagePieces.getNextComponentVillagePath((StructureVillagePieces.Start)par1StructureComponent, par2List, par3Random, this.boundingBox.minX - 1, this.boundingBox.minY, this.boundingBox.minZ, 1, this.getComponentType());
-                        break;
+                    return Blocks.potatoes;
 
-                    case 3:
-                        StructureVillagePieces.getNextComponentVillagePath((StructureVillagePieces.Start)par1StructureComponent, par2List, par3Random, this.boundingBox.maxX - 2, this.boundingBox.minY, this.boundingBox.minZ - 1, 2, this.getComponentType());
+                default:
+                    return Blocks.wheat;
             }
         }
 
-            if (var4 && par3Random.nextInt(3) > 0)
-            {
-                switch (this.coordBaseMode)
+        public static StructureVillagePieces.Field1 func_74900_a(StructureVillagePieces.Start par0ComponentVillageStartPiece, List par1List, Random par2Random, int par3, int par4, int par5, int par6, int par7)
         {
-                    case 0:
-                        StructureVillagePieces.getNextComponentVillagePath((StructureVillagePieces.Start)par1StructureComponent, par2List, par3Random, this.boundingBox.maxX + 1, this.boundingBox.minY, this.boundingBox.maxZ - 2, 3, this.getComponentType());
-                        break;
-
-                    case 1:
-                        StructureVillagePieces.getNextComponentVillagePath((StructureVillagePieces.Start)par1StructureComponent, par2List, par3Random, this.boundingBox.minX, this.boundingBox.minY, this.boundingBox.maxZ + 1, 0, this.getComponentType());
-                        break;
-
-                    case 2:
-                        StructureVillagePieces.getNextComponentVillagePath((StructureVillagePieces.Start)par1StructureComponent, par2List, par3Random, this.boundingBox.maxX + 1, this.boundingBox.minY, this.boundingBox.minZ, 3, this.getComponentType());
-                        break;
-
-                    case 3:
-                        StructureVillagePieces.getNextComponentVillagePath((StructureVillagePieces.Start)par1StructureComponent, par2List, par3Random, this.boundingBox.maxX - 2, this.boundingBox.minY, this.boundingBox.maxZ + 1, 0, this.getComponentType());
-                }
-            }
+            StructureBoundingBox var8 = StructureBoundingBox.getComponentToAddBoundingBox(par3, par4, par5, 0, 0, 0, 13, 4, 9, par6);
+            return canVillageGoDeeper(var8) && StructureComponent.findIntersecting(par1List, var8) == null ? new StructureVillagePieces.Field1(par0ComponentVillageStartPiece, par7, par2Random, var8, par6) : null;
         }
 
-        public static StructureBoundingBox func_74933_a(StructureVillagePieces.Start par0ComponentVillageStartPiece, List par1List, Random par2Random, int par3, int par4, int par5, int par6)
+        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
         {
-            for (int var7 = 7 * MathHelper.getRandomIntegerInRange(par2Random, 3, 5); var7 >= 7; var7 -= 7)
+            if (this.field_143015_k < 0)
             {
-                StructureBoundingBox var8 = StructureBoundingBox.getComponentToAddBoundingBox(par3, par4, par5, 0, 0, 0, 3, 3, var7, par6);
+                this.field_143015_k = this.getAverageGroundLevel(par1World, par3StructureBoundingBox);
 
-                if (StructureComponent.findIntersecting(par1List, var8) == null)
+                if (this.field_143015_k < 0)
                 {
-                    return var8;
-                }
+                    return true;
                 }
 
-            return null;
+                this.boundingBox.offset(0, this.field_143015_k - this.boundingBox.maxY + 4 - 1, 0);
             }
 
-        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
-        {
-            Block var4 = this.func_151558_b(Blocks.gravel, 0);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 1, 0, 12, 4, 8, Blocks.air, Blocks.air, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 1, 2, 0, 7, Blocks.farmland, Blocks.farmland, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 0, 1, 5, 0, 7, Blocks.farmland, Blocks.farmland, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 7, 0, 1, 8, 0, 7, Blocks.farmland, Blocks.farmland, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 10, 0, 1, 11, 0, 7, Blocks.farmland, Blocks.farmland, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 0, 0, 0, 8, Blocks.log, Blocks.log, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 0, 0, 6, 0, 8, Blocks.log, Blocks.log, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 12, 0, 0, 12, 0, 8, Blocks.log, Blocks.log, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 0, 11, 0, 0, Blocks.log, Blocks.log, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 8, 11, 0, 8, Blocks.log, Blocks.log, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 3, 0, 1, 3, 0, 7, Blocks.water, Blocks.water, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 9, 0, 1, 9, 0, 7, Blocks.water, Blocks.water, false);
+            int var4;
 
-            for (int var5 = this.boundingBox.minX; var5 <= this.boundingBox.maxX; ++var5)
+            for (var4 = 1; var4 <= 7; ++var4)
             {
-                for (int var6 = this.boundingBox.minZ; var6 <= this.boundingBox.maxZ; ++var6)
+                this.func_151550_a(par1World, this.cropTypeA, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 1, 1, var4, par3StructureBoundingBox);
+                this.func_151550_a(par1World, this.cropTypeA, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 2, 1, var4, par3StructureBoundingBox);
+                this.func_151550_a(par1World, this.cropTypeB, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 4, 1, var4, par3StructureBoundingBox);
+                this.func_151550_a(par1World, this.cropTypeB, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 5, 1, var4, par3StructureBoundingBox);
+                this.func_151550_a(par1World, this.cropTypeC, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 7, 1, var4, par3StructureBoundingBox);
+                this.func_151550_a(par1World, this.cropTypeC, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 8, 1, var4, par3StructureBoundingBox);
+                this.func_151550_a(par1World, this.cropTypeD, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 10, 1, var4, par3StructureBoundingBox);
+                this.func_151550_a(par1World, this.cropTypeD, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 11, 1, var4, par3StructureBoundingBox);
+            }
+
+            for (var4 = 0; var4 < 9; ++var4)
             {
-                    if (par3StructureBoundingBox.isVecInside(var5, 64, var6))
+                for (int var5 = 0; var5 < 13; ++var5)
                 {
-                        int var7 = par1World.getTopSolidOrLiquidBlock(var5, var6) - 1;
-                        par1World.setBlock(var5, var7, var6, var4, 0, 2);
-                    }
+                    this.clearCurrentPositionBlocksUpwards(par1World, var5, 4, var4, par3StructureBoundingBox);
+                    this.func_151554_b(par1World, Blocks.dirt, 0, var5, -1, var4, par3StructureBoundingBox);
                 }
             }
 
@@ -1675,235 +1726,184 @@ public class StructureVillagePieces
         }
     }
 
-    public abstract static class Road extends StructureVillagePieces.Village
+    public static class Field2 extends StructureVillagePieces.Village
     {
-        private static final String __OBFID = "CL_00000532";
+        private Block cropTypeA;
+        private Block cropTypeB;
+        private static final String __OBFID = "CL_00000519";
 
-        public Road() {}
+        public Field2() {}
 
-        protected Road(StructureVillagePieces.Start par1ComponentVillageStartPiece, int par2)
+        public Field2(StructureVillagePieces.Start par1ComponentVillageStartPiece, int par2, Random par3Random, StructureBoundingBox par4StructureBoundingBox, int par5)
         {
             super(par1ComponentVillageStartPiece, par2);
-        }
-    }
-
-    abstract static class Village extends StructureComponent
-    {
-        protected int field_143015_k = -1;
-        private int villagersSpawned;
-        private boolean field_143014_b;
-        private static final String __OBFID = "CL_00000531";
-
-        public Village() {}
-
-        protected Village(StructureVillagePieces.Start par1ComponentVillageStartPiece, int par2)
-        {
-            super(par2);
-
-            if (par1ComponentVillageStartPiece != null)
-            {
-                this.field_143014_b = par1ComponentVillageStartPiece.inDesert;
-            }
+            this.coordBaseMode = par5;
+            this.boundingBox = par4StructureBoundingBox;
+            this.cropTypeA = this.func_151560_a(par3Random);
+            this.cropTypeB = this.func_151560_a(par3Random);
         }
 
         protected void func_143012_a(NBTTagCompound par1NBTTagCompound)
         {
-            par1NBTTagCompound.setInteger("HPos", this.field_143015_k);
-            par1NBTTagCompound.setInteger("VCount", this.villagersSpawned);
-            par1NBTTagCompound.setBoolean("Desert", this.field_143014_b);
+            super.func_143012_a(par1NBTTagCompound);
+            par1NBTTagCompound.setInteger("CA", Block.blockRegistry.getIDForObject(this.cropTypeA));
+            par1NBTTagCompound.setInteger("CB", Block.blockRegistry.getIDForObject(this.cropTypeB));
         }
 
         protected void func_143011_b(NBTTagCompound par1NBTTagCompound)
         {
-            this.field_143015_k = par1NBTTagCompound.getInteger("HPos");
-            this.villagersSpawned = par1NBTTagCompound.getInteger("VCount");
-            this.field_143014_b = par1NBTTagCompound.getBoolean("Desert");
+            super.func_143011_b(par1NBTTagCompound);
+            this.cropTypeA = Block.getBlockById(par1NBTTagCompound.getInteger("CA"));
+            this.cropTypeB = Block.getBlockById(par1NBTTagCompound.getInteger("CB"));
         }
 
-        protected StructureComponent getNextComponentNN(StructureVillagePieces.Start par1ComponentVillageStartPiece, List par2List, Random par3Random, int par4, int par5)
+        private Block func_151560_a(Random p_151560_1_)
         {
-            switch (this.coordBaseMode)
+            switch (p_151560_1_.nextInt(5))
             {
                 case 0:
-                    return StructureVillagePieces.getNextVillageStructureComponent(par1ComponentVillageStartPiece, par2List, par3Random, this.boundingBox.minX - 1, this.boundingBox.minY + par4, this.boundingBox.minZ + par5, 1, this.getComponentType());
+                    return Blocks.carrots;
 
                 case 1:
-                    return StructureVillagePieces.getNextVillageStructureComponent(par1ComponentVillageStartPiece, par2List, par3Random, this.boundingBox.minX + par5, this.boundingBox.minY + par4, this.boundingBox.minZ - 1, 2, this.getComponentType());
-
-                case 2:
-                    return StructureVillagePieces.getNextVillageStructureComponent(par1ComponentVillageStartPiece, par2List, par3Random, this.boundingBox.minX - 1, this.boundingBox.minY + par4, this.boundingBox.minZ + par5, 1, this.getComponentType());
-
-                case 3:
-                    return StructureVillagePieces.getNextVillageStructureComponent(par1ComponentVillageStartPiece, par2List, par3Random, this.boundingBox.minX + par5, this.boundingBox.minY + par4, this.boundingBox.minZ - 1, 2, this.getComponentType());
+                    return Blocks.potatoes;
 
                 default:
-                    return null;
+                    return Blocks.wheat;
             }
         }
 
-        protected StructureComponent getNextComponentPP(StructureVillagePieces.Start par1ComponentVillageStartPiece, List par2List, Random par3Random, int par4, int par5)
-        {
-            switch (this.coordBaseMode)
+        public static StructureVillagePieces.Field2 func_74902_a(StructureVillagePieces.Start par0ComponentVillageStartPiece, List par1List, Random par2Random, int par3, int par4, int par5, int par6, int par7)
         {
-                case 0:
-                    return StructureVillagePieces.getNextVillageStructureComponent(par1ComponentVillageStartPiece, par2List, par3Random, this.boundingBox.maxX + 1, this.boundingBox.minY + par4, this.boundingBox.minZ + par5, 3, this.getComponentType());
-
-                case 1:
-                    return StructureVillagePieces.getNextVillageStructureComponent(par1ComponentVillageStartPiece, par2List, par3Random, this.boundingBox.minX + par5, this.boundingBox.minY + par4, this.boundingBox.maxZ + 1, 0, this.getComponentType());
-
-                case 2:
-                    return StructureVillagePieces.getNextVillageStructureComponent(par1ComponentVillageStartPiece, par2List, par3Random, this.boundingBox.maxX + 1, this.boundingBox.minY + par4, this.boundingBox.minZ + par5, 3, this.getComponentType());
-
-                case 3:
-                    return StructureVillagePieces.getNextVillageStructureComponent(par1ComponentVillageStartPiece, par2List, par3Random, this.boundingBox.minX + par5, this.boundingBox.minY + par4, this.boundingBox.maxZ + 1, 0, this.getComponentType());
-
-                default:
-                    return null;
-            }
+            StructureBoundingBox var8 = StructureBoundingBox.getComponentToAddBoundingBox(par3, par4, par5, 0, 0, 0, 7, 4, 9, par6);
+            return canVillageGoDeeper(var8) && StructureComponent.findIntersecting(par1List, var8) == null ? new StructureVillagePieces.Field2(par0ComponentVillageStartPiece, par7, par2Random, var8, par6) : null;
         }
 
-        protected int getAverageGroundLevel(World par1World, StructureBoundingBox par2StructureBoundingBox)
-        {
-            int var3 = 0;
-            int var4 = 0;
-
-            for (int var5 = this.boundingBox.minZ; var5 <= this.boundingBox.maxZ; ++var5)
-            {
-                for (int var6 = this.boundingBox.minX; var6 <= this.boundingBox.maxX; ++var6)
+        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
         {
-                    if (par2StructureBoundingBox.isVecInside(var6, 64, var5))
+            if (this.field_143015_k < 0)
             {
-                        var3 += Math.max(par1World.getTopSolidOrLiquidBlock(var6, var5), par1World.provider.getAverageGroundLevel());
-                        ++var4;
-                    }
-                }
-            }
+                this.field_143015_k = this.getAverageGroundLevel(par1World, par3StructureBoundingBox);
 
-            if (var4 == 0)
-            {
-                return -1;
-            }
-            else
+                if (this.field_143015_k < 0)
                 {
-                return var3 / var4;
+                    return true;
                 }
+
+                this.boundingBox.offset(0, this.field_143015_k - this.boundingBox.maxY + 4 - 1, 0);
             }
 
-        protected static boolean canVillageGoDeeper(StructureBoundingBox par0StructureBoundingBox)
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 1, 0, 6, 4, 8, Blocks.air, Blocks.air, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 1, 2, 0, 7, Blocks.farmland, Blocks.farmland, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 4, 0, 1, 5, 0, 7, Blocks.farmland, Blocks.farmland, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 0, 0, 0, 8, Blocks.log, Blocks.log, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 6, 0, 0, 6, 0, 8, Blocks.log, Blocks.log, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 0, 5, 0, 0, Blocks.log, Blocks.log, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 1, 0, 8, 5, 0, 8, Blocks.log, Blocks.log, false);
+            this.func_151549_a(par1World, par3StructureBoundingBox, 3, 0, 1, 3, 0, 7, Blocks.water, Blocks.water, false);
+            int var4;
+
+            for (var4 = 1; var4 <= 7; ++var4)
             {
-            return par0StructureBoundingBox != null && par0StructureBoundingBox.minY > 10;
+                this.func_151550_a(par1World, this.cropTypeA, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 1, 1, var4, par3StructureBoundingBox);
+                this.func_151550_a(par1World, this.cropTypeA, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 2, 1, var4, par3StructureBoundingBox);
+                this.func_151550_a(par1World, this.cropTypeB, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 4, 1, var4, par3StructureBoundingBox);
+                this.func_151550_a(par1World, this.cropTypeB, MathHelper.getRandomIntegerInRange(par2Random, 2, 7), 5, 1, var4, par3StructureBoundingBox);
             }
 
-        protected void spawnVillagers(World par1World, StructureBoundingBox par2StructureBoundingBox, int par3, int par4, int par5, int par6)
-        {
-            if (this.villagersSpawned < par6)
-            {
-                for (int var7 = this.villagersSpawned; var7 < par6; ++var7)
+            for (var4 = 0; var4 < 9; ++var4)
             {
-                    int var8 = this.getXWithOffset(par3 + var7, par5);
-                    int var9 = this.getYWithOffset(par4);
-                    int var10 = this.getZWithOffset(par3 + var7, par5);
-
-                    if (!par2StructureBoundingBox.isVecInside(var8, var9, var10))
+                for (int var5 = 0; var5 < 7; ++var5)
                 {
-                        break;
+                    this.clearCurrentPositionBlocksUpwards(par1World, var5, 4, var4, par3StructureBoundingBox);
+                    this.func_151554_b(par1World, Blocks.dirt, 0, var5, -1, var4, par3StructureBoundingBox);
                 }
-
-                    ++this.villagersSpawned;
-                    EntityVillager var11 = new EntityVillager(par1World, this.getVillagerType(var7));
-                    var11.setLocationAndAngles((double)var8 + 0.5D, (double)var9, (double)var10 + 0.5D, 0.0F, 0.0F);
-                    par1World.spawnEntityInWorld(var11);
             }
+
+            return true;
         }
     }
 
-        protected int getVillagerType(int par1)
+    public abstract static class Road extends StructureVillagePieces.Village
     {
-            return 0;
-        }
+        private static final String __OBFID = "CL_00000532";
 
-        protected Block func_151558_b(Block p_151558_1_, int p_151558_2_)
-        {
-            if (this.field_143014_b)
-            {
-                if (p_151558_1_ == Blocks.log || p_151558_1_ == Blocks.log2)
-                {
-                    return Blocks.sandstone;
-                }
+        public Road() {}
 
-                if (p_151558_1_ == Blocks.cobblestone)
+        protected Road(StructureVillagePieces.Start par1ComponentVillageStartPiece, int par2)
         {
-                    return Blocks.sandstone;
+            super(par1ComponentVillageStartPiece, par2);
         }
-
-                if (p_151558_1_ == Blocks.planks)
-                {
-                    return Blocks.sandstone;
     }
 
-                if (p_151558_1_ == Blocks.oak_stairs)
+    public static class Torch extends StructureVillagePieces.Village
     {
-                    return Blocks.sandstone_stairs;
-                }
+        private static final String __OBFID = "CL_00000520";
 
-                if (p_151558_1_ == Blocks.stone_stairs)
-                {
-                    return Blocks.sandstone_stairs;
-                }
+        public Torch() {}
 
-                if (p_151558_1_ == Blocks.gravel)
+        public Torch(StructureVillagePieces.Start par1ComponentVillageStartPiece, int par2, Random par3Random, StructureBoundingBox par4StructureBoundingBox, int par5)
         {
-                    return Blocks.sandstone;
-                }
+            super(par1ComponentVillageStartPiece, par2);
+            this.coordBaseMode = par5;
+            this.boundingBox = par4StructureBoundingBox;
         }
 
-            return p_151558_1_;
+        public static StructureBoundingBox func_74904_a(StructureVillagePieces.Start par0ComponentVillageStartPiece, List par1List, Random par2Random, int par3, int par4, int par5, int par6)
+        {
+            StructureBoundingBox var7 = StructureBoundingBox.getComponentToAddBoundingBox(par3, par4, par5, 0, 0, 0, 3, 4, 2, par6);
+            return StructureComponent.findIntersecting(par1List, var7) != null ? null : var7;
         }
 
-        protected int func_151557_c(Block p_151557_1_, int p_151557_2_)
+        public boolean addComponentParts(World par1World, Random par2Random, StructureBoundingBox par3StructureBoundingBox)
         {
-            if (this.field_143014_b)
+            if (this.field_143015_k < 0)
             {
-                if (p_151557_1_ == Blocks.log || p_151557_1_ == Blocks.log2)
+                this.field_143015_k = this.getAverageGroundLevel(par1World, par3StructureBoundingBox);
+
+                if (this.field_143015_k < 0)
                 {
-                    return 0;
+                    return true;
                 }
 
-                if (p_151557_1_ == Blocks.cobblestone)
-                {
-                    return 0;
+                this.boundingBox.offset(0, this.field_143015_k - this.boundingBox.maxY + 4 - 1, 0);
             }
 
-                if (p_151557_1_ == Blocks.planks)
-                {
-                    return 2;
+            this.func_151549_a(par1World, par3StructureBoundingBox, 0, 0, 0, 2, 3, 1, Blocks.air, Blocks.air, false);
+            this.func_151550_a(par1World, Blocks.fence, 0, 1, 0, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.fence, 0, 1, 1, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.fence, 0, 1, 2, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.wool, 15, 1, 3, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.torch, 0, 0, 3, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.torch, 0, 1, 3, 1, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.torch, 0, 2, 3, 0, par3StructureBoundingBox);
+            this.func_151550_a(par1World, Blocks.torch, 0, 1, 3, -1, par3StructureBoundingBox);
+            return true;
         }
     }
 
-            return p_151557_2_;
-        }
+    public static class PieceWeight
+    {
+        public Class villagePieceClass;
+        public final int villagePieceWeight;
+        public int villagePiecesSpawned;
+        public int villagePiecesLimit;
+        private static final String __OBFID = "CL_00000521";
 
-        protected void func_151550_a(World p_151550_1_, Block p_151550_2_, int p_151550_3_, int p_151550_4_, int p_151550_5_, int p_151550_6_, StructureBoundingBox p_151550_7_)
+        public PieceWeight(Class par1Class, int par2, int par3)
         {
-            Block var8 = this.func_151558_b(p_151550_2_, p_151550_3_);
-            int var9 = this.func_151557_c(p_151550_2_, p_151550_3_);
-            super.func_151550_a(p_151550_1_, var8, var9, p_151550_4_, p_151550_5_, p_151550_6_, p_151550_7_);
+            this.villagePieceClass = par1Class;
+            this.villagePieceWeight = par2;
+            this.villagePiecesLimit = par3;
         }
 
-        protected void func_151549_a(World p_151549_1_, StructureBoundingBox p_151549_2_, int p_151549_3_, int p_151549_4_, int p_151549_5_, int p_151549_6_, int p_151549_7_, int p_151549_8_, Block p_151549_9_, Block p_151549_10_, boolean p_151549_11_)
+        public boolean canSpawnMoreVillagePiecesOfType(int par1)
         {
-            Block var12 = this.func_151558_b(p_151549_9_, 0);
-            int var13 = this.func_151557_c(p_151549_9_, 0);
-            Block var14 = this.func_151558_b(p_151549_10_, 0);
-            int var15 = this.func_151557_c(p_151549_10_, 0);
-            super.func_151556_a(p_151549_1_, p_151549_2_, p_151549_3_, p_151549_4_, p_151549_5_, p_151549_6_, p_151549_7_, p_151549_8_, var12, var13, var14, var15, p_151549_11_);
+            return this.villagePiecesLimit == 0 || this.villagePiecesSpawned < this.villagePiecesLimit;
         }
 
-        protected void func_151554_b(World p_151554_1_, Block p_151554_2_, int p_151554_3_, int p_151554_4_, int p_151554_5_, int p_151554_6_, StructureBoundingBox p_151554_7_)
+        public boolean canSpawnMoreVillagePieces()
         {
-            Block var8 = this.func_151558_b(p_151554_2_, p_151554_3_);
-            int var9 = this.func_151557_c(p_151554_2_, p_151554_3_);
-            super.func_151554_b(p_151554_1_, var8, var9, p_151554_4_, p_151554_5_, p_151554_6_, p_151554_7_);
+            return this.villagePiecesLimit == 0 || this.villagePiecesSpawned < this.villagePiecesLimit;
         }
     }
 }
diff --git a/net/minecraft/world/storage/MapData.java b/net/minecraft/world/storage/MapData.java
index 355a93e..4738ff2 100644
--- a/net/minecraft/world/storage/MapData.java
+++ b/net/minecraft/world/storage/MapData.java
@@ -289,6 +289,23 @@ public class MapData extends WorldSavedData
         return var2;
     }
 
+    public class MapCoord
+    {
+        public byte iconSize;
+        public byte centerX;
+        public byte centerZ;
+        public byte iconRotation;
+        private static final String __OBFID = "CL_00000579";
+
+        public MapCoord(byte par2, byte par3, byte par4, byte par5)
+        {
+            this.iconSize = par2;
+            this.centerX = par3;
+            this.centerZ = par4;
+            this.iconRotation = par5;
+        }
+    }
+
     public class MapInfo
     {
         public final EntityPlayer entityplayerObj;
@@ -395,21 +412,4 @@ public class MapData extends WorldSavedData
             }
         }
     }
-
-    public class MapCoord
-    {
-        public byte iconSize;
-        public byte centerX;
-        public byte centerZ;
-        public byte iconRotation;
-        private static final String __OBFID = "CL_00000579";
-
-        public MapCoord(byte par2, byte par3, byte par4, byte par5)
-        {
-            this.iconSize = par2;
-            this.centerX = par3;
-            this.centerZ = par4;
-            this.iconRotation = par5;
-        }
-    }
 }
-- 
2.0.0

